var PN=Object.defineProperty;var AN=(e,t,r)=>t in e?PN(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;var oe=(e,t,r)=>(AN(e,typeof t!="symbol"?t+"":t,r),r);(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))n(i);new MutationObserver(i=>{for(const o of i)if(o.type==="childList")for(const a of o.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&n(a)}).observe(document,{childList:!0,subtree:!0});function r(i){const o={};return i.integrity&&(o.integrity=i.integrity),i.referrerPolicy&&(o.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?o.credentials="include":i.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function n(i){if(i.ep)return;i.ep=!0;const o=r(i);fetch(i.href,o)}})();var dn=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Sr(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function ON(e){if(e.__esModule)return e;var t=e.default;if(typeof t=="function"){var r=function n(){return this instanceof n?Reflect.construct(t,arguments,this.constructor):t.apply(this,arguments)};r.prototype=t.prototype}else r={};return Object.defineProperty(r,"__esModule",{value:!0}),Object.keys(e).forEach(function(n){var i=Object.getOwnPropertyDescriptor(e,n);Object.defineProperty(r,n,i.get?i:{enumerable:!0,get:function(){return e[n]}})}),r}var gO={exports:{}},Dc={};/*
object-assign
(c) Sindre Sorhus
@license MIT
*/var tw=Object.getOwnPropertySymbols,IN=Object.prototype.hasOwnProperty,MN=Object.prototype.propertyIsEnumerable;function RN(e){if(e==null)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(e)}function kN(){try{if(!Object.assign)return!1;var e=new String("abc");if(e[5]="de",Object.getOwnPropertyNames(e)[0]==="5")return!1;for(var t={},r=0;r<10;r++)t["_"+String.fromCharCode(r)]=r;var n=Object.getOwnPropertyNames(t).map(function(o){return t[o]});if(n.join("")!=="0123456789")return!1;var i={};return"abcdefghijklmnopqrst".split("").forEach(function(o){i[o]=o}),Object.keys(Object.assign({},i)).join("")==="abcdefghijklmnopqrst"}catch{return!1}}var fx=kN()?Object.assign:function(e,t){for(var r,n=RN(e),i,o=1;o<arguments.length;o++){r=Object(arguments[o]);for(var a in r)IN.call(r,a)&&(n[a]=r[a]);if(tw){i=tw(r);for(var s=0;s<i.length;s++)MN.call(r,i[s])&&(n[i[s]]=r[i[s]])}}return n};const LN=Sr(fx);var yO={exports:{}},Ne={};/** @license React v17.0.2
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var hx=fx,ol=60103,_O=60106;Ne.Fragment=60107;Ne.StrictMode=60108;Ne.Profiler=60114;var xO=60109,bO=60110,SO=60112;Ne.Suspense=60113;var wO=60115,EO=60116;if(typeof Symbol=="function"&&Symbol.for){var Tn=Symbol.for;ol=Tn("react.element"),_O=Tn("react.portal"),Ne.Fragment=Tn("react.fragment"),Ne.StrictMode=Tn("react.strict_mode"),Ne.Profiler=Tn("react.profiler"),xO=Tn("react.provider"),bO=Tn("react.context"),SO=Tn("react.forward_ref"),Ne.Suspense=Tn("react.suspense"),wO=Tn("react.memo"),EO=Tn("react.lazy")}var rw=typeof Symbol=="function"&&Symbol.iterator;function FN(e){return e===null||typeof e!="object"?null:(e=rw&&e[rw]||e["@@iterator"],typeof e=="function"?e:null)}function Nc(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,r=1;r<arguments.length;r++)t+="&args[]="+encodeURIComponent(arguments[r]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var TO={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},CO={};function al(e,t,r){this.props=e,this.context=t,this.refs=CO,this.updater=r||TO}al.prototype.isReactComponent={};al.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error(Nc(85));this.updater.enqueueSetState(this,e,t,"setState")};al.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function PO(){}PO.prototype=al.prototype;function dx(e,t,r){this.props=e,this.context=t,this.refs=CO,this.updater=r||TO}var px=dx.prototype=new PO;px.constructor=dx;hx(px,al.prototype);px.isPureReactComponent=!0;var mx={current:null},AO=Object.prototype.hasOwnProperty,OO={key:!0,ref:!0,__self:!0,__source:!0};function IO(e,t,r){var n,i={},o=null,a=null;if(t!=null)for(n in t.ref!==void 0&&(a=t.ref),t.key!==void 0&&(o=""+t.key),t)AO.call(t,n)&&!OO.hasOwnProperty(n)&&(i[n]=t[n]);var s=arguments.length-2;if(s===1)i.children=r;else if(1<s){for(var l=Array(s),u=0;u<s;u++)l[u]=arguments[u+2];i.children=l}if(e&&e.defaultProps)for(n in s=e.defaultProps,s)i[n]===void 0&&(i[n]=s[n]);return{$$typeof:ol,type:e,key:o,ref:a,props:i,_owner:mx.current}}function DN(e,t){return{$$typeof:ol,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function vx(e){return typeof e=="object"&&e!==null&&e.$$typeof===ol}function NN(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(r){return t[r]})}var nw=/\/+/g;function Lm(e,t){return typeof e=="object"&&e!==null&&e.key!=null?NN(""+e.key):t.toString(36)}function oh(e,t,r,n,i){var o=typeof e;(o==="undefined"||o==="boolean")&&(e=null);var a=!1;if(e===null)a=!0;else switch(o){case"string":case"number":a=!0;break;case"object":switch(e.$$typeof){case ol:case _O:a=!0}}if(a)return a=e,i=i(a),e=n===""?"."+Lm(a,0):n,Array.isArray(i)?(r="",e!=null&&(r=e.replace(nw,"$&/")+"/"),oh(i,t,r,"",function(u){return u})):i!=null&&(vx(i)&&(i=DN(i,r+(!i.key||a&&a.key===i.key?"":(""+i.key).replace(nw,"$&/")+"/")+e)),t.push(i)),1;if(a=0,n=n===""?".":n+":",Array.isArray(e))for(var s=0;s<e.length;s++){o=e[s];var l=n+Lm(o,s);a+=oh(o,t,r,l,i)}else if(l=FN(e),typeof l=="function")for(e=l.call(e),s=0;!(o=e.next()).done;)o=o.value,l=n+Lm(o,s++),a+=oh(o,t,r,l,i);else if(o==="object")throw t=""+e,Error(Nc(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t));return a}function lf(e,t,r){if(e==null)return e;var n=[],i=0;return oh(e,n,"","",function(o){return t.call(r,o,i++)}),n}function BN(e){if(e._status===-1){var t=e._result;t=t(),e._status=0,e._result=t,t.then(function(r){e._status===0&&(r=r.default,e._status=1,e._result=r)},function(r){e._status===0&&(e._status=2,e._result=r)})}if(e._status===1)return e._result;throw e._result}var MO={current:null};function Gi(){var e=MO.current;if(e===null)throw Error(Nc(321));return e}var jN={ReactCurrentDispatcher:MO,ReactCurrentBatchConfig:{transition:0},ReactCurrentOwner:mx,IsSomeRendererActing:{current:!1},assign:hx};Ne.Children={map:lf,forEach:function(e,t,r){lf(e,function(){t.apply(this,arguments)},r)},count:function(e){var t=0;return lf(e,function(){t++}),t},toArray:function(e){return lf(e,function(t){return t})||[]},only:function(e){if(!vx(e))throw Error(Nc(143));return e}};Ne.Component=al;Ne.PureComponent=dx;Ne.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=jN;Ne.cloneElement=function(e,t,r){if(e==null)throw Error(Nc(267,e));var n=hx({},e.props),i=e.key,o=e.ref,a=e._owner;if(t!=null){if(t.ref!==void 0&&(o=t.ref,a=mx.current),t.key!==void 0&&(i=""+t.key),e.type&&e.type.defaultProps)var s=e.type.defaultProps;for(l in t)AO.call(t,l)&&!OO.hasOwnProperty(l)&&(n[l]=t[l]===void 0&&s!==void 0?s[l]:t[l])}var l=arguments.length-2;if(l===1)n.children=r;else if(1<l){s=Array(l);for(var u=0;u<l;u++)s[u]=arguments[u+2];n.children=s}return{$$typeof:ol,type:e.type,key:i,ref:o,props:n,_owner:a}};Ne.createContext=function(e,t){return t===void 0&&(t=null),e={$$typeof:bO,_calculateChangedBits:t,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null},e.Provider={$$typeof:xO,_context:e},e.Consumer=e};Ne.createElement=IO;Ne.createFactory=function(e){var t=IO.bind(null,e);return t.type=e,t};Ne.createRef=function(){return{current:null}};Ne.forwardRef=function(e){return{$$typeof:SO,render:e}};Ne.isValidElement=vx;Ne.lazy=function(e){return{$$typeof:EO,_payload:{_status:-1,_result:e},_init:BN}};Ne.memo=function(e,t){return{$$typeof:wO,type:e,compare:t===void 0?null:t}};Ne.useCallback=function(e,t){return Gi().useCallback(e,t)};Ne.useContext=function(e,t){return Gi().useContext(e,t)};Ne.useDebugValue=function(){};Ne.useEffect=function(e,t){return Gi().useEffect(e,t)};Ne.useImperativeHandle=function(e,t,r){return Gi().useImperativeHandle(e,t,r)};Ne.useLayoutEffect=function(e,t){return Gi().useLayoutEffect(e,t)};Ne.useMemo=function(e,t){return Gi().useMemo(e,t)};Ne.useReducer=function(e,t,r){return Gi().useReducer(e,t,r)};Ne.useRef=function(e){return Gi().useRef(e)};Ne.useState=function(e){return Gi().useState(e)};Ne.version="17.0.2";yO.exports=Ne;var G=yO.exports;const Z=Sr(G);/** @license React v17.0.2
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var UN=G,RO=60103;Dc.Fragment=60107;if(typeof Symbol=="function"&&Symbol.for){var iw=Symbol.for;RO=iw("react.element"),Dc.Fragment=iw("react.fragment")}var $N=UN.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,GN=Object.prototype.hasOwnProperty,zN={key:!0,ref:!0,__self:!0,__source:!0};function kO(e,t,r){var n,i={},o=null,a=null;r!==void 0&&(o=""+r),t.key!==void 0&&(o=""+t.key),t.ref!==void 0&&(a=t.ref);for(n in t)GN.call(t,n)&&!zN.hasOwnProperty(n)&&(i[n]=t[n]);if(e&&e.defaultProps)for(n in t=e.defaultProps,t)i[n]===void 0&&(i[n]=t[n]);return{$$typeof:RO,type:e,key:o,ref:a,props:i,_owner:$N.current}}Dc.jsx=kO;Dc.jsxs=kO;gO.exports=Dc;var w=gO.exports,LO={exports:{}},wn={},FO={exports:{}},DO={};/** @license React v0.20.2
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){var t,r,n,i;if(typeof performance=="object"&&typeof performance.now=="function"){var o=performance;e.unstable_now=function(){return o.now()}}else{var a=Date,s=a.now();e.unstable_now=function(){return a.now()-s}}if(typeof window>"u"||typeof MessageChannel!="function"){var l=null,u=null,c=function(){if(l!==null)try{var L=e.unstable_now();l(!0,L),l=null}catch(q){throw setTimeout(c,0),q}};t=function(L){l!==null?setTimeout(t,0,L):(l=L,setTimeout(c,0))},r=function(L,q){u=setTimeout(L,q)},n=function(){clearTimeout(u)},e.unstable_shouldYield=function(){return!1},i=e.unstable_forceFrameRate=function(){}}else{var f=window.setTimeout,h=window.clearTimeout;if(typeof console<"u"){var d=window.cancelAnimationFrame;typeof window.requestAnimationFrame!="function"&&console.error("This browser doesn't support requestAnimationFrame. Make sure that you load a polyfill in older browsers. https://reactjs.org/link/react-polyfills"),typeof d!="function"&&console.error("This browser doesn't support cancelAnimationFrame. Make sure that you load a polyfill in older browsers. https://reactjs.org/link/react-polyfills")}var m=!1,g=null,p=-1,v=5,y=0;e.unstable_shouldYield=function(){return e.unstable_now()>=y},i=function(){},e.unstable_forceFrameRate=function(L){0>L||125<L?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):v=0<L?Math.floor(1e3/L):5};var _=new MessageChannel,x=_.port2;_.port1.onmessage=function(){if(g!==null){var L=e.unstable_now();y=L+v;try{g(!0,L)?x.postMessage(null):(m=!1,g=null)}catch(q){throw x.postMessage(null),q}}else m=!1},t=function(L){g=L,m||(m=!0,x.postMessage(null))},r=function(L,q){p=f(function(){L(e.unstable_now())},q)},n=function(){h(p),p=-1}}function b(L,q){var re=L.length;L.push(q);e:for(;;){var le=re-1>>>1,ye=L[le];if(ye!==void 0&&0<I(ye,q))L[le]=q,L[re]=ye,re=le;else break e}}function S(L){return L=L[0],L===void 0?null:L}function E(L){var q=L[0];if(q!==void 0){var re=L.pop();if(re!==q){L[0]=re;e:for(var le=0,ye=L.length;le<ye;){var we=2*(le+1)-1,Ee=L[we],Ge=we+1,He=L[Ge];if(Ee!==void 0&&0>I(Ee,re))He!==void 0&&0>I(He,Ee)?(L[le]=He,L[Ge]=re,le=Ge):(L[le]=Ee,L[we]=re,le=we);else if(He!==void 0&&0>I(He,re))L[le]=He,L[Ge]=re,le=Ge;else break e}}return q}return null}function I(L,q){var re=L.sortIndex-q.sortIndex;return re!==0?re:L.id-q.id}var A=[],O=[],D=1,B=null,j=3,W=!1,$=!1,z=!1;function ie(L){for(var q=S(O);q!==null;){if(q.callback===null)E(O);else if(q.startTime<=L)E(O),q.sortIndex=q.expirationTime,b(A,q);else break;q=S(O)}}function Se(L){if(z=!1,ie(L),!$)if(S(A)!==null)$=!0,t(de);else{var q=S(O);q!==null&&r(Se,q.startTime-L)}}function de(L,q){$=!1,z&&(z=!1,n()),W=!0;var re=j;try{for(ie(q),B=S(A);B!==null&&(!(B.expirationTime>q)||L&&!e.unstable_shouldYield());){var le=B.callback;if(typeof le=="function"){B.callback=null,j=B.priorityLevel;var ye=le(B.expirationTime<=q);q=e.unstable_now(),typeof ye=="function"?B.callback=ye:B===S(A)&&E(A),ie(q)}else E(A);B=S(A)}if(B!==null)var we=!0;else{var Ee=S(O);Ee!==null&&r(Se,Ee.startTime-q),we=!1}return we}finally{B=null,j=re,W=!1}}var X=i;e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(L){L.callback=null},e.unstable_continueExecution=function(){$||W||($=!0,t(de))},e.unstable_getCurrentPriorityLevel=function(){return j},e.unstable_getFirstCallbackNode=function(){return S(A)},e.unstable_next=function(L){switch(j){case 1:case 2:case 3:var q=3;break;default:q=j}var re=j;j=q;try{return L()}finally{j=re}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=X,e.unstable_runWithPriority=function(L,q){switch(L){case 1:case 2:case 3:case 4:case 5:break;default:L=3}var re=j;j=L;try{return q()}finally{j=re}},e.unstable_scheduleCallback=function(L,q,re){var le=e.unstable_now();switch(typeof re=="object"&&re!==null?(re=re.delay,re=typeof re=="number"&&0<re?le+re:le):re=le,L){case 1:var ye=-1;break;case 2:ye=250;break;case 5:ye=1073741823;break;case 4:ye=1e4;break;default:ye=5e3}return ye=re+ye,L={id:D++,callback:q,priorityLevel:L,startTime:re,expirationTime:ye,sortIndex:-1},re>le?(L.sortIndex=re,b(O,L),S(A)===null&&L===S(O)&&(z?n():z=!0,r(Se,re-le))):(L.sortIndex=ye,b(A,L),$||W||($=!0,t(de))),L},e.unstable_wrapCallback=function(L){var q=j;return function(){var re=j;j=q;try{return L.apply(this,arguments)}finally{j=re}}}})(DO);FO.exports=DO;var VN=FO.exports;/** @license React v17.0.2
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Vd=G,vt=fx,Jt=VN;function J(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,r=1;r<arguments.length;r++)t+="&args[]="+encodeURIComponent(arguments[r]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}if(!Vd)throw Error(J(227));var NO=new Set,Xu={};function ka(e,t){$s(e,t),$s(e+"Capture",t)}function $s(e,t){for(Xu[e]=t,e=0;e<t.length;e++)NO.add(t[e])}var Ui=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),HN=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,ow=Object.prototype.hasOwnProperty,aw={},sw={};function WN(e){return ow.call(sw,e)?!0:ow.call(aw,e)?!1:HN.test(e)?sw[e]=!0:(aw[e]=!0,!1)}function XN(e,t,r,n){if(r!==null&&r.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return n?!1:r!==null?!r.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function qN(e,t,r,n){if(t===null||typeof t>"u"||XN(e,t,r,n))return!0;if(n)return!1;if(r!==null)switch(r.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function Mr(e,t,r,n,i,o,a){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=n,this.attributeNamespace=i,this.mustUseProperty=r,this.propertyName=e,this.type=t,this.sanitizeURL=o,this.removeEmptyString=a}var ur={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){ur[e]=new Mr(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];ur[t]=new Mr(t,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){ur[e]=new Mr(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){ur[e]=new Mr(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){ur[e]=new Mr(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){ur[e]=new Mr(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){ur[e]=new Mr(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){ur[e]=new Mr(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){ur[e]=new Mr(e,5,!1,e.toLowerCase(),null,!1,!1)});var gx=/[\-:]([a-z])/g;function yx(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(gx,yx);ur[t]=new Mr(t,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(gx,yx);ur[t]=new Mr(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(gx,yx);ur[t]=new Mr(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){ur[e]=new Mr(e,1,!1,e.toLowerCase(),null,!1,!1)});ur.xlinkHref=new Mr("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){ur[e]=new Mr(e,1,!1,e.toLowerCase(),null,!0,!0)});function _x(e,t,r,n){var i=ur.hasOwnProperty(t)?ur[t]:null,o=i!==null?i.type===0:n?!1:!(!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N");o||(qN(t,r,i,n)&&(r=null),n||i===null?WN(t)&&(r===null?e.removeAttribute(t):e.setAttribute(t,""+r)):i.mustUseProperty?e[i.propertyName]=r===null?i.type===3?!1:"":r:(t=i.attributeName,n=i.attributeNamespace,r===null?e.removeAttribute(t):(i=i.type,r=i===3||i===4&&r===!0?"":""+r,n?e.setAttributeNS(n,t,r):e.setAttribute(t,r))))}var La=Vd.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,hu=60103,ua=60106,to=60107,xx=60108,Tu=60114,bx=60109,Sx=60110,Hd=60112,Cu=60113,Nh=60120,Wd=60115,wx=60116,Ex=60121,Tx=60128,BO=60129,Cx=60130,oy=60131;if(typeof Symbol=="function"&&Symbol.for){var Ht=Symbol.for;hu=Ht("react.element"),ua=Ht("react.portal"),to=Ht("react.fragment"),xx=Ht("react.strict_mode"),Tu=Ht("react.profiler"),bx=Ht("react.provider"),Sx=Ht("react.context"),Hd=Ht("react.forward_ref"),Cu=Ht("react.suspense"),Nh=Ht("react.suspense_list"),Wd=Ht("react.memo"),wx=Ht("react.lazy"),Ex=Ht("react.block"),Ht("react.scope"),Tx=Ht("react.opaque.id"),BO=Ht("react.debug_trace_mode"),Cx=Ht("react.offscreen"),oy=Ht("react.legacy_hidden")}var lw=typeof Symbol=="function"&&Symbol.iterator;function Fl(e){return e===null||typeof e!="object"?null:(e=lw&&e[lw]||e["@@iterator"],typeof e=="function"?e:null)}var Fm;function du(e){if(Fm===void 0)try{throw Error()}catch(r){var t=r.stack.trim().match(/\n( *(at )?)/);Fm=t&&t[1]||""}return`
`+Fm+e}var Dm=!1;function uf(e,t){if(!e||Dm)return"";Dm=!0;var r=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(l){var n=l}Reflect.construct(e,[],t)}else{try{t.call()}catch(l){n=l}e.call(t.prototype)}else{try{throw Error()}catch(l){n=l}e()}}catch(l){if(l&&n&&typeof l.stack=="string"){for(var i=l.stack.split(`
`),o=n.stack.split(`
`),a=i.length-1,s=o.length-1;1<=a&&0<=s&&i[a]!==o[s];)s--;for(;1<=a&&0<=s;a--,s--)if(i[a]!==o[s]){if(a!==1||s!==1)do if(a--,s--,0>s||i[a]!==o[s])return`
`+i[a].replace(" at new "," at ");while(1<=a&&0<=s);break}}}finally{Dm=!1,Error.prepareStackTrace=r}return(e=e?e.displayName||e.name:"")?du(e):""}function YN(e){switch(e.tag){case 5:return du(e.type);case 16:return du("Lazy");case 13:return du("Suspense");case 19:return du("SuspenseList");case 0:case 2:case 15:return e=uf(e.type,!1),e;case 11:return e=uf(e.type.render,!1),e;case 22:return e=uf(e.type._render,!1),e;case 1:return e=uf(e.type,!0),e;default:return""}}function ws(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case to:return"Fragment";case ua:return"Portal";case Tu:return"Profiler";case xx:return"StrictMode";case Cu:return"Suspense";case Nh:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case Sx:return(e.displayName||"Context")+".Consumer";case bx:return(e._context.displayName||"Context")+".Provider";case Hd:var t=e.render;return t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case Wd:return ws(e.type);case Ex:return ws(e._render);case wx:t=e._payload,e=e._init;try{return ws(e(t))}catch{}}return null}function Co(e){switch(typeof e){case"boolean":case"number":case"object":case"string":case"undefined":return e;default:return""}}function jO(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function KN(e){var t=jO(e)?"checked":"value",r=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),n=""+e[t];if(!e.hasOwnProperty(t)&&typeof r<"u"&&typeof r.get=="function"&&typeof r.set=="function"){var i=r.get,o=r.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return i.call(this)},set:function(a){n=""+a,o.call(this,a)}}),Object.defineProperty(e,t,{enumerable:r.enumerable}),{getValue:function(){return n},setValue:function(a){n=""+a},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function cf(e){e._valueTracker||(e._valueTracker=KN(e))}function UO(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var r=t.getValue(),n="";return e&&(n=jO(e)?e.checked?"true":"false":e.value),e=n,e!==r?(t.setValue(e),!0):!1}function Bh(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function ay(e,t){var r=t.checked;return vt({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:r??e._wrapperState.initialChecked})}function uw(e,t){var r=t.defaultValue==null?"":t.defaultValue,n=t.checked!=null?t.checked:t.defaultChecked;r=Co(t.value!=null?t.value:r),e._wrapperState={initialChecked:n,initialValue:r,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function $O(e,t){t=t.checked,t!=null&&_x(e,"checked",t,!1)}function sy(e,t){$O(e,t);var r=Co(t.value),n=t.type;if(r!=null)n==="number"?(r===0&&e.value===""||e.value!=r)&&(e.value=""+r):e.value!==""+r&&(e.value=""+r);else if(n==="submit"||n==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?ly(e,t.type,r):t.hasOwnProperty("defaultValue")&&ly(e,t.type,Co(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function cw(e,t,r){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var n=t.type;if(!(n!=="submit"&&n!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,r||t===e.value||(e.value=t),e.defaultValue=t}r=e.name,r!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,r!==""&&(e.name=r)}function ly(e,t,r){(t!=="number"||Bh(e.ownerDocument)!==e)&&(r==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+r&&(e.defaultValue=""+r))}function ZN(e){var t="";return Vd.Children.forEach(e,function(r){r!=null&&(t+=r)}),t}function uy(e,t){return e=vt({children:void 0},t),(t=ZN(t.children))&&(e.children=t),e}function Es(e,t,r,n){if(e=e.options,t){t={};for(var i=0;i<r.length;i++)t["$"+r[i]]=!0;for(r=0;r<e.length;r++)i=t.hasOwnProperty("$"+e[r].value),e[r].selected!==i&&(e[r].selected=i),i&&n&&(e[r].defaultSelected=!0)}else{for(r=""+Co(r),t=null,i=0;i<e.length;i++){if(e[i].value===r){e[i].selected=!0,n&&(e[i].defaultSelected=!0);return}t!==null||e[i].disabled||(t=e[i])}t!==null&&(t.selected=!0)}}function cy(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(J(91));return vt({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function fw(e,t){var r=t.value;if(r==null){if(r=t.children,t=t.defaultValue,r!=null){if(t!=null)throw Error(J(92));if(Array.isArray(r)){if(!(1>=r.length))throw Error(J(93));r=r[0]}t=r}t==null&&(t=""),r=t}e._wrapperState={initialValue:Co(r)}}function GO(e,t){var r=Co(t.value),n=Co(t.defaultValue);r!=null&&(r=""+r,r!==e.value&&(e.value=r),t.defaultValue==null&&e.defaultValue!==r&&(e.defaultValue=r)),n!=null&&(e.defaultValue=""+n)}function hw(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}var fy={html:"http://www.w3.org/1999/xhtml",mathml:"http://www.w3.org/1998/Math/MathML",svg:"http://www.w3.org/2000/svg"};function zO(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function hy(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?zO(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var ff,VO=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,r,n,i){MSApp.execUnsafeLocalFunction(function(){return e(t,r,n,i)})}:e}(function(e,t){if(e.namespaceURI!==fy.svg||"innerHTML"in e)e.innerHTML=t;else{for(ff=ff||document.createElement("div"),ff.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=ff.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function qu(e,t){if(t){var r=e.firstChild;if(r&&r===e.lastChild&&r.nodeType===3){r.nodeValue=t;return}}e.textContent=t}var Pu={animationIterationCount:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},JN=["Webkit","ms","Moz","O"];Object.keys(Pu).forEach(function(e){JN.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),Pu[t]=Pu[e]})});function HO(e,t,r){return t==null||typeof t=="boolean"||t===""?"":r||typeof t!="number"||t===0||Pu.hasOwnProperty(e)&&Pu[e]?(""+t).trim():t+"px"}function WO(e,t){e=e.style;for(var r in t)if(t.hasOwnProperty(r)){var n=r.indexOf("--")===0,i=HO(r,t[r],n);r==="float"&&(r="cssFloat"),n?e.setProperty(r,i):e[r]=i}}var QN=vt({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function dy(e,t){if(t){if(QN[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(J(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(J(60));if(!(typeof t.dangerouslySetInnerHTML=="object"&&"__html"in t.dangerouslySetInnerHTML))throw Error(J(61))}if(t.style!=null&&typeof t.style!="object")throw Error(J(62))}}function py(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}function Px(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var my=null,Ts=null,Cs=null;function dw(e){if(e=jc(e)){if(typeof my!="function")throw Error(J(280));var t=e.stateNode;t&&(t=Jd(t),my(e.stateNode,e.type,t))}}function XO(e){Ts?Cs?Cs.push(e):Cs=[e]:Ts=e}function qO(){if(Ts){var e=Ts,t=Cs;if(Cs=Ts=null,dw(e),t)for(e=0;e<t.length;e++)dw(t[e])}}function Ax(e,t){return e(t)}function YO(e,t,r,n,i){return e(t,r,n,i)}function Ox(){}var KO=Ax,ca=!1,Nm=!1;function Ix(){(Ts!==null||Cs!==null)&&(Ox(),qO())}function e3(e,t,r){if(Nm)return e(t,r);Nm=!0;try{return KO(e,t,r)}finally{Nm=!1,Ix()}}function Yu(e,t){var r=e.stateNode;if(r===null)return null;var n=Jd(r);if(n===null)return null;r=n[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(n=!n.disabled)||(e=e.type,n=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!n;break e;default:e=!1}if(e)return null;if(r&&typeof r!="function")throw Error(J(231,t,typeof r));return r}var vy=!1;if(Ui)try{var Dl={};Object.defineProperty(Dl,"passive",{get:function(){vy=!0}}),window.addEventListener("test",Dl,Dl),window.removeEventListener("test",Dl,Dl)}catch{vy=!1}function t3(e,t,r,n,i,o,a,s,l){var u=Array.prototype.slice.call(arguments,3);try{t.apply(r,u)}catch(c){this.onError(c)}}var Au=!1,jh=null,Uh=!1,gy=null,r3={onError:function(e){Au=!0,jh=e}};function n3(e,t,r,n,i,o,a,s,l){Au=!1,jh=null,t3.apply(r3,arguments)}function i3(e,t,r,n,i,o,a,s,l){if(n3.apply(this,arguments),Au){if(Au){var u=jh;Au=!1,jh=null}else throw Error(J(198));Uh||(Uh=!0,gy=u)}}function Fa(e){var t=e,r=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&1026&&(r=t.return),e=t.return;while(e)}return t.tag===3?r:null}function ZO(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function pw(e){if(Fa(e)!==e)throw Error(J(188))}function o3(e){var t=e.alternate;if(!t){if(t=Fa(e),t===null)throw Error(J(188));return t!==e?null:e}for(var r=e,n=t;;){var i=r.return;if(i===null)break;var o=i.alternate;if(o===null){if(n=i.return,n!==null){r=n;continue}break}if(i.child===o.child){for(o=i.child;o;){if(o===r)return pw(i),e;if(o===n)return pw(i),t;o=o.sibling}throw Error(J(188))}if(r.return!==n.return)r=i,n=o;else{for(var a=!1,s=i.child;s;){if(s===r){a=!0,r=i,n=o;break}if(s===n){a=!0,n=i,r=o;break}s=s.sibling}if(!a){for(s=o.child;s;){if(s===r){a=!0,r=o,n=i;break}if(s===n){a=!0,n=o,r=i;break}s=s.sibling}if(!a)throw Error(J(189))}}if(r.alternate!==n)throw Error(J(190))}if(r.tag!==3)throw Error(J(188));return r.stateNode.current===r?e:t}function JO(e){if(e=o3(e),!e)return null;for(var t=e;;){if(t.tag===5||t.tag===6)return t;if(t.child)t.child.return=t,t=t.child;else{if(t===e)break;for(;!t.sibling;){if(!t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}}return null}function mw(e,t){for(var r=e.alternate;t!==null;){if(t===e||t===r)return!0;t=t.return}return!1}var QO,Mx,e2,t2,yy=!1,ti=[],fo=null,ho=null,po=null,Ku=new Map,Zu=new Map,Nl=[],vw="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function _y(e,t,r,n,i){return{blockedOn:e,domEventName:t,eventSystemFlags:r|16,nativeEvent:i,targetContainers:[n]}}function gw(e,t){switch(e){case"focusin":case"focusout":fo=null;break;case"dragenter":case"dragleave":ho=null;break;case"mouseover":case"mouseout":po=null;break;case"pointerover":case"pointerout":Ku.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Zu.delete(t.pointerId)}}function Bl(e,t,r,n,i,o){return e===null||e.nativeEvent!==o?(e=_y(t,r,n,i,o),t!==null&&(t=jc(t),t!==null&&Mx(t)),e):(e.eventSystemFlags|=n,t=e.targetContainers,i!==null&&t.indexOf(i)===-1&&t.push(i),e)}function a3(e,t,r,n,i){switch(t){case"focusin":return fo=Bl(fo,e,t,r,n,i),!0;case"dragenter":return ho=Bl(ho,e,t,r,n,i),!0;case"mouseover":return po=Bl(po,e,t,r,n,i),!0;case"pointerover":var o=i.pointerId;return Ku.set(o,Bl(Ku.get(o)||null,e,t,r,n,i)),!0;case"gotpointercapture":return o=i.pointerId,Zu.set(o,Bl(Zu.get(o)||null,e,t,r,n,i)),!0}return!1}function s3(e){var t=fa(e.target);if(t!==null){var r=Fa(t);if(r!==null){if(t=r.tag,t===13){if(t=ZO(r),t!==null){e.blockedOn=t,t2(e.lanePriority,function(){Jt.unstable_runWithPriority(e.priority,function(){e2(r)})});return}}else if(t===3&&r.stateNode.hydrate){e.blockedOn=r.tag===3?r.stateNode.containerInfo:null;return}}}e.blockedOn=null}function ah(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var r=Fx(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(r!==null)return t=jc(r),t!==null&&Mx(t),e.blockedOn=r,!1;t.shift()}return!0}function yw(e,t,r){ah(e)&&r.delete(t)}function l3(){for(yy=!1;0<ti.length;){var e=ti[0];if(e.blockedOn!==null){e=jc(e.blockedOn),e!==null&&QO(e);break}for(var t=e.targetContainers;0<t.length;){var r=Fx(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(r!==null){e.blockedOn=r;break}t.shift()}e.blockedOn===null&&ti.shift()}fo!==null&&ah(fo)&&(fo=null),ho!==null&&ah(ho)&&(ho=null),po!==null&&ah(po)&&(po=null),Ku.forEach(yw),Zu.forEach(yw)}function jl(e,t){e.blockedOn===t&&(e.blockedOn=null,yy||(yy=!0,Jt.unstable_scheduleCallback(Jt.unstable_NormalPriority,l3)))}function r2(e){function t(i){return jl(i,e)}if(0<ti.length){jl(ti[0],e);for(var r=1;r<ti.length;r++){var n=ti[r];n.blockedOn===e&&(n.blockedOn=null)}}for(fo!==null&&jl(fo,e),ho!==null&&jl(ho,e),po!==null&&jl(po,e),Ku.forEach(t),Zu.forEach(t),r=0;r<Nl.length;r++)n=Nl[r],n.blockedOn===e&&(n.blockedOn=null);for(;0<Nl.length&&(r=Nl[0],r.blockedOn===null);)s3(r),r.blockedOn===null&&Nl.shift()}function hf(e,t){var r={};return r[e.toLowerCase()]=t.toLowerCase(),r["Webkit"+e]="webkit"+t,r["Moz"+e]="moz"+t,r}var fs={animationend:hf("Animation","AnimationEnd"),animationiteration:hf("Animation","AnimationIteration"),animationstart:hf("Animation","AnimationStart"),transitionend:hf("Transition","TransitionEnd")},Bm={},n2={};Ui&&(n2=document.createElement("div").style,"AnimationEvent"in window||(delete fs.animationend.animation,delete fs.animationiteration.animation,delete fs.animationstart.animation),"TransitionEvent"in window||delete fs.transitionend.transition);function Xd(e){if(Bm[e])return Bm[e];if(!fs[e])return e;var t=fs[e],r;for(r in t)if(t.hasOwnProperty(r)&&r in n2)return Bm[e]=t[r];return e}var i2=Xd("animationend"),o2=Xd("animationiteration"),a2=Xd("animationstart"),s2=Xd("transitionend"),l2=new Map,Rx=new Map,u3=["abort","abort",i2,"animationEnd",o2,"animationIteration",a2,"animationStart","canplay","canPlay","canplaythrough","canPlayThrough","durationchange","durationChange","emptied","emptied","encrypted","encrypted","ended","ended","error","error","gotpointercapture","gotPointerCapture","load","load","loadeddata","loadedData","loadedmetadata","loadedMetadata","loadstart","loadStart","lostpointercapture","lostPointerCapture","playing","playing","progress","progress","seeking","seeking","stalled","stalled","suspend","suspend","timeupdate","timeUpdate",s2,"transitionEnd","waiting","waiting"];function kx(e,t){for(var r=0;r<e.length;r+=2){var n=e[r],i=e[r+1];i="on"+(i[0].toUpperCase()+i.slice(1)),Rx.set(n,t),l2.set(n,i),ka(i,[n])}}var c3=Jt.unstable_now;c3();var ot=8;function ss(e){if(1&e)return ot=15,1;if(2&e)return ot=14,2;if(4&e)return ot=13,4;var t=24&e;return t!==0?(ot=12,t):e&32?(ot=11,32):(t=192&e,t!==0?(ot=10,t):e&256?(ot=9,256):(t=3584&e,t!==0?(ot=8,t):e&4096?(ot=7,4096):(t=4186112&e,t!==0?(ot=6,t):(t=62914560&e,t!==0?(ot=5,t):e&67108864?(ot=4,67108864):e&134217728?(ot=3,134217728):(t=805306368&e,t!==0?(ot=2,t):1073741824&e?(ot=1,1073741824):(ot=8,e))))))}function f3(e){switch(e){case 99:return 15;case 98:return 10;case 97:case 96:return 8;case 95:return 2;default:return 0}}function h3(e){switch(e){case 15:case 14:return 99;case 13:case 12:case 11:case 10:return 98;case 9:case 8:case 7:case 6:case 4:case 5:return 97;case 3:case 2:case 1:return 95;case 0:return 90;default:throw Error(J(358,e))}}function Ju(e,t){var r=e.pendingLanes;if(r===0)return ot=0;var n=0,i=0,o=e.expiredLanes,a=e.suspendedLanes,s=e.pingedLanes;if(o!==0)n=o,i=ot=15;else if(o=r&134217727,o!==0){var l=o&~a;l!==0?(n=ss(l),i=ot):(s&=o,s!==0&&(n=ss(s),i=ot))}else o=r&~a,o!==0?(n=ss(o),i=ot):s!==0&&(n=ss(s),i=ot);if(n===0)return 0;if(n=31-Po(n),n=r&((0>n?0:1<<n)<<1)-1,t!==0&&t!==n&&!(t&a)){if(ss(t),i<=ot)return t;ot=i}if(t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=n;0<t;)r=31-Po(t),i=1<<r,n|=e[r],t&=~i;return n}function u2(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function $h(e,t){switch(e){case 15:return 1;case 14:return 2;case 12:return e=ls(24&~t),e===0?$h(10,t):e;case 10:return e=ls(192&~t),e===0?$h(8,t):e;case 8:return e=ls(3584&~t),e===0&&(e=ls(4186112&~t),e===0&&(e=512)),e;case 2:return t=ls(805306368&~t),t===0&&(t=268435456),t}throw Error(J(358,e))}function ls(e){return e&-e}function jm(e){for(var t=[],r=0;31>r;r++)t.push(e);return t}function qd(e,t,r){e.pendingLanes|=t;var n=t-1;e.suspendedLanes&=n,e.pingedLanes&=n,e=e.eventTimes,t=31-Po(t),e[t]=r}var Po=Math.clz32?Math.clz32:m3,d3=Math.log,p3=Math.LN2;function m3(e){return e===0?32:31-(d3(e)/p3|0)|0}var v3=Jt.unstable_UserBlockingPriority,g3=Jt.unstable_runWithPriority,sh=!0;function y3(e,t,r,n){ca||Ox();var i=Lx,o=ca;ca=!0;try{YO(i,e,t,r,n)}finally{(ca=o)||Ix()}}function _3(e,t,r,n){g3(v3,Lx.bind(null,e,t,r,n))}function Lx(e,t,r,n){if(sh){var i;if((i=(t&4)===0)&&0<ti.length&&-1<vw.indexOf(e))e=_y(null,e,t,r,n),ti.push(e);else{var o=Fx(e,t,r,n);if(o===null)i&&gw(e,n);else{if(i){if(-1<vw.indexOf(e)){e=_y(o,e,t,r,n),ti.push(e);return}if(a3(o,e,t,r,n))return;gw(e,n)}S2(e,t,n,null,r)}}}}function Fx(e,t,r,n){var i=Px(n);if(i=fa(i),i!==null){var o=Fa(i);if(o===null)i=null;else{var a=o.tag;if(a===13){if(i=ZO(o),i!==null)return i;i=null}else if(a===3){if(o.stateNode.hydrate)return o.tag===3?o.stateNode.containerInfo:null;i=null}else o!==i&&(i=null)}}return S2(e,t,n,i,r),null}var ao=null,Dx=null,lh=null;function c2(){if(lh)return lh;var e,t=Dx,r=t.length,n,i="value"in ao?ao.value:ao.textContent,o=i.length;for(e=0;e<r&&t[e]===i[e];e++);var a=r-e;for(n=1;n<=a&&t[r-n]===i[o-n];n++);return lh=i.slice(e,1<n?1-n:void 0)}function uh(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function df(){return!0}function _w(){return!1}function Qr(e){function t(r,n,i,o,a){this._reactName=r,this._targetInst=i,this.type=n,this.nativeEvent=o,this.target=a,this.currentTarget=null;for(var s in e)e.hasOwnProperty(s)&&(r=e[s],this[s]=r?r(o):o[s]);return this.isDefaultPrevented=(o.defaultPrevented!=null?o.defaultPrevented:o.returnValue===!1)?df:_w,this.isPropagationStopped=_w,this}return vt(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var r=this.nativeEvent;r&&(r.preventDefault?r.preventDefault():typeof r.returnValue!="unknown"&&(r.returnValue=!1),this.isDefaultPrevented=df)},stopPropagation:function(){var r=this.nativeEvent;r&&(r.stopPropagation?r.stopPropagation():typeof r.cancelBubble!="unknown"&&(r.cancelBubble=!0),this.isPropagationStopped=df)},persist:function(){},isPersistent:df}),t}var sl={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Nx=Qr(sl),Bc=vt({},sl,{view:0,detail:0}),x3=Qr(Bc),Um,$m,Ul,Yd=vt({},Bc,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Bx,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==Ul&&(Ul&&e.type==="mousemove"?(Um=e.screenX-Ul.screenX,$m=e.screenY-Ul.screenY):$m=Um=0,Ul=e),Um)},movementY:function(e){return"movementY"in e?e.movementY:$m}}),xw=Qr(Yd),b3=vt({},Yd,{dataTransfer:0}),S3=Qr(b3),w3=vt({},Bc,{relatedTarget:0}),Gm=Qr(w3),E3=vt({},sl,{animationName:0,elapsedTime:0,pseudoElement:0}),T3=Qr(E3),C3=vt({},sl,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),P3=Qr(C3),A3=vt({},sl,{data:0}),bw=Qr(A3),O3={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},I3={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},M3={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function R3(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=M3[e])?!!t[e]:!1}function Bx(){return R3}var k3=vt({},Bc,{key:function(e){if(e.key){var t=O3[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=uh(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?I3[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Bx,charCode:function(e){return e.type==="keypress"?uh(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?uh(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),L3=Qr(k3),F3=vt({},Yd,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Sw=Qr(F3),D3=vt({},Bc,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Bx}),N3=Qr(D3),B3=vt({},sl,{propertyName:0,elapsedTime:0,pseudoElement:0}),j3=Qr(B3),U3=vt({},Yd,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),$3=Qr(U3),G3=[9,13,27,32],jx=Ui&&"CompositionEvent"in window,Ou=null;Ui&&"documentMode"in document&&(Ou=document.documentMode);var z3=Ui&&"TextEvent"in window&&!Ou,f2=Ui&&(!jx||Ou&&8<Ou&&11>=Ou),ww=String.fromCharCode(32),Ew=!1;function h2(e,t){switch(e){case"keyup":return G3.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function d2(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var hs=!1;function V3(e,t){switch(e){case"compositionend":return d2(t);case"keypress":return t.which!==32?null:(Ew=!0,ww);case"textInput":return e=t.data,e===ww&&Ew?null:e;default:return null}}function H3(e,t){if(hs)return e==="compositionend"||!jx&&h2(e,t)?(e=c2(),lh=Dx=ao=null,hs=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return f2&&t.locale!=="ko"?null:t.data;default:return null}}var W3={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Tw(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!W3[e.type]:t==="textarea"}function p2(e,t,r,n){XO(n),t=Gh(t,"onChange"),0<t.length&&(r=new Nx("onChange","change",null,r,n),e.push({event:r,listeners:t}))}var Iu=null,Qu=null;function X3(e){_2(e,0)}function Kd(e){var t=ps(e);if(UO(t))return e}function q3(e,t){if(e==="change")return t}var m2=!1;if(Ui){var zm;if(Ui){var Vm="oninput"in document;if(!Vm){var Cw=document.createElement("div");Cw.setAttribute("oninput","return;"),Vm=typeof Cw.oninput=="function"}zm=Vm}else zm=!1;m2=zm&&(!document.documentMode||9<document.documentMode)}function Pw(){Iu&&(Iu.detachEvent("onpropertychange",v2),Qu=Iu=null)}function v2(e){if(e.propertyName==="value"&&Kd(Qu)){var t=[];if(p2(t,Qu,e,Px(e)),e=X3,ca)e(t);else{ca=!0;try{Ax(e,t)}finally{ca=!1,Ix()}}}}function Y3(e,t,r){e==="focusin"?(Pw(),Iu=t,Qu=r,Iu.attachEvent("onpropertychange",v2)):e==="focusout"&&Pw()}function K3(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return Kd(Qu)}function Z3(e,t){if(e==="click")return Kd(t)}function J3(e,t){if(e==="input"||e==="change")return Kd(t)}function Q3(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var fn=typeof Object.is=="function"?Object.is:Q3,eB=Object.prototype.hasOwnProperty;function ec(e,t){if(fn(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var r=Object.keys(e),n=Object.keys(t);if(r.length!==n.length)return!1;for(n=0;n<r.length;n++)if(!eB.call(t,r[n])||!fn(e[r[n]],t[r[n]]))return!1;return!0}function Aw(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function Ow(e,t){var r=Aw(e);e=0;for(var n;r;){if(r.nodeType===3){if(n=e+r.textContent.length,e<=t&&n>=t)return{node:r,offset:t-e};e=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=Aw(r)}}function g2(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?g2(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function Iw(){for(var e=window,t=Bh();t instanceof e.HTMLIFrameElement;){try{var r=typeof t.contentWindow.location.href=="string"}catch{r=!1}if(r)e=t.contentWindow;else break;t=Bh(e.document)}return t}function xy(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}var tB=Ui&&"documentMode"in document&&11>=document.documentMode,ds=null,by=null,Mu=null,Sy=!1;function Mw(e,t,r){var n=r.window===r?r.document:r.nodeType===9?r:r.ownerDocument;Sy||ds==null||ds!==Bh(n)||(n=ds,"selectionStart"in n&&xy(n)?n={start:n.selectionStart,end:n.selectionEnd}:(n=(n.ownerDocument&&n.ownerDocument.defaultView||window).getSelection(),n={anchorNode:n.anchorNode,anchorOffset:n.anchorOffset,focusNode:n.focusNode,focusOffset:n.focusOffset}),Mu&&ec(Mu,n)||(Mu=n,n=Gh(by,"onSelect"),0<n.length&&(t=new Nx("onSelect","select",null,t,r),e.push({event:t,listeners:n}),t.target=ds)))}kx("cancel cancel click click close close contextmenu contextMenu copy copy cut cut auxclick auxClick dblclick doubleClick dragend dragEnd dragstart dragStart drop drop focusin focus focusout blur input input invalid invalid keydown keyDown keypress keyPress keyup keyUp mousedown mouseDown mouseup mouseUp paste paste pause pause play play pointercancel pointerCancel pointerdown pointerDown pointerup pointerUp ratechange rateChange reset reset seeked seeked submit submit touchcancel touchCancel touchend touchEnd touchstart touchStart volumechange volumeChange".split(" "),0);kx("drag drag dragenter dragEnter dragexit dragExit dragleave dragLeave dragover dragOver mousemove mouseMove mouseout mouseOut mouseover mouseOver pointermove pointerMove pointerout pointerOut pointerover pointerOver scroll scroll toggle toggle touchmove touchMove wheel wheel".split(" "),1);kx(u3,2);for(var Rw="change selectionchange textInput compositionstart compositionend compositionupdate".split(" "),Hm=0;Hm<Rw.length;Hm++)Rx.set(Rw[Hm],0);$s("onMouseEnter",["mouseout","mouseover"]);$s("onMouseLeave",["mouseout","mouseover"]);$s("onPointerEnter",["pointerout","pointerover"]);$s("onPointerLeave",["pointerout","pointerover"]);ka("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));ka("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));ka("onBeforeInput",["compositionend","keypress","textInput","paste"]);ka("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));ka("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));ka("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var pu="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),y2=new Set("cancel close invalid load scroll toggle".split(" ").concat(pu));function kw(e,t,r){var n=e.type||"unknown-event";e.currentTarget=r,i3(n,t,void 0,e),e.currentTarget=null}function _2(e,t){t=(t&4)!==0;for(var r=0;r<e.length;r++){var n=e[r],i=n.event;n=n.listeners;e:{var o=void 0;if(t)for(var a=n.length-1;0<=a;a--){var s=n[a],l=s.instance,u=s.currentTarget;if(s=s.listener,l!==o&&i.isPropagationStopped())break e;kw(i,s,u),o=l}else for(a=0;a<n.length;a++){if(s=n[a],l=s.instance,u=s.currentTarget,s=s.listener,l!==o&&i.isPropagationStopped())break e;kw(i,s,u),o=l}}}if(Uh)throw e=gy,Uh=!1,gy=null,e}function lt(e,t){var r=E2(t),n=e+"__bubble";r.has(n)||(b2(t,e,2,!1),r.add(n))}var Lw="_reactListening"+Math.random().toString(36).slice(2);function x2(e){e[Lw]||(e[Lw]=!0,NO.forEach(function(t){y2.has(t)||Fw(t,!1,e,null),Fw(t,!0,e,null)}))}function Fw(e,t,r,n){var i=4<arguments.length&&arguments[4]!==void 0?arguments[4]:0,o=r;if(e==="selectionchange"&&r.nodeType!==9&&(o=r.ownerDocument),n!==null&&!t&&y2.has(e)){if(e!=="scroll")return;i|=2,o=n}var a=E2(o),s=e+"__"+(t?"capture":"bubble");a.has(s)||(t&&(i|=4),b2(o,e,i,t),a.add(s))}function b2(e,t,r,n){var i=Rx.get(t);switch(i===void 0?2:i){case 0:i=y3;break;case 1:i=_3;break;default:i=Lx}r=i.bind(null,t,r,e),i=void 0,!vy||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(i=!0),n?i!==void 0?e.addEventListener(t,r,{capture:!0,passive:i}):e.addEventListener(t,r,!0):i!==void 0?e.addEventListener(t,r,{passive:i}):e.addEventListener(t,r,!1)}function S2(e,t,r,n,i){var o=n;if(!(t&1)&&!(t&2)&&n!==null)e:for(;;){if(n===null)return;var a=n.tag;if(a===3||a===4){var s=n.stateNode.containerInfo;if(s===i||s.nodeType===8&&s.parentNode===i)break;if(a===4)for(a=n.return;a!==null;){var l=a.tag;if((l===3||l===4)&&(l=a.stateNode.containerInfo,l===i||l.nodeType===8&&l.parentNode===i))return;a=a.return}for(;s!==null;){if(a=fa(s),a===null)return;if(l=a.tag,l===5||l===6){n=o=a;continue e}s=s.parentNode}}n=n.return}e3(function(){var u=o,c=Px(r),f=[];e:{var h=l2.get(e);if(h!==void 0){var d=Nx,m=e;switch(e){case"keypress":if(uh(r)===0)break e;case"keydown":case"keyup":d=L3;break;case"focusin":m="focus",d=Gm;break;case"focusout":m="blur",d=Gm;break;case"beforeblur":case"afterblur":d=Gm;break;case"click":if(r.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":d=xw;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":d=S3;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":d=N3;break;case i2:case o2:case a2:d=T3;break;case s2:d=j3;break;case"scroll":d=x3;break;case"wheel":d=$3;break;case"copy":case"cut":case"paste":d=P3;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":d=Sw}var g=(t&4)!==0,p=!g&&e==="scroll",v=g?h!==null?h+"Capture":null:h;g=[];for(var y=u,_;y!==null;){_=y;var x=_.stateNode;if(_.tag===5&&x!==null&&(_=x,v!==null&&(x=Yu(y,v),x!=null&&g.push(tc(y,x,_)))),p)break;y=y.return}0<g.length&&(h=new d(h,m,null,r,c),f.push({event:h,listeners:g}))}}if(!(t&7)){e:{if(h=e==="mouseover"||e==="pointerover",d=e==="mouseout"||e==="pointerout",h&&!(t&16)&&(m=r.relatedTarget||r.fromElement)&&(fa(m)||m[ll]))break e;if((d||h)&&(h=c.window===c?c:(h=c.ownerDocument)?h.defaultView||h.parentWindow:window,d?(m=r.relatedTarget||r.toElement,d=u,m=m?fa(m):null,m!==null&&(p=Fa(m),m!==p||m.tag!==5&&m.tag!==6)&&(m=null)):(d=null,m=u),d!==m)){if(g=xw,x="onMouseLeave",v="onMouseEnter",y="mouse",(e==="pointerout"||e==="pointerover")&&(g=Sw,x="onPointerLeave",v="onPointerEnter",y="pointer"),p=d==null?h:ps(d),_=m==null?h:ps(m),h=new g(x,y+"leave",d,r,c),h.target=p,h.relatedTarget=_,x=null,fa(c)===u&&(g=new g(v,y+"enter",m,r,c),g.target=_,g.relatedTarget=p,x=g),p=x,d&&m)t:{for(g=d,v=m,y=0,_=g;_;_=Xa(_))y++;for(_=0,x=v;x;x=Xa(x))_++;for(;0<y-_;)g=Xa(g),y--;for(;0<_-y;)v=Xa(v),_--;for(;y--;){if(g===v||v!==null&&g===v.alternate)break t;g=Xa(g),v=Xa(v)}g=null}else g=null;d!==null&&Dw(f,h,d,g,!1),m!==null&&p!==null&&Dw(f,p,m,g,!0)}}e:{if(h=u?ps(u):window,d=h.nodeName&&h.nodeName.toLowerCase(),d==="select"||d==="input"&&h.type==="file")var b=q3;else if(Tw(h))if(m2)b=J3;else{b=K3;var S=Y3}else(d=h.nodeName)&&d.toLowerCase()==="input"&&(h.type==="checkbox"||h.type==="radio")&&(b=Z3);if(b&&(b=b(e,u))){p2(f,b,r,c);break e}S&&S(e,h,u),e==="focusout"&&(S=h._wrapperState)&&S.controlled&&h.type==="number"&&ly(h,"number",h.value)}switch(S=u?ps(u):window,e){case"focusin":(Tw(S)||S.contentEditable==="true")&&(ds=S,by=u,Mu=null);break;case"focusout":Mu=by=ds=null;break;case"mousedown":Sy=!0;break;case"contextmenu":case"mouseup":case"dragend":Sy=!1,Mw(f,r,c);break;case"selectionchange":if(tB)break;case"keydown":case"keyup":Mw(f,r,c)}var E;if(jx)e:{switch(e){case"compositionstart":var I="onCompositionStart";break e;case"compositionend":I="onCompositionEnd";break e;case"compositionupdate":I="onCompositionUpdate";break e}I=void 0}else hs?h2(e,r)&&(I="onCompositionEnd"):e==="keydown"&&r.keyCode===229&&(I="onCompositionStart");I&&(f2&&r.locale!=="ko"&&(hs||I!=="onCompositionStart"?I==="onCompositionEnd"&&hs&&(E=c2()):(ao=c,Dx="value"in ao?ao.value:ao.textContent,hs=!0)),S=Gh(u,I),0<S.length&&(I=new bw(I,e,null,r,c),f.push({event:I,listeners:S}),E?I.data=E:(E=d2(r),E!==null&&(I.data=E)))),(E=z3?V3(e,r):H3(e,r))&&(u=Gh(u,"onBeforeInput"),0<u.length&&(c=new bw("onBeforeInput","beforeinput",null,r,c),f.push({event:c,listeners:u}),c.data=E))}_2(f,t)})}function tc(e,t,r){return{instance:e,listener:t,currentTarget:r}}function Gh(e,t){for(var r=t+"Capture",n=[];e!==null;){var i=e,o=i.stateNode;i.tag===5&&o!==null&&(i=o,o=Yu(e,r),o!=null&&n.unshift(tc(e,o,i)),o=Yu(e,t),o!=null&&n.push(tc(e,o,i))),e=e.return}return n}function Xa(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function Dw(e,t,r,n,i){for(var o=t._reactName,a=[];r!==null&&r!==n;){var s=r,l=s.alternate,u=s.stateNode;if(l!==null&&l===n)break;s.tag===5&&u!==null&&(s=u,i?(l=Yu(r,o),l!=null&&a.unshift(tc(r,l,s))):i||(l=Yu(r,o),l!=null&&a.push(tc(r,l,s)))),r=r.return}a.length!==0&&e.push({event:t,listeners:a})}function zh(){}var Wm=null,Xm=null;function w2(e,t){switch(e){case"button":case"input":case"select":case"textarea":return!!t.autoFocus}return!1}function wy(e,t){return e==="textarea"||e==="option"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var Nw=typeof setTimeout=="function"?setTimeout:void 0,rB=typeof clearTimeout=="function"?clearTimeout:void 0;function Ux(e){e.nodeType===1?e.textContent="":e.nodeType===9&&(e=e.body,e!=null&&(e.textContent=""))}function Ps(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break}return e}function Bw(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var r=e.data;if(r==="$"||r==="$!"||r==="$?"){if(t===0)return e;t--}else r==="/$"&&t++}e=e.previousSibling}return null}var qm=0;function nB(e){return{$$typeof:Tx,toString:e,valueOf:e}}var Zd=Math.random().toString(36).slice(2),so="__reactFiber$"+Zd,Vh="__reactProps$"+Zd,ll="__reactContainer$"+Zd,jw="__reactEvents$"+Zd;function fa(e){var t=e[so];if(t)return t;for(var r=e.parentNode;r;){if(t=r[ll]||r[so]){if(r=t.alternate,t.child!==null||r!==null&&r.child!==null)for(e=Bw(e);e!==null;){if(r=e[so])return r;e=Bw(e)}return t}e=r,r=e.parentNode}return null}function jc(e){return e=e[so]||e[ll],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function ps(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(J(33))}function Jd(e){return e[Vh]||null}function E2(e){var t=e[jw];return t===void 0&&(t=e[jw]=new Set),t}var Ey=[],ms=-1;function Bo(e){return{current:e}}function ht(e){0>ms||(e.current=Ey[ms],Ey[ms]=null,ms--)}function Ct(e,t){ms++,Ey[ms]=e.current,e.current=t}var Ao={},xr=Bo(Ao),$r=Bo(!1),Ea=Ao;function Gs(e,t){var r=e.type.contextTypes;if(!r)return Ao;var n=e.stateNode;if(n&&n.__reactInternalMemoizedUnmaskedChildContext===t)return n.__reactInternalMemoizedMaskedChildContext;var i={},o;for(o in r)i[o]=t[o];return n&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=i),i}function Gr(e){return e=e.childContextTypes,e!=null}function Hh(){ht($r),ht(xr)}function Uw(e,t,r){if(xr.current!==Ao)throw Error(J(168));Ct(xr,t),Ct($r,r)}function T2(e,t,r){var n=e.stateNode;if(e=t.childContextTypes,typeof n.getChildContext!="function")return r;n=n.getChildContext();for(var i in n)if(!(i in e))throw Error(J(108,ws(t)||"Unknown",i));return vt({},r,n)}function ch(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Ao,Ea=xr.current,Ct(xr,e),Ct($r,$r.current),!0}function $w(e,t,r){var n=e.stateNode;if(!n)throw Error(J(169));r?(e=T2(e,t,Ea),n.__reactInternalMemoizedMergedChildContext=e,ht($r),ht(xr),Ct(xr,e)):ht($r),Ct($r,r)}var $x=null,ga=null,iB=Jt.unstable_runWithPriority,Gx=Jt.unstable_scheduleCallback,Ty=Jt.unstable_cancelCallback,oB=Jt.unstable_shouldYield,Gw=Jt.unstable_requestPaint,Cy=Jt.unstable_now,aB=Jt.unstable_getCurrentPriorityLevel,Qd=Jt.unstable_ImmediatePriority,C2=Jt.unstable_UserBlockingPriority,P2=Jt.unstable_NormalPriority,A2=Jt.unstable_LowPriority,O2=Jt.unstable_IdlePriority,Ym={},sB=Gw!==void 0?Gw:function(){},Oi=null,fh=null,Km=!1,zw=Cy(),gr=1e4>zw?Cy:function(){return Cy()-zw};function zs(){switch(aB()){case Qd:return 99;case C2:return 98;case P2:return 97;case A2:return 96;case O2:return 95;default:throw Error(J(332))}}function I2(e){switch(e){case 99:return Qd;case 98:return C2;case 97:return P2;case 96:return A2;case 95:return O2;default:throw Error(J(332))}}function Ta(e,t){return e=I2(e),iB(e,t)}function rc(e,t,r){return e=I2(e),Gx(e,t,r)}function yi(){if(fh!==null){var e=fh;fh=null,Ty(e)}M2()}function M2(){if(!Km&&Oi!==null){Km=!0;var e=0;try{var t=Oi;Ta(99,function(){for(;e<t.length;e++){var r=t[e];do r=r(!0);while(r!==null)}}),Oi=null}catch(r){throw Oi!==null&&(Oi=Oi.slice(e+1)),Gx(Qd,yi),r}finally{Km=!1}}}var lB=La.ReactCurrentBatchConfig;function Mn(e,t){if(e&&e.defaultProps){t=vt({},t),e=e.defaultProps;for(var r in e)t[r]===void 0&&(t[r]=e[r]);return t}return t}var Wh=Bo(null),Xh=null,vs=null,qh=null;function zx(){qh=vs=Xh=null}function Vx(e){var t=Wh.current;ht(Wh),e.type._context._currentValue=t}function R2(e,t){for(;e!==null;){var r=e.alternate;if((e.childLanes&t)===t){if(r===null||(r.childLanes&t)===t)break;r.childLanes|=t}else e.childLanes|=t,r!==null&&(r.childLanes|=t);e=e.return}}function As(e,t){Xh=e,qh=vs=null,e=e.dependencies,e!==null&&e.firstContext!==null&&(e.lanes&t&&(kn=!0),e.firstContext=null)}function _n(e,t){if(qh!==e&&t!==!1&&t!==0)if((typeof t!="number"||t===1073741823)&&(qh=e,t=1073741823),t={context:e,observedBits:t,next:null},vs===null){if(Xh===null)throw Error(J(308));vs=t,Xh.dependencies={lanes:0,firstContext:t,responders:null}}else vs=vs.next=t;return e._currentValue}var Zi=!1;function Hx(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null},effects:null}}function k2(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function mo(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function vo(e,t){if(e=e.updateQueue,e!==null){e=e.shared;var r=e.pending;r===null?t.next=t:(t.next=r.next,r.next=t),e.pending=t}}function Vw(e,t){var r=e.updateQueue,n=e.alternate;if(n!==null&&(n=n.updateQueue,r===n)){var i=null,o=null;if(r=r.firstBaseUpdate,r!==null){do{var a={eventTime:r.eventTime,lane:r.lane,tag:r.tag,payload:r.payload,callback:r.callback,next:null};o===null?i=o=a:o=o.next=a,r=r.next}while(r!==null);o===null?i=o=t:o=o.next=t}else i=o=t;r={baseState:n.baseState,firstBaseUpdate:i,lastBaseUpdate:o,shared:n.shared,effects:n.effects},e.updateQueue=r;return}e=r.lastBaseUpdate,e===null?r.firstBaseUpdate=t:e.next=t,r.lastBaseUpdate=t}function nc(e,t,r,n){var i=e.updateQueue;Zi=!1;var o=i.firstBaseUpdate,a=i.lastBaseUpdate,s=i.shared.pending;if(s!==null){i.shared.pending=null;var l=s,u=l.next;l.next=null,a===null?o=u:a.next=u,a=l;var c=e.alternate;if(c!==null){c=c.updateQueue;var f=c.lastBaseUpdate;f!==a&&(f===null?c.firstBaseUpdate=u:f.next=u,c.lastBaseUpdate=l)}}if(o!==null){f=i.baseState,a=0,c=u=l=null;do{s=o.lane;var h=o.eventTime;if((n&s)===s){c!==null&&(c=c.next={eventTime:h,lane:0,tag:o.tag,payload:o.payload,callback:o.callback,next:null});e:{var d=e,m=o;switch(s=t,h=r,m.tag){case 1:if(d=m.payload,typeof d=="function"){f=d.call(h,f,s);break e}f=d;break e;case 3:d.flags=d.flags&-4097|64;case 0:if(d=m.payload,s=typeof d=="function"?d.call(h,f,s):d,s==null)break e;f=vt({},f,s);break e;case 2:Zi=!0}}o.callback!==null&&(e.flags|=32,s=i.effects,s===null?i.effects=[o]:s.push(o))}else h={eventTime:h,lane:s,tag:o.tag,payload:o.payload,callback:o.callback,next:null},c===null?(u=c=h,l=f):c=c.next=h,a|=s;if(o=o.next,o===null){if(s=i.shared.pending,s===null)break;o=s.next,s.next=null,i.lastBaseUpdate=s,i.shared.pending=null}}while(1);c===null&&(l=f),i.baseState=l,i.firstBaseUpdate=u,i.lastBaseUpdate=c,$c|=a,e.lanes=a,e.memoizedState=f}}function Hw(e,t,r){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var n=e[t],i=n.callback;if(i!==null){if(n.callback=null,n=r,typeof i!="function")throw Error(J(191,i));i.call(n)}}}var L2=new Vd.Component().refs;function Yh(e,t,r,n){t=e.memoizedState,r=r(n,t),r=r==null?t:vt({},t,r),e.memoizedState=r,e.lanes===0&&(e.updateQueue.baseState=r)}var ep={isMounted:function(e){return(e=e._reactInternals)?Fa(e)===e:!1},enqueueSetState:function(e,t,r){e=e._reactInternals;var n=Kr(),i=go(e),o=mo(n,i);o.payload=t,r!=null&&(o.callback=r),vo(e,o),yo(e,i,n)},enqueueReplaceState:function(e,t,r){e=e._reactInternals;var n=Kr(),i=go(e),o=mo(n,i);o.tag=1,o.payload=t,r!=null&&(o.callback=r),vo(e,o),yo(e,i,n)},enqueueForceUpdate:function(e,t){e=e._reactInternals;var r=Kr(),n=go(e),i=mo(r,n);i.tag=2,t!=null&&(i.callback=t),vo(e,i),yo(e,n,r)}};function Ww(e,t,r,n,i,o,a){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(n,o,a):t.prototype&&t.prototype.isPureReactComponent?!ec(r,n)||!ec(i,o):!0}function F2(e,t,r){var n=!1,i=Ao,o=t.contextType;return typeof o=="object"&&o!==null?o=_n(o):(i=Gr(t)?Ea:xr.current,n=t.contextTypes,o=(n=n!=null)?Gs(e,i):Ao),t=new t(r,o),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=ep,e.stateNode=t,t._reactInternals=e,n&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=i,e.__reactInternalMemoizedMaskedChildContext=o),t}function Xw(e,t,r,n){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(r,n),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(r,n),t.state!==e&&ep.enqueueReplaceState(t,t.state,null)}function Py(e,t,r,n){var i=e.stateNode;i.props=r,i.state=e.memoizedState,i.refs=L2,Hx(e);var o=t.contextType;typeof o=="object"&&o!==null?i.context=_n(o):(o=Gr(t)?Ea:xr.current,i.context=Gs(e,o)),nc(e,r,i,n),i.state=e.memoizedState,o=t.getDerivedStateFromProps,typeof o=="function"&&(Yh(e,t,o,r),i.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(t=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),t!==i.state&&ep.enqueueReplaceState(i,i.state,null),nc(e,r,i,n),i.state=e.memoizedState),typeof i.componentDidMount=="function"&&(e.flags|=4)}var pf=Array.isArray;function $l(e,t,r){if(e=r.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(r._owner){if(r=r._owner,r){if(r.tag!==1)throw Error(J(309));var n=r.stateNode}if(!n)throw Error(J(147,e));var i=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===i?t.ref:(t=function(o){var a=n.refs;a===L2&&(a=n.refs={}),o===null?delete a[i]:a[i]=o},t._stringRef=i,t)}if(typeof e!="string")throw Error(J(284));if(!r._owner)throw Error(J(290,e))}return e}function mf(e,t){if(e.type!=="textarea")throw Error(J(31,Object.prototype.toString.call(t)==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":t))}function D2(e){function t(p,v){if(e){var y=p.lastEffect;y!==null?(y.nextEffect=v,p.lastEffect=v):p.firstEffect=p.lastEffect=v,v.nextEffect=null,v.flags=8}}function r(p,v){if(!e)return null;for(;v!==null;)t(p,v),v=v.sibling;return null}function n(p,v){for(p=new Map;v!==null;)v.key!==null?p.set(v.key,v):p.set(v.index,v),v=v.sibling;return p}function i(p,v){return p=Io(p,v),p.index=0,p.sibling=null,p}function o(p,v,y){return p.index=y,e?(y=p.alternate,y!==null?(y=y.index,y<v?(p.flags=2,v):y):(p.flags=2,v)):v}function a(p){return e&&p.alternate===null&&(p.flags=2),p}function s(p,v,y,_){return v===null||v.tag!==6?(v=tv(y,p.mode,_),v.return=p,v):(v=i(v,y),v.return=p,v)}function l(p,v,y,_){return v!==null&&v.elementType===y.type?(_=i(v,y.props),_.ref=$l(p,v,y),_.return=p,_):(_=mh(y.type,y.key,y.props,null,p.mode,_),_.ref=$l(p,v,y),_.return=p,_)}function u(p,v,y,_){return v===null||v.tag!==4||v.stateNode.containerInfo!==y.containerInfo||v.stateNode.implementation!==y.implementation?(v=rv(y,p.mode,_),v.return=p,v):(v=i(v,y.children||[]),v.return=p,v)}function c(p,v,y,_,x){return v===null||v.tag!==7?(v=Rs(y,p.mode,_,x),v.return=p,v):(v=i(v,y),v.return=p,v)}function f(p,v,y){if(typeof v=="string"||typeof v=="number")return v=tv(""+v,p.mode,y),v.return=p,v;if(typeof v=="object"&&v!==null){switch(v.$$typeof){case hu:return y=mh(v.type,v.key,v.props,null,p.mode,y),y.ref=$l(p,null,v),y.return=p,y;case ua:return v=rv(v,p.mode,y),v.return=p,v}if(pf(v)||Fl(v))return v=Rs(v,p.mode,y,null),v.return=p,v;mf(p,v)}return null}function h(p,v,y,_){var x=v!==null?v.key:null;if(typeof y=="string"||typeof y=="number")return x!==null?null:s(p,v,""+y,_);if(typeof y=="object"&&y!==null){switch(y.$$typeof){case hu:return y.key===x?y.type===to?c(p,v,y.props.children,_,x):l(p,v,y,_):null;case ua:return y.key===x?u(p,v,y,_):null}if(pf(y)||Fl(y))return x!==null?null:c(p,v,y,_,null);mf(p,y)}return null}function d(p,v,y,_,x){if(typeof _=="string"||typeof _=="number")return p=p.get(y)||null,s(v,p,""+_,x);if(typeof _=="object"&&_!==null){switch(_.$$typeof){case hu:return p=p.get(_.key===null?y:_.key)||null,_.type===to?c(v,p,_.props.children,x,_.key):l(v,p,_,x);case ua:return p=p.get(_.key===null?y:_.key)||null,u(v,p,_,x)}if(pf(_)||Fl(_))return p=p.get(y)||null,c(v,p,_,x,null);mf(v,_)}return null}function m(p,v,y,_){for(var x=null,b=null,S=v,E=v=0,I=null;S!==null&&E<y.length;E++){S.index>E?(I=S,S=null):I=S.sibling;var A=h(p,S,y[E],_);if(A===null){S===null&&(S=I);break}e&&S&&A.alternate===null&&t(p,S),v=o(A,v,E),b===null?x=A:b.sibling=A,b=A,S=I}if(E===y.length)return r(p,S),x;if(S===null){for(;E<y.length;E++)S=f(p,y[E],_),S!==null&&(v=o(S,v,E),b===null?x=S:b.sibling=S,b=S);return x}for(S=n(p,S);E<y.length;E++)I=d(S,p,E,y[E],_),I!==null&&(e&&I.alternate!==null&&S.delete(I.key===null?E:I.key),v=o(I,v,E),b===null?x=I:b.sibling=I,b=I);return e&&S.forEach(function(O){return t(p,O)}),x}function g(p,v,y,_){var x=Fl(y);if(typeof x!="function")throw Error(J(150));if(y=x.call(y),y==null)throw Error(J(151));for(var b=x=null,S=v,E=v=0,I=null,A=y.next();S!==null&&!A.done;E++,A=y.next()){S.index>E?(I=S,S=null):I=S.sibling;var O=h(p,S,A.value,_);if(O===null){S===null&&(S=I);break}e&&S&&O.alternate===null&&t(p,S),v=o(O,v,E),b===null?x=O:b.sibling=O,b=O,S=I}if(A.done)return r(p,S),x;if(S===null){for(;!A.done;E++,A=y.next())A=f(p,A.value,_),A!==null&&(v=o(A,v,E),b===null?x=A:b.sibling=A,b=A);return x}for(S=n(p,S);!A.done;E++,A=y.next())A=d(S,p,E,A.value,_),A!==null&&(e&&A.alternate!==null&&S.delete(A.key===null?E:A.key),v=o(A,v,E),b===null?x=A:b.sibling=A,b=A);return e&&S.forEach(function(D){return t(p,D)}),x}return function(p,v,y,_){var x=typeof y=="object"&&y!==null&&y.type===to&&y.key===null;x&&(y=y.props.children);var b=typeof y=="object"&&y!==null;if(b)switch(y.$$typeof){case hu:e:{for(b=y.key,x=v;x!==null;){if(x.key===b){switch(x.tag){case 7:if(y.type===to){r(p,x.sibling),v=i(x,y.props.children),v.return=p,p=v;break e}break;default:if(x.elementType===y.type){r(p,x.sibling),v=i(x,y.props),v.ref=$l(p,x,y),v.return=p,p=v;break e}}r(p,x);break}else t(p,x);x=x.sibling}y.type===to?(v=Rs(y.props.children,p.mode,_,y.key),v.return=p,p=v):(_=mh(y.type,y.key,y.props,null,p.mode,_),_.ref=$l(p,v,y),_.return=p,p=_)}return a(p);case ua:e:{for(x=y.key;v!==null;){if(v.key===x)if(v.tag===4&&v.stateNode.containerInfo===y.containerInfo&&v.stateNode.implementation===y.implementation){r(p,v.sibling),v=i(v,y.children||[]),v.return=p,p=v;break e}else{r(p,v);break}else t(p,v);v=v.sibling}v=rv(y,p.mode,_),v.return=p,p=v}return a(p)}if(typeof y=="string"||typeof y=="number")return y=""+y,v!==null&&v.tag===6?(r(p,v.sibling),v=i(v,y),v.return=p,p=v):(r(p,v),v=tv(y,p.mode,_),v.return=p,p=v),a(p);if(pf(y))return m(p,v,y,_);if(Fl(y))return g(p,v,y,_);if(b&&mf(p,y),typeof y>"u"&&!x)switch(p.tag){case 1:case 22:case 0:case 11:case 15:throw Error(J(152,ws(p.type)||"Component"))}return r(p,v)}}var Kh=D2(!0),N2=D2(!1),Uc={},ai=Bo(Uc),ic=Bo(Uc),oc=Bo(Uc);function ha(e){if(e===Uc)throw Error(J(174));return e}function Ay(e,t){switch(Ct(oc,t),Ct(ic,e),Ct(ai,Uc),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:hy(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=hy(t,e)}ht(ai),Ct(ai,t)}function Vs(){ht(ai),ht(ic),ht(oc)}function qw(e){ha(oc.current);var t=ha(ai.current),r=hy(t,e.type);t!==r&&(Ct(ic,e),Ct(ai,r))}function Wx(e){ic.current===e&&(ht(ai),ht(ic))}var Tt=Bo(0);function Zh(e){for(var t=e;t!==null;){if(t.tag===13){var r=t.memoizedState;if(r!==null&&(r=r.dehydrated,r===null||r.data==="$?"||r.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&64)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var Ri=null,lo=null,si=!1;function B2(e,t){var r=hn(5,null,null,0);r.elementType="DELETED",r.type="DELETED",r.stateNode=t,r.return=e,r.flags=8,e.lastEffect!==null?(e.lastEffect.nextEffect=r,e.lastEffect=r):e.firstEffect=e.lastEffect=r}function Yw(e,t){switch(e.tag){case 5:var r=e.type;return t=t.nodeType!==1||r.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,!0):!1;case 13:return!1;default:return!1}}function Oy(e){if(si){var t=lo;if(t){var r=t;if(!Yw(e,t)){if(t=Ps(r.nextSibling),!t||!Yw(e,t)){e.flags=e.flags&-1025|2,si=!1,Ri=e;return}B2(Ri,r)}Ri=e,lo=Ps(t.firstChild)}else e.flags=e.flags&-1025|2,si=!1,Ri=e}}function Kw(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;Ri=e}function vf(e){if(e!==Ri)return!1;if(!si)return Kw(e),si=!0,!1;var t=e.type;if(e.tag!==5||t!=="head"&&t!=="body"&&!wy(t,e.memoizedProps))for(t=lo;t;)B2(e,t),t=Ps(t.nextSibling);if(Kw(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(J(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var r=e.data;if(r==="/$"){if(t===0){lo=Ps(e.nextSibling);break e}t--}else r!=="$"&&r!=="$!"&&r!=="$?"||t++}e=e.nextSibling}lo=null}}else lo=Ri?Ps(e.stateNode.nextSibling):null;return!0}function Zm(){lo=Ri=null,si=!1}var Os=[];function Xx(){for(var e=0;e<Os.length;e++)Os[e]._workInProgressVersionPrimary=null;Os.length=0}var Ru=La.ReactCurrentDispatcher,gn=La.ReactCurrentBatchConfig,ac=0,kt=null,mr=null,or=null,Jh=!1,ku=!1;function kr(){throw Error(J(321))}function qx(e,t){if(t===null)return!1;for(var r=0;r<t.length&&r<e.length;r++)if(!fn(e[r],t[r]))return!1;return!0}function Yx(e,t,r,n,i,o){if(ac=o,kt=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,Ru.current=e===null||e.memoizedState===null?cB:fB,e=r(n,i),ku){o=0;do{if(ku=!1,!(25>o))throw Error(J(301));o+=1,or=mr=null,t.updateQueue=null,Ru.current=hB,e=r(n,i)}while(ku)}if(Ru.current=rd,t=mr!==null&&mr.next!==null,ac=0,or=mr=kt=null,Jh=!1,t)throw Error(J(300));return e}function da(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return or===null?kt.memoizedState=or=e:or=or.next=e,or}function Da(){if(mr===null){var e=kt.alternate;e=e!==null?e.memoizedState:null}else e=mr.next;var t=or===null?kt.memoizedState:or.next;if(t!==null)or=t,mr=e;else{if(e===null)throw Error(J(310));mr=e,e={memoizedState:mr.memoizedState,baseState:mr.baseState,baseQueue:mr.baseQueue,queue:mr.queue,next:null},or===null?kt.memoizedState=or=e:or=or.next=e}return or}function ri(e,t){return typeof t=="function"?t(e):t}function Gl(e){var t=Da(),r=t.queue;if(r===null)throw Error(J(311));r.lastRenderedReducer=e;var n=mr,i=n.baseQueue,o=r.pending;if(o!==null){if(i!==null){var a=i.next;i.next=o.next,o.next=a}n.baseQueue=i=o,r.pending=null}if(i!==null){i=i.next,n=n.baseState;var s=a=o=null,l=i;do{var u=l.lane;if((ac&u)===u)s!==null&&(s=s.next={lane:0,action:l.action,eagerReducer:l.eagerReducer,eagerState:l.eagerState,next:null}),n=l.eagerReducer===e?l.eagerState:e(n,l.action);else{var c={lane:u,action:l.action,eagerReducer:l.eagerReducer,eagerState:l.eagerState,next:null};s===null?(a=s=c,o=n):s=s.next=c,kt.lanes|=u,$c|=u}l=l.next}while(l!==null&&l!==i);s===null?o=n:s.next=a,fn(n,t.memoizedState)||(kn=!0),t.memoizedState=n,t.baseState=o,t.baseQueue=s,r.lastRenderedState=n}return[t.memoizedState,r.dispatch]}function zl(e){var t=Da(),r=t.queue;if(r===null)throw Error(J(311));r.lastRenderedReducer=e;var n=r.dispatch,i=r.pending,o=t.memoizedState;if(i!==null){r.pending=null;var a=i=i.next;do o=e(o,a.action),a=a.next;while(a!==i);fn(o,t.memoizedState)||(kn=!0),t.memoizedState=o,t.baseQueue===null&&(t.baseState=o),r.lastRenderedState=o}return[o,n]}function Zw(e,t,r){var n=t._getVersion;n=n(t._source);var i=t._workInProgressVersionPrimary;if(i!==null?e=i===n:(e=e.mutableReadLanes,(e=(ac&e)===e)&&(t._workInProgressVersionPrimary=n,Os.push(t))),e)return r(t._source);throw Os.push(t),Error(J(350))}function j2(e,t,r,n){var i=Ar;if(i===null)throw Error(J(349));var o=t._getVersion,a=o(t._source),s=Ru.current,l=s.useState(function(){return Zw(i,t,r)}),u=l[1],c=l[0];l=or;var f=e.memoizedState,h=f.refs,d=h.getSnapshot,m=f.source;f=f.subscribe;var g=kt;return e.memoizedState={refs:h,source:t,subscribe:n},s.useEffect(function(){h.getSnapshot=r,h.setSnapshot=u;var p=o(t._source);if(!fn(a,p)){p=r(t._source),fn(c,p)||(u(p),p=go(g),i.mutableReadLanes|=p&i.pendingLanes),p=i.mutableReadLanes,i.entangledLanes|=p;for(var v=i.entanglements,y=p;0<y;){var _=31-Po(y),x=1<<_;v[_]|=p,y&=~x}}},[r,t,n]),s.useEffect(function(){return n(t._source,function(){var p=h.getSnapshot,v=h.setSnapshot;try{v(p(t._source));var y=go(g);i.mutableReadLanes|=y&i.pendingLanes}catch(_){v(function(){throw _})}})},[t,n]),fn(d,r)&&fn(m,t)&&fn(f,n)||(e={pending:null,dispatch:null,lastRenderedReducer:ri,lastRenderedState:c},e.dispatch=u=Jx.bind(null,kt,e),l.queue=e,l.baseQueue=null,c=Zw(i,t,r),l.memoizedState=l.baseState=c),c}function U2(e,t,r){var n=Da();return j2(n,e,t,r)}function Vl(e){var t=da();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e=t.queue={pending:null,dispatch:null,lastRenderedReducer:ri,lastRenderedState:e},e=e.dispatch=Jx.bind(null,kt,e),[t.memoizedState,e]}function Qh(e,t,r,n){return e={tag:e,create:t,destroy:r,deps:n,next:null},t=kt.updateQueue,t===null?(t={lastEffect:null},kt.updateQueue=t,t.lastEffect=e.next=e):(r=t.lastEffect,r===null?t.lastEffect=e.next=e:(n=r.next,r.next=e,e.next=n,t.lastEffect=e)),e}function Jw(e){var t=da();return e={current:e},t.memoizedState=e}function ed(){return Da().memoizedState}function Iy(e,t,r,n){var i=da();kt.flags|=e,i.memoizedState=Qh(1|t,r,void 0,n===void 0?null:n)}function Kx(e,t,r,n){var i=Da();n=n===void 0?null:n;var o=void 0;if(mr!==null){var a=mr.memoizedState;if(o=a.destroy,n!==null&&qx(n,a.deps)){Qh(t,r,o,n);return}}kt.flags|=e,i.memoizedState=Qh(1|t,r,o,n)}function Qw(e,t){return Iy(516,4,e,t)}function td(e,t){return Kx(516,4,e,t)}function $2(e,t){return Kx(4,2,e,t)}function G2(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function z2(e,t,r){return r=r!=null?r.concat([e]):null,Kx(4,2,G2.bind(null,t,e),r)}function Zx(){}function V2(e,t){var r=Da();t=t===void 0?null:t;var n=r.memoizedState;return n!==null&&t!==null&&qx(t,n[1])?n[0]:(r.memoizedState=[e,t],e)}function H2(e,t){var r=Da();t=t===void 0?null:t;var n=r.memoizedState;return n!==null&&t!==null&&qx(t,n[1])?n[0]:(e=e(),r.memoizedState=[e,t],e)}function uB(e,t){var r=zs();Ta(98>r?98:r,function(){e(!0)}),Ta(97<r?97:r,function(){var n=gn.transition;gn.transition=1;try{e(!1),t()}finally{gn.transition=n}})}function Jx(e,t,r){var n=Kr(),i=go(e),o={lane:i,action:r,eagerReducer:null,eagerState:null,next:null},a=t.pending;if(a===null?o.next=o:(o.next=a.next,a.next=o),t.pending=o,a=e.alternate,e===kt||a!==null&&a===kt)ku=Jh=!0;else{if(e.lanes===0&&(a===null||a.lanes===0)&&(a=t.lastRenderedReducer,a!==null))try{var s=t.lastRenderedState,l=a(s,r);if(o.eagerReducer=a,o.eagerState=l,fn(l,s))return}catch{}finally{}yo(e,i,n)}}var rd={readContext:_n,useCallback:kr,useContext:kr,useEffect:kr,useImperativeHandle:kr,useLayoutEffect:kr,useMemo:kr,useReducer:kr,useRef:kr,useState:kr,useDebugValue:kr,useDeferredValue:kr,useTransition:kr,useMutableSource:kr,useOpaqueIdentifier:kr,unstable_isNewReconciler:!1},cB={readContext:_n,useCallback:function(e,t){return da().memoizedState=[e,t===void 0?null:t],e},useContext:_n,useEffect:Qw,useImperativeHandle:function(e,t,r){return r=r!=null?r.concat([e]):null,Iy(4,2,G2.bind(null,t,e),r)},useLayoutEffect:function(e,t){return Iy(4,2,e,t)},useMemo:function(e,t){var r=da();return t=t===void 0?null:t,e=e(),r.memoizedState=[e,t],e},useReducer:function(e,t,r){var n=da();return t=r!==void 0?r(t):t,n.memoizedState=n.baseState=t,e=n.queue={pending:null,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},e=e.dispatch=Jx.bind(null,kt,e),[n.memoizedState,e]},useRef:Jw,useState:Vl,useDebugValue:Zx,useDeferredValue:function(e){var t=Vl(e),r=t[0],n=t[1];return Qw(function(){var i=gn.transition;gn.transition=1;try{n(e)}finally{gn.transition=i}},[e]),r},useTransition:function(){var e=Vl(!1),t=e[0];return e=uB.bind(null,e[1]),Jw(e),[e,t]},useMutableSource:function(e,t,r){var n=da();return n.memoizedState={refs:{getSnapshot:t,setSnapshot:null},source:e,subscribe:r},j2(n,e,t,r)},useOpaqueIdentifier:function(){if(si){var e=!1,t=nB(function(){throw e||(e=!0,r("r:"+(qm++).toString(36))),Error(J(355))}),r=Vl(t)[1];return!(kt.mode&2)&&(kt.flags|=516,Qh(5,function(){r("r:"+(qm++).toString(36))},void 0,null)),t}return t="r:"+(qm++).toString(36),Vl(t),t},unstable_isNewReconciler:!1},fB={readContext:_n,useCallback:V2,useContext:_n,useEffect:td,useImperativeHandle:z2,useLayoutEffect:$2,useMemo:H2,useReducer:Gl,useRef:ed,useState:function(){return Gl(ri)},useDebugValue:Zx,useDeferredValue:function(e){var t=Gl(ri),r=t[0],n=t[1];return td(function(){var i=gn.transition;gn.transition=1;try{n(e)}finally{gn.transition=i}},[e]),r},useTransition:function(){var e=Gl(ri)[0];return[ed().current,e]},useMutableSource:U2,useOpaqueIdentifier:function(){return Gl(ri)[0]},unstable_isNewReconciler:!1},hB={readContext:_n,useCallback:V2,useContext:_n,useEffect:td,useImperativeHandle:z2,useLayoutEffect:$2,useMemo:H2,useReducer:zl,useRef:ed,useState:function(){return zl(ri)},useDebugValue:Zx,useDeferredValue:function(e){var t=zl(ri),r=t[0],n=t[1];return td(function(){var i=gn.transition;gn.transition=1;try{n(e)}finally{gn.transition=i}},[e]),r},useTransition:function(){var e=zl(ri)[0];return[ed().current,e]},useMutableSource:U2,useOpaqueIdentifier:function(){return zl(ri)[0]},unstable_isNewReconciler:!1},dB=La.ReactCurrentOwner,kn=!1;function Fr(e,t,r,n){t.child=e===null?N2(t,null,r,n):Kh(t,e.child,r,n)}function eE(e,t,r,n,i){r=r.render;var o=t.ref;return As(t,i),n=Yx(e,t,r,n,o,i),e!==null&&!kn?(t.updateQueue=e.updateQueue,t.flags&=-517,e.lanes&=~i,ki(e,t,i)):(t.flags|=1,Fr(e,t,n,i),t.child)}function tE(e,t,r,n,i,o){if(e===null){var a=r.type;return typeof a=="function"&&!ib(a)&&a.defaultProps===void 0&&r.compare===null&&r.defaultProps===void 0?(t.tag=15,t.type=a,W2(e,t,a,n,i,o)):(e=mh(r.type,null,n,t,t.mode,o),e.ref=t.ref,e.return=t,t.child=e)}return a=e.child,!(i&o)&&(i=a.memoizedProps,r=r.compare,r=r!==null?r:ec,r(i,n)&&e.ref===t.ref)?ki(e,t,o):(t.flags|=1,e=Io(a,n),e.ref=t.ref,e.return=t,t.child=e)}function W2(e,t,r,n,i,o){if(e!==null&&ec(e.memoizedProps,n)&&e.ref===t.ref)if(kn=!1,(o&i)!==0)e.flags&16384&&(kn=!0);else return t.lanes=e.lanes,ki(e,t,o);return My(e,t,r,n,o)}function Jm(e,t,r){var n=t.pendingProps,i=n.children,o=e!==null?e.memoizedState:null;if(n.mode==="hidden"||n.mode==="unstable-defer-without-hiding")if(!(t.mode&4))t.memoizedState={baseLanes:0},yf(t,r);else if(r&1073741824)t.memoizedState={baseLanes:0},yf(t,o!==null?o.baseLanes:r);else return e=o!==null?o.baseLanes|r:r,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e},yf(t,e),null;else o!==null?(n=o.baseLanes|r,t.memoizedState=null):n=r,yf(t,n);return Fr(e,t,i,r),t.child}function X2(e,t){var r=t.ref;(e===null&&r!==null||e!==null&&e.ref!==r)&&(t.flags|=128)}function My(e,t,r,n,i){var o=Gr(r)?Ea:xr.current;return o=Gs(t,o),As(t,i),r=Yx(e,t,r,n,o,i),e!==null&&!kn?(t.updateQueue=e.updateQueue,t.flags&=-517,e.lanes&=~i,ki(e,t,i)):(t.flags|=1,Fr(e,t,r,i),t.child)}function rE(e,t,r,n,i){if(Gr(r)){var o=!0;ch(t)}else o=!1;if(As(t,i),t.stateNode===null)e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2),F2(t,r,n),Py(t,r,n,i),n=!0;else if(e===null){var a=t.stateNode,s=t.memoizedProps;a.props=s;var l=a.context,u=r.contextType;typeof u=="object"&&u!==null?u=_n(u):(u=Gr(r)?Ea:xr.current,u=Gs(t,u));var c=r.getDerivedStateFromProps,f=typeof c=="function"||typeof a.getSnapshotBeforeUpdate=="function";f||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(s!==n||l!==u)&&Xw(t,a,n,u),Zi=!1;var h=t.memoizedState;a.state=h,nc(t,n,a,i),l=t.memoizedState,s!==n||h!==l||$r.current||Zi?(typeof c=="function"&&(Yh(t,r,c,n),l=t.memoizedState),(s=Zi||Ww(t,r,s,n,h,l,u))?(f||typeof a.UNSAFE_componentWillMount!="function"&&typeof a.componentWillMount!="function"||(typeof a.componentWillMount=="function"&&a.componentWillMount(),typeof a.UNSAFE_componentWillMount=="function"&&a.UNSAFE_componentWillMount()),typeof a.componentDidMount=="function"&&(t.flags|=4)):(typeof a.componentDidMount=="function"&&(t.flags|=4),t.memoizedProps=n,t.memoizedState=l),a.props=n,a.state=l,a.context=u,n=s):(typeof a.componentDidMount=="function"&&(t.flags|=4),n=!1)}else{a=t.stateNode,k2(e,t),s=t.memoizedProps,u=t.type===t.elementType?s:Mn(t.type,s),a.props=u,f=t.pendingProps,h=a.context,l=r.contextType,typeof l=="object"&&l!==null?l=_n(l):(l=Gr(r)?Ea:xr.current,l=Gs(t,l));var d=r.getDerivedStateFromProps;(c=typeof d=="function"||typeof a.getSnapshotBeforeUpdate=="function")||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(s!==f||h!==l)&&Xw(t,a,n,l),Zi=!1,h=t.memoizedState,a.state=h,nc(t,n,a,i);var m=t.memoizedState;s!==f||h!==m||$r.current||Zi?(typeof d=="function"&&(Yh(t,r,d,n),m=t.memoizedState),(u=Zi||Ww(t,r,u,n,h,m,l))?(c||typeof a.UNSAFE_componentWillUpdate!="function"&&typeof a.componentWillUpdate!="function"||(typeof a.componentWillUpdate=="function"&&a.componentWillUpdate(n,m,l),typeof a.UNSAFE_componentWillUpdate=="function"&&a.UNSAFE_componentWillUpdate(n,m,l)),typeof a.componentDidUpdate=="function"&&(t.flags|=4),typeof a.getSnapshotBeforeUpdate=="function"&&(t.flags|=256)):(typeof a.componentDidUpdate!="function"||s===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||s===e.memoizedProps&&h===e.memoizedState||(t.flags|=256),t.memoizedProps=n,t.memoizedState=m),a.props=n,a.state=m,a.context=l,n=u):(typeof a.componentDidUpdate!="function"||s===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||s===e.memoizedProps&&h===e.memoizedState||(t.flags|=256),n=!1)}return Ry(e,t,r,n,o,i)}function Ry(e,t,r,n,i,o){X2(e,t);var a=(t.flags&64)!==0;if(!n&&!a)return i&&$w(t,r,!1),ki(e,t,o);n=t.stateNode,dB.current=t;var s=a&&typeof r.getDerivedStateFromError!="function"?null:n.render();return t.flags|=1,e!==null&&a?(t.child=Kh(t,e.child,null,o),t.child=Kh(t,null,s,o)):Fr(e,t,s,o),t.memoizedState=n.state,i&&$w(t,r,!0),t.child}function nE(e){var t=e.stateNode;t.pendingContext?Uw(e,t.pendingContext,t.pendingContext!==t.context):t.context&&Uw(e,t.context,!1),Ay(e,t.containerInfo)}var gf={dehydrated:null,retryLane:0};function iE(e,t,r){var n=t.pendingProps,i=Tt.current,o=!1,a;return(a=(t.flags&64)!==0)||(a=e!==null&&e.memoizedState===null?!1:(i&2)!==0),a?(o=!0,t.flags&=-65):e!==null&&e.memoizedState===null||n.fallback===void 0||n.unstable_avoidThisFallback===!0||(i|=1),Ct(Tt,i&1),e===null?(n.fallback!==void 0&&Oy(t),e=n.children,i=n.fallback,o?(e=oE(t,e,i,r),t.child.memoizedState={baseLanes:r},t.memoizedState=gf,e):typeof n.unstable_expectedLoadTime=="number"?(e=oE(t,e,i,r),t.child.memoizedState={baseLanes:r},t.memoizedState=gf,t.lanes=33554432,e):(r=ob({mode:"visible",children:e},t.mode,r,null),r.return=t,t.child=r)):e.memoizedState!==null?o?(n=sE(e,t,n.children,n.fallback,r),o=t.child,i=e.child.memoizedState,o.memoizedState=i===null?{baseLanes:r}:{baseLanes:i.baseLanes|r},o.childLanes=e.childLanes&~r,t.memoizedState=gf,n):(r=aE(e,t,n.children,r),t.memoizedState=null,r):o?(n=sE(e,t,n.children,n.fallback,r),o=t.child,i=e.child.memoizedState,o.memoizedState=i===null?{baseLanes:r}:{baseLanes:i.baseLanes|r},o.childLanes=e.childLanes&~r,t.memoizedState=gf,n):(r=aE(e,t,n.children,r),t.memoizedState=null,r)}function oE(e,t,r,n){var i=e.mode,o=e.child;return t={mode:"hidden",children:t},!(i&2)&&o!==null?(o.childLanes=0,o.pendingProps=t):o=ob(t,i,0,null),r=Rs(r,i,n,null),o.return=e,r.return=e,o.sibling=r,e.child=o,r}function aE(e,t,r,n){var i=e.child;return e=i.sibling,r=Io(i,{mode:"visible",children:r}),!(t.mode&2)&&(r.lanes=n),r.return=t,r.sibling=null,e!==null&&(e.nextEffect=null,e.flags=8,t.firstEffect=t.lastEffect=e),t.child=r}function sE(e,t,r,n,i){var o=t.mode,a=e.child;e=a.sibling;var s={mode:"hidden",children:r};return!(o&2)&&t.child!==a?(r=t.child,r.childLanes=0,r.pendingProps=s,a=r.lastEffect,a!==null?(t.firstEffect=r.firstEffect,t.lastEffect=a,a.nextEffect=null):t.firstEffect=t.lastEffect=null):r=Io(a,s),e!==null?n=Io(e,n):(n=Rs(n,o,i,null),n.flags|=2),n.return=t,r.return=t,r.sibling=n,t.child=r,n}function lE(e,t){e.lanes|=t;var r=e.alternate;r!==null&&(r.lanes|=t),R2(e.return,t)}function Qm(e,t,r,n,i,o){var a=e.memoizedState;a===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:n,tail:r,tailMode:i,lastEffect:o}:(a.isBackwards=t,a.rendering=null,a.renderingStartTime=0,a.last=n,a.tail=r,a.tailMode=i,a.lastEffect=o)}function uE(e,t,r){var n=t.pendingProps,i=n.revealOrder,o=n.tail;if(Fr(e,t,n.children,r),n=Tt.current,n&2)n=n&1|2,t.flags|=64;else{if(e!==null&&e.flags&64)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&lE(e,r);else if(e.tag===19)lE(e,r);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}n&=1}if(Ct(Tt,n),!(t.mode&2))t.memoizedState=null;else switch(i){case"forwards":for(r=t.child,i=null;r!==null;)e=r.alternate,e!==null&&Zh(e)===null&&(i=r),r=r.sibling;r=i,r===null?(i=t.child,t.child=null):(i=r.sibling,r.sibling=null),Qm(t,!1,i,r,o,t.lastEffect);break;case"backwards":for(r=null,i=t.child,t.child=null;i!==null;){if(e=i.alternate,e!==null&&Zh(e)===null){t.child=i;break}e=i.sibling,i.sibling=r,r=i,i=e}Qm(t,!0,r,null,o,t.lastEffect);break;case"together":Qm(t,!1,null,null,void 0,t.lastEffect);break;default:t.memoizedState=null}return t.child}function ki(e,t,r){if(e!==null&&(t.dependencies=e.dependencies),$c|=t.lanes,r&t.childLanes){if(e!==null&&t.child!==e.child)throw Error(J(153));if(t.child!==null){for(e=t.child,r=Io(e,e.pendingProps),t.child=r,r.return=t;e.sibling!==null;)e=e.sibling,r=r.sibling=Io(e,e.pendingProps),r.return=t;r.sibling=null}return t.child}return null}var q2,ky,Y2,K2;q2=function(e,t){for(var r=t.child;r!==null;){if(r.tag===5||r.tag===6)e.appendChild(r.stateNode);else if(r.tag!==4&&r.child!==null){r.child.return=r,r=r.child;continue}if(r===t)break;for(;r.sibling===null;){if(r.return===null||r.return===t)return;r=r.return}r.sibling.return=r.return,r=r.sibling}};ky=function(){};Y2=function(e,t,r,n){var i=e.memoizedProps;if(i!==n){e=t.stateNode,ha(ai.current);var o=null;switch(r){case"input":i=ay(e,i),n=ay(e,n),o=[];break;case"option":i=uy(e,i),n=uy(e,n),o=[];break;case"select":i=vt({},i,{value:void 0}),n=vt({},n,{value:void 0}),o=[];break;case"textarea":i=cy(e,i),n=cy(e,n),o=[];break;default:typeof i.onClick!="function"&&typeof n.onClick=="function"&&(e.onclick=zh)}dy(r,n);var a;r=null;for(u in i)if(!n.hasOwnProperty(u)&&i.hasOwnProperty(u)&&i[u]!=null)if(u==="style"){var s=i[u];for(a in s)s.hasOwnProperty(a)&&(r||(r={}),r[a]="")}else u!=="dangerouslySetInnerHTML"&&u!=="children"&&u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&u!=="autoFocus"&&(Xu.hasOwnProperty(u)?o||(o=[]):(o=o||[]).push(u,null));for(u in n){var l=n[u];if(s=i!=null?i[u]:void 0,n.hasOwnProperty(u)&&l!==s&&(l!=null||s!=null))if(u==="style")if(s){for(a in s)!s.hasOwnProperty(a)||l&&l.hasOwnProperty(a)||(r||(r={}),r[a]="");for(a in l)l.hasOwnProperty(a)&&s[a]!==l[a]&&(r||(r={}),r[a]=l[a])}else r||(o||(o=[]),o.push(u,r)),r=l;else u==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,s=s?s.__html:void 0,l!=null&&s!==l&&(o=o||[]).push(u,l)):u==="children"?typeof l!="string"&&typeof l!="number"||(o=o||[]).push(u,""+l):u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&(Xu.hasOwnProperty(u)?(l!=null&&u==="onScroll"&&lt("scroll",e),o||s===l||(o=[])):typeof l=="object"&&l!==null&&l.$$typeof===Tx?l.toString():(o=o||[]).push(u,l))}r&&(o=o||[]).push("style",r);var u=o;(t.updateQueue=u)&&(t.flags|=4)}};K2=function(e,t,r,n){r!==n&&(t.flags|=4)};function Hl(e,t){if(!si)switch(e.tailMode){case"hidden":t=e.tail;for(var r=null;t!==null;)t.alternate!==null&&(r=t),t=t.sibling;r===null?e.tail=null:r.sibling=null;break;case"collapsed":r=e.tail;for(var n=null;r!==null;)r.alternate!==null&&(n=r),r=r.sibling;n===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:n.sibling=null}}function pB(e,t,r){var n=t.pendingProps;switch(t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return null;case 1:return Gr(t.type)&&Hh(),null;case 3:return Vs(),ht($r),ht(xr),Xx(),n=t.stateNode,n.pendingContext&&(n.context=n.pendingContext,n.pendingContext=null),(e===null||e.child===null)&&(vf(t)?t.flags|=4:n.hydrate||(t.flags|=256)),ky(t),null;case 5:Wx(t);var i=ha(oc.current);if(r=t.type,e!==null&&t.stateNode!=null)Y2(e,t,r,n,i),e.ref!==t.ref&&(t.flags|=128);else{if(!n){if(t.stateNode===null)throw Error(J(166));return null}if(e=ha(ai.current),vf(t)){n=t.stateNode,r=t.type;var o=t.memoizedProps;switch(n[so]=t,n[Vh]=o,r){case"dialog":lt("cancel",n),lt("close",n);break;case"iframe":case"object":case"embed":lt("load",n);break;case"video":case"audio":for(e=0;e<pu.length;e++)lt(pu[e],n);break;case"source":lt("error",n);break;case"img":case"image":case"link":lt("error",n),lt("load",n);break;case"details":lt("toggle",n);break;case"input":uw(n,o),lt("invalid",n);break;case"select":n._wrapperState={wasMultiple:!!o.multiple},lt("invalid",n);break;case"textarea":fw(n,o),lt("invalid",n)}dy(r,o),e=null;for(var a in o)o.hasOwnProperty(a)&&(i=o[a],a==="children"?typeof i=="string"?n.textContent!==i&&(e=["children",i]):typeof i=="number"&&n.textContent!==""+i&&(e=["children",""+i]):Xu.hasOwnProperty(a)&&i!=null&&a==="onScroll"&&lt("scroll",n));switch(r){case"input":cf(n),cw(n,o,!0);break;case"textarea":cf(n),hw(n);break;case"select":case"option":break;default:typeof o.onClick=="function"&&(n.onclick=zh)}n=e,t.updateQueue=n,n!==null&&(t.flags|=4)}else{switch(a=i.nodeType===9?i:i.ownerDocument,e===fy.html&&(e=zO(r)),e===fy.html?r==="script"?(e=a.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof n.is=="string"?e=a.createElement(r,{is:n.is}):(e=a.createElement(r),r==="select"&&(a=e,n.multiple?a.multiple=!0:n.size&&(a.size=n.size))):e=a.createElementNS(e,r),e[so]=t,e[Vh]=n,q2(e,t,!1,!1),t.stateNode=e,a=py(r,n),r){case"dialog":lt("cancel",e),lt("close",e),i=n;break;case"iframe":case"object":case"embed":lt("load",e),i=n;break;case"video":case"audio":for(i=0;i<pu.length;i++)lt(pu[i],e);i=n;break;case"source":lt("error",e),i=n;break;case"img":case"image":case"link":lt("error",e),lt("load",e),i=n;break;case"details":lt("toggle",e),i=n;break;case"input":uw(e,n),i=ay(e,n),lt("invalid",e);break;case"option":i=uy(e,n);break;case"select":e._wrapperState={wasMultiple:!!n.multiple},i=vt({},n,{value:void 0}),lt("invalid",e);break;case"textarea":fw(e,n),i=cy(e,n),lt("invalid",e);break;default:i=n}dy(r,i);var s=i;for(o in s)if(s.hasOwnProperty(o)){var l=s[o];o==="style"?WO(e,l):o==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,l!=null&&VO(e,l)):o==="children"?typeof l=="string"?(r!=="textarea"||l!=="")&&qu(e,l):typeof l=="number"&&qu(e,""+l):o!=="suppressContentEditableWarning"&&o!=="suppressHydrationWarning"&&o!=="autoFocus"&&(Xu.hasOwnProperty(o)?l!=null&&o==="onScroll"&&lt("scroll",e):l!=null&&_x(e,o,l,a))}switch(r){case"input":cf(e),cw(e,n,!1);break;case"textarea":cf(e),hw(e);break;case"option":n.value!=null&&e.setAttribute("value",""+Co(n.value));break;case"select":e.multiple=!!n.multiple,o=n.value,o!=null?Es(e,!!n.multiple,o,!1):n.defaultValue!=null&&Es(e,!!n.multiple,n.defaultValue,!0);break;default:typeof i.onClick=="function"&&(e.onclick=zh)}w2(r,n)&&(t.flags|=4)}t.ref!==null&&(t.flags|=128)}return null;case 6:if(e&&t.stateNode!=null)K2(e,t,e.memoizedProps,n);else{if(typeof n!="string"&&t.stateNode===null)throw Error(J(166));r=ha(oc.current),ha(ai.current),vf(t)?(n=t.stateNode,r=t.memoizedProps,n[so]=t,n.nodeValue!==r&&(t.flags|=4)):(n=(r.nodeType===9?r:r.ownerDocument).createTextNode(n),n[so]=t,t.stateNode=n)}return null;case 13:return ht(Tt),n=t.memoizedState,t.flags&64?(t.lanes=r,t):(n=n!==null,r=!1,e===null?t.memoizedProps.fallback!==void 0&&vf(t):r=e.memoizedState!==null,n&&!r&&t.mode&2&&(e===null&&t.memoizedProps.unstable_avoidThisFallback!==!0||Tt.current&1?sr===0&&(sr=3):((sr===0||sr===3)&&(sr=4),Ar===null||!($c&134217727)&&!(cl&134217727)||Is(Ar,yr))),(n||r)&&(t.flags|=4),null);case 4:return Vs(),ky(t),e===null&&x2(t.stateNode.containerInfo),null;case 10:return Vx(t),null;case 17:return Gr(t.type)&&Hh(),null;case 19:if(ht(Tt),n=t.memoizedState,n===null)return null;if(o=(t.flags&64)!==0,a=n.rendering,a===null)if(o)Hl(n,!1);else{if(sr!==0||e!==null&&e.flags&64)for(e=t.child;e!==null;){if(a=Zh(e),a!==null){for(t.flags|=64,Hl(n,!1),o=a.updateQueue,o!==null&&(t.updateQueue=o,t.flags|=4),n.lastEffect===null&&(t.firstEffect=null),t.lastEffect=n.lastEffect,n=r,r=t.child;r!==null;)o=r,e=n,o.flags&=2,o.nextEffect=null,o.firstEffect=null,o.lastEffect=null,a=o.alternate,a===null?(o.childLanes=0,o.lanes=e,o.child=null,o.memoizedProps=null,o.memoizedState=null,o.updateQueue=null,o.dependencies=null,o.stateNode=null):(o.childLanes=a.childLanes,o.lanes=a.lanes,o.child=a.child,o.memoizedProps=a.memoizedProps,o.memoizedState=a.memoizedState,o.updateQueue=a.updateQueue,o.type=a.type,e=a.dependencies,o.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),r=r.sibling;return Ct(Tt,Tt.current&1|2),t.child}e=e.sibling}n.tail!==null&&gr()>jy&&(t.flags|=64,o=!0,Hl(n,!1),t.lanes=33554432)}else{if(!o)if(e=Zh(a),e!==null){if(t.flags|=64,o=!0,r=e.updateQueue,r!==null&&(t.updateQueue=r,t.flags|=4),Hl(n,!0),n.tail===null&&n.tailMode==="hidden"&&!a.alternate&&!si)return t=t.lastEffect=n.lastEffect,t!==null&&(t.nextEffect=null),null}else 2*gr()-n.renderingStartTime>jy&&r!==1073741824&&(t.flags|=64,o=!0,Hl(n,!1),t.lanes=33554432);n.isBackwards?(a.sibling=t.child,t.child=a):(r=n.last,r!==null?r.sibling=a:t.child=a,n.last=a)}return n.tail!==null?(r=n.tail,n.rendering=r,n.tail=r.sibling,n.lastEffect=t.lastEffect,n.renderingStartTime=gr(),r.sibling=null,t=Tt.current,Ct(Tt,o?t&1|2:t&1),r):null;case 23:case 24:return nb(),e!==null&&e.memoizedState!==null!=(t.memoizedState!==null)&&n.mode!=="unstable-defer-without-hiding"&&(t.flags|=4),null}throw Error(J(156,t.tag))}function mB(e){switch(e.tag){case 1:Gr(e.type)&&Hh();var t=e.flags;return t&4096?(e.flags=t&-4097|64,e):null;case 3:if(Vs(),ht($r),ht(xr),Xx(),t=e.flags,t&64)throw Error(J(285));return e.flags=t&-4097|64,e;case 5:return Wx(e),null;case 13:return ht(Tt),t=e.flags,t&4096?(e.flags=t&-4097|64,e):null;case 19:return ht(Tt),null;case 4:return Vs(),null;case 10:return Vx(e),null;case 23:case 24:return nb(),null;default:return null}}function Qx(e,t){try{var r="",n=t;do r+=YN(n),n=n.return;while(n);var i=r}catch(o){i=`
Error generating stack: `+o.message+`
`+o.stack}return{value:e,source:t,stack:i}}function Ly(e,t){try{console.error(t.value)}catch(r){setTimeout(function(){throw r})}}var vB=typeof WeakMap=="function"?WeakMap:Map;function Z2(e,t,r){r=mo(-1,r),r.tag=3,r.payload={element:null};var n=t.value;return r.callback=function(){id||(id=!0,Uy=n),Ly(e,t)},r}function J2(e,t,r){r=mo(-1,r),r.tag=3;var n=e.type.getDerivedStateFromError;if(typeof n=="function"){var i=t.value;r.payload=function(){return Ly(e,t),n(i)}}var o=e.stateNode;return o!==null&&typeof o.componentDidCatch=="function"&&(r.callback=function(){typeof n!="function"&&(ni===null?ni=new Set([this]):ni.add(this),Ly(e,t));var a=t.stack;this.componentDidCatch(t.value,{componentStack:a!==null?a:""})}),r}var gB=typeof WeakSet=="function"?WeakSet:Set;function cE(e){var t=e.ref;if(t!==null)if(typeof t=="function")try{t(null)}catch(r){_o(e,r)}else t.current=null}function yB(e,t){switch(t.tag){case 0:case 11:case 15:case 22:return;case 1:if(t.flags&256&&e!==null){var r=e.memoizedProps,n=e.memoizedState;e=t.stateNode,t=e.getSnapshotBeforeUpdate(t.elementType===t.type?r:Mn(t.type,r),n),e.__reactInternalSnapshotBeforeUpdate=t}return;case 3:t.flags&256&&Ux(t.stateNode.containerInfo);return;case 5:case 6:case 4:case 17:return}throw Error(J(163))}function _B(e,t,r){switch(r.tag){case 0:case 11:case 15:case 22:if(t=r.updateQueue,t=t!==null?t.lastEffect:null,t!==null){e=t=t.next;do{if((e.tag&3)===3){var n=e.create;e.destroy=n()}e=e.next}while(e!==t)}if(t=r.updateQueue,t=t!==null?t.lastEffect:null,t!==null){e=t=t.next;do{var i=e;n=i.next,i=i.tag,i&4&&i&1&&(sI(r,e),PB(r,e)),e=n}while(e!==t)}return;case 1:e=r.stateNode,r.flags&4&&(t===null?e.componentDidMount():(n=r.elementType===r.type?t.memoizedProps:Mn(r.type,t.memoizedProps),e.componentDidUpdate(n,t.memoizedState,e.__reactInternalSnapshotBeforeUpdate))),t=r.updateQueue,t!==null&&Hw(r,t,e);return;case 3:if(t=r.updateQueue,t!==null){if(e=null,r.child!==null)switch(r.child.tag){case 5:e=r.child.stateNode;break;case 1:e=r.child.stateNode}Hw(r,t,e)}return;case 5:e=r.stateNode,t===null&&r.flags&4&&w2(r.type,r.memoizedProps)&&e.focus();return;case 6:return;case 4:return;case 12:return;case 13:r.memoizedState===null&&(r=r.alternate,r!==null&&(r=r.memoizedState,r!==null&&(r=r.dehydrated,r!==null&&r2(r))));return;case 19:case 17:case 20:case 21:case 23:case 24:return}throw Error(J(163))}function fE(e,t){for(var r=e;;){if(r.tag===5){var n=r.stateNode;if(t)n=n.style,typeof n.setProperty=="function"?n.setProperty("display","none","important"):n.display="none";else{n=r.stateNode;var i=r.memoizedProps.style;i=i!=null&&i.hasOwnProperty("display")?i.display:null,n.style.display=HO("display",i)}}else if(r.tag===6)r.stateNode.nodeValue=t?"":r.memoizedProps;else if((r.tag!==23&&r.tag!==24||r.memoizedState===null||r===e)&&r.child!==null){r.child.return=r,r=r.child;continue}if(r===e)break;for(;r.sibling===null;){if(r.return===null||r.return===e)return;r=r.return}r.sibling.return=r.return,r=r.sibling}}function hE(e,t){if(ga&&typeof ga.onCommitFiberUnmount=="function")try{ga.onCommitFiberUnmount($x,t)}catch{}switch(t.tag){case 0:case 11:case 14:case 15:case 22:if(e=t.updateQueue,e!==null&&(e=e.lastEffect,e!==null)){var r=e=e.next;do{var n=r,i=n.destroy;if(n=n.tag,i!==void 0)if(n&4)sI(t,r);else{n=t;try{i()}catch(o){_o(n,o)}}r=r.next}while(r!==e)}break;case 1:if(cE(t),e=t.stateNode,typeof e.componentWillUnmount=="function")try{e.props=t.memoizedProps,e.state=t.memoizedState,e.componentWillUnmount()}catch(o){_o(t,o)}break;case 5:cE(t);break;case 4:Q2(e,t)}}function dE(e){e.alternate=null,e.child=null,e.dependencies=null,e.firstEffect=null,e.lastEffect=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.return=null,e.updateQueue=null}function pE(e){return e.tag===5||e.tag===3||e.tag===4}function mE(e){e:{for(var t=e.return;t!==null;){if(pE(t))break e;t=t.return}throw Error(J(160))}var r=t;switch(t=r.stateNode,r.tag){case 5:var n=!1;break;case 3:t=t.containerInfo,n=!0;break;case 4:t=t.containerInfo,n=!0;break;default:throw Error(J(161))}r.flags&16&&(qu(t,""),r.flags&=-17);e:t:for(r=e;;){for(;r.sibling===null;){if(r.return===null||pE(r.return)){r=null;break e}r=r.return}for(r.sibling.return=r.return,r=r.sibling;r.tag!==5&&r.tag!==6&&r.tag!==18;){if(r.flags&2||r.child===null||r.tag===4)continue t;r.child.return=r,r=r.child}if(!(r.flags&2)){r=r.stateNode;break e}}n?Fy(e,r,t):Dy(e,r,t)}function Fy(e,t,r){var n=e.tag,i=n===5||n===6;if(i)e=i?e.stateNode:e.stateNode.instance,t?r.nodeType===8?r.parentNode.insertBefore(e,t):r.insertBefore(e,t):(r.nodeType===8?(t=r.parentNode,t.insertBefore(e,r)):(t=r,t.appendChild(e)),r=r._reactRootContainer,r!=null||t.onclick!==null||(t.onclick=zh));else if(n!==4&&(e=e.child,e!==null))for(Fy(e,t,r),e=e.sibling;e!==null;)Fy(e,t,r),e=e.sibling}function Dy(e,t,r){var n=e.tag,i=n===5||n===6;if(i)e=i?e.stateNode:e.stateNode.instance,t?r.insertBefore(e,t):r.appendChild(e);else if(n!==4&&(e=e.child,e!==null))for(Dy(e,t,r),e=e.sibling;e!==null;)Dy(e,t,r),e=e.sibling}function Q2(e,t){for(var r=t,n=!1,i,o;;){if(!n){n=r.return;e:for(;;){if(n===null)throw Error(J(160));switch(i=n.stateNode,n.tag){case 5:o=!1;break e;case 3:i=i.containerInfo,o=!0;break e;case 4:i=i.containerInfo,o=!0;break e}n=n.return}n=!0}if(r.tag===5||r.tag===6){e:for(var a=e,s=r,l=s;;)if(hE(a,l),l.child!==null&&l.tag!==4)l.child.return=l,l=l.child;else{if(l===s)break e;for(;l.sibling===null;){if(l.return===null||l.return===s)break e;l=l.return}l.sibling.return=l.return,l=l.sibling}o?(a=i,s=r.stateNode,a.nodeType===8?a.parentNode.removeChild(s):a.removeChild(s)):i.removeChild(r.stateNode)}else if(r.tag===4){if(r.child!==null){i=r.stateNode.containerInfo,o=!0,r.child.return=r,r=r.child;continue}}else if(hE(e,r),r.child!==null){r.child.return=r,r=r.child;continue}if(r===t)break;for(;r.sibling===null;){if(r.return===null||r.return===t)return;r=r.return,r.tag===4&&(n=!1)}r.sibling.return=r.return,r=r.sibling}}function ev(e,t){switch(t.tag){case 0:case 11:case 14:case 15:case 22:var r=t.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var n=r=r.next;do(n.tag&3)===3&&(e=n.destroy,n.destroy=void 0,e!==void 0&&e()),n=n.next;while(n!==r)}return;case 1:return;case 5:if(r=t.stateNode,r!=null){n=t.memoizedProps;var i=e!==null?e.memoizedProps:n;e=t.type;var o=t.updateQueue;if(t.updateQueue=null,o!==null){for(r[Vh]=n,e==="input"&&n.type==="radio"&&n.name!=null&&$O(r,n),py(e,i),t=py(e,n),i=0;i<o.length;i+=2){var a=o[i],s=o[i+1];a==="style"?WO(r,s):a==="dangerouslySetInnerHTML"?VO(r,s):a==="children"?qu(r,s):_x(r,a,s,t)}switch(e){case"input":sy(r,n);break;case"textarea":GO(r,n);break;case"select":e=r._wrapperState.wasMultiple,r._wrapperState.wasMultiple=!!n.multiple,o=n.value,o!=null?Es(r,!!n.multiple,o,!1):e!==!!n.multiple&&(n.defaultValue!=null?Es(r,!!n.multiple,n.defaultValue,!0):Es(r,!!n.multiple,n.multiple?[]:"",!1))}}}return;case 6:if(t.stateNode===null)throw Error(J(162));t.stateNode.nodeValue=t.memoizedProps;return;case 3:r=t.stateNode,r.hydrate&&(r.hydrate=!1,r2(r.containerInfo));return;case 12:return;case 13:t.memoizedState!==null&&(rb=gr(),fE(t.child,!0)),vE(t);return;case 19:vE(t);return;case 17:return;case 23:case 24:fE(t,t.memoizedState!==null);return}throw Error(J(163))}function vE(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var r=e.stateNode;r===null&&(r=e.stateNode=new gB),t.forEach(function(n){var i=IB.bind(null,e,n);r.has(n)||(r.add(n),n.then(i,i))})}}function xB(e,t){return e!==null&&(e=e.memoizedState,e===null||e.dehydrated!==null)?(t=t.memoizedState,t!==null&&t.dehydrated===null):!1}var bB=Math.ceil,nd=La.ReactCurrentDispatcher,eb=La.ReactCurrentOwner,ve=0,Ar=null,zt=null,yr=0,Ca=0,Ny=Bo(0),sr=0,tp=null,ul=0,$c=0,cl=0,tb=0,By=null,rb=0,jy=1/0;function fl(){jy=gr()+500}var ae=null,id=!1,Uy=null,ni=null,Oo=!1,Lu=null,mu=90,$y=[],Gy=[],Ni=null,Fu=0,zy=null,hh=-1,Ii=0,dh=0,Du=null,ph=!1;function Kr(){return ve&48?gr():hh!==-1?hh:hh=gr()}function go(e){if(e=e.mode,!(e&2))return 1;if(!(e&4))return zs()===99?1:2;if(Ii===0&&(Ii=ul),lB.transition!==0){dh!==0&&(dh=By!==null?By.pendingLanes:0),e=Ii;var t=4186112&~dh;return t&=-t,t===0&&(e=4186112&~e,t=e&-e,t===0&&(t=8192)),t}return e=zs(),ve&4&&e===98?e=$h(12,Ii):(e=f3(e),e=$h(e,Ii)),e}function yo(e,t,r){if(50<Fu)throw Fu=0,zy=null,Error(J(185));if(e=rp(e,t),e===null)return null;qd(e,t,r),e===Ar&&(cl|=t,sr===4&&Is(e,yr));var n=zs();t===1?ve&8&&!(ve&48)?Vy(e):(xn(e,r),ve===0&&(fl(),yi())):(!(ve&4)||n!==98&&n!==99||(Ni===null?Ni=new Set([e]):Ni.add(e)),xn(e,r)),By=e}function rp(e,t){e.lanes|=t;var r=e.alternate;for(r!==null&&(r.lanes|=t),r=e,e=e.return;e!==null;)e.childLanes|=t,r=e.alternate,r!==null&&(r.childLanes|=t),r=e,e=e.return;return r.tag===3?r.stateNode:null}function xn(e,t){for(var r=e.callbackNode,n=e.suspendedLanes,i=e.pingedLanes,o=e.expirationTimes,a=e.pendingLanes;0<a;){var s=31-Po(a),l=1<<s,u=o[s];if(u===-1){if(!(l&n)||l&i){u=t,ss(l);var c=ot;o[s]=10<=c?u+250:6<=c?u+5e3:-1}}else u<=t&&(e.expiredLanes|=l);a&=~l}if(n=Ju(e,e===Ar?yr:0),t=ot,n===0)r!==null&&(r!==Ym&&Ty(r),e.callbackNode=null,e.callbackPriority=0);else{if(r!==null){if(e.callbackPriority===t)return;r!==Ym&&Ty(r)}t===15?(r=Vy.bind(null,e),Oi===null?(Oi=[r],fh=Gx(Qd,M2)):Oi.push(r),r=Ym):t===14?r=rc(99,Vy.bind(null,e)):(r=h3(t),r=rc(r,eI.bind(null,e))),e.callbackPriority=t,e.callbackNode=r}}function eI(e){if(hh=-1,dh=Ii=0,ve&48)throw Error(J(327));var t=e.callbackNode;if(jo()&&e.callbackNode!==t)return null;var r=Ju(e,e===Ar?yr:0);if(r===0)return null;var n=r,i=ve;ve|=16;var o=iI();(Ar!==e||yr!==n)&&(fl(),Ms(e,n));do try{EB();break}catch(s){nI(e,s)}while(1);if(zx(),nd.current=o,ve=i,zt!==null?n=0:(Ar=null,yr=0,n=sr),ul&cl)Ms(e,0);else if(n!==0){if(n===2&&(ve|=64,e.hydrate&&(e.hydrate=!1,Ux(e.containerInfo)),r=u2(e),r!==0&&(n=vu(e,r))),n===1)throw t=tp,Ms(e,0),Is(e,r),xn(e,gr()),t;switch(e.finishedWork=e.current.alternate,e.finishedLanes=r,n){case 0:case 1:throw Error(J(345));case 2:Zo(e);break;case 3:if(Is(e,r),(r&62914560)===r&&(n=rb+500-gr(),10<n)){if(Ju(e,0)!==0)break;if(i=e.suspendedLanes,(i&r)!==r){Kr(),e.pingedLanes|=e.suspendedLanes&i;break}e.timeoutHandle=Nw(Zo.bind(null,e),n);break}Zo(e);break;case 4:if(Is(e,r),(r&4186112)===r)break;for(n=e.eventTimes,i=-1;0<r;){var a=31-Po(r);o=1<<a,a=n[a],a>i&&(i=a),r&=~o}if(r=i,r=gr()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*bB(r/1960))-r,10<r){e.timeoutHandle=Nw(Zo.bind(null,e),r);break}Zo(e);break;case 5:Zo(e);break;default:throw Error(J(329))}}return xn(e,gr()),e.callbackNode===t?eI.bind(null,e):null}function Is(e,t){for(t&=~tb,t&=~cl,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var r=31-Po(t),n=1<<r;e[r]=-1,t&=~n}}function Vy(e){if(ve&48)throw Error(J(327));if(jo(),e===Ar&&e.expiredLanes&yr){var t=yr,r=vu(e,t);ul&cl&&(t=Ju(e,t),r=vu(e,t))}else t=Ju(e,0),r=vu(e,t);if(e.tag!==0&&r===2&&(ve|=64,e.hydrate&&(e.hydrate=!1,Ux(e.containerInfo)),t=u2(e),t!==0&&(r=vu(e,t))),r===1)throw r=tp,Ms(e,0),Is(e,t),xn(e,gr()),r;return e.finishedWork=e.current.alternate,e.finishedLanes=t,Zo(e),xn(e,gr()),null}function SB(){if(Ni!==null){var e=Ni;Ni=null,e.forEach(function(t){t.expiredLanes|=24&t.pendingLanes,xn(t,gr())})}yi()}function tI(e,t){var r=ve;ve|=1;try{return e(t)}finally{ve=r,ve===0&&(fl(),yi())}}function rI(e,t){var r=ve;ve&=-2,ve|=8;try{return e(t)}finally{ve=r,ve===0&&(fl(),yi())}}function yf(e,t){Ct(Ny,Ca),Ca|=t,ul|=t}function nb(){Ca=Ny.current,ht(Ny)}function Ms(e,t){e.finishedWork=null,e.finishedLanes=0;var r=e.timeoutHandle;if(r!==-1&&(e.timeoutHandle=-1,rB(r)),zt!==null)for(r=zt.return;r!==null;){var n=r;switch(n.tag){case 1:n=n.type.childContextTypes,n!=null&&Hh();break;case 3:Vs(),ht($r),ht(xr),Xx();break;case 5:Wx(n);break;case 4:Vs();break;case 13:ht(Tt);break;case 19:ht(Tt);break;case 10:Vx(n);break;case 23:case 24:nb()}r=r.return}Ar=e,zt=Io(e.current,null),yr=Ca=ul=t,sr=0,tp=null,tb=cl=$c=0}function nI(e,t){do{var r=zt;try{if(zx(),Ru.current=rd,Jh){for(var n=kt.memoizedState;n!==null;){var i=n.queue;i!==null&&(i.pending=null),n=n.next}Jh=!1}if(ac=0,or=mr=kt=null,ku=!1,eb.current=null,r===null||r.return===null){sr=1,tp=t,zt=null;break}e:{var o=e,a=r.return,s=r,l=t;if(t=yr,s.flags|=2048,s.firstEffect=s.lastEffect=null,l!==null&&typeof l=="object"&&typeof l.then=="function"){var u=l;if(!(s.mode&2)){var c=s.alternate;c?(s.updateQueue=c.updateQueue,s.memoizedState=c.memoizedState,s.lanes=c.lanes):(s.updateQueue=null,s.memoizedState=null)}var f=(Tt.current&1)!==0,h=a;do{var d;if(d=h.tag===13){var m=h.memoizedState;if(m!==null)d=m.dehydrated!==null;else{var g=h.memoizedProps;d=g.fallback===void 0?!1:g.unstable_avoidThisFallback!==!0?!0:!f}}if(d){var p=h.updateQueue;if(p===null){var v=new Set;v.add(u),h.updateQueue=v}else p.add(u);if(!(h.mode&2)){if(h.flags|=64,s.flags|=16384,s.flags&=-2981,s.tag===1)if(s.alternate===null)s.tag=17;else{var y=mo(-1,1);y.tag=2,vo(s,y)}s.lanes|=1;break e}l=void 0,s=t;var _=o.pingCache;if(_===null?(_=o.pingCache=new vB,l=new Set,_.set(u,l)):(l=_.get(u),l===void 0&&(l=new Set,_.set(u,l))),!l.has(s)){l.add(s);var x=OB.bind(null,o,u,s);u.then(x,x)}h.flags|=4096,h.lanes=t;break e}h=h.return}while(h!==null);l=Error((ws(s.type)||"A React component")+` suspended while rendering, but no fallback UI was specified.

Add a <Suspense fallback=...> component higher in the tree to provide a loading indicator or placeholder to display.`)}sr!==5&&(sr=2),l=Qx(l,s),h=a;do{switch(h.tag){case 3:o=l,h.flags|=4096,t&=-t,h.lanes|=t;var b=Z2(h,o,t);Vw(h,b);break e;case 1:o=l;var S=h.type,E=h.stateNode;if(!(h.flags&64)&&(typeof S.getDerivedStateFromError=="function"||E!==null&&typeof E.componentDidCatch=="function"&&(ni===null||!ni.has(E)))){h.flags|=4096,t&=-t,h.lanes|=t;var I=J2(h,o,t);Vw(h,I);break e}}h=h.return}while(h!==null)}aI(r)}catch(A){t=A,zt===r&&r!==null&&(zt=r=r.return);continue}break}while(1)}function iI(){var e=nd.current;return nd.current=rd,e===null?rd:e}function vu(e,t){var r=ve;ve|=16;var n=iI();Ar===e&&yr===t||Ms(e,t);do try{wB();break}catch(i){nI(e,i)}while(1);if(zx(),ve=r,nd.current=n,zt!==null)throw Error(J(261));return Ar=null,yr=0,sr}function wB(){for(;zt!==null;)oI(zt)}function EB(){for(;zt!==null&&!oB();)oI(zt)}function oI(e){var t=lI(e.alternate,e,Ca);e.memoizedProps=e.pendingProps,t===null?aI(e):zt=t,eb.current=null}function aI(e){var t=e;do{var r=t.alternate;if(e=t.return,t.flags&2048){if(r=mB(t),r!==null){r.flags&=2047,zt=r;return}e!==null&&(e.firstEffect=e.lastEffect=null,e.flags|=2048)}else{if(r=pB(r,t,Ca),r!==null){zt=r;return}if(r=t,r.tag!==24&&r.tag!==23||r.memoizedState===null||Ca&1073741824||!(r.mode&4)){for(var n=0,i=r.child;i!==null;)n|=i.lanes|i.childLanes,i=i.sibling;r.childLanes=n}e!==null&&!(e.flags&2048)&&(e.firstEffect===null&&(e.firstEffect=t.firstEffect),t.lastEffect!==null&&(e.lastEffect!==null&&(e.lastEffect.nextEffect=t.firstEffect),e.lastEffect=t.lastEffect),1<t.flags&&(e.lastEffect!==null?e.lastEffect.nextEffect=t:e.firstEffect=t,e.lastEffect=t))}if(t=t.sibling,t!==null){zt=t;return}zt=t=e}while(t!==null);sr===0&&(sr=5)}function Zo(e){var t=zs();return Ta(99,TB.bind(null,e,t)),null}function TB(e,t){do jo();while(Lu!==null);if(ve&48)throw Error(J(327));var r=e.finishedWork;if(r===null)return null;if(e.finishedWork=null,e.finishedLanes=0,r===e.current)throw Error(J(177));e.callbackNode=null;var n=r.lanes|r.childLanes,i=n,o=e.pendingLanes&~i;e.pendingLanes=i,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=i,e.mutableReadLanes&=i,e.entangledLanes&=i,i=e.entanglements;for(var a=e.eventTimes,s=e.expirationTimes;0<o;){var l=31-Po(o),u=1<<l;i[l]=0,a[l]=-1,s[l]=-1,o&=~u}if(Ni!==null&&!(n&24)&&Ni.has(e)&&Ni.delete(e),e===Ar&&(zt=Ar=null,yr=0),1<r.flags?r.lastEffect!==null?(r.lastEffect.nextEffect=r,n=r.firstEffect):n=r:n=r.firstEffect,n!==null){if(i=ve,ve|=32,eb.current=null,Wm=sh,a=Iw(),xy(a)){if("selectionStart"in a)s={start:a.selectionStart,end:a.selectionEnd};else e:if(s=(s=a.ownerDocument)&&s.defaultView||window,(u=s.getSelection&&s.getSelection())&&u.rangeCount!==0){s=u.anchorNode,o=u.anchorOffset,l=u.focusNode,u=u.focusOffset;try{s.nodeType,l.nodeType}catch{s=null;break e}var c=0,f=-1,h=-1,d=0,m=0,g=a,p=null;t:for(;;){for(var v;g!==s||o!==0&&g.nodeType!==3||(f=c+o),g!==l||u!==0&&g.nodeType!==3||(h=c+u),g.nodeType===3&&(c+=g.nodeValue.length),(v=g.firstChild)!==null;)p=g,g=v;for(;;){if(g===a)break t;if(p===s&&++d===o&&(f=c),p===l&&++m===u&&(h=c),(v=g.nextSibling)!==null)break;g=p,p=g.parentNode}g=v}s=f===-1||h===-1?null:{start:f,end:h}}else s=null;s=s||{start:0,end:0}}else s=null;Xm={focusedElem:a,selectionRange:s},sh=!1,Du=null,ph=!1,ae=n;do try{CB()}catch(A){if(ae===null)throw Error(J(330));_o(ae,A),ae=ae.nextEffect}while(ae!==null);Du=null,ae=n;do try{for(a=e;ae!==null;){var y=ae.flags;if(y&16&&qu(ae.stateNode,""),y&128){var _=ae.alternate;if(_!==null){var x=_.ref;x!==null&&(typeof x=="function"?x(null):x.current=null)}}switch(y&1038){case 2:mE(ae),ae.flags&=-3;break;case 6:mE(ae),ae.flags&=-3,ev(ae.alternate,ae);break;case 1024:ae.flags&=-1025;break;case 1028:ae.flags&=-1025,ev(ae.alternate,ae);break;case 4:ev(ae.alternate,ae);break;case 8:s=ae,Q2(a,s);var b=s.alternate;dE(s),b!==null&&dE(b)}ae=ae.nextEffect}}catch(A){if(ae===null)throw Error(J(330));_o(ae,A),ae=ae.nextEffect}while(ae!==null);if(x=Xm,_=Iw(),y=x.focusedElem,a=x.selectionRange,_!==y&&y&&y.ownerDocument&&g2(y.ownerDocument.documentElement,y)){for(a!==null&&xy(y)&&(_=a.start,x=a.end,x===void 0&&(x=_),"selectionStart"in y?(y.selectionStart=_,y.selectionEnd=Math.min(x,y.value.length)):(x=(_=y.ownerDocument||document)&&_.defaultView||window,x.getSelection&&(x=x.getSelection(),s=y.textContent.length,b=Math.min(a.start,s),a=a.end===void 0?b:Math.min(a.end,s),!x.extend&&b>a&&(s=a,a=b,b=s),s=Ow(y,b),o=Ow(y,a),s&&o&&(x.rangeCount!==1||x.anchorNode!==s.node||x.anchorOffset!==s.offset||x.focusNode!==o.node||x.focusOffset!==o.offset)&&(_=_.createRange(),_.setStart(s.node,s.offset),x.removeAllRanges(),b>a?(x.addRange(_),x.extend(o.node,o.offset)):(_.setEnd(o.node,o.offset),x.addRange(_)))))),_=[],x=y;x=x.parentNode;)x.nodeType===1&&_.push({element:x,left:x.scrollLeft,top:x.scrollTop});for(typeof y.focus=="function"&&y.focus(),y=0;y<_.length;y++)x=_[y],x.element.scrollLeft=x.left,x.element.scrollTop=x.top}sh=!!Wm,Xm=Wm=null,e.current=r,ae=n;do try{for(y=e;ae!==null;){var S=ae.flags;if(S&36&&_B(y,ae.alternate,ae),S&128){_=void 0;var E=ae.ref;if(E!==null){var I=ae.stateNode;switch(ae.tag){case 5:_=I;break;default:_=I}typeof E=="function"?E(_):E.current=_}}ae=ae.nextEffect}}catch(A){if(ae===null)throw Error(J(330));_o(ae,A),ae=ae.nextEffect}while(ae!==null);ae=null,sB(),ve=i}else e.current=r;if(Oo)Oo=!1,Lu=e,mu=t;else for(ae=n;ae!==null;)t=ae.nextEffect,ae.nextEffect=null,ae.flags&8&&(S=ae,S.sibling=null,S.stateNode=null),ae=t;if(n=e.pendingLanes,n===0&&(ni=null),n===1?e===zy?Fu++:(Fu=0,zy=e):Fu=0,r=r.stateNode,ga&&typeof ga.onCommitFiberRoot=="function")try{ga.onCommitFiberRoot($x,r,void 0,(r.current.flags&64)===64)}catch{}if(xn(e,gr()),id)throw id=!1,e=Uy,Uy=null,e;return ve&8||yi(),null}function CB(){for(;ae!==null;){var e=ae.alternate;ph||Du===null||(ae.flags&8?mw(ae,Du)&&(ph=!0):ae.tag===13&&xB(e,ae)&&mw(ae,Du)&&(ph=!0));var t=ae.flags;t&256&&yB(e,ae),!(t&512)||Oo||(Oo=!0,rc(97,function(){return jo(),null})),ae=ae.nextEffect}}function jo(){if(mu!==90){var e=97<mu?97:mu;return mu=90,Ta(e,AB)}return!1}function PB(e,t){$y.push(t,e),Oo||(Oo=!0,rc(97,function(){return jo(),null}))}function sI(e,t){Gy.push(t,e),Oo||(Oo=!0,rc(97,function(){return jo(),null}))}function AB(){if(Lu===null)return!1;var e=Lu;if(Lu=null,ve&48)throw Error(J(331));var t=ve;ve|=32;var r=Gy;Gy=[];for(var n=0;n<r.length;n+=2){var i=r[n],o=r[n+1],a=i.destroy;if(i.destroy=void 0,typeof a=="function")try{a()}catch(l){if(o===null)throw Error(J(330));_o(o,l)}}for(r=$y,$y=[],n=0;n<r.length;n+=2){i=r[n],o=r[n+1];try{var s=i.create;i.destroy=s()}catch(l){if(o===null)throw Error(J(330));_o(o,l)}}for(s=e.current.firstEffect;s!==null;)e=s.nextEffect,s.nextEffect=null,s.flags&8&&(s.sibling=null,s.stateNode=null),s=e;return ve=t,yi(),!0}function gE(e,t,r){t=Qx(r,t),t=Z2(e,t,1),vo(e,t),t=Kr(),e=rp(e,1),e!==null&&(qd(e,1,t),xn(e,t))}function _o(e,t){if(e.tag===3)gE(e,e,t);else for(var r=e.return;r!==null;){if(r.tag===3){gE(r,e,t);break}else if(r.tag===1){var n=r.stateNode;if(typeof r.type.getDerivedStateFromError=="function"||typeof n.componentDidCatch=="function"&&(ni===null||!ni.has(n))){e=Qx(t,e);var i=J2(r,e,1);if(vo(r,i),i=Kr(),r=rp(r,1),r!==null)qd(r,1,i),xn(r,i);else if(typeof n.componentDidCatch=="function"&&(ni===null||!ni.has(n)))try{n.componentDidCatch(t,e)}catch{}break}}r=r.return}}function OB(e,t,r){var n=e.pingCache;n!==null&&n.delete(t),t=Kr(),e.pingedLanes|=e.suspendedLanes&r,Ar===e&&(yr&r)===r&&(sr===4||sr===3&&(yr&62914560)===yr&&500>gr()-rb?Ms(e,0):tb|=r),xn(e,t)}function IB(e,t){var r=e.stateNode;r!==null&&r.delete(t),t=0,t===0&&(t=e.mode,t&2?t&4?(Ii===0&&(Ii=ul),t=ls(62914560&~Ii),t===0&&(t=4194304)):t=zs()===99?1:2:t=1),r=Kr(),e=rp(e,t),e!==null&&(qd(e,t,r),xn(e,r))}var lI;lI=function(e,t,r){var n=t.lanes;if(e!==null)if(e.memoizedProps!==t.pendingProps||$r.current)kn=!0;else if(r&n)kn=!!(e.flags&16384);else{switch(kn=!1,t.tag){case 3:nE(t),Zm();break;case 5:qw(t);break;case 1:Gr(t.type)&&ch(t);break;case 4:Ay(t,t.stateNode.containerInfo);break;case 10:n=t.memoizedProps.value;var i=t.type._context;Ct(Wh,i._currentValue),i._currentValue=n;break;case 13:if(t.memoizedState!==null)return r&t.child.childLanes?iE(e,t,r):(Ct(Tt,Tt.current&1),t=ki(e,t,r),t!==null?t.sibling:null);Ct(Tt,Tt.current&1);break;case 19:if(n=(r&t.childLanes)!==0,e.flags&64){if(n)return uE(e,t,r);t.flags|=64}if(i=t.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),Ct(Tt,Tt.current),n)break;return null;case 23:case 24:return t.lanes=0,Jm(e,t,r)}return ki(e,t,r)}else kn=!1;switch(t.lanes=0,t.tag){case 2:if(n=t.type,e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2),e=t.pendingProps,i=Gs(t,xr.current),As(t,r),i=Yx(null,t,n,e,i,r),t.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0){if(t.tag=1,t.memoizedState=null,t.updateQueue=null,Gr(n)){var o=!0;ch(t)}else o=!1;t.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,Hx(t);var a=n.getDerivedStateFromProps;typeof a=="function"&&Yh(t,n,a,e),i.updater=ep,t.stateNode=i,i._reactInternals=t,Py(t,n,e,r),t=Ry(null,t,n,!0,o,r)}else t.tag=0,Fr(null,t,i,r),t=t.child;return t;case 16:i=t.elementType;e:{switch(e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2),e=t.pendingProps,o=i._init,i=o(i._payload),t.type=i,o=t.tag=RB(i),e=Mn(i,e),o){case 0:t=My(null,t,i,e,r);break e;case 1:t=rE(null,t,i,e,r);break e;case 11:t=eE(null,t,i,e,r);break e;case 14:t=tE(null,t,i,Mn(i.type,e),n,r);break e}throw Error(J(306,i,""))}return t;case 0:return n=t.type,i=t.pendingProps,i=t.elementType===n?i:Mn(n,i),My(e,t,n,i,r);case 1:return n=t.type,i=t.pendingProps,i=t.elementType===n?i:Mn(n,i),rE(e,t,n,i,r);case 3:if(nE(t),n=t.updateQueue,e===null||n===null)throw Error(J(282));if(n=t.pendingProps,i=t.memoizedState,i=i!==null?i.element:null,k2(e,t),nc(t,n,null,r),n=t.memoizedState.element,n===i)Zm(),t=ki(e,t,r);else{if(i=t.stateNode,(o=i.hydrate)&&(lo=Ps(t.stateNode.containerInfo.firstChild),Ri=t,o=si=!0),o){if(e=i.mutableSourceEagerHydrationData,e!=null)for(i=0;i<e.length;i+=2)o=e[i],o._workInProgressVersionPrimary=e[i+1],Os.push(o);for(r=N2(t,null,n,r),t.child=r;r;)r.flags=r.flags&-3|1024,r=r.sibling}else Fr(e,t,n,r),Zm();t=t.child}return t;case 5:return qw(t),e===null&&Oy(t),n=t.type,i=t.pendingProps,o=e!==null?e.memoizedProps:null,a=i.children,wy(n,i)?a=null:o!==null&&wy(n,o)&&(t.flags|=16),X2(e,t),Fr(e,t,a,r),t.child;case 6:return e===null&&Oy(t),null;case 13:return iE(e,t,r);case 4:return Ay(t,t.stateNode.containerInfo),n=t.pendingProps,e===null?t.child=Kh(t,null,n,r):Fr(e,t,n,r),t.child;case 11:return n=t.type,i=t.pendingProps,i=t.elementType===n?i:Mn(n,i),eE(e,t,n,i,r);case 7:return Fr(e,t,t.pendingProps,r),t.child;case 8:return Fr(e,t,t.pendingProps.children,r),t.child;case 12:return Fr(e,t,t.pendingProps.children,r),t.child;case 10:e:{n=t.type._context,i=t.pendingProps,a=t.memoizedProps,o=i.value;var s=t.type._context;if(Ct(Wh,s._currentValue),s._currentValue=o,a!==null)if(s=a.value,o=fn(s,o)?0:(typeof n._calculateChangedBits=="function"?n._calculateChangedBits(s,o):1073741823)|0,o===0){if(a.children===i.children&&!$r.current){t=ki(e,t,r);break e}}else for(s=t.child,s!==null&&(s.return=t);s!==null;){var l=s.dependencies;if(l!==null){a=s.child;for(var u=l.firstContext;u!==null;){if(u.context===n&&u.observedBits&o){s.tag===1&&(u=mo(-1,r&-r),u.tag=2,vo(s,u)),s.lanes|=r,u=s.alternate,u!==null&&(u.lanes|=r),R2(s.return,r),l.lanes|=r;break}u=u.next}}else a=s.tag===10&&s.type===t.type?null:s.child;if(a!==null)a.return=s;else for(a=s;a!==null;){if(a===t){a=null;break}if(s=a.sibling,s!==null){s.return=a.return,a=s;break}a=a.return}s=a}Fr(e,t,i.children,r),t=t.child}return t;case 9:return i=t.type,o=t.pendingProps,n=o.children,As(t,r),i=_n(i,o.unstable_observedBits),n=n(i),t.flags|=1,Fr(e,t,n,r),t.child;case 14:return i=t.type,o=Mn(i,t.pendingProps),o=Mn(i.type,o),tE(e,t,i,o,n,r);case 15:return W2(e,t,t.type,t.pendingProps,n,r);case 17:return n=t.type,i=t.pendingProps,i=t.elementType===n?i:Mn(n,i),e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2),t.tag=1,Gr(n)?(e=!0,ch(t)):e=!1,As(t,r),F2(t,n,i),Py(t,n,i,r),Ry(null,t,n,!0,e,r);case 19:return uE(e,t,r);case 23:return Jm(e,t,r);case 24:return Jm(e,t,r)}throw Error(J(156,t.tag))};function MB(e,t,r,n){this.tag=e,this.key=r,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=n,this.flags=0,this.lastEffect=this.firstEffect=this.nextEffect=null,this.childLanes=this.lanes=0,this.alternate=null}function hn(e,t,r,n){return new MB(e,t,r,n)}function ib(e){return e=e.prototype,!(!e||!e.isReactComponent)}function RB(e){if(typeof e=="function")return ib(e)?1:0;if(e!=null){if(e=e.$$typeof,e===Hd)return 11;if(e===Wd)return 14}return 2}function Io(e,t){var r=e.alternate;return r===null?(r=hn(e.tag,t,e.key,e.mode),r.elementType=e.elementType,r.type=e.type,r.stateNode=e.stateNode,r.alternate=e,e.alternate=r):(r.pendingProps=t,r.type=e.type,r.flags=0,r.nextEffect=null,r.firstEffect=null,r.lastEffect=null),r.childLanes=e.childLanes,r.lanes=e.lanes,r.child=e.child,r.memoizedProps=e.memoizedProps,r.memoizedState=e.memoizedState,r.updateQueue=e.updateQueue,t=e.dependencies,r.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},r.sibling=e.sibling,r.index=e.index,r.ref=e.ref,r}function mh(e,t,r,n,i,o){var a=2;if(n=e,typeof e=="function")ib(e)&&(a=1);else if(typeof e=="string")a=5;else e:switch(e){case to:return Rs(r.children,i,o,t);case BO:a=8,i|=16;break;case xx:a=8,i|=1;break;case Tu:return e=hn(12,r,t,i|8),e.elementType=Tu,e.type=Tu,e.lanes=o,e;case Cu:return e=hn(13,r,t,i),e.type=Cu,e.elementType=Cu,e.lanes=o,e;case Nh:return e=hn(19,r,t,i),e.elementType=Nh,e.lanes=o,e;case Cx:return ob(r,i,o,t);case oy:return e=hn(24,r,t,i),e.elementType=oy,e.lanes=o,e;default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case bx:a=10;break e;case Sx:a=9;break e;case Hd:a=11;break e;case Wd:a=14;break e;case wx:a=16,n=null;break e;case Ex:a=22;break e}throw Error(J(130,e==null?e:typeof e,""))}return t=hn(a,r,t,i),t.elementType=e,t.type=n,t.lanes=o,t}function Rs(e,t,r,n){return e=hn(7,e,n,t),e.lanes=r,e}function ob(e,t,r,n){return e=hn(23,e,n,t),e.elementType=Cx,e.lanes=r,e}function tv(e,t,r){return e=hn(6,e,null,t),e.lanes=r,e}function rv(e,t,r){return t=hn(4,e.children!==null?e.children:[],e.key,t),t.lanes=r,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function kB(e,t,r){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.pendingContext=this.context=null,this.hydrate=r,this.callbackNode=null,this.callbackPriority=0,this.eventTimes=jm(0),this.expirationTimes=jm(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=jm(0),this.mutableSourceEagerHydrationData=null}function LB(e,t,r){var n=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:ua,key:n==null?null:""+n,children:e,containerInfo:t,implementation:r}}function od(e,t,r,n){var i=t.current,o=Kr(),a=go(i);e:if(r){r=r._reactInternals;t:{if(Fa(r)!==r||r.tag!==1)throw Error(J(170));var s=r;do{switch(s.tag){case 3:s=s.stateNode.context;break t;case 1:if(Gr(s.type)){s=s.stateNode.__reactInternalMemoizedMergedChildContext;break t}}s=s.return}while(s!==null);throw Error(J(171))}if(r.tag===1){var l=r.type;if(Gr(l)){r=T2(r,l,s);break e}}r=s}else r=Ao;return t.context===null?t.context=r:t.pendingContext=r,t=mo(o,a),t.payload={element:e},n=n===void 0?null:n,n!==null&&(t.callback=n),vo(i,t),yo(i,a,o),a}function nv(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function yE(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var r=e.retryLane;e.retryLane=r!==0&&r<t?r:t}}function ab(e,t){yE(e,t),(e=e.alternate)&&yE(e,t)}function FB(){return null}function sb(e,t,r){var n=r!=null&&r.hydrationOptions!=null&&r.hydrationOptions.mutableSources||null;if(r=new kB(e,t,r!=null&&r.hydrate===!0),t=hn(3,null,null,t===2?7:t===1?3:0),r.current=t,t.stateNode=r,Hx(t),e[ll]=r.current,x2(e.nodeType===8?e.parentNode:e),n)for(e=0;e<n.length;e++){t=n[e];var i=t._getVersion;i=i(t._source),r.mutableSourceEagerHydrationData==null?r.mutableSourceEagerHydrationData=[t,i]:r.mutableSourceEagerHydrationData.push(t,i)}this._internalRoot=r}sb.prototype.render=function(e){od(e,this._internalRoot,null,null)};sb.prototype.unmount=function(){var e=this._internalRoot,t=e.containerInfo;od(null,e,null,function(){t[ll]=null})};function Gc(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function DB(e,t){if(t||(t=e?e.nodeType===9?e.documentElement:e.firstChild:null,t=!(!t||t.nodeType!==1||!t.hasAttribute("data-reactroot"))),!t)for(var r;r=e.lastChild;)e.removeChild(r);return new sb(e,0,t?{hydrate:!0}:void 0)}function np(e,t,r,n,i){var o=r._reactRootContainer;if(o){var a=o._internalRoot;if(typeof i=="function"){var s=i;i=function(){var u=nv(a);s.call(u)}}od(t,a,e,i)}else{if(o=r._reactRootContainer=DB(r,n),a=o._internalRoot,typeof i=="function"){var l=i;i=function(){var u=nv(a);l.call(u)}}rI(function(){od(t,a,e,i)})}return nv(a)}QO=function(e){if(e.tag===13){var t=Kr();yo(e,4,t),ab(e,4)}};Mx=function(e){if(e.tag===13){var t=Kr();yo(e,67108864,t),ab(e,67108864)}};e2=function(e){if(e.tag===13){var t=Kr(),r=go(e);yo(e,r,t),ab(e,r)}};t2=function(e,t){return t()};my=function(e,t,r){switch(t){case"input":if(sy(e,r),t=r.name,r.type==="radio"&&t!=null){for(r=e;r.parentNode;)r=r.parentNode;for(r=r.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<r.length;t++){var n=r[t];if(n!==e&&n.form===e.form){var i=Jd(n);if(!i)throw Error(J(90));UO(n),sy(n,i)}}}break;case"textarea":GO(e,r);break;case"select":t=r.value,t!=null&&Es(e,!!r.multiple,t,!1)}};Ax=tI;YO=function(e,t,r,n,i){var o=ve;ve|=4;try{return Ta(98,e.bind(null,t,r,n,i))}finally{ve=o,ve===0&&(fl(),yi())}};Ox=function(){!(ve&49)&&(SB(),jo())};KO=function(e,t){var r=ve;ve|=2;try{return e(t)}finally{ve=r,ve===0&&(fl(),yi())}};function uI(e,t){var r=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Gc(t))throw Error(J(200));return LB(e,t,null,r)}var NB={Events:[jc,ps,Jd,XO,qO,jo,{current:!1}]},Wl={findFiberByHostInstance:fa,bundleType:0,version:"17.0.2",rendererPackageName:"react-dom"},BB={bundleType:Wl.bundleType,version:Wl.version,rendererPackageName:Wl.rendererPackageName,rendererConfig:Wl.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:La.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=JO(e),e===null?null:e.stateNode},findFiberByHostInstance:Wl.findFiberByHostInstance||FB,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var _f=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!_f.isDisabled&&_f.supportsFiber)try{$x=_f.inject(BB),ga=_f}catch{}}wn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=NB;wn.createPortal=uI;wn.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(J(188)):Error(J(268,Object.keys(e)));return e=JO(t),e=e===null?null:e.stateNode,e};wn.flushSync=function(e,t){var r=ve;if(r&48)return e(t);ve|=1;try{if(e)return Ta(99,e.bind(null,t))}finally{ve=r,yi()}};wn.hydrate=function(e,t,r){if(!Gc(t))throw Error(J(200));return np(null,e,t,!0,r)};wn.render=function(e,t,r){if(!Gc(t))throw Error(J(200));return np(null,e,t,!1,r)};wn.unmountComponentAtNode=function(e){if(!Gc(e))throw Error(J(40));return e._reactRootContainer?(rI(function(){np(null,null,e,!1,function(){e._reactRootContainer=null,e[ll]=null})}),!0):!1};wn.unstable_batchedUpdates=tI;wn.unstable_createPortal=function(e,t){return uI(e,t,2<arguments.length&&arguments[2]!==void 0?arguments[2]:null)};wn.unstable_renderSubtreeIntoContainer=function(e,t,r,n){if(!Gc(r))throw Error(J(200));if(e==null||e._reactInternals===void 0)throw Error(J(38));return np(e,t,r,!1,n)};wn.version="17.0.2";function cI(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(cI)}catch(e){console.error(e)}}cI(),LO.exports=wn;var fI=LO.exports;const di=Sr(fI);const jB="_Title_main_xpe81_1",UB="_Title_buttonList_xpe81_8",$B="_Title_button_xpe81_8",GB="_Title_button_text_xpe81_41",zB="_Title_backup_background_xpe81_48",Wr={Title_main:jB,Title_buttonList:UB,Title_button:$B,Title_button_text:GB,Title_backup_background:zB};function Rn(e){for(var t=arguments.length,r=Array(t>1?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];throw Error("[Immer] minified error nr: "+e+(r.length?" "+r.map(function(i){return"'"+i+"'"}).join(","):"")+". Find the full error at: https://bit.ly/3cXEKWf")}function Mo(e){return!!e&&!!e[mt]}function $i(e){var t;return!!e&&(function(r){if(!r||typeof r!="object")return!1;var n=Object.getPrototypeOf(r);if(n===null)return!0;var i=Object.hasOwnProperty.call(n,"constructor")&&n.constructor;return i===Object||typeof i=="function"&&Function.toString.call(i)===JB}(e)||Array.isArray(e)||!!e[TE]||!!(!((t=e.constructor)===null||t===void 0)&&t[TE])||lb(e)||ub(e))}function Pa(e,t,r){r===void 0&&(r=!1),hl(e)===0?(r?Object.keys:Ls)(e).forEach(function(n){r&&typeof n=="symbol"||t(n,e[n],e)}):e.forEach(function(n,i){return t(i,n,e)})}function hl(e){var t=e[mt];return t?t.i>3?t.i-4:t.i:Array.isArray(e)?1:lb(e)?2:ub(e)?3:0}function ks(e,t){return hl(e)===2?e.has(t):Object.prototype.hasOwnProperty.call(e,t)}function VB(e,t){return hl(e)===2?e.get(t):e[t]}function hI(e,t,r){var n=hl(e);n===2?e.set(t,r):n===3?e.add(r):e[t]=r}function dI(e,t){return e===t?e!==0||1/e==1/t:e!=e&&t!=t}function lb(e){return KB&&e instanceof Map}function ub(e){return ZB&&e instanceof Set}function Jo(e){return e.o||e.t}function cb(e){if(Array.isArray(e))return Array.prototype.slice.call(e);var t=mI(e);delete t[mt];for(var r=Ls(t),n=0;n<r.length;n++){var i=r[n],o=t[i];o.writable===!1&&(o.writable=!0,o.configurable=!0),(o.get||o.set)&&(t[i]={configurable:!0,writable:!0,enumerable:o.enumerable,value:e[i]})}return Object.create(Object.getPrototypeOf(e),t)}function fb(e,t){return t===void 0&&(t=!1),hb(e)||Mo(e)||!$i(e)||(hl(e)>1&&(e.set=e.add=e.clear=e.delete=HB),Object.freeze(e),t&&Pa(e,function(r,n){return fb(n,!0)},!0)),e}function HB(){Rn(2)}function hb(e){return e==null||typeof e!="object"||Object.isFrozen(e)}function li(e){var t=qy[e];return t||Rn(18,e),t}function WB(e,t){qy[e]||(qy[e]=t)}function Hy(){return sc}function iv(e,t){t&&(li("Patches"),e.u=[],e.s=[],e.v=t)}function ad(e){Wy(e),e.p.forEach(XB),e.p=null}function Wy(e){e===sc&&(sc=e.l)}function _E(e){return sc={p:[],l:sc,h:e,m:!0,_:0}}function XB(e){var t=e[mt];t.i===0||t.i===1?t.j():t.g=!0}function ov(e,t){t._=t.p.length;var r=t.p[0],n=e!==void 0&&e!==r;return t.h.O||li("ES5").S(t,e,n),n?(r[mt].P&&(ad(t),Rn(4)),$i(e)&&(e=sd(t,e),t.l||ld(t,e)),t.u&&li("Patches").M(r[mt].t,e,t.u,t.s)):e=sd(t,r,[]),ad(t),t.u&&t.v(t.u,t.s),e!==pI?e:void 0}function sd(e,t,r){if(hb(t))return t;var n=t[mt];if(!n)return Pa(t,function(s,l){return xE(e,n,t,s,l,r)},!0),t;if(n.A!==e)return t;if(!n.P)return ld(e,n.t,!0),n.t;if(!n.I){n.I=!0,n.A._--;var i=n.i===4||n.i===5?n.o=cb(n.k):n.o,o=i,a=!1;n.i===3&&(o=new Set(i),i.clear(),a=!0),Pa(o,function(s,l){return xE(e,n,i,s,l,r,a)}),ld(e,i,!1),r&&e.u&&li("Patches").N(n,r,e.u,e.s)}return n.o}function xE(e,t,r,n,i,o,a){if(Mo(i)){var s=sd(e,i,o&&t&&t.i!==3&&!ks(t.R,n)?o.concat(n):void 0);if(hI(r,n,s),!Mo(s))return;e.m=!1}else a&&r.add(i);if($i(i)&&!hb(i)){if(!e.h.D&&e._<1)return;sd(e,i),t&&t.A.l||ld(e,i)}}function ld(e,t,r){r===void 0&&(r=!1),!e.l&&e.h.D&&e.m&&fb(t,r)}function av(e,t){var r=e[mt];return(r?Jo(r):e)[t]}function bE(e,t){if(t in e)for(var r=Object.getPrototypeOf(e);r;){var n=Object.getOwnPropertyDescriptor(r,t);if(n)return n;r=Object.getPrototypeOf(r)}}function ro(e){e.P||(e.P=!0,e.l&&ro(e.l))}function sv(e){e.o||(e.o=cb(e.t))}function Xy(e,t,r){var n=lb(t)?li("MapSet").F(t,r):ub(t)?li("MapSet").T(t,r):e.O?function(i,o){var a=Array.isArray(i),s={i:a?1:0,A:o?o.A:Hy(),P:!1,I:!1,R:{},l:o,t:i,k:null,o:null,j:null,C:!1},l=s,u=lc;a&&(l=[s],u=gu);var c=Proxy.revocable(l,u),f=c.revoke,h=c.proxy;return s.k=h,s.j=f,h}(t,r):li("ES5").J(t,r);return(r?r.A:Hy()).p.push(n),n}function qB(e){return Mo(e)||Rn(22,e),function t(r){if(!$i(r))return r;var n,i=r[mt],o=hl(r);if(i){if(!i.P&&(i.i<4||!li("ES5").K(i)))return i.t;i.I=!0,n=SE(r,o),i.I=!1}else n=SE(r,o);return Pa(n,function(a,s){i&&VB(i.t,a)===s||hI(n,a,t(s))}),o===3?new Set(n):n}(e)}function SE(e,t){switch(t){case 2:return new Map(e);case 3:return Array.from(e)}return cb(e)}function YB(){function e(o,a){var s=i[o];return s?s.enumerable=a:i[o]=s={configurable:!0,enumerable:a,get:function(){var l=this[mt];return lc.get(l,o)},set:function(l){var u=this[mt];lc.set(u,o,l)}},s}function t(o){for(var a=o.length-1;a>=0;a--){var s=o[a][mt];if(!s.P)switch(s.i){case 5:n(s)&&ro(s);break;case 4:r(s)&&ro(s)}}}function r(o){for(var a=o.t,s=o.k,l=Ls(s),u=l.length-1;u>=0;u--){var c=l[u];if(c!==mt){var f=a[c];if(f===void 0&&!ks(a,c))return!0;var h=s[c],d=h&&h[mt];if(d?d.t!==f:!dI(h,f))return!0}}var m=!!a[mt];return l.length!==Ls(a).length+(m?0:1)}function n(o){var a=o.k;if(a.length!==o.t.length)return!0;var s=Object.getOwnPropertyDescriptor(a,a.length-1);if(s&&!s.get)return!0;for(var l=0;l<a.length;l++)if(!a.hasOwnProperty(l))return!0;return!1}var i={};WB("ES5",{J:function(o,a){var s=Array.isArray(o),l=function(c,f){if(c){for(var h=Array(f.length),d=0;d<f.length;d++)Object.defineProperty(h,""+d,e(d,!0));return h}var m=mI(f);delete m[mt];for(var g=Ls(m),p=0;p<g.length;p++){var v=g[p];m[v]=e(v,c||!!m[v].enumerable)}return Object.create(Object.getPrototypeOf(f),m)}(s,o),u={i:s?5:4,A:a?a.A:Hy(),P:!1,I:!1,R:{},l:a,t:o,k:l,o:null,g:!1,C:!1};return Object.defineProperty(l,mt,{value:u,writable:!0}),l},S:function(o,a,s){s?Mo(a)&&a[mt].A===o&&t(o.p):(o.u&&function l(u){if(u&&typeof u=="object"){var c=u[mt];if(c){var f=c.t,h=c.k,d=c.R,m=c.i;if(m===4)Pa(h,function(_){_!==mt&&(f[_]!==void 0||ks(f,_)?d[_]||l(h[_]):(d[_]=!0,ro(c)))}),Pa(f,function(_){h[_]!==void 0||ks(h,_)||(d[_]=!1,ro(c))});else if(m===5){if(n(c)&&(ro(c),d.length=!0),h.length<f.length)for(var g=h.length;g<f.length;g++)d[g]=!1;else for(var p=f.length;p<h.length;p++)d[p]=!0;for(var v=Math.min(h.length,f.length),y=0;y<v;y++)h.hasOwnProperty(y)||(d[y]=!0),d[y]===void 0&&l(h[y])}}}}(o.p[0]),t(o.p))},K:function(o){return o.i===4?r(o):n(o)}})}var wE,sc,db=typeof Symbol<"u"&&typeof Symbol("x")=="symbol",KB=typeof Map<"u",ZB=typeof Set<"u",EE=typeof Proxy<"u"&&Proxy.revocable!==void 0&&typeof Reflect<"u",pI=db?Symbol.for("immer-nothing"):((wE={})["immer-nothing"]=!0,wE),TE=db?Symbol.for("immer-draftable"):"__$immer_draftable",mt=db?Symbol.for("immer-state"):"__$immer_state",JB=""+Object.prototype.constructor,Ls=typeof Reflect<"u"&&Reflect.ownKeys?Reflect.ownKeys:Object.getOwnPropertySymbols!==void 0?function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:Object.getOwnPropertyNames,mI=Object.getOwnPropertyDescriptors||function(e){var t={};return Ls(e).forEach(function(r){t[r]=Object.getOwnPropertyDescriptor(e,r)}),t},qy={},lc={get:function(e,t){if(t===mt)return e;var r=Jo(e);if(!ks(r,t))return function(i,o,a){var s,l=bE(o,a);return l?"value"in l?l.value:(s=l.get)===null||s===void 0?void 0:s.call(i.k):void 0}(e,r,t);var n=r[t];return e.I||!$i(n)?n:n===av(e.t,t)?(sv(e),e.o[t]=Xy(e.A.h,n,e)):n},has:function(e,t){return t in Jo(e)},ownKeys:function(e){return Reflect.ownKeys(Jo(e))},set:function(e,t,r){var n=bE(Jo(e),t);if(n!=null&&n.set)return n.set.call(e.k,r),!0;if(!e.P){var i=av(Jo(e),t),o=i==null?void 0:i[mt];if(o&&o.t===r)return e.o[t]=r,e.R[t]=!1,!0;if(dI(r,i)&&(r!==void 0||ks(e.t,t)))return!0;sv(e),ro(e)}return e.o[t]===r&&(r!==void 0||t in e.o)||Number.isNaN(r)&&Number.isNaN(e.o[t])||(e.o[t]=r,e.R[t]=!0),!0},deleteProperty:function(e,t){return av(e.t,t)!==void 0||t in e.t?(e.R[t]=!1,sv(e),ro(e)):delete e.R[t],e.o&&delete e.o[t],!0},getOwnPropertyDescriptor:function(e,t){var r=Jo(e),n=Reflect.getOwnPropertyDescriptor(r,t);return n&&{writable:!0,configurable:e.i!==1||t!=="length",enumerable:n.enumerable,value:r[t]}},defineProperty:function(){Rn(11)},getPrototypeOf:function(e){return Object.getPrototypeOf(e.t)},setPrototypeOf:function(){Rn(12)}},gu={};Pa(lc,function(e,t){gu[e]=function(){return arguments[0]=arguments[0][0],t.apply(this,arguments)}}),gu.deleteProperty=function(e,t){return gu.set.call(this,e,t,void 0)},gu.set=function(e,t,r){return lc.set.call(this,e[0],t,r,e[0])};var QB=function(){function e(r){var n=this;this.O=EE,this.D=!0,this.produce=function(i,o,a){if(typeof i=="function"&&typeof o!="function"){var s=o;o=i;var l=n;return function(g){var p=this;g===void 0&&(g=s);for(var v=arguments.length,y=Array(v>1?v-1:0),_=1;_<v;_++)y[_-1]=arguments[_];return l.produce(g,function(x){var b;return(b=o).call.apply(b,[p,x].concat(y))})}}var u;if(typeof o!="function"&&Rn(6),a!==void 0&&typeof a!="function"&&Rn(7),$i(i)){var c=_E(n),f=Xy(n,i,void 0),h=!0;try{u=o(f),h=!1}finally{h?ad(c):Wy(c)}return typeof Promise<"u"&&u instanceof Promise?u.then(function(g){return iv(c,a),ov(g,c)},function(g){throw ad(c),g}):(iv(c,a),ov(u,c))}if(!i||typeof i!="object"){if((u=o(i))===void 0&&(u=i),u===pI&&(u=void 0),n.D&&fb(u,!0),a){var d=[],m=[];li("Patches").M(i,u,d,m),a(d,m)}return u}Rn(21,i)},this.produceWithPatches=function(i,o){if(typeof i=="function")return function(u){for(var c=arguments.length,f=Array(c>1?c-1:0),h=1;h<c;h++)f[h-1]=arguments[h];return n.produceWithPatches(u,function(d){return i.apply(void 0,[d].concat(f))})};var a,s,l=n.produce(i,o,function(u,c){a=u,s=c});return typeof Promise<"u"&&l instanceof Promise?l.then(function(u){return[u,a,s]}):[l,a,s]},typeof(r==null?void 0:r.useProxies)=="boolean"&&this.setUseProxies(r.useProxies),typeof(r==null?void 0:r.autoFreeze)=="boolean"&&this.setAutoFreeze(r.autoFreeze)}var t=e.prototype;return t.createDraft=function(r){$i(r)||Rn(8),Mo(r)&&(r=qB(r));var n=_E(this),i=Xy(this,r,void 0);return i[mt].C=!0,Wy(n),i},t.finishDraft=function(r,n){var i=r&&r[mt],o=i.A;return iv(o,n),ov(void 0,o)},t.setAutoFreeze=function(r){this.D=r},t.setUseProxies=function(r){r&&!EE&&Rn(20),this.O=r},t.applyPatches=function(r,n){var i;for(i=n.length-1;i>=0;i--){var o=n[i];if(o.path.length===0&&o.op==="replace"){r=o.value;break}}i>-1&&(n=n.slice(i+1));var a=li("Patches").$;return Mo(r)?a(r,n):this.produce(r,function(s){return a(s,n)})},e}(),Jr=new QB,vI=Jr.produce;Jr.produceWithPatches.bind(Jr);Jr.setAutoFreeze.bind(Jr);Jr.setUseProxies.bind(Jr);Jr.applyPatches.bind(Jr);Jr.createDraft.bind(Jr);Jr.finishDraft.bind(Jr);function Zt(e){"@babel/helpers - typeof";return Zt=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Zt(e)}function ej(e,t){if(Zt(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(Zt(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function gI(e){var t=ej(e,"string");return Zt(t)=="symbol"?t:t+""}function en(e,t,r){return t=gI(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function CE(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function PE(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?CE(Object(r),!0).forEach(function(n){en(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):CE(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function pr(e){return"Minified Redux error #"+e+"; visit https://redux.js.org/Errors?code="+e+" for the full message or use the non-minified dev environment for full errors. "}var AE=function(){return typeof Symbol=="function"&&Symbol.observable||"@@observable"}(),lv=function(){return Math.random().toString(36).substring(7).split("").join(".")},ud={INIT:"@@redux/INIT"+lv(),REPLACE:"@@redux/REPLACE"+lv(),PROBE_UNKNOWN_ACTION:function(){return"@@redux/PROBE_UNKNOWN_ACTION"+lv()}};function tj(e){if(typeof e!="object"||e===null)return!1;for(var t=e;Object.getPrototypeOf(t)!==null;)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t}function yI(e,t,r){var n;if(typeof t=="function"&&typeof r=="function"||typeof r=="function"&&typeof arguments[3]=="function")throw new Error(pr(0));if(typeof t=="function"&&typeof r>"u"&&(r=t,t=void 0),typeof r<"u"){if(typeof r!="function")throw new Error(pr(1));return r(yI)(e,t)}if(typeof e!="function")throw new Error(pr(2));var i=e,o=t,a=[],s=a,l=!1;function u(){s===a&&(s=a.slice())}function c(){if(l)throw new Error(pr(3));return o}function f(g){if(typeof g!="function")throw new Error(pr(4));if(l)throw new Error(pr(5));var p=!0;return u(),s.push(g),function(){if(p){if(l)throw new Error(pr(6));p=!1,u();var y=s.indexOf(g);s.splice(y,1),a=null}}}function h(g){if(!tj(g))throw new Error(pr(7));if(typeof g.type>"u")throw new Error(pr(8));if(l)throw new Error(pr(9));try{l=!0,o=i(o,g)}finally{l=!1}for(var p=a=s,v=0;v<p.length;v++){var y=p[v];y()}return g}function d(g){if(typeof g!="function")throw new Error(pr(10));i=g,h({type:ud.REPLACE})}function m(){var g,p=f;return g={subscribe:function(y){if(typeof y!="object"||y===null)throw new Error(pr(11));function _(){y.next&&y.next(c())}_();var x=p(_);return{unsubscribe:x}}},g[AE]=function(){return this},g}return h({type:ud.INIT}),n={dispatch:h,subscribe:f,getState:c,replaceReducer:d},n[AE]=m,n}function rj(e){Object.keys(e).forEach(function(t){var r=e[t],n=r(void 0,{type:ud.INIT});if(typeof n>"u")throw new Error(pr(12));if(typeof r(void 0,{type:ud.PROBE_UNKNOWN_ACTION()})>"u")throw new Error(pr(13))})}function nj(e){for(var t=Object.keys(e),r={},n=0;n<t.length;n++){var i=t[n];typeof e[i]=="function"&&(r[i]=e[i])}var o=Object.keys(r),a;try{rj(r)}catch(s){a=s}return function(l,u){if(l===void 0&&(l={}),a)throw a;for(var c=!1,f={},h=0;h<o.length;h++){var d=o[h],m=r[d],g=l[d],p=m(g,u);if(typeof p>"u")throw u&&u.type,new Error(pr(14));f[d]=p,c=c||p!==g}return c=c||o.length!==Object.keys(l).length,c?f:l}}function cd(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return t.length===0?function(n){return n}:t.length===1?t[0]:t.reduce(function(n,i){return function(){return n(i.apply(void 0,arguments))}})}function ij(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return function(n){return function(){var i=n.apply(void 0,arguments),o=function(){throw new Error(pr(15))},a={getState:i.getState,dispatch:function(){return o.apply(void 0,arguments)}},s=t.map(function(l){return l(a)});return o=cd.apply(void 0,s)(i.dispatch),PE(PE({},i),{},{dispatch:o})}}}function _I(e){var t=function(n){var i=n.dispatch,o=n.getState;return function(a){return function(s){return typeof s=="function"?s(i,o,e):a(s)}}};return t}var xI=_I();xI.withExtraArgument=_I;const OE=xI;var bI=globalThis&&globalThis.__extends||function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},e(t,r)};return function(t,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),oj=globalThis&&globalThis.__generator||function(e,t){var r={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},n,i,o,a;return a={next:s(0),throw:s(1),return:s(2)},typeof Symbol=="function"&&(a[Symbol.iterator]=function(){return this}),a;function s(u){return function(c){return l([u,c])}}function l(u){if(n)throw new TypeError("Generator is already executing.");for(;r;)try{if(n=1,i&&(o=u[0]&2?i.return:u[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,u[1])).done)return o;switch(i=0,o&&(u=[u[0]&2,o.value]),u[0]){case 0:case 1:o=u;break;case 4:return r.label++,{value:u[1],done:!1};case 5:r.label++,i=u[1],u=[0];continue;case 7:u=r.ops.pop(),r.trys.pop();continue;default:if(o=r.trys,!(o=o.length>0&&o[o.length-1])&&(u[0]===6||u[0]===2)){r=0;continue}if(u[0]===3&&(!o||u[1]>o[0]&&u[1]<o[3])){r.label=u[1];break}if(u[0]===6&&r.label<o[1]){r.label=o[1],o=u;break}if(o&&r.label<o[2]){r.label=o[2],r.ops.push(u);break}o[2]&&r.ops.pop(),r.trys.pop();continue}u=t.call(e,r)}catch(c){u=[6,c],i=0}finally{n=o=0}if(u[0]&5)throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}},Hs=globalThis&&globalThis.__spreadArray||function(e,t){for(var r=0,n=t.length,i=e.length;r<n;r++,i++)e[i]=t[r];return e},aj=Object.defineProperty,sj=Object.defineProperties,lj=Object.getOwnPropertyDescriptors,IE=Object.getOwnPropertySymbols,uj=Object.prototype.hasOwnProperty,cj=Object.prototype.propertyIsEnumerable,ME=function(e,t,r){return t in e?aj(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r},xo=function(e,t){for(var r in t||(t={}))uj.call(t,r)&&ME(e,r,t[r]);if(IE)for(var n=0,i=IE(t);n<i.length;n++){var r=i[n];cj.call(t,r)&&ME(e,r,t[r])}return e},uv=function(e,t){return sj(e,lj(t))},fj=function(e,t,r){return new Promise(function(n,i){var o=function(l){try{s(r.next(l))}catch(u){i(u)}},a=function(l){try{s(r.throw(l))}catch(u){i(u)}},s=function(l){return l.done?n(l.value):Promise.resolve(l.value).then(o,a)};s((r=r.apply(e,t)).next())})},hj=typeof window<"u"&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__?window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__:function(){if(arguments.length!==0)return typeof arguments[0]=="object"?cd:cd.apply(null,arguments)};function dj(e){if(typeof e!="object"||e===null)return!1;var t=Object.getPrototypeOf(e);if(t===null)return!0;for(var r=t;Object.getPrototypeOf(r)!==null;)r=Object.getPrototypeOf(r);return t===r}function bo(e,t){function r(){for(var n=[],i=0;i<arguments.length;i++)n[i]=arguments[i];if(t){var o=t.apply(void 0,n);if(!o)throw new Error("prepareAction did not return an object");return xo(xo({type:e,payload:o.payload},"meta"in o&&{meta:o.meta}),"error"in o&&{error:o.error})}return{type:e,payload:n[0]}}return r.toString=function(){return""+e},r.type=e,r.match=function(n){return n.type===e},r}var pj=function(e){bI(t,e);function t(){for(var r=[],n=0;n<arguments.length;n++)r[n]=arguments[n];var i=e.apply(this,r)||this;return Object.setPrototypeOf(i,t.prototype),i}return Object.defineProperty(t,Symbol.species,{get:function(){return t},enumerable:!1,configurable:!0}),t.prototype.concat=function(){for(var r=[],n=0;n<arguments.length;n++)r[n]=arguments[n];return e.prototype.concat.apply(this,r)},t.prototype.prepend=function(){for(var r=[],n=0;n<arguments.length;n++)r[n]=arguments[n];return r.length===1&&Array.isArray(r[0])?new(t.bind.apply(t,Hs([void 0],r[0].concat(this)))):new(t.bind.apply(t,Hs([void 0],r.concat(this))))},t}(Array),mj=function(e){bI(t,e);function t(){for(var r=[],n=0;n<arguments.length;n++)r[n]=arguments[n];var i=e.apply(this,r)||this;return Object.setPrototypeOf(i,t.prototype),i}return Object.defineProperty(t,Symbol.species,{get:function(){return t},enumerable:!1,configurable:!0}),t.prototype.concat=function(){for(var r=[],n=0;n<arguments.length;n++)r[n]=arguments[n];return e.prototype.concat.apply(this,r)},t.prototype.prepend=function(){for(var r=[],n=0;n<arguments.length;n++)r[n]=arguments[n];return r.length===1&&Array.isArray(r[0])?new(t.bind.apply(t,Hs([void 0],r[0].concat(this)))):new(t.bind.apply(t,Hs([void 0],r.concat(this))))},t}(Array);function Yy(e){return $i(e)?vI(e,function(){}):e}function vj(e){return typeof e=="boolean"}function gj(){return function(t){return SI(t)}}function SI(e){e===void 0&&(e={});var t=e.thunk,r=t===void 0?!0:t;e.immutableCheck,e.serializableCheck,e.actionCreatorCheck;var n=new pj;return r&&(vj(r)?n.push(OE):n.push(OE.withExtraArgument(r.extraArgument))),n}var yj=!0;function _j(e){var t=gj(),r=e||{},n=r.reducer,i=n===void 0?void 0:n,o=r.middleware,a=o===void 0?t():o,s=r.devTools,l=s===void 0?!0:s,u=r.preloadedState,c=u===void 0?void 0:u,f=r.enhancers,h=f===void 0?void 0:f,d;if(typeof i=="function")d=i;else if(dj(i))d=nj(i);else throw new Error('"reducer" is a required argument, and must be a function or an object of functions that can be passed to combineReducers');var m=a;typeof m=="function"&&(m=m(t));var g=ij.apply(void 0,m),p=cd;l&&(p=hj(xo({trace:!yj},typeof l=="object"&&l)));var v=new mj(g),y=v;Array.isArray(h)?y=Hs([g],h):typeof h=="function"&&(y=h(v));var _=p.apply(void 0,y);return yI(d,c,_)}function wI(e){var t={},r=[],n,i={addCase:function(o,a){var s=typeof o=="string"?o:o.type;if(!s)throw new Error("`builder.addCase` cannot be called with an empty action type");if(s in t)throw new Error("`builder.addCase` cannot be called with two reducers for the same action type");return t[s]=a,i},addMatcher:function(o,a){return r.push({matcher:o,reducer:a}),i},addDefaultCase:function(o){return n=o,i}};return e(i),[t,r,n]}function xj(e){return typeof e=="function"}function bj(e,t,r,n){r===void 0&&(r=[]);var i=typeof t=="function"?wI(t):[t,r,n],o=i[0],a=i[1],s=i[2],l;if(xj(e))l=function(){return Yy(e())};else{var u=Yy(e);l=function(){return u}}function c(f,h){f===void 0&&(f=l());var d=Hs([o[h.type]],a.filter(function(m){var g=m.matcher;return g(h)}).map(function(m){var g=m.reducer;return g}));return d.filter(function(m){return!!m}).length===0&&(d=[s]),d.reduce(function(m,g){if(g)if(Mo(m)){var p=m,v=g(p,h);return v===void 0?m:v}else{if($i(m))return vI(m,function(y){return g(y,h)});var v=g(m,h);if(v===void 0){if(m===null)return m;throw Error("A case reducer on a non-draftable value must not return undefined")}return v}return m},f)}return c.getInitialState=l,c}function Sj(e,t){return e+"/"+t}function ip(e){var t=e.name;if(!t)throw new Error("`name` is a required option for createSlice");typeof process<"u";var r=typeof e.initialState=="function"?e.initialState:Yy(e.initialState),n=e.reducers||{},i=Object.keys(n),o={},a={},s={};i.forEach(function(c){var f=n[c],h=Sj(t,c),d,m;"reducer"in f?(d=f.reducer,m=f.prepare):d=f,o[c]=d,a[h]=d,s[c]=m?bo(h,m):bo(h)});function l(){var c=typeof e.extraReducers=="function"?wI(e.extraReducers):[e.extraReducers],f=c[0],h=f===void 0?{}:f,d=c[1],m=d===void 0?[]:d,g=c[2],p=g===void 0?void 0:g,v=xo(xo({},h),a);return bj(r,function(y){for(var _ in v)y.addCase(_,v[_]);for(var x=0,b=m;x<b.length;x++){var S=b[x];y.addMatcher(S.matcher,S.reducer)}p&&y.addDefaultCase(p)})}var u;return{name:t,reducer:function(c,f){return u||(u=l()),u(c,f)},actions:s,caseReducers:o,getInitialState:function(){return u||(u=l()),u.getInitialState()}}}var wj="ModuleSymbhasOwnPr-0123456789ABCDEFGHNRVfgctiUvz_KqYTJkLxpZXIjQW",Ej=function(e){e===void 0&&(e=21);for(var t="",r=e;r--;)t+=wj[Math.random()*64|0];return t},Tj=["name","message","stack","code"],cv=function(){function e(t,r){this.payload=t,this.meta=r}return e}(),RE=function(){function e(t,r){this.payload=t,this.meta=r}return e}(),Cj=function(e){if(typeof e=="object"&&e!==null){for(var t={},r=0,n=Tj;r<n.length;r++){var i=n[r];typeof e[i]=="string"&&(t[i]=e[i])}return t}return{message:String(e)}};(function(){function e(t,r,n){var i=bo(t+"/fulfilled",function(u,c,f,h){return{payload:u,meta:uv(xo({},h||{}),{arg:f,requestId:c,requestStatus:"fulfilled"})}}),o=bo(t+"/pending",function(u,c,f){return{payload:void 0,meta:uv(xo({},f||{}),{arg:c,requestId:u,requestStatus:"pending"})}}),a=bo(t+"/rejected",function(u,c,f,h,d){return{payload:h,error:(n&&n.serializeError||Cj)(u||"Rejected"),meta:uv(xo({},d||{}),{arg:f,requestId:c,rejectedWithValue:!!h,requestStatus:"rejected",aborted:(u==null?void 0:u.name)==="AbortError",condition:(u==null?void 0:u.name)==="ConditionError"})}}),s=typeof AbortController<"u"?AbortController:function(){function u(){this.signal={aborted:!1,addEventListener:function(){},dispatchEvent:function(){return!1},onabort:function(){},removeEventListener:function(){},reason:void 0,throwIfAborted:function(){}}}return u.prototype.abort=function(){},u}();function l(u){return function(c,f,h){var d=n!=null&&n.idGenerator?n.idGenerator(u):Ej(),m=new s,g;function p(y){g=y,m.abort()}var v=function(){return fj(this,null,function(){var y,_,x,b,S,E,I;return oj(this,function(A){switch(A.label){case 0:return A.trys.push([0,4,,5]),b=(y=n==null?void 0:n.condition)==null?void 0:y.call(n,u,{getState:f,extra:h}),Aj(b)?[4,b]:[3,2];case 1:b=A.sent(),A.label=2;case 2:if(b===!1||m.signal.aborted)throw{name:"ConditionError",message:"Aborted due to condition callback returning false."};return S=new Promise(function(O,D){return m.signal.addEventListener("abort",function(){return D({name:"AbortError",message:g||"Aborted"})})}),c(o(d,u,(_=n==null?void 0:n.getPendingMeta)==null?void 0:_.call(n,{requestId:d,arg:u},{getState:f,extra:h}))),[4,Promise.race([S,Promise.resolve(r(u,{dispatch:c,getState:f,extra:h,requestId:d,signal:m.signal,abort:p,rejectWithValue:function(O,D){return new cv(O,D)},fulfillWithValue:function(O,D){return new RE(O,D)}})).then(function(O){if(O instanceof cv)throw O;return O instanceof RE?i(O.payload,d,u,O.meta):i(O,d,u)})])];case 3:return x=A.sent(),[3,5];case 4:return E=A.sent(),x=E instanceof cv?a(null,d,u,E.payload,E.meta):a(E,d,u),[3,5];case 5:return I=n&&!n.dispatchConditionRejection&&a.match(x)&&x.meta.condition,I||c(x),[2,x]}})})}();return Object.assign(v,{abort:p,requestId:d,arg:u,unwrap:function(){return v.then(Pj)}})}}return Object.assign(l,{pending:o,rejected:a,fulfilled:i,typePrefix:t})}return e.withTypes=function(){return e},e})();function Pj(e){if(e.meta&&e.meta.rejectedWithValue)throw e.payload;if(e.error)throw e.error;return e.payload}function Aj(e){return e!==null&&typeof e=="object"&&typeof e.then=="function"}var pb="listenerMiddleware";bo(pb+"/add");bo(pb+"/removeAll");bo(pb+"/remove");var kE;typeof queueMicrotask=="function"&&queueMicrotask.bind(typeof window<"u"?window:typeof global<"u"?global:globalThis);YB();function Oj(){this.__data__=[],this.size=0}var Ij=Oj;function Mj(e,t){return e===t||e!==e&&t!==t}var mb=Mj,Rj=mb;function kj(e,t){for(var r=e.length;r--;)if(Rj(e[r][0],t))return r;return-1}var op=kj,Lj=op,Fj=Array.prototype,Dj=Fj.splice;function Nj(e){var t=this.__data__,r=Lj(t,e);if(r<0)return!1;var n=t.length-1;return r==n?t.pop():Dj.call(t,r,1),--this.size,!0}var Bj=Nj,jj=op;function Uj(e){var t=this.__data__,r=jj(t,e);return r<0?void 0:t[r][1]}var $j=Uj,Gj=op;function zj(e){return Gj(this.__data__,e)>-1}var Vj=zj,Hj=op;function Wj(e,t){var r=this.__data__,n=Hj(r,e);return n<0?(++this.size,r.push([e,t])):r[n][1]=t,this}var Xj=Wj,qj=Ij,Yj=Bj,Kj=$j,Zj=Vj,Jj=Xj;function dl(e){var t=-1,r=e==null?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}dl.prototype.clear=qj;dl.prototype.delete=Yj;dl.prototype.get=Kj;dl.prototype.has=Zj;dl.prototype.set=Jj;var ap=dl,Qj=ap;function e4(){this.__data__=new Qj,this.size=0}var t4=e4;function r4(e){var t=this.__data__,r=t.delete(e);return this.size=t.size,r}var n4=r4;function i4(e){return this.__data__.get(e)}var o4=i4;function a4(e){return this.__data__.has(e)}var s4=a4,l4=typeof dn=="object"&&dn&&dn.Object===Object&&dn,EI=l4,u4=EI,c4=typeof self=="object"&&self&&self.Object===Object&&self,f4=u4||c4||Function("return this")(),Bn=f4,h4=Bn,d4=h4.Symbol,zc=d4,LE=zc,TI=Object.prototype,p4=TI.hasOwnProperty,m4=TI.toString,Xl=LE?LE.toStringTag:void 0;function v4(e){var t=p4.call(e,Xl),r=e[Xl];try{e[Xl]=void 0;var n=!0}catch{}var i=m4.call(e);return n&&(t?e[Xl]=r:delete e[Xl]),i}var g4=v4,y4=Object.prototype,_4=y4.toString;function x4(e){return _4.call(e)}var b4=x4,FE=zc,S4=g4,w4=b4,E4="[object Null]",T4="[object Undefined]",DE=FE?FE.toStringTag:void 0;function C4(e){return e==null?e===void 0?T4:E4:DE&&DE in Object(e)?S4(e):w4(e)}var Vc=C4;function P4(e){var t=typeof e;return e!=null&&(t=="object"||t=="function")}var _i=P4,A4=Vc,O4=_i,I4="[object AsyncFunction]",M4="[object Function]",R4="[object GeneratorFunction]",k4="[object Proxy]";function L4(e){if(!O4(e))return!1;var t=A4(e);return t==M4||t==R4||t==I4||t==k4}var CI=L4,F4=Bn,D4=F4["__core-js_shared__"],N4=D4,fv=N4,NE=function(){var e=/[^.]+$/.exec(fv&&fv.keys&&fv.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""}();function B4(e){return!!NE&&NE in e}var j4=B4,U4=Function.prototype,$4=U4.toString;function G4(e){if(e!=null){try{return $4.call(e)}catch{}try{return e+""}catch{}}return""}var PI=G4,z4=CI,V4=j4,H4=_i,W4=PI,X4=/[\\^$.*+?()[\]{}|]/g,q4=/^\[object .+?Constructor\]$/,Y4=Function.prototype,K4=Object.prototype,Z4=Y4.toString,J4=K4.hasOwnProperty,Q4=RegExp("^"+Z4.call(J4).replace(X4,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function eU(e){if(!H4(e)||V4(e))return!1;var t=z4(e)?Q4:q4;return t.test(W4(e))}var tU=eU;function rU(e,t){return e==null?void 0:e[t]}var nU=rU,iU=tU,oU=nU;function aU(e,t){var r=oU(e,t);return iU(r)?r:void 0}var Na=aU,sU=Na,lU=Bn,uU=sU(lU,"Map"),vb=uU,cU=Na,fU=cU(Object,"create"),sp=fU,BE=sp;function hU(){this.__data__=BE?BE(null):{},this.size=0}var dU=hU;function pU(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t}var mU=pU,vU=sp,gU="__lodash_hash_undefined__",yU=Object.prototype,_U=yU.hasOwnProperty;function xU(e){var t=this.__data__;if(vU){var r=t[e];return r===gU?void 0:r}return _U.call(t,e)?t[e]:void 0}var bU=xU,SU=sp,wU=Object.prototype,EU=wU.hasOwnProperty;function TU(e){var t=this.__data__;return SU?t[e]!==void 0:EU.call(t,e)}var CU=TU,PU=sp,AU="__lodash_hash_undefined__";function OU(e,t){var r=this.__data__;return this.size+=this.has(e)?0:1,r[e]=PU&&t===void 0?AU:t,this}var IU=OU,MU=dU,RU=mU,kU=bU,LU=CU,FU=IU;function pl(e){var t=-1,r=e==null?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}pl.prototype.clear=MU;pl.prototype.delete=RU;pl.prototype.get=kU;pl.prototype.has=LU;pl.prototype.set=FU;var DU=pl,jE=DU,NU=ap,BU=vb;function jU(){this.size=0,this.__data__={hash:new jE,map:new(BU||NU),string:new jE}}var UU=jU;function $U(e){var t=typeof e;return t=="string"||t=="number"||t=="symbol"||t=="boolean"?e!=="__proto__":e===null}var GU=$U,zU=GU;function VU(e,t){var r=e.__data__;return zU(t)?r[typeof t=="string"?"string":"hash"]:r.map}var lp=VU,HU=lp;function WU(e){var t=HU(this,e).delete(e);return this.size-=t?1:0,t}var XU=WU,qU=lp;function YU(e){return qU(this,e).get(e)}var KU=YU,ZU=lp;function JU(e){return ZU(this,e).has(e)}var QU=JU,e$=lp;function t$(e,t){var r=e$(this,e),n=r.size;return r.set(e,t),this.size+=r.size==n?0:1,this}var r$=t$,n$=UU,i$=XU,o$=KU,a$=QU,s$=r$;function ml(e){var t=-1,r=e==null?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}ml.prototype.clear=n$;ml.prototype.delete=i$;ml.prototype.get=o$;ml.prototype.has=a$;ml.prototype.set=s$;var gb=ml,l$=ap,u$=vb,c$=gb,f$=200;function h$(e,t){var r=this.__data__;if(r instanceof l$){var n=r.__data__;if(!u$||n.length<f$-1)return n.push([e,t]),this.size=++r.size,this;r=this.__data__=new c$(n)}return r.set(e,t),this.size=r.size,this}var d$=h$,p$=ap,m$=t4,v$=n4,g$=o4,y$=s4,_$=d$;function vl(e){var t=this.__data__=new p$(e);this.size=t.size}vl.prototype.clear=m$;vl.prototype.delete=v$;vl.prototype.get=g$;vl.prototype.has=y$;vl.prototype.set=_$;var yb=vl;function x$(e,t){for(var r=-1,n=e==null?0:e.length;++r<n&&t(e[r],r,e)!==!1;);return e}var b$=x$,S$=Na,w$=function(){try{var e=S$(Object,"defineProperty");return e({},"",{}),e}catch{}}(),E$=w$,UE=E$;function T$(e,t,r){t=="__proto__"&&UE?UE(e,t,{configurable:!0,enumerable:!0,value:r,writable:!0}):e[t]=r}var AI=T$,C$=AI,P$=mb,A$=Object.prototype,O$=A$.hasOwnProperty;function I$(e,t,r){var n=e[t];(!(O$.call(e,t)&&P$(n,r))||r===void 0&&!(t in e))&&C$(e,t,r)}var _b=I$,M$=_b,R$=AI;function k$(e,t,r,n){var i=!r;r||(r={});for(var o=-1,a=t.length;++o<a;){var s=t[o],l=n?n(r[s],e[s],s,r,e):void 0;l===void 0&&(l=e[s]),i?R$(r,s,l):M$(r,s,l)}return r}var up=k$;function L$(e,t){for(var r=-1,n=Array(e);++r<e;)n[r]=t(r);return n}var F$=L$;function D$(e){return e!=null&&typeof e=="object"}var Ba=D$,N$=Vc,B$=Ba,j$="[object Arguments]";function U$(e){return B$(e)&&N$(e)==j$}var $$=U$,$E=$$,G$=Ba,OI=Object.prototype,z$=OI.hasOwnProperty,V$=OI.propertyIsEnumerable,H$=$E(function(){return arguments}())?$E:function(e){return G$(e)&&z$.call(e,"callee")&&!V$.call(e,"callee")},II=H$,W$=Array.isArray,zi=W$,fd={exports:{}};function X$(){return!1}var q$=X$;fd.exports;(function(e,t){var r=Bn,n=q$,i=t&&!t.nodeType&&t,o=i&&!0&&e&&!e.nodeType&&e,a=o&&o.exports===i,s=a?r.Buffer:void 0,l=s?s.isBuffer:void 0,u=l||n;e.exports=u})(fd,fd.exports);var xb=fd.exports,Y$=9007199254740991,K$=/^(?:0|[1-9]\d*)$/;function Z$(e,t){var r=typeof e;return t=t??Y$,!!t&&(r=="number"||r!="symbol"&&K$.test(e))&&e>-1&&e%1==0&&e<t}var bb=Z$,J$=9007199254740991;function Q$(e){return typeof e=="number"&&e>-1&&e%1==0&&e<=J$}var Sb=Q$,e5=Vc,t5=Sb,r5=Ba,n5="[object Arguments]",i5="[object Array]",o5="[object Boolean]",a5="[object Date]",s5="[object Error]",l5="[object Function]",u5="[object Map]",c5="[object Number]",f5="[object Object]",h5="[object RegExp]",d5="[object Set]",p5="[object String]",m5="[object WeakMap]",v5="[object ArrayBuffer]",g5="[object DataView]",y5="[object Float32Array]",_5="[object Float64Array]",x5="[object Int8Array]",b5="[object Int16Array]",S5="[object Int32Array]",w5="[object Uint8Array]",E5="[object Uint8ClampedArray]",T5="[object Uint16Array]",C5="[object Uint32Array]",ut={};ut[y5]=ut[_5]=ut[x5]=ut[b5]=ut[S5]=ut[w5]=ut[E5]=ut[T5]=ut[C5]=!0;ut[n5]=ut[i5]=ut[v5]=ut[o5]=ut[g5]=ut[a5]=ut[s5]=ut[l5]=ut[u5]=ut[c5]=ut[f5]=ut[h5]=ut[d5]=ut[p5]=ut[m5]=!1;function P5(e){return r5(e)&&t5(e.length)&&!!ut[e5(e)]}var A5=P5;function O5(e){return function(t){return e(t)}}var wb=O5,hd={exports:{}};hd.exports;(function(e,t){var r=EI,n=t&&!t.nodeType&&t,i=n&&!0&&e&&!e.nodeType&&e,o=i&&i.exports===n,a=o&&r.process,s=function(){try{var l=i&&i.require&&i.require("util").types;return l||a&&a.binding&&a.binding("util")}catch{}}();e.exports=s})(hd,hd.exports);var Eb=hd.exports,I5=A5,M5=wb,GE=Eb,zE=GE&&GE.isTypedArray,R5=zE?M5(zE):I5,MI=R5,k5=F$,L5=II,F5=zi,D5=xb,N5=bb,B5=MI,j5=Object.prototype,U5=j5.hasOwnProperty;function $5(e,t){var r=F5(e),n=!r&&L5(e),i=!r&&!n&&D5(e),o=!r&&!n&&!i&&B5(e),a=r||n||i||o,s=a?k5(e.length,String):[],l=s.length;for(var u in e)(t||U5.call(e,u))&&!(a&&(u=="length"||i&&(u=="offset"||u=="parent")||o&&(u=="buffer"||u=="byteLength"||u=="byteOffset")||N5(u,l)))&&s.push(u);return s}var RI=$5,G5=Object.prototype;function z5(e){var t=e&&e.constructor,r=typeof t=="function"&&t.prototype||G5;return e===r}var Tb=z5;function V5(e,t){return function(r){return e(t(r))}}var kI=V5,H5=kI,W5=H5(Object.keys,Object),X5=W5,q5=Tb,Y5=X5,K5=Object.prototype,Z5=K5.hasOwnProperty;function J5(e){if(!q5(e))return Y5(e);var t=[];for(var r in Object(e))Z5.call(e,r)&&r!="constructor"&&t.push(r);return t}var Q5=J5,eG=CI,tG=Sb;function rG(e){return e!=null&&tG(e.length)&&!eG(e)}var LI=rG,nG=RI,iG=Q5,oG=LI;function aG(e){return oG(e)?nG(e):iG(e)}var cp=aG,sG=up,lG=cp;function uG(e,t){return e&&sG(t,lG(t),e)}var cG=uG;function fG(e){var t=[];if(e!=null)for(var r in Object(e))t.push(r);return t}var hG=fG,dG=_i,pG=Tb,mG=hG,vG=Object.prototype,gG=vG.hasOwnProperty;function yG(e){if(!dG(e))return mG(e);var t=pG(e),r=[];for(var n in e)n=="constructor"&&(t||!gG.call(e,n))||r.push(n);return r}var _G=yG,xG=RI,bG=_G,SG=LI;function wG(e){return SG(e)?xG(e,!0):bG(e)}var Cb=wG,EG=up,TG=Cb;function CG(e,t){return e&&EG(t,TG(t),e)}var PG=CG,dd={exports:{}};dd.exports;(function(e,t){var r=Bn,n=t&&!t.nodeType&&t,i=n&&!0&&e&&!e.nodeType&&e,o=i&&i.exports===n,a=o?r.Buffer:void 0,s=a?a.allocUnsafe:void 0;function l(u,c){if(c)return u.slice();var f=u.length,h=s?s(f):new u.constructor(f);return u.copy(h),h}e.exports=l})(dd,dd.exports);var AG=dd.exports;function OG(e,t){var r=-1,n=e.length;for(t||(t=Array(n));++r<n;)t[r]=e[r];return t}var IG=OG;function MG(e,t){for(var r=-1,n=e==null?0:e.length,i=0,o=[];++r<n;){var a=e[r];t(a,r,e)&&(o[i++]=a)}return o}var RG=MG;function kG(){return[]}var FI=kG,LG=RG,FG=FI,DG=Object.prototype,NG=DG.propertyIsEnumerable,VE=Object.getOwnPropertySymbols,BG=VE?function(e){return e==null?[]:(e=Object(e),LG(VE(e),function(t){return NG.call(e,t)}))}:FG,Pb=BG,jG=up,UG=Pb;function $G(e,t){return jG(e,UG(e),t)}var GG=$G;function zG(e,t){for(var r=-1,n=t.length,i=e.length;++r<n;)e[i+r]=t[r];return e}var DI=zG,VG=kI,HG=VG(Object.getPrototypeOf,Object),NI=HG,WG=DI,XG=NI,qG=Pb,YG=FI,KG=Object.getOwnPropertySymbols,ZG=KG?function(e){for(var t=[];e;)WG(t,qG(e)),e=XG(e);return t}:YG,BI=ZG,JG=up,QG=BI;function e8(e,t){return JG(e,QG(e),t)}var t8=e8,r8=DI,n8=zi;function i8(e,t,r){var n=t(e);return n8(e)?n:r8(n,r(e))}var jI=i8,o8=jI,a8=Pb,s8=cp;function l8(e){return o8(e,s8,a8)}var UI=l8,u8=jI,c8=BI,f8=Cb;function h8(e){return u8(e,f8,c8)}var $I=h8,d8=Na,p8=Bn,m8=d8(p8,"DataView"),v8=m8,g8=Na,y8=Bn,_8=g8(y8,"Promise"),x8=_8,b8=Na,S8=Bn,w8=b8(S8,"Set"),GI=w8,E8=Na,T8=Bn,C8=E8(T8,"WeakMap"),P8=C8,Ky=v8,Zy=vb,Jy=x8,Qy=GI,e_=P8,zI=Vc,gl=PI,HE="[object Map]",A8="[object Object]",WE="[object Promise]",XE="[object Set]",qE="[object WeakMap]",YE="[object DataView]",O8=gl(Ky),I8=gl(Zy),M8=gl(Jy),R8=gl(Qy),k8=gl(e_),Qo=zI;(Ky&&Qo(new Ky(new ArrayBuffer(1)))!=YE||Zy&&Qo(new Zy)!=HE||Jy&&Qo(Jy.resolve())!=WE||Qy&&Qo(new Qy)!=XE||e_&&Qo(new e_)!=qE)&&(Qo=function(e){var t=zI(e),r=t==A8?e.constructor:void 0,n=r?gl(r):"";if(n)switch(n){case O8:return YE;case I8:return HE;case M8:return WE;case R8:return XE;case k8:return qE}return t});var fp=Qo,L8=Object.prototype,F8=L8.hasOwnProperty;function D8(e){var t=e.length,r=new e.constructor(t);return t&&typeof e[0]=="string"&&F8.call(e,"index")&&(r.index=e.index,r.input=e.input),r}var N8=D8,B8=Bn,j8=B8.Uint8Array,VI=j8,KE=VI;function U8(e){var t=new e.constructor(e.byteLength);return new KE(t).set(new KE(e)),t}var Ab=U8,$8=Ab;function G8(e,t){var r=t?$8(e.buffer):e.buffer;return new e.constructor(r,e.byteOffset,e.byteLength)}var z8=G8,V8=/\w*$/;function H8(e){var t=new e.constructor(e.source,V8.exec(e));return t.lastIndex=e.lastIndex,t}var W8=H8,ZE=zc,JE=ZE?ZE.prototype:void 0,QE=JE?JE.valueOf:void 0;function X8(e){return QE?Object(QE.call(e)):{}}var q8=X8,Y8=Ab;function K8(e,t){var r=t?Y8(e.buffer):e.buffer;return new e.constructor(r,e.byteOffset,e.length)}var Z8=K8,J8=Ab,Q8=z8,e6=W8,t6=q8,r6=Z8,n6="[object Boolean]",i6="[object Date]",o6="[object Map]",a6="[object Number]",s6="[object RegExp]",l6="[object Set]",u6="[object String]",c6="[object Symbol]",f6="[object ArrayBuffer]",h6="[object DataView]",d6="[object Float32Array]",p6="[object Float64Array]",m6="[object Int8Array]",v6="[object Int16Array]",g6="[object Int32Array]",y6="[object Uint8Array]",_6="[object Uint8ClampedArray]",x6="[object Uint16Array]",b6="[object Uint32Array]";function S6(e,t,r){var n=e.constructor;switch(t){case f6:return J8(e);case n6:case i6:return new n(+e);case h6:return Q8(e,r);case d6:case p6:case m6:case v6:case g6:case y6:case _6:case x6:case b6:return r6(e,r);case o6:return new n;case a6:case u6:return new n(e);case s6:return e6(e);case l6:return new n;case c6:return t6(e)}}var w6=S6,E6=_i,eT=Object.create,T6=function(){function e(){}return function(t){if(!E6(t))return{};if(eT)return eT(t);e.prototype=t;var r=new e;return e.prototype=void 0,r}}(),C6=T6,P6=C6,A6=NI,O6=Tb;function I6(e){return typeof e.constructor=="function"&&!O6(e)?P6(A6(e)):{}}var M6=I6,R6=fp,k6=Ba,L6="[object Map]";function F6(e){return k6(e)&&R6(e)==L6}var D6=F6,N6=D6,B6=wb,tT=Eb,rT=tT&&tT.isMap,j6=rT?B6(rT):N6,U6=j6,$6=fp,G6=Ba,z6="[object Set]";function V6(e){return G6(e)&&$6(e)==z6}var H6=V6,W6=H6,X6=wb,nT=Eb,iT=nT&&nT.isSet,q6=iT?X6(iT):W6,Y6=q6,K6=yb,Z6=b$,J6=_b,Q6=cG,ez=PG,tz=AG,rz=IG,nz=GG,iz=t8,oz=UI,az=$I,sz=fp,lz=N8,uz=w6,cz=M6,fz=zi,hz=xb,dz=U6,pz=_i,mz=Y6,vz=cp,gz=Cb,yz=1,_z=2,xz=4,HI="[object Arguments]",bz="[object Array]",Sz="[object Boolean]",wz="[object Date]",Ez="[object Error]",WI="[object Function]",Tz="[object GeneratorFunction]",Cz="[object Map]",Pz="[object Number]",XI="[object Object]",Az="[object RegExp]",Oz="[object Set]",Iz="[object String]",Mz="[object Symbol]",Rz="[object WeakMap]",kz="[object ArrayBuffer]",Lz="[object DataView]",Fz="[object Float32Array]",Dz="[object Float64Array]",Nz="[object Int8Array]",Bz="[object Int16Array]",jz="[object Int32Array]",Uz="[object Uint8Array]",$z="[object Uint8ClampedArray]",Gz="[object Uint16Array]",zz="[object Uint32Array]",nt={};nt[HI]=nt[bz]=nt[kz]=nt[Lz]=nt[Sz]=nt[wz]=nt[Fz]=nt[Dz]=nt[Nz]=nt[Bz]=nt[jz]=nt[Cz]=nt[Pz]=nt[XI]=nt[Az]=nt[Oz]=nt[Iz]=nt[Mz]=nt[Uz]=nt[$z]=nt[Gz]=nt[zz]=!0;nt[Ez]=nt[WI]=nt[Rz]=!1;function vh(e,t,r,n,i,o){var a,s=t&yz,l=t&_z,u=t&xz;if(r&&(a=i?r(e,n,i,o):r(e)),a!==void 0)return a;if(!pz(e))return e;var c=fz(e);if(c){if(a=lz(e),!s)return rz(e,a)}else{var f=sz(e),h=f==WI||f==Tz;if(hz(e))return tz(e,s);if(f==XI||f==HI||h&&!i){if(a=l||h?{}:cz(e),!s)return l?iz(e,ez(a,e)):nz(e,Q6(a,e))}else{if(!nt[f])return i?e:{};a=uz(e,f,s)}}o||(o=new K6);var d=o.get(e);if(d)return d;o.set(e,a),mz(e)?e.forEach(function(p){a.add(vh(p,t,r,p,e,o))}):dz(e)&&e.forEach(function(p,v){a.set(v,vh(p,t,r,v,e,o))});var m=u?l?az:oz:l?gz:vz,g=c?void 0:m(e);return Z6(g||e,function(p,v){g&&(v=p,p=e[v]),J6(a,v,vh(p,t,r,v,e,o))}),a}var Vz=vh,Hz=Vz,Wz=1,Xz=4;function qz(e){return Hz(e,Wz|Xz)}var Yz=qz;const Pt=Sr(Yz);var ke=(e=>(e[e.say=0]="say",e[e.changeBg=1]="changeBg",e[e.changeFigure=2]="changeFigure",e[e.bgm=3]="bgm",e[e.video=4]="video",e[e.pixi=5]="pixi",e[e.pixiInit=6]="pixiInit",e[e.intro=7]="intro",e[e.miniAvatar=8]="miniAvatar",e[e.changeScene=9]="changeScene",e[e.choose=10]="choose",e[e.end=11]="end",e[e.setComplexAnimation=12]="setComplexAnimation",e[e.setFilter=13]="setFilter",e[e.label=14]="label",e[e.jumpLabel=15]="jumpLabel",e[e.chooseLabel=16]="chooseLabel",e[e.setVar=17]="setVar",e[e.if=18]="if",e[e.callScene=19]="callScene",e[e.showVars=20]="showVars",e[e.unlockCg=21]="unlockCg",e[e.unlockBgm=22]="unlockBgm",e[e.filmMode=23]="filmMode",e[e.setTextbox=24]="setTextbox",e[e.setAnimation=25]="setAnimation",e[e.playEffect=26]="playEffect",e[e.setTempAnimation=27]="setTempAnimation",e[e.comment=28]="comment",e[e.setTransform=29]="setTransform",e[e.setTransition=30]="setTransition",e[e.getUserInput=31]="getUserInput",e[e.applyStyle=32]="applyStyle",e))(ke||{});const xf={BGMAIN:"bg-main",FIG_C:"fig-center",FIG_L:"fig-left",FIG_R:"fig-right"},t_="none",qI={oldBgName:"",bgName:"",figName:"",figNameLeft:"",figNameRight:"",freeFigure:[],figureAssociatedAnimation:[],showText:"",showTextSize:-1,showName:"",command:"",choose:[],vocal:"",playVocal:"",vocalVolume:100,bgm:{src:"",enter:0,volume:100},uiSe:"",miniAvatar:"",GameVar:{},effects:[],bgFilter:"",bgTransform:"",PerformList:[],currentDialogKey:"initial",live2dMotion:[],live2dExpression:[],currentConcatDialogPrev:"",enableFilm:"",isDisableTextbox:!1,replacedUIlable:{},figureMetaData:{}},Ob=ip({name:"stage",initialState:Pt(qI),reducers:{resetStageState:(e,t)=>{Object.assign(e,t.payload)},setStage:(e,t)=>{e[t.payload.key]=t.payload.value},setStageVar:(e,t)=>{e.GameVar[t.payload.key]=t.payload.value},updateEffect:(e,t)=>{const{target:r,transform:n}=t.payload;if(![xf.BGMAIN,xf.FIG_C,xf.FIG_L,xf.FIG_R,...e.freeFigure.map(a=>a.key)].includes(r))return;const o=e.effects.findIndex(a=>a.target===r);o>=0?e.effects[o].transform=n:e.effects.push({target:r,transform:n})},removeEffectByTargetId:(e,t)=>{const r=e.effects.findIndex(n=>n.target===t.payload);r>=0&&e.effects.splice(r,1)},addPerform:(e,t)=>{if(e.PerformList.findIndex(n=>n.id===t.payload.id)>-1){const n=t.payload.id;for(let i=0;i<e.PerformList.length;i++)e.PerformList[i].id===n&&(e.PerformList.splice(i,1),i--)}e.PerformList.push(t.payload)},removePerformByName:(e,t)=>{for(let r=0;r<e.PerformList.length;r++)e.PerformList[r].id===t.payload&&(e.PerformList.splice(r,1),r--)},removeAllPerform:e=>{e.PerformList.splice(0,e.PerformList.length)},removeAllPixiPerforms:(e,t)=>{for(let r=0;r<e.PerformList.length;r++)e.PerformList[r].script.command===ke.pixi&&(e.PerformList.splice(r,1),r--)},setFreeFigureByKey:(e,t)=>{const r=e.freeFigure,n=t.payload,i=r.findIndex(o=>o.key===n.key);if(i>=0)if(n.name===""){r.splice(i,1);const o=e.figureAssociatedAnimation.findIndex(a=>a.targetId===n.key);e.figureAssociatedAnimation.splice(o,1)}else r[i].basePosition=n.basePosition,r[i].name=n.name;else n.name!==""&&r.push(n)},setLive2dMotion:(e,t)=>{const{target:r,motion:n,overrideBounds:i}=t.payload,o=e.live2dMotion.findIndex(a=>a.target===r);o<0?e.live2dMotion.push({target:r,motion:n,overrideBounds:i}):(e.live2dMotion[o].motion=n,e.live2dMotion[o].overrideBounds=i)},setLive2dExpression:(e,t)=>{const{target:r,expression:n}=t.payload,i=e.live2dExpression.findIndex(o=>o.target===r);i<0?e.live2dExpression.push({target:r,expression:n}):e.live2dExpression[i].expression=n},replaceUIlable:(e,t)=>{e.replacedUIlable[t.payload[0]]=t.payload[1]},setFigureMetaData:(e,t)=>{t.payload[3]?e.figureMetaData[t.payload[0]]&&delete e.figureMetaData[t.payload[0]]:(e.figureMetaData[t.payload[0]]||(e.figureMetaData[t.payload[0]]={}),e.figureMetaData[t.payload[0]][t.payload[1]]=t.payload[2])}}}),{resetStageState:hp,setStage:Ce,setStageVar:YI}=Ob.actions,Ut=Ob.actions,Kz=Ob.reducer;function bf(e){throw new Error('Could not dynamically require "'+e+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var KI={exports:{}};/*!
    localForage -- Offline Storage, Improved
    Version 1.10.0
    https://localforage.github.io/localForage
    (c) 2013-2017 Mozilla, Apache License 2.0
*/(function(e,t){(function(r){e.exports=r()})(function(){return function r(n,i,o){function a(u,c){if(!i[u]){if(!n[u]){var f=typeof bf=="function"&&bf;if(!c&&f)return f(u,!0);if(s)return s(u,!0);var h=new Error("Cannot find module '"+u+"'");throw h.code="MODULE_NOT_FOUND",h}var d=i[u]={exports:{}};n[u][0].call(d.exports,function(m){var g=n[u][1][m];return a(g||m)},d,d.exports,r,n,i,o)}return i[u].exports}for(var s=typeof bf=="function"&&bf,l=0;l<o.length;l++)a(o[l]);return a}({1:[function(r,n,i){(function(o){var a=o.MutationObserver||o.WebKitMutationObserver,s;if(a){var l=0,u=new a(m),c=o.document.createTextNode("");u.observe(c,{characterData:!0}),s=function(){c.data=l=++l%2}}else if(!o.setImmediate&&typeof o.MessageChannel<"u"){var f=new o.MessageChannel;f.port1.onmessage=m,s=function(){f.port2.postMessage(0)}}else"document"in o&&"onreadystatechange"in o.document.createElement("script")?s=function(){var p=o.document.createElement("script");p.onreadystatechange=function(){m(),p.onreadystatechange=null,p.parentNode.removeChild(p),p=null},o.document.documentElement.appendChild(p)}:s=function(){setTimeout(m,0)};var h,d=[];function m(){h=!0;for(var p,v,y=d.length;y;){for(v=d,d=[],p=-1;++p<y;)v[p]();y=d.length}h=!1}n.exports=g;function g(p){d.push(p)===1&&!h&&s()}}).call(this,typeof dn<"u"?dn:typeof self<"u"?self:typeof window<"u"?window:{})},{}],2:[function(r,n,i){var o=r(1);function a(){}var s={},l=["REJECTED"],u=["FULFILLED"],c=["PENDING"];n.exports=f;function f(b){if(typeof b!="function")throw new TypeError("resolver must be a function");this.state=c,this.queue=[],this.outcome=void 0,b!==a&&g(this,b)}f.prototype.catch=function(b){return this.then(null,b)},f.prototype.then=function(b,S){if(typeof b!="function"&&this.state===u||typeof S!="function"&&this.state===l)return this;var E=new this.constructor(a);if(this.state!==c){var I=this.state===u?b:S;d(E,I,this.outcome)}else this.queue.push(new h(E,b,S));return E};function h(b,S,E){this.promise=b,typeof S=="function"&&(this.onFulfilled=S,this.callFulfilled=this.otherCallFulfilled),typeof E=="function"&&(this.onRejected=E,this.callRejected=this.otherCallRejected)}h.prototype.callFulfilled=function(b){s.resolve(this.promise,b)},h.prototype.otherCallFulfilled=function(b){d(this.promise,this.onFulfilled,b)},h.prototype.callRejected=function(b){s.reject(this.promise,b)},h.prototype.otherCallRejected=function(b){d(this.promise,this.onRejected,b)};function d(b,S,E){o(function(){var I;try{I=S(E)}catch(A){return s.reject(b,A)}I===b?s.reject(b,new TypeError("Cannot resolve promise with itself")):s.resolve(b,I)})}s.resolve=function(b,S){var E=p(m,S);if(E.status==="error")return s.reject(b,E.value);var I=E.value;if(I)g(b,I);else{b.state=u,b.outcome=S;for(var A=-1,O=b.queue.length;++A<O;)b.queue[A].callFulfilled(S)}return b},s.reject=function(b,S){b.state=l,b.outcome=S;for(var E=-1,I=b.queue.length;++E<I;)b.queue[E].callRejected(S);return b};function m(b){var S=b&&b.then;if(b&&(typeof b=="object"||typeof b=="function")&&typeof S=="function")return function(){S.apply(b,arguments)}}function g(b,S){var E=!1;function I(B){E||(E=!0,s.reject(b,B))}function A(B){E||(E=!0,s.resolve(b,B))}function O(){S(A,I)}var D=p(O);D.status==="error"&&I(D.value)}function p(b,S){var E={};try{E.value=b(S),E.status="success"}catch(I){E.status="error",E.value=I}return E}f.resolve=v;function v(b){return b instanceof this?b:s.resolve(new this(a),b)}f.reject=y;function y(b){var S=new this(a);return s.reject(S,b)}f.all=_;function _(b){var S=this;if(Object.prototype.toString.call(b)!=="[object Array]")return this.reject(new TypeError("must be an array"));var E=b.length,I=!1;if(!E)return this.resolve([]);for(var A=new Array(E),O=0,D=-1,B=new this(a);++D<E;)j(b[D],D);return B;function j(W,$){S.resolve(W).then(z,function(ie){I||(I=!0,s.reject(B,ie))});function z(ie){A[$]=ie,++O===E&&!I&&(I=!0,s.resolve(B,A))}}}f.race=x;function x(b){var S=this;if(Object.prototype.toString.call(b)!=="[object Array]")return this.reject(new TypeError("must be an array"));var E=b.length,I=!1;if(!E)return this.resolve([]);for(var A=-1,O=new this(a);++A<E;)D(b[A]);return O;function D(B){S.resolve(B).then(function(j){I||(I=!0,s.resolve(O,j))},function(j){I||(I=!0,s.reject(O,j))})}}},{1:1}],3:[function(r,n,i){(function(o){typeof o.Promise!="function"&&(o.Promise=r(2))}).call(this,typeof dn<"u"?dn:typeof self<"u"?self:typeof window<"u"?window:{})},{2:2}],4:[function(r,n,i){var o=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(T){return typeof T}:function(T){return T&&typeof Symbol=="function"&&T.constructor===Symbol&&T!==Symbol.prototype?"symbol":typeof T};function a(T,M){if(!(T instanceof M))throw new TypeError("Cannot call a class as a function")}function s(){try{if(typeof indexedDB<"u")return indexedDB;if(typeof webkitIndexedDB<"u")return webkitIndexedDB;if(typeof mozIndexedDB<"u")return mozIndexedDB;if(typeof OIndexedDB<"u")return OIndexedDB;if(typeof msIndexedDB<"u")return msIndexedDB}catch{return}}var l=s();function u(){try{if(!l||!l.open)return!1;var T=typeof openDatabase<"u"&&/(Safari|iPhone|iPad|iPod)/.test(navigator.userAgent)&&!/Chrome/.test(navigator.userAgent)&&!/BlackBerry/.test(navigator.platform),M=typeof fetch=="function"&&fetch.toString().indexOf("[native code")!==-1;return(!T||M)&&typeof indexedDB<"u"&&typeof IDBKeyRange<"u"}catch{return!1}}function c(T,M){T=T||[],M=M||{};try{return new Blob(T,M)}catch(R){if(R.name!=="TypeError")throw R;for(var P=typeof BlobBuilder<"u"?BlobBuilder:typeof MSBlobBuilder<"u"?MSBlobBuilder:typeof MozBlobBuilder<"u"?MozBlobBuilder:WebKitBlobBuilder,k=new P,F=0;F<T.length;F+=1)k.append(T[F]);return k.getBlob(M.type)}}typeof Promise>"u"&&r(3);var f=Promise;function h(T,M){M&&T.then(function(P){M(null,P)},function(P){M(P)})}function d(T,M,P){typeof M=="function"&&T.then(M),typeof P=="function"&&T.catch(P)}function m(T){return typeof T!="string"&&(console.warn(T+" used as a key, but it is not a string."),T=String(T)),T}function g(){if(arguments.length&&typeof arguments[arguments.length-1]=="function")return arguments[arguments.length-1]}var p="local-forage-detect-blob-support",v=void 0,y={},_=Object.prototype.toString,x="readonly",b="readwrite";function S(T){for(var M=T.length,P=new ArrayBuffer(M),k=new Uint8Array(P),F=0;F<M;F++)k[F]=T.charCodeAt(F);return P}function E(T){return new f(function(M){var P=T.transaction(p,b),k=c([""]);P.objectStore(p).put(k,"key"),P.onabort=function(F){F.preventDefault(),F.stopPropagation(),M(!1)},P.oncomplete=function(){var F=navigator.userAgent.match(/Chrome\/(\d+)/),R=navigator.userAgent.match(/Edge\//);M(R||!F||parseInt(F[1],10)>=43)}}).catch(function(){return!1})}function I(T){return typeof v=="boolean"?f.resolve(v):E(T).then(function(M){return v=M,v})}function A(T){var M=y[T.name],P={};P.promise=new f(function(k,F){P.resolve=k,P.reject=F}),M.deferredOperations.push(P),M.dbReady?M.dbReady=M.dbReady.then(function(){return P.promise}):M.dbReady=P.promise}function O(T){var M=y[T.name],P=M.deferredOperations.pop();if(P)return P.resolve(),P.promise}function D(T,M){var P=y[T.name],k=P.deferredOperations.pop();if(k)return k.reject(M),k.promise}function B(T,M){return new f(function(P,k){if(y[T.name]=y[T.name]||q(),T.db)if(M)A(T),T.db.close();else return P(T.db);var F=[T.name];M&&F.push(T.version);var R=l.open.apply(l,F);M&&(R.onupgradeneeded=function(U){var V=R.result;try{V.createObjectStore(T.storeName),U.oldVersion<=1&&V.createObjectStore(p)}catch(Y){if(Y.name==="ConstraintError")console.warn('The database "'+T.name+'" has been upgraded from version '+U.oldVersion+" to version "+U.newVersion+', but the storage "'+T.storeName+'" already exists.');else throw Y}}),R.onerror=function(U){U.preventDefault(),k(R.error)},R.onsuccess=function(){var U=R.result;U.onversionchange=function(V){V.target.close()},P(U),O(T)}})}function j(T){return B(T,!1)}function W(T){return B(T,!0)}function $(T,M){if(!T.db)return!0;var P=!T.db.objectStoreNames.contains(T.storeName),k=T.version<T.db.version,F=T.version>T.db.version;if(k&&(T.version!==M&&console.warn('The database "'+T.name+`" can't be downgraded from version `+T.db.version+" to version "+T.version+"."),T.version=T.db.version),F||P){if(P){var R=T.db.version+1;R>T.version&&(T.version=R)}return!0}return!1}function z(T){return new f(function(M,P){var k=new FileReader;k.onerror=P,k.onloadend=function(F){var R=btoa(F.target.result||"");M({__local_forage_encoded_blob:!0,data:R,type:T.type})},k.readAsBinaryString(T)})}function ie(T){var M=S(atob(T.data));return c([M],{type:T.type})}function Se(T){return T&&T.__local_forage_encoded_blob}function de(T){var M=this,P=M._initReady().then(function(){var k=y[M._dbInfo.name];if(k&&k.dbReady)return k.dbReady});return d(P,T,T),P}function X(T){A(T);for(var M=y[T.name],P=M.forages,k=0;k<P.length;k++){var F=P[k];F._dbInfo.db&&(F._dbInfo.db.close(),F._dbInfo.db=null)}return T.db=null,j(T).then(function(R){return T.db=R,$(T)?W(T):R}).then(function(R){T.db=M.db=R;for(var U=0;U<P.length;U++)P[U]._dbInfo.db=R}).catch(function(R){throw D(T,R),R})}function L(T,M,P,k){k===void 0&&(k=1);try{var F=T.db.transaction(T.storeName,M);P(null,F)}catch(R){if(k>0&&(!T.db||R.name==="InvalidStateError"||R.name==="NotFoundError"))return f.resolve().then(function(){if(!T.db||R.name==="NotFoundError"&&!T.db.objectStoreNames.contains(T.storeName)&&T.version<=T.db.version)return T.db&&(T.version=T.db.version+1),W(T)}).then(function(){return X(T).then(function(){L(T,M,P,k-1)})}).catch(P);P(R)}}function q(){return{forages:[],db:null,dbReady:null,deferredOperations:[]}}function re(T){var M=this,P={db:null};if(T)for(var k in T)P[k]=T[k];var F=y[P.name];F||(F=q(),y[P.name]=F),F.forages.push(M),M._initReady||(M._initReady=M.ready,M.ready=de);var R=[];function U(){return f.resolve()}for(var V=0;V<F.forages.length;V++){var Y=F.forages[V];Y!==M&&R.push(Y._initReady().catch(U))}var K=F.forages.slice(0);return f.all(R).then(function(){return P.db=F.db,j(P)}).then(function(ee){return P.db=ee,$(P,M._defaultConfig.version)?W(P):ee}).then(function(ee){P.db=F.db=ee,M._dbInfo=P;for(var ue=0;ue<K.length;ue++){var Ae=K[ue];Ae!==M&&(Ae._dbInfo.db=P.db,Ae._dbInfo.version=P.version)}})}function le(T,M){var P=this;T=m(T);var k=new f(function(F,R){P.ready().then(function(){L(P._dbInfo,x,function(U,V){if(U)return R(U);try{var Y=V.objectStore(P._dbInfo.storeName),K=Y.get(T);K.onsuccess=function(){var ee=K.result;ee===void 0&&(ee=null),Se(ee)&&(ee=ie(ee)),F(ee)},K.onerror=function(){R(K.error)}}catch(ee){R(ee)}})}).catch(R)});return h(k,M),k}function ye(T,M){var P=this,k=new f(function(F,R){P.ready().then(function(){L(P._dbInfo,x,function(U,V){if(U)return R(U);try{var Y=V.objectStore(P._dbInfo.storeName),K=Y.openCursor(),ee=1;K.onsuccess=function(){var ue=K.result;if(ue){var Ae=ue.value;Se(Ae)&&(Ae=ie(Ae));var ze=T(Ae,ue.key,ee++);ze!==void 0?F(ze):ue.continue()}else F()},K.onerror=function(){R(K.error)}}catch(ue){R(ue)}})}).catch(R)});return h(k,M),k}function we(T,M,P){var k=this;T=m(T);var F=new f(function(R,U){var V;k.ready().then(function(){return V=k._dbInfo,_.call(M)==="[object Blob]"?I(V.db).then(function(Y){return Y?M:z(M)}):M}).then(function(Y){L(k._dbInfo,b,function(K,ee){if(K)return U(K);try{var ue=ee.objectStore(k._dbInfo.storeName);Y===null&&(Y=void 0);var Ae=ue.put(Y,T);ee.oncomplete=function(){Y===void 0&&(Y=null),R(Y)},ee.onabort=ee.onerror=function(){var ze=Ae.error?Ae.error:Ae.transaction.error;U(ze)}}catch(ze){U(ze)}})}).catch(U)});return h(F,P),F}function Ee(T,M){var P=this;T=m(T);var k=new f(function(F,R){P.ready().then(function(){L(P._dbInfo,b,function(U,V){if(U)return R(U);try{var Y=V.objectStore(P._dbInfo.storeName),K=Y.delete(T);V.oncomplete=function(){F()},V.onerror=function(){R(K.error)},V.onabort=function(){var ee=K.error?K.error:K.transaction.error;R(ee)}}catch(ee){R(ee)}})}).catch(R)});return h(k,M),k}function Ge(T){var M=this,P=new f(function(k,F){M.ready().then(function(){L(M._dbInfo,b,function(R,U){if(R)return F(R);try{var V=U.objectStore(M._dbInfo.storeName),Y=V.clear();U.oncomplete=function(){k()},U.onabort=U.onerror=function(){var K=Y.error?Y.error:Y.transaction.error;F(K)}}catch(K){F(K)}})}).catch(F)});return h(P,T),P}function He(T){var M=this,P=new f(function(k,F){M.ready().then(function(){L(M._dbInfo,x,function(R,U){if(R)return F(R);try{var V=U.objectStore(M._dbInfo.storeName),Y=V.count();Y.onsuccess=function(){k(Y.result)},Y.onerror=function(){F(Y.error)}}catch(K){F(K)}})}).catch(F)});return h(P,T),P}function Qe(T,M){var P=this,k=new f(function(F,R){if(T<0){F(null);return}P.ready().then(function(){L(P._dbInfo,x,function(U,V){if(U)return R(U);try{var Y=V.objectStore(P._dbInfo.storeName),K=!1,ee=Y.openKeyCursor();ee.onsuccess=function(){var ue=ee.result;if(!ue){F(null);return}T===0||K?F(ue.key):(K=!0,ue.advance(T))},ee.onerror=function(){R(ee.error)}}catch(ue){R(ue)}})}).catch(R)});return h(k,M),k}function Oe(T){var M=this,P=new f(function(k,F){M.ready().then(function(){L(M._dbInfo,x,function(R,U){if(R)return F(R);try{var V=U.objectStore(M._dbInfo.storeName),Y=V.openKeyCursor(),K=[];Y.onsuccess=function(){var ee=Y.result;if(!ee){k(K);return}K.push(ee.key),ee.continue()},Y.onerror=function(){F(Y.error)}}catch(ee){F(ee)}})}).catch(F)});return h(P,T),P}function Be(T,M){M=g.apply(this,arguments);var P=this.config();T=typeof T!="function"&&T||{},T.name||(T.name=T.name||P.name,T.storeName=T.storeName||P.storeName);var k=this,F;if(!T.name)F=f.reject("Invalid arguments");else{var R=T.name===P.name&&k._dbInfo.db,U=R?f.resolve(k._dbInfo.db):j(T).then(function(V){var Y=y[T.name],K=Y.forages;Y.db=V;for(var ee=0;ee<K.length;ee++)K[ee]._dbInfo.db=V;return V});T.storeName?F=U.then(function(V){if(V.objectStoreNames.contains(T.storeName)){var Y=V.version+1;A(T);var K=y[T.name],ee=K.forages;V.close();for(var ue=0;ue<ee.length;ue++){var Ae=ee[ue];Ae._dbInfo.db=null,Ae._dbInfo.version=Y}var ze=new f(function(Xe,Lt){var Ot=l.open(T.name,Y);Ot.onerror=function(nn){var Ll=Ot.result;Ll.close(),Lt(nn)},Ot.onupgradeneeded=function(){var nn=Ot.result;nn.deleteObjectStore(T.storeName)},Ot.onsuccess=function(){var nn=Ot.result;nn.close(),Xe(nn)}});return ze.then(function(Xe){K.db=Xe;for(var Lt=0;Lt<ee.length;Lt++){var Ot=ee[Lt];Ot._dbInfo.db=Xe,O(Ot._dbInfo)}}).catch(function(Xe){throw(D(T,Xe)||f.resolve()).catch(function(){}),Xe})}}):F=U.then(function(V){A(T);var Y=y[T.name],K=Y.forages;V.close();for(var ee=0;ee<K.length;ee++){var ue=K[ee];ue._dbInfo.db=null}var Ae=new f(function(ze,Xe){var Lt=l.deleteDatabase(T.name);Lt.onerror=function(){var Ot=Lt.result;Ot&&Ot.close(),Xe(Lt.error)},Lt.onblocked=function(){console.warn('dropInstance blocked for database "'+T.name+'" until all open connections are closed')},Lt.onsuccess=function(){var Ot=Lt.result;Ot&&Ot.close(),ze(Ot)}});return Ae.then(function(ze){Y.db=ze;for(var Xe=0;Xe<K.length;Xe++){var Lt=K[Xe];O(Lt._dbInfo)}}).catch(function(ze){throw(D(T,ze)||f.resolve()).catch(function(){}),ze})})}return h(F,M),F}var We={_driver:"asyncStorage",_initStorage:re,_support:u(),iterate:ye,getItem:le,setItem:we,removeItem:Ee,clear:Ge,length:He,key:Qe,keys:Oe,dropInstance:Be};function Te(){return typeof openDatabase=="function"}var dt="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",fr="~~local_forage_type~",De=/^~~local_forage_type~([^~]+)~/,Er="__lfsc__:",zn=Er.length,Hi="arbf",Ha="blob",Il="si08",Ml="ui08",Rl="uic8",US="si16",$S="si32",GS="ur16",zS="ui32",VS="fl32",HS="fl64",WS=zn+Hi.length,XS=Object.prototype.toString;function qS(T){var M=T.length*.75,P=T.length,k,F=0,R,U,V,Y;T[T.length-1]==="="&&(M--,T[T.length-2]==="="&&M--);var K=new ArrayBuffer(M),ee=new Uint8Array(K);for(k=0;k<P;k+=4)R=dt.indexOf(T[k]),U=dt.indexOf(T[k+1]),V=dt.indexOf(T[k+2]),Y=dt.indexOf(T[k+3]),ee[F++]=R<<2|U>>4,ee[F++]=(U&15)<<4|V>>2,ee[F++]=(V&3)<<6|Y&63;return K}function Am(T){var M=new Uint8Array(T),P="",k;for(k=0;k<M.length;k+=3)P+=dt[M[k]>>2],P+=dt[(M[k]&3)<<4|M[k+1]>>4],P+=dt[(M[k+1]&15)<<2|M[k+2]>>6],P+=dt[M[k+2]&63];return M.length%3===2?P=P.substring(0,P.length-1)+"=":M.length%3===1&&(P=P.substring(0,P.length-2)+"=="),P}function zD(T,M){var P="";if(T&&(P=XS.call(T)),T&&(P==="[object ArrayBuffer]"||T.buffer&&XS.call(T.buffer)==="[object ArrayBuffer]")){var k,F=Er;T instanceof ArrayBuffer?(k=T,F+=Hi):(k=T.buffer,P==="[object Int8Array]"?F+=Il:P==="[object Uint8Array]"?F+=Ml:P==="[object Uint8ClampedArray]"?F+=Rl:P==="[object Int16Array]"?F+=US:P==="[object Uint16Array]"?F+=GS:P==="[object Int32Array]"?F+=$S:P==="[object Uint32Array]"?F+=zS:P==="[object Float32Array]"?F+=VS:P==="[object Float64Array]"?F+=HS:M(new Error("Failed to get type for BinaryArray"))),M(F+Am(k))}else if(P==="[object Blob]"){var R=new FileReader;R.onload=function(){var U=fr+T.type+"~"+Am(this.result);M(Er+Ha+U)},R.readAsArrayBuffer(T)}else try{M(JSON.stringify(T))}catch(U){console.error("Couldn't convert value into a JSON string: ",T),M(null,U)}}function VD(T){if(T.substring(0,zn)!==Er)return JSON.parse(T);var M=T.substring(WS),P=T.substring(zn,WS),k;if(P===Ha&&De.test(M)){var F=M.match(De);k=F[1],M=M.substring(F[0].length)}var R=qS(M);switch(P){case Hi:return R;case Ha:return c([R],{type:k});case Il:return new Int8Array(R);case Ml:return new Uint8Array(R);case Rl:return new Uint8ClampedArray(R);case US:return new Int16Array(R);case GS:return new Uint16Array(R);case $S:return new Int32Array(R);case zS:return new Uint32Array(R);case VS:return new Float32Array(R);case HS:return new Float64Array(R);default:throw new Error("Unkown type: "+P)}}var Om={serialize:zD,deserialize:VD,stringToBuffer:qS,bufferToString:Am};function YS(T,M,P,k){T.executeSql("CREATE TABLE IF NOT EXISTS "+M.storeName+" (id INTEGER PRIMARY KEY, key unique, value)",[],P,k)}function HD(T){var M=this,P={db:null};if(T)for(var k in T)P[k]=typeof T[k]!="string"?T[k].toString():T[k];var F=new f(function(R,U){try{P.db=openDatabase(P.name,String(P.version),P.description,P.size)}catch(V){return U(V)}P.db.transaction(function(V){YS(V,P,function(){M._dbInfo=P,R()},function(Y,K){U(K)})},U)});return P.serializer=Om,F}function Wi(T,M,P,k,F,R){T.executeSql(P,k,F,function(U,V){V.code===V.SYNTAX_ERR?U.executeSql("SELECT name FROM sqlite_master WHERE type='table' AND name = ?",[M.storeName],function(Y,K){K.rows.length?R(Y,V):YS(Y,M,function(){Y.executeSql(P,k,F,R)},R)},R):R(U,V)},R)}function WD(T,M){var P=this;T=m(T);var k=new f(function(F,R){P.ready().then(function(){var U=P._dbInfo;U.db.transaction(function(V){Wi(V,U,"SELECT * FROM "+U.storeName+" WHERE key = ? LIMIT 1",[T],function(Y,K){var ee=K.rows.length?K.rows.item(0).value:null;ee&&(ee=U.serializer.deserialize(ee)),F(ee)},function(Y,K){R(K)})})}).catch(R)});return h(k,M),k}function XD(T,M){var P=this,k=new f(function(F,R){P.ready().then(function(){var U=P._dbInfo;U.db.transaction(function(V){Wi(V,U,"SELECT * FROM "+U.storeName,[],function(Y,K){for(var ee=K.rows,ue=ee.length,Ae=0;Ae<ue;Ae++){var ze=ee.item(Ae),Xe=ze.value;if(Xe&&(Xe=U.serializer.deserialize(Xe)),Xe=T(Xe,ze.key,Ae+1),Xe!==void 0){F(Xe);return}}F()},function(Y,K){R(K)})})}).catch(R)});return h(k,M),k}function KS(T,M,P,k){var F=this;T=m(T);var R=new f(function(U,V){F.ready().then(function(){M===void 0&&(M=null);var Y=M,K=F._dbInfo;K.serializer.serialize(M,function(ee,ue){ue?V(ue):K.db.transaction(function(Ae){Wi(Ae,K,"INSERT OR REPLACE INTO "+K.storeName+" (key, value) VALUES (?, ?)",[T,ee],function(){U(Y)},function(ze,Xe){V(Xe)})},function(Ae){if(Ae.code===Ae.QUOTA_ERR){if(k>0){U(KS.apply(F,[T,Y,P,k-1]));return}V(Ae)}})})}).catch(V)});return h(R,P),R}function qD(T,M,P){return KS.apply(this,[T,M,P,1])}function YD(T,M){var P=this;T=m(T);var k=new f(function(F,R){P.ready().then(function(){var U=P._dbInfo;U.db.transaction(function(V){Wi(V,U,"DELETE FROM "+U.storeName+" WHERE key = ?",[T],function(){F()},function(Y,K){R(K)})})}).catch(R)});return h(k,M),k}function KD(T){var M=this,P=new f(function(k,F){M.ready().then(function(){var R=M._dbInfo;R.db.transaction(function(U){Wi(U,R,"DELETE FROM "+R.storeName,[],function(){k()},function(V,Y){F(Y)})})}).catch(F)});return h(P,T),P}function ZD(T){var M=this,P=new f(function(k,F){M.ready().then(function(){var R=M._dbInfo;R.db.transaction(function(U){Wi(U,R,"SELECT COUNT(key) as c FROM "+R.storeName,[],function(V,Y){var K=Y.rows.item(0).c;k(K)},function(V,Y){F(Y)})})}).catch(F)});return h(P,T),P}function JD(T,M){var P=this,k=new f(function(F,R){P.ready().then(function(){var U=P._dbInfo;U.db.transaction(function(V){Wi(V,U,"SELECT key FROM "+U.storeName+" WHERE id = ? LIMIT 1",[T+1],function(Y,K){var ee=K.rows.length?K.rows.item(0).key:null;F(ee)},function(Y,K){R(K)})})}).catch(R)});return h(k,M),k}function QD(T){var M=this,P=new f(function(k,F){M.ready().then(function(){var R=M._dbInfo;R.db.transaction(function(U){Wi(U,R,"SELECT key FROM "+R.storeName,[],function(V,Y){for(var K=[],ee=0;ee<Y.rows.length;ee++)K.push(Y.rows.item(ee).key);k(K)},function(V,Y){F(Y)})})}).catch(F)});return h(P,T),P}function eN(T){return new f(function(M,P){T.transaction(function(k){k.executeSql("SELECT name FROM sqlite_master WHERE type='table' AND name <> '__WebKitDatabaseInfoTable__'",[],function(F,R){for(var U=[],V=0;V<R.rows.length;V++)U.push(R.rows.item(V).name);M({db:T,storeNames:U})},function(F,R){P(R)})},function(k){P(k)})})}function tN(T,M){M=g.apply(this,arguments);var P=this.config();T=typeof T!="function"&&T||{},T.name||(T.name=T.name||P.name,T.storeName=T.storeName||P.storeName);var k=this,F;return T.name?F=new f(function(R){var U;T.name===P.name?U=k._dbInfo.db:U=openDatabase(T.name,"","",0),T.storeName?R({db:U,storeNames:[T.storeName]}):R(eN(U))}).then(function(R){return new f(function(U,V){R.db.transaction(function(Y){function K(ze){return new f(function(Xe,Lt){Y.executeSql("DROP TABLE IF EXISTS "+ze,[],function(){Xe()},function(Ot,nn){Lt(nn)})})}for(var ee=[],ue=0,Ae=R.storeNames.length;ue<Ae;ue++)ee.push(K(R.storeNames[ue]));f.all(ee).then(function(){U()}).catch(function(ze){V(ze)})},function(Y){V(Y)})})}):F=f.reject("Invalid arguments"),h(F,M),F}var rN={_driver:"webSQLStorage",_initStorage:HD,_support:Te(),iterate:XD,getItem:WD,setItem:qD,removeItem:YD,clear:KD,length:ZD,key:JD,keys:QD,dropInstance:tN};function nN(){try{return typeof localStorage<"u"&&"setItem"in localStorage&&!!localStorage.setItem}catch{return!1}}function ZS(T,M){var P=T.name+"/";return T.storeName!==M.storeName&&(P+=T.storeName+"/"),P}function iN(){var T="_localforage_support_test";try{return localStorage.setItem(T,!0),localStorage.removeItem(T),!1}catch{return!0}}function oN(){return!iN()||localStorage.length>0}function aN(T){var M=this,P={};if(T)for(var k in T)P[k]=T[k];return P.keyPrefix=ZS(T,M._defaultConfig),oN()?(M._dbInfo=P,P.serializer=Om,f.resolve()):f.reject()}function sN(T){var M=this,P=M.ready().then(function(){for(var k=M._dbInfo.keyPrefix,F=localStorage.length-1;F>=0;F--){var R=localStorage.key(F);R.indexOf(k)===0&&localStorage.removeItem(R)}});return h(P,T),P}function lN(T,M){var P=this;T=m(T);var k=P.ready().then(function(){var F=P._dbInfo,R=localStorage.getItem(F.keyPrefix+T);return R&&(R=F.serializer.deserialize(R)),R});return h(k,M),k}function uN(T,M){var P=this,k=P.ready().then(function(){for(var F=P._dbInfo,R=F.keyPrefix,U=R.length,V=localStorage.length,Y=1,K=0;K<V;K++){var ee=localStorage.key(K);if(ee.indexOf(R)===0){var ue=localStorage.getItem(ee);if(ue&&(ue=F.serializer.deserialize(ue)),ue=T(ue,ee.substring(U),Y++),ue!==void 0)return ue}}});return h(k,M),k}function cN(T,M){var P=this,k=P.ready().then(function(){var F=P._dbInfo,R;try{R=localStorage.key(T)}catch{R=null}return R&&(R=R.substring(F.keyPrefix.length)),R});return h(k,M),k}function fN(T){var M=this,P=M.ready().then(function(){for(var k=M._dbInfo,F=localStorage.length,R=[],U=0;U<F;U++){var V=localStorage.key(U);V.indexOf(k.keyPrefix)===0&&R.push(V.substring(k.keyPrefix.length))}return R});return h(P,T),P}function hN(T){var M=this,P=M.keys().then(function(k){return k.length});return h(P,T),P}function dN(T,M){var P=this;T=m(T);var k=P.ready().then(function(){var F=P._dbInfo;localStorage.removeItem(F.keyPrefix+T)});return h(k,M),k}function pN(T,M,P){var k=this;T=m(T);var F=k.ready().then(function(){M===void 0&&(M=null);var R=M;return new f(function(U,V){var Y=k._dbInfo;Y.serializer.serialize(M,function(K,ee){if(ee)V(ee);else try{localStorage.setItem(Y.keyPrefix+T,K),U(R)}catch(ue){(ue.name==="QuotaExceededError"||ue.name==="NS_ERROR_DOM_QUOTA_REACHED")&&V(ue),V(ue)}})})});return h(F,P),F}function mN(T,M){if(M=g.apply(this,arguments),T=typeof T!="function"&&T||{},!T.name){var P=this.config();T.name=T.name||P.name,T.storeName=T.storeName||P.storeName}var k=this,F;return T.name?F=new f(function(R){T.storeName?R(ZS(T,k._defaultConfig)):R(T.name+"/")}).then(function(R){for(var U=localStorage.length-1;U>=0;U--){var V=localStorage.key(U);V.indexOf(R)===0&&localStorage.removeItem(V)}}):F=f.reject("Invalid arguments"),h(F,M),F}var vN={_driver:"localStorageWrapper",_initStorage:aN,_support:nN(),iterate:uN,getItem:lN,setItem:pN,removeItem:dN,clear:sN,length:hN,key:cN,keys:fN,dropInstance:mN},gN=function(M,P){return M===P||typeof M=="number"&&typeof P=="number"&&isNaN(M)&&isNaN(P)},yN=function(M,P){for(var k=M.length,F=0;F<k;){if(gN(M[F],P))return!0;F++}return!1},JS=Array.isArray||function(T){return Object.prototype.toString.call(T)==="[object Array]"},kl={},QS={},Wa={INDEXEDDB:We,WEBSQL:rN,LOCALSTORAGE:vN},_N=[Wa.INDEXEDDB._driver,Wa.WEBSQL._driver,Wa.LOCALSTORAGE._driver],sf=["dropInstance"],Im=["clear","getItem","iterate","key","keys","length","removeItem","setItem"].concat(sf),xN={description:"",driver:_N.slice(),name:"localforage",size:4980736,storeName:"keyvaluepairs",version:1};function bN(T,M){T[M]=function(){var P=arguments;return T.ready().then(function(){return T[M].apply(T,P)})}}function Mm(){for(var T=1;T<arguments.length;T++){var M=arguments[T];if(M)for(var P in M)M.hasOwnProperty(P)&&(JS(M[P])?arguments[0][P]=M[P].slice():arguments[0][P]=M[P])}return arguments[0]}var SN=function(){function T(M){a(this,T);for(var P in Wa)if(Wa.hasOwnProperty(P)){var k=Wa[P],F=k._driver;this[P]=F,kl[F]||this.defineDriver(k)}this._defaultConfig=Mm({},xN),this._config=Mm({},this._defaultConfig,M),this._driverSet=null,this._initDriver=null,this._ready=!1,this._dbInfo=null,this._wrapLibraryMethodsWithReady(),this.setDriver(this._config.driver).catch(function(){})}return T.prototype.config=function(P){if((typeof P>"u"?"undefined":o(P))==="object"){if(this._ready)return new Error("Can't call config() after localforage has been used.");for(var k in P){if(k==="storeName"&&(P[k]=P[k].replace(/\W/g,"_")),k==="version"&&typeof P[k]!="number")return new Error("Database version must be a number.");this._config[k]=P[k]}return"driver"in P&&P.driver?this.setDriver(this._config.driver):!0}else return typeof P=="string"?this._config[P]:this._config},T.prototype.defineDriver=function(P,k,F){var R=new f(function(U,V){try{var Y=P._driver,K=new Error("Custom driver not compliant; see https://mozilla.github.io/localForage/#definedriver");if(!P._driver){V(K);return}for(var ee=Im.concat("_initStorage"),ue=0,Ae=ee.length;ue<Ae;ue++){var ze=ee[ue],Xe=!yN(sf,ze);if((Xe||P[ze])&&typeof P[ze]!="function"){V(K);return}}var Lt=function(){for(var Ll=function(TN){return function(){var CN=new Error("Method "+TN+" is not implemented by the current driver"),ew=f.reject(CN);return h(ew,arguments[arguments.length-1]),ew}},Rm=0,EN=sf.length;Rm<EN;Rm++){var km=sf[Rm];P[km]||(P[km]=Ll(km))}};Lt();var Ot=function(Ll){kl[Y]&&console.info("Redefining LocalForage driver: "+Y),kl[Y]=P,QS[Y]=Ll,U()};"_support"in P?P._support&&typeof P._support=="function"?P._support().then(Ot,V):Ot(!!P._support):Ot(!0)}catch(nn){V(nn)}});return d(R,k,F),R},T.prototype.driver=function(){return this._driver||null},T.prototype.getDriver=function(P,k,F){var R=kl[P]?f.resolve(kl[P]):f.reject(new Error("Driver not found."));return d(R,k,F),R},T.prototype.getSerializer=function(P){var k=f.resolve(Om);return d(k,P),k},T.prototype.ready=function(P){var k=this,F=k._driverSet.then(function(){return k._ready===null&&(k._ready=k._initDriver()),k._ready});return d(F,P,P),F},T.prototype.setDriver=function(P,k,F){var R=this;JS(P)||(P=[P]);var U=this._getSupportedDrivers(P);function V(){R._config.driver=R.driver()}function Y(ue){return R._extend(ue),V(),R._ready=R._initStorage(R._config),R._ready}function K(ue){return function(){var Ae=0;function ze(){for(;Ae<ue.length;){var Xe=ue[Ae];return Ae++,R._dbInfo=null,R._ready=null,R.getDriver(Xe).then(Y).catch(ze)}V();var Lt=new Error("No available storage method found.");return R._driverSet=f.reject(Lt),R._driverSet}return ze()}}var ee=this._driverSet!==null?this._driverSet.catch(function(){return f.resolve()}):f.resolve();return this._driverSet=ee.then(function(){var ue=U[0];return R._dbInfo=null,R._ready=null,R.getDriver(ue).then(function(Ae){R._driver=Ae._driver,V(),R._wrapLibraryMethodsWithReady(),R._initDriver=K(U)})}).catch(function(){V();var ue=new Error("No available storage method found.");return R._driverSet=f.reject(ue),R._driverSet}),d(this._driverSet,k,F),this._driverSet},T.prototype.supports=function(P){return!!QS[P]},T.prototype._extend=function(P){Mm(this,P)},T.prototype._getSupportedDrivers=function(P){for(var k=[],F=0,R=P.length;F<R;F++){var U=P[F];this.supports(U)&&k.push(U)}return k},T.prototype._wrapLibraryMethodsWithReady=function(){for(var P=0,k=Im.length;P<k;P++)bN(this,Im[P])},T.prototype.createInstance=function(P){return new T(P)},T}(),wN=new SN;n.exports=wN},{3:3}]},{},[4])(4)})})(KI);var Aa=KI.exports;const ja=Sr(Aa);var Ib={exports:{}},ZI=function(t,r){return function(){for(var i=new Array(arguments.length),o=0;o<i.length;o++)i[o]=arguments[o];return t.apply(r,i)}},Zz=ZI,Ua=Object.prototype.toString;function Mb(e){return Ua.call(e)==="[object Array]"}function r_(e){return typeof e>"u"}function Jz(e){return e!==null&&!r_(e)&&e.constructor!==null&&!r_(e.constructor)&&typeof e.constructor.isBuffer=="function"&&e.constructor.isBuffer(e)}function Qz(e){return Ua.call(e)==="[object ArrayBuffer]"}function eV(e){return typeof FormData<"u"&&e instanceof FormData}function tV(e){var t;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?t=ArrayBuffer.isView(e):t=e&&e.buffer&&e.buffer instanceof ArrayBuffer,t}function rV(e){return typeof e=="string"}function nV(e){return typeof e=="number"}function JI(e){return e!==null&&typeof e=="object"}function gh(e){if(Ua.call(e)!=="[object Object]")return!1;var t=Object.getPrototypeOf(e);return t===null||t===Object.prototype}function iV(e){return Ua.call(e)==="[object Date]"}function oV(e){return Ua.call(e)==="[object File]"}function aV(e){return Ua.call(e)==="[object Blob]"}function QI(e){return Ua.call(e)==="[object Function]"}function sV(e){return JI(e)&&QI(e.pipe)}function lV(e){return typeof URLSearchParams<"u"&&e instanceof URLSearchParams}function uV(e){return e.trim?e.trim():e.replace(/^\s+|\s+$/g,"")}function cV(){return typeof navigator<"u"&&(navigator.product==="ReactNative"||navigator.product==="NativeScript"||navigator.product==="NS")?!1:typeof window<"u"&&typeof document<"u"}function Rb(e,t){if(!(e===null||typeof e>"u"))if(typeof e!="object"&&(e=[e]),Mb(e))for(var r=0,n=e.length;r<n;r++)t.call(null,e[r],r,e);else for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.call(null,e[i],i,e)}function n_(){var e={};function t(i,o){gh(e[o])&&gh(i)?e[o]=n_(e[o],i):gh(i)?e[o]=n_({},i):Mb(i)?e[o]=i.slice():e[o]=i}for(var r=0,n=arguments.length;r<n;r++)Rb(arguments[r],t);return e}function fV(e,t,r){return Rb(t,function(i,o){r&&typeof i=="function"?e[o]=Zz(i,r):e[o]=i}),e}function hV(e){return e.charCodeAt(0)===65279&&(e=e.slice(1)),e}var tn={isArray:Mb,isArrayBuffer:Qz,isBuffer:Jz,isFormData:eV,isArrayBufferView:tV,isString:rV,isNumber:nV,isObject:JI,isPlainObject:gh,isUndefined:r_,isDate:iV,isFile:oV,isBlob:aV,isFunction:QI,isStream:sV,isURLSearchParams:lV,isStandardBrowserEnv:cV,forEach:Rb,merge:n_,extend:fV,trim:uV,stripBOM:hV},qa=tn;function oT(e){return encodeURIComponent(e).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}var eM=function(t,r,n){if(!r)return t;var i;if(n)i=n(r);else if(qa.isURLSearchParams(r))i=r.toString();else{var o=[];qa.forEach(r,function(l,u){l===null||typeof l>"u"||(qa.isArray(l)?u=u+"[]":l=[l],qa.forEach(l,function(f){qa.isDate(f)?f=f.toISOString():qa.isObject(f)&&(f=JSON.stringify(f)),o.push(oT(u)+"="+oT(f))}))}),i=o.join("&")}if(i){var a=t.indexOf("#");a!==-1&&(t=t.slice(0,a)),t+=(t.indexOf("?")===-1?"?":"&")+i}return t},dV=tn;function dp(){this.handlers=[]}dp.prototype.use=function(t,r,n){return this.handlers.push({fulfilled:t,rejected:r,synchronous:n?n.synchronous:!1,runWhen:n?n.runWhen:null}),this.handlers.length-1};dp.prototype.eject=function(t){this.handlers[t]&&(this.handlers[t]=null)};dp.prototype.forEach=function(t){dV.forEach(this.handlers,function(n){n!==null&&t(n)})};var pV=dp,mV=tn,vV=function(t,r){mV.forEach(t,function(i,o){o!==r&&o.toUpperCase()===r.toUpperCase()&&(t[r]=i,delete t[o])})},tM=function(t,r,n,i,o){return t.config=r,n&&(t.code=n),t.request=i,t.response=o,t.isAxiosError=!0,t.toJSON=function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:this.config,code:this.code,status:this.response&&this.response.status?this.response.status:null}},t},hv,aT;function rM(){if(aT)return hv;aT=1;var e=tM;return hv=function(r,n,i,o,a){var s=new Error(r);return e(s,n,i,o,a)},hv}var dv,sT;function gV(){if(sT)return dv;sT=1;var e=rM();return dv=function(r,n,i){var o=i.config.validateStatus;!i.status||!o||o(i.status)?r(i):n(e("Request failed with status code "+i.status,i.config,null,i.request,i))},dv}var pv,lT;function yV(){if(lT)return pv;lT=1;var e=tn;return pv=e.isStandardBrowserEnv()?function(){return{write:function(n,i,o,a,s,l){var u=[];u.push(n+"="+encodeURIComponent(i)),e.isNumber(o)&&u.push("expires="+new Date(o).toGMTString()),e.isString(a)&&u.push("path="+a),e.isString(s)&&u.push("domain="+s),l===!0&&u.push("secure"),document.cookie=u.join("; ")},read:function(n){var i=document.cookie.match(new RegExp("(^|;\\s*)("+n+")=([^;]*)"));return i?decodeURIComponent(i[3]):null},remove:function(n){this.write(n,"",Date.now()-864e5)}}}():function(){return{write:function(){},read:function(){return null},remove:function(){}}}(),pv}var mv,uT;function _V(){return uT||(uT=1,mv=function(t){return/^([a-z][a-z\d\+\-\.]*:)?\/\//i.test(t)}),mv}var vv,cT;function xV(){return cT||(cT=1,vv=function(t,r){return r?t.replace(/\/+$/,"")+"/"+r.replace(/^\/+/,""):t}),vv}var gv,fT;function bV(){if(fT)return gv;fT=1;var e=_V(),t=xV();return gv=function(n,i){return n&&!e(i)?t(n,i):i},gv}var yv,hT;function SV(){if(hT)return yv;hT=1;var e=tn,t=["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"];return yv=function(n){var i={},o,a,s;return n&&e.forEach(n.split(`
`),function(u){if(s=u.indexOf(":"),o=e.trim(u.substr(0,s)).toLowerCase(),a=e.trim(u.substr(s+1)),o){if(i[o]&&t.indexOf(o)>=0)return;o==="set-cookie"?i[o]=(i[o]?i[o]:[]).concat([a]):i[o]=i[o]?i[o]+", "+a:a}}),i},yv}var _v,dT;function wV(){if(dT)return _v;dT=1;var e=tn;return _v=e.isStandardBrowserEnv()?function(){var r=/(msie|trident)/i.test(navigator.userAgent),n=document.createElement("a"),i;function o(a){var s=a;return r&&(n.setAttribute("href",s),s=n.href),n.setAttribute("href",s),{href:n.href,protocol:n.protocol?n.protocol.replace(/:$/,""):"",host:n.host,search:n.search?n.search.replace(/^\?/,""):"",hash:n.hash?n.hash.replace(/^#/,""):"",hostname:n.hostname,port:n.port,pathname:n.pathname.charAt(0)==="/"?n.pathname:"/"+n.pathname}}return i=o(window.location.href),function(s){var l=e.isString(s)?o(s):s;return l.protocol===i.protocol&&l.host===i.host}}():function(){return function(){return!0}}(),_v}var xv,pT;function pp(){if(pT)return xv;pT=1;function e(t){this.message=t}return e.prototype.toString=function(){return"Cancel"+(this.message?": "+this.message:"")},e.prototype.__CANCEL__=!0,xv=e,xv}var bv,mT;function vT(){if(mT)return bv;mT=1;var e=tn,t=gV(),r=yV(),n=eM,i=bV(),o=SV(),a=wV(),s=rM(),l=mp(),u=pp();return bv=function(f){return new Promise(function(d,m){var g=f.data,p=f.headers,v=f.responseType,y;function _(){f.cancelToken&&f.cancelToken.unsubscribe(y),f.signal&&f.signal.removeEventListener("abort",y)}e.isFormData(g)&&delete p["Content-Type"];var x=new XMLHttpRequest;if(f.auth){var b=f.auth.username||"",S=f.auth.password?unescape(encodeURIComponent(f.auth.password)):"";p.Authorization="Basic "+btoa(b+":"+S)}var E=i(f.baseURL,f.url);x.open(f.method.toUpperCase(),n(E,f.params,f.paramsSerializer),!0),x.timeout=f.timeout;function I(){if(x){var O="getAllResponseHeaders"in x?o(x.getAllResponseHeaders()):null,D=!v||v==="text"||v==="json"?x.responseText:x.response,B={data:D,status:x.status,statusText:x.statusText,headers:O,config:f,request:x};t(function(W){d(W),_()},function(W){m(W),_()},B),x=null}}if("onloadend"in x?x.onloadend=I:x.onreadystatechange=function(){!x||x.readyState!==4||x.status===0&&!(x.responseURL&&x.responseURL.indexOf("file:")===0)||setTimeout(I)},x.onabort=function(){x&&(m(s("Request aborted",f,"ECONNABORTED",x)),x=null)},x.onerror=function(){m(s("Network Error",f,null,x)),x=null},x.ontimeout=function(){var D=f.timeout?"timeout of "+f.timeout+"ms exceeded":"timeout exceeded",B=f.transitional||l.transitional;f.timeoutErrorMessage&&(D=f.timeoutErrorMessage),m(s(D,f,B.clarifyTimeoutError?"ETIMEDOUT":"ECONNABORTED",x)),x=null},e.isStandardBrowserEnv()){var A=(f.withCredentials||a(E))&&f.xsrfCookieName?r.read(f.xsrfCookieName):void 0;A&&(p[f.xsrfHeaderName]=A)}"setRequestHeader"in x&&e.forEach(p,function(D,B){typeof g>"u"&&B.toLowerCase()==="content-type"?delete p[B]:x.setRequestHeader(B,D)}),e.isUndefined(f.withCredentials)||(x.withCredentials=!!f.withCredentials),v&&v!=="json"&&(x.responseType=f.responseType),typeof f.onDownloadProgress=="function"&&x.addEventListener("progress",f.onDownloadProgress),typeof f.onUploadProgress=="function"&&x.upload&&x.upload.addEventListener("progress",f.onUploadProgress),(f.cancelToken||f.signal)&&(y=function(O){x&&(m(!O||O&&O.type?new u("canceled"):O),x.abort(),x=null)},f.cancelToken&&f.cancelToken.subscribe(y),f.signal&&(f.signal.aborted?y():f.signal.addEventListener("abort",y))),g||(g=null),x.send(g)})},bv}var Sv,gT;function mp(){if(gT)return Sv;gT=1;var e=tn,t=vV,r=tM,n={"Content-Type":"application/x-www-form-urlencoded"};function i(l,u){!e.isUndefined(l)&&e.isUndefined(l["Content-Type"])&&(l["Content-Type"]=u)}function o(){var l;return(typeof XMLHttpRequest<"u"||typeof process<"u"&&Object.prototype.toString.call(process)==="[object process]")&&(l=vT()),l}function a(l,u,c){if(e.isString(l))try{return(u||JSON.parse)(l),e.trim(l)}catch(f){if(f.name!=="SyntaxError")throw f}return(c||JSON.stringify)(l)}var s={transitional:{silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},adapter:o(),transformRequest:[function(u,c){return t(c,"Accept"),t(c,"Content-Type"),e.isFormData(u)||e.isArrayBuffer(u)||e.isBuffer(u)||e.isStream(u)||e.isFile(u)||e.isBlob(u)?u:e.isArrayBufferView(u)?u.buffer:e.isURLSearchParams(u)?(i(c,"application/x-www-form-urlencoded;charset=utf-8"),u.toString()):e.isObject(u)||c&&c["Content-Type"]==="application/json"?(i(c,"application/json"),a(u)):u}],transformResponse:[function(u){var c=this.transitional||s.transitional,f=c&&c.silentJSONParsing,h=c&&c.forcedJSONParsing,d=!f&&this.responseType==="json";if(d||h&&e.isString(u)&&u.length)try{return JSON.parse(u)}catch(m){if(d)throw m.name==="SyntaxError"?r(m,this,"E_JSON_PARSE"):m}return u}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,validateStatus:function(u){return u>=200&&u<300},headers:{common:{Accept:"application/json, text/plain, */*"}}};return e.forEach(["delete","get","head"],function(u){s.headers[u]={}}),e.forEach(["post","put","patch"],function(u){s.headers[u]=e.merge(n)}),Sv=s,Sv}var EV=tn,TV=mp(),CV=function(t,r,n){var i=this||TV;return EV.forEach(n,function(a){t=a.call(i,t,r)}),t},wv,yT;function nM(){return yT||(yT=1,wv=function(t){return!!(t&&t.__CANCEL__)}),wv}var _T=tn,Ev=CV,PV=nM(),AV=mp(),OV=pp();function Tv(e){if(e.cancelToken&&e.cancelToken.throwIfRequested(),e.signal&&e.signal.aborted)throw new OV("canceled")}var IV=function(t){Tv(t),t.headers=t.headers||{},t.data=Ev.call(t,t.data,t.headers,t.transformRequest),t.headers=_T.merge(t.headers.common||{},t.headers[t.method]||{},t.headers),_T.forEach(["delete","get","head","post","put","patch","common"],function(i){delete t.headers[i]});var r=t.adapter||AV.adapter;return r(t).then(function(i){return Tv(t),i.data=Ev.call(t,i.data,i.headers,t.transformResponse),i},function(i){return PV(i)||(Tv(t),i&&i.response&&(i.response.data=Ev.call(t,i.response.data,i.response.headers,t.transformResponse))),Promise.reject(i)})},Xr=tn,iM=function(t,r){r=r||{};var n={};function i(c,f){return Xr.isPlainObject(c)&&Xr.isPlainObject(f)?Xr.merge(c,f):Xr.isPlainObject(f)?Xr.merge({},f):Xr.isArray(f)?f.slice():f}function o(c){if(Xr.isUndefined(r[c])){if(!Xr.isUndefined(t[c]))return i(void 0,t[c])}else return i(t[c],r[c])}function a(c){if(!Xr.isUndefined(r[c]))return i(void 0,r[c])}function s(c){if(Xr.isUndefined(r[c])){if(!Xr.isUndefined(t[c]))return i(void 0,t[c])}else return i(void 0,r[c])}function l(c){if(c in r)return i(t[c],r[c]);if(c in t)return i(void 0,t[c])}var u={url:a,method:a,data:a,baseURL:s,transformRequest:s,transformResponse:s,paramsSerializer:s,timeout:s,timeoutMessage:s,withCredentials:s,adapter:s,responseType:s,xsrfCookieName:s,xsrfHeaderName:s,onUploadProgress:s,onDownloadProgress:s,decompress:s,maxContentLength:s,maxBodyLength:s,transport:s,httpAgent:s,httpsAgent:s,cancelToken:s,socketPath:s,responseEncoding:s,validateStatus:l};return Xr.forEach(Object.keys(t).concat(Object.keys(r)),function(f){var h=u[f]||o,d=h(f);Xr.isUndefined(d)&&h!==l||(n[f]=d)}),n},Cv,xT;function oM(){return xT||(xT=1,Cv={version:"0.24.0"}),Cv}var MV=oM().version,kb={};["object","boolean","number","function","string","symbol"].forEach(function(e,t){kb[e]=function(n){return typeof n===e||"a"+(t<1?"n ":" ")+e}});var bT={};kb.transitional=function(t,r,n){function i(o,a){return"[Axios v"+MV+"] Transitional option '"+o+"'"+a+(n?". "+n:"")}return function(o,a,s){if(t===!1)throw new Error(i(a," has been removed"+(r?" in "+r:"")));return r&&!bT[a]&&(bT[a]=!0,console.warn(i(a," has been deprecated since v"+r+" and will be removed in the near future"))),t?t(o,a,s):!0}};function RV(e,t,r){if(typeof e!="object")throw new TypeError("options must be an object");for(var n=Object.keys(e),i=n.length;i-- >0;){var o=n[i],a=t[o];if(a){var s=e[o],l=s===void 0||a(s,o,e);if(l!==!0)throw new TypeError("option "+o+" must be "+l);continue}if(r!==!0)throw Error("Unknown option "+o)}}var kV={assertOptions:RV,validators:kb},aM=tn,LV=eM,ST=pV,wT=IV,vp=iM,sM=kV,Ya=sM.validators;function Hc(e){this.defaults=e,this.interceptors={request:new ST,response:new ST}}Hc.prototype.request=function(t){typeof t=="string"?(t=arguments[1]||{},t.url=arguments[0]):t=t||{},t=vp(this.defaults,t),t.method?t.method=t.method.toLowerCase():this.defaults.method?t.method=this.defaults.method.toLowerCase():t.method="get";var r=t.transitional;r!==void 0&&sM.assertOptions(r,{silentJSONParsing:Ya.transitional(Ya.boolean),forcedJSONParsing:Ya.transitional(Ya.boolean),clarifyTimeoutError:Ya.transitional(Ya.boolean)},!1);var n=[],i=!0;this.interceptors.request.forEach(function(h){typeof h.runWhen=="function"&&h.runWhen(t)===!1||(i=i&&h.synchronous,n.unshift(h.fulfilled,h.rejected))});var o=[];this.interceptors.response.forEach(function(h){o.push(h.fulfilled,h.rejected)});var a;if(!i){var s=[wT,void 0];for(Array.prototype.unshift.apply(s,n),s=s.concat(o),a=Promise.resolve(t);s.length;)a=a.then(s.shift(),s.shift());return a}for(var l=t;n.length;){var u=n.shift(),c=n.shift();try{l=u(l)}catch(f){c(f);break}}try{a=wT(l)}catch(f){return Promise.reject(f)}for(;o.length;)a=a.then(o.shift(),o.shift());return a};Hc.prototype.getUri=function(t){return t=vp(this.defaults,t),LV(t.url,t.params,t.paramsSerializer).replace(/^\?/,"")};aM.forEach(["delete","get","head","options"],function(t){Hc.prototype[t]=function(r,n){return this.request(vp(n||{},{method:t,url:r,data:(n||{}).data}))}});aM.forEach(["post","put","patch"],function(t){Hc.prototype[t]=function(r,n,i){return this.request(vp(i||{},{method:t,url:r,data:n}))}});var FV=Hc,Pv,ET;function DV(){if(ET)return Pv;ET=1;var e=pp();function t(r){if(typeof r!="function")throw new TypeError("executor must be a function.");var n;this.promise=new Promise(function(a){n=a});var i=this;this.promise.then(function(o){if(i._listeners){var a,s=i._listeners.length;for(a=0;a<s;a++)i._listeners[a](o);i._listeners=null}}),this.promise.then=function(o){var a,s=new Promise(function(l){i.subscribe(l),a=l}).then(o);return s.cancel=function(){i.unsubscribe(a)},s},r(function(a){i.reason||(i.reason=new e(a),n(i.reason))})}return t.prototype.throwIfRequested=function(){if(this.reason)throw this.reason},t.prototype.subscribe=function(n){if(this.reason){n(this.reason);return}this._listeners?this._listeners.push(n):this._listeners=[n]},t.prototype.unsubscribe=function(n){if(this._listeners){var i=this._listeners.indexOf(n);i!==-1&&this._listeners.splice(i,1)}},t.source=function(){var n,i=new t(function(a){n=a});return{token:i,cancel:n}},Pv=t,Pv}var Av,TT;function NV(){return TT||(TT=1,Av=function(t){return function(n){return t.apply(null,n)}}),Av}var Ov,CT;function BV(){return CT||(CT=1,Ov=function(t){return typeof t=="object"&&t.isAxiosError===!0}),Ov}var PT=tn,jV=ZI,yh=FV,UV=iM,$V=mp();function lM(e){var t=new yh(e),r=jV(yh.prototype.request,t);return PT.extend(r,yh.prototype,t),PT.extend(r,t),r.create=function(i){return lM(UV(e,i))},r}var xi=lM($V);xi.Axios=yh;xi.Cancel=pp();xi.CancelToken=DV();xi.isCancel=nM();xi.VERSION=oM().version;xi.all=function(t){return Promise.all(t)};xi.spread=NV();xi.isAxiosError=BV();Ib.exports=xi;Ib.exports.default=xi;var GV=Ib.exports,zV=GV;const VV=zV;class HV{constructor(){this.url="",this.level="all",this.mongoUrl="mongodb://localhost:27017/",this.collection="main",this.isUpload=!0}init(t,r){this.url=t,r&&(this.mongoUrl=r)}setUpload(t){this.isUpload=t}setCollection(t){this.collection=t}setLevel(t){this.level=t.toUpperCase()}upload(t,r,n,i){typeof t!="string"&&this.error("log",void 0,!1);let o={log:{info:t,data:r,level:n,now:i},mongoUrl:this.mongoUrl,collection:this.collection};const a=this;this.url!==""&&this.isUpload&&VV.post(this.url+"/log",o).then(s=>{a.trace("Logged to cloud.",void 0,!1)}).catch(s=>{a.error("Logging to cloud failed!",void 0,!1)})}clog(t,r,n,i,o,a){const s={all:7,ALL:7,TRACE:6,DEBUG:5,INFO:4,WARN:3,ERROR:2,FATAL:1,NONE:0,none:0};s[n]<=s[this.level]&&(console.log("%c%s%c%s%c%s%c %s","color:white;background-color:"+i,"["+n+"]",""," ","color:"+i,"["+o.toLocaleString()+"]","",t),r&&(console.log(r),console.log("------------------------"))),a===void 0&&this.upload(t,r,n,o),a!==void 0&&a&&this.upload(t,r,n,o)}trace(t,r,n){const i=new Date,o="TRACE",a="#005CAF";this.clog(t,r,o,a,i,n)}debug(t,r,n){const i=new Date,o="DEBUG",a="#0089A7";this.clog(t,r,o,a,i,n)}info(t,r,n){const i=new Date,o="INFO",a="#00896C";this.clog(t,r,o,a,i,n)}warn(t,r,n){const i=new Date,o="WARN",a="#DDA52D";this.clog(t,r,o,a,i,n)}error(t,r,n){const i=new Date,o="ERROR",a="#AB3B3A";this.clog(t,r,o,a,i,n)}fatal(t,r,n){const i=new Date,o="FATAL",a="#E16B8C";this.clog(t,r,o,a,i,n)}}var WV=HV;const XV=Sr(WV),te=new XV;te.setLevel("INFO");const qV={common:{yes:"OK",no:"Cancel"},menu:{options:{title:"OPTIONS",pages:{system:{title:"System",options:{autoSpeed:{title:"Autoplay Speed",options:{slow:"Slow",medium:"Medium",fast:"Fast"}},language:{title:"Language"},resetData:{title:"Clear or Reset Data",options:{clearGameSave:"Clear game saving",resetSettings:"Reset settings",clearAll:"Clear all data"},dialogs:{clearGameSave:"Are you sure you want to clear game saving",resetSettings:"Are you sure you want to reset all settings",clearAll:"Are you sure you want to clear all data"}},gameSave:{title:"Import or Export Game Saving and Options",options:{export:"Export game saving and options",import:"Import game saving and options"},dialogs:{import:{title:"Are you sure you want to import game saving and options",tip:"Import game saving",error:"Parse game saving failed"}}},about:{title:"About WebGAL",subTitle:"WebGAL: An Open-Source Web-Based Visual Novel Engine",version:"Version",source:"Source Code Repository",contributors:"Contributors",website:"Website"}}},display:{title:"Display",options:{fullScreen:{title:"Full Screen",options:{on:"ON",off:"OFF"}},textSpeed:{title:"Text Speed",options:{slow:"Slow",medium:"Medium",fast:"Fast"}},textSize:{title:"Text Size",options:{small:"Small",medium:"Medium",large:"Large"}},textFont:{title:"Text Font",options:{siYuanSimSun:"Source Han Serif",SimHei:"Sans",lxgw:"LXGW WenKai"}},textboxOpacity:{title:"Textbox Opacity"},textPreview:{title:"Preview Text Showing",text:"You are previewing the text's font, size and playback speed, now. You can adjust the above options according to your perception."}}},sound:{title:"Sound",options:{volumeMain:{title:"Main Volume"},vocalVolume:{title:"Vocal Volume"},bgmVolume:{title:"BGM Volume"},seVolume:{title:"Sound Effects Volume"},uiSeVolume:{title:"UI Sound Effects Volume"}}}}},saving:{title:"SAVE",isOverwrite:"Are you sure you want to overwrite this save?"},loadSaving:{title:"LOAD"},title:{title:"TITLE"},exit:{title:"BACK"}},title:{start:{title:"START",subtitle:""},continue:{title:"CONTINUE",subtitle:""},options:{title:"OPTIONS",subtitle:""},load:{title:"LOAD",subtitle:""},extra:{title:"EXTRA",subtitle:""}},gaming:{noSaving:"No saving",buttons:{hide:"Hide",show:"Show",backlog:"Backlog",replay:"Replay",auto:"Auto",forward:"Forward",quicklySave:"Quickly Save",quicklyLoad:"Quickly Load",save:"Save",load:"Load",options:"Options",title:"Title",titleTips:"Confirm return to the title screen"}},extra:{title:"EXTRA"}},YV={common:{yes:"",no:""},menu:{options:{title:"CONFIG",pages:{system:{title:"",options:{autoSpeed:{title:"",options:{slow:"",medium:"",fast:""}},language:{title:""},resetData:{title:"",options:{clearGameSave:"",resetSettings:"",clearAll:""},dialogs:{clearGameSave:"",resetSettings:"",clearAll:""}},gameSave:{title:"",options:{export:"",import:""},dialogs:{import:{title:"",tip:"",error:""}}},about:{title:"WebGAL ",subTitle:"WebGAL: ",version:"",source:"",contributors:"",website:""}}},display:{title:"",options:{fullScreen:{title:"",options:{on:"",off:""}},textSpeed:{title:"",options:{slow:"",medium:"",fast:""}},textSize:{title:"",options:{small:"",medium:"",large:""}},textFont:{title:"",options:{siYuanSimSun:"()",SimHei:"OPPO Sans",lxgw:"LXGW WenKai"}},textboxOpacity:{title:""},textPreview:{title:"",text:""}}},sound:{title:"",options:{volumeMain:{title:""},vocalVolume:{title:""},bgmVolume:{title:"BGM "},seVolume:{title:""},uiSeVolume:{title:"UI "},voiceOption:{title:""},voiceStop:{title:""},voiceContinue:{title:""}}}}},saving:{title:"SAVE",isOverwrite:""},loadSaving:{title:"LOAD"},title:{title:"HOME"},exit:{title:"BACK"}},title:{start:{title:"",subtitle:"START"},continue:{title:"",subtitle:"CONTINUE"},options:{title:"",subtitle:"CONFIG"},load:{title:"",subtitle:"LOAD"},extra:{title:"",subtitle:"EXTRA"}},gaming:{noSaving:"",buttons:{hide:"CLOSE",show:"SHOW",backlog:"LOG",replay:"REPLAY",auto:"AUTO",forward:"SKIP",quicklySave:"QUICK SAVE",quicklyLoad:"QUICK LOAD",save:"SAVE",load:"LOAD",options:"CONFIG",title:"HOME",titleTips:""}},extra:{title:""}},KV={common:{yes:"",no:""},menu:{options:{title:"",pages:{system:{title:"",options:{autoSpeed:{title:"",options:{slow:"",medium:"",fast:""}},language:{title:""},resetData:{title:"",options:{clearGameSave:"",resetSettings:"",clearAll:""},dialogs:{clearGameSave:"",resetSettings:"",clearAll:""}},gameSave:{title:"",options:{export:"",import:""},dialogs:{import:{title:"",tip:"",error:""}}},about:{title:" WebGAL",subTitle:"WebGAL",version:"",source:"",contributors:"",website:""}}},display:{title:"",options:{fullScreen:{title:"",options:{on:"",off:""}},textSpeed:{title:"",options:{slow:"",medium:"",fast:""}},textSize:{title:"",options:{small:"",medium:"",large:""}},textFont:{title:"",options:{siYuanSimSun:"",SimHei:"",lxgw:""}},textboxOpacity:{title:""},textPreview:{title:"",text:""}}},sound:{title:"",options:{volumeMain:{title:""},vocalVolume:{title:""},bgmVolume:{title:""},seVolume:{title:""},uiSeVolume:{title:""},voiceOption:{title:""},voiceStop:{title:""},voiceContinue:{title:""}}}}},saving:{title:"",isOverwrite:""},loadSaving:{title:""},title:{title:"",options:{load:"",extra:""}},exit:{title:""}},title:{start:{title:"",subtitle:"START"},continue:{title:"",subtitle:"CONTINUE"},options:{title:"",subtitle:"OPTIONS"},load:{title:"",subtitle:"LOAD"},extra:{title:"",subtitle:"EXTRA"}},gaming:{noSaving:"",buttons:{hide:"",show:"",backlog:"",replay:"",auto:"",forward:"",quicklySave:"",quicklyLoad:"",save:"",load:"",options:"",title:"",titleTips:""}},extra:{title:""}},ZV={common:{yes:"OK",no:"Annuler"},menu:{options:{title:"OPTIONS",pages:{system:{title:"Systme",options:{autoSpeed:{title:"Vitesse de lecture automatique",options:{slow:"Lente",medium:"Moyenne",fast:"Rapide"}},language:{title:"Langue"},resetData:{title:"Effacer ou rinitialiser les donnes",options:{clearGameSave:"Effacer la sauvegarde du jeu",resetSettings:"Rinitialiser les paramtres",clearAll:"Tout effacer"},dialogs:{clearGameSave:"tes-vous sr de vouloir effacer la sauvegarde du jeu",resetSettings:"tes-vous sr de vouloir rinitialiser tous les paramtres",clearAll:"tes-vous sr de vouloir tout effacer"}},gameSave:{title:"Importer ou exporter la sauvegarde du jeu et les options",options:{export:"Exporter la sauvegarde du jeu et les options",import:"Importer la sauvegarde du jeu et les options"},dialogs:{import:{title:"tes-vous sr de vouloir importer la sauvegarde du jeu et les options",tip:"Importer la sauvegarde du jeu",error:"Impossible d'analyser la sauvegarde du jeu"}}},about:{title:" propos de WebGAL",subTitle:"WebGAL: Un moteur de visual novel bas sur le web en open-source",version:"Version",source:"Dpt de code source",contributors:"Contributeurs",website:"Site web"}}},display:{title:"Affichage",options:{textSpeed:{title:"Vitesse d'affichage du texte",options:{slow:"Lente",medium:"Moyenne",fast:"Rapide"}},textSize:{title:"Taille du texte",options:{small:"Petite",medium:"Moyenne",large:"Grande"}},textFont:{title:"Police du texte",options:{siYuanSimSun:"Source Han Serif",SimHei:"Sans",lxgw:"LXGW WenKai"}},textboxOpacity:{title:"Textbox Opacity"},textPreview:{title:"Aperu de l'affichage du texte",text:"Vous prvisualisez la police, la taille et la vitesse de lecture du texte, maintenant. Vous pouvez ajuster les options ci-dessus selon votre perception."}}},sound:{title:"Son",options:{volumeMain:{title:"Volume principal"},vocalVolume:{title:"Volume des voix"},bgmVolume:{title:"Volume de la musique de fond"},seVolume:{title:"Volume des effets sonores"},uiSeVolume:{title:"Volume de linterface utilisateur"}}}}},saving:{title:"SAUVEGARDER",isOverwrite:"tes-vous sr de vouloir craser cette sauvegarde ?"},loadSaving:{title:"CHARGER"},title:{title:"TITRE"},exit:{title:"RETOUR"}},title:{start:{title:"COMMENCER",subtitle:""},continue:{title:"CONTINUER",subtitle:""},options:{title:"OPTIONS",subtitle:""},load:{title:"CHARGER",subtitle:""},extra:{title:"EXTRA",subtitle:""}},gaming:{noSaving:"Aucune sauvegarde",buttons:{hide:"Masquer",show:"Afficher",backlog:"Journal",replay:"Rejouer",auto:"Automatique",forward:"Avancer",quicklySave:"Sauvegarde rapide",quicklyLoad:"Chargement rapide",save:"Sauvegarder",load:"Charger",options:"Options",title:"Titre",titleTips:"Confirmer le retour  l'cran titre"}},extra:{title:"EXTRA"}},JV={common:{yes:"Ja",no:"Nein"},menu:{options:{title:"OPTIONEN",pages:{system:{title:"System",options:{autoSpeed:{title:"Auto-Geschwindigkeit",options:{slow:"Langsam",medium:"Normal",fast:"Schnell"}},language:{title:"Sprache"},resetData:{title:"Daten lschen oder zurcksetzen",options:{clearGameSave:"Alle Spielstnde lschen",resetSettings:"Alle Einstellungen zurcksetzen",clearAll:"Alle Daten lschen"},dialogs:{clearGameSave:"Sind Sie sicher, dass Sie den Spielstand lschen mchten?",resetSettings:"Sind Sie sicher, dass Sie alle Einstellungen zurcksetzen mchten?",clearAll:"Sind Sie sicher, dass Sie alle Daten lschen mchten?"}},gameSave:{title:"Spielstand und Optionen importieren oder exportieren",options:{export:"Spielstand und Optionen exportieren",import:"Spielstand und Optionen importieren"},dialogs:{import:{title:"Sind Sie sicher, dass Sie den Spielstand und die Optionen importieren mchten?",tip:"Spielstand importieren",error:"Ein Fehler ist beim Analysieren des Spielstands aufgetreten"}}},about:{title:"ber WebGAL",subTitle:"WebGAL: Eine Open-Source Web-Based Visual Novel Engine",version:"Version",source:"Source Code Repository",contributors:"Contributors",website:"Website"}}},display:{title:"Darstellung",options:{textSpeed:{title:"Geschwindigkeit der Textanzeige",options:{slow:"Langsam",medium:"Normal",fast:"Schnell"}},textSize:{title:"Textgre",options:{small:"Klein",medium:"Normal",large:"Gro"}},textFont:{title:"Schriftart",options:{siYuanSimSun:"Source Han Serif",SimHei:"Sans",lxgw:"LXGW WenKai"}},textboxOpacity:{title:"Textbox Opacity"},textPreview:{title:"Vorschautext wird angezeigt",text:"Sie knnen jederzeit die Schriftart, Gre und Wiedergabegeschwindigkeit des Textes nach Ihrer Vorliebe anpassen."}}},sound:{title:"Ton",options:{volumeMain:{title:"Hauptlautstrke"},vocalVolume:{title:"Stimmlautstrke"},bgmVolume:{title:"Musiklautstrke"},seVolume:{title:"Soundeffektlautstrke"},uiSeVolume:{title:"UI Soundeffektlautstrke"}}}}},saving:{title:"SPEICHERN",isOverwrite:"Sind Sie sicher, dass Sie diesen Spielstand berschreiben mchten?"},loadSaving:{title:"LADEN"},title:{title:"TITEL"},exit:{title:"ZURCK"}},title:{start:{title:"STARTEN",subtitle:""},continue:{title:"WEITERLESEN",subtitle:""},options:{title:"OPTIONEN",subtitle:""},load:{title:"LADEN",subtitle:""},extra:{title:"EXTRA",subtitle:""}},gaming:{noSaving:"Keine Speicherung",buttons:{hide:"Verstecken",show:"Anzeigen",backlog:"Verlauf",replay:"Wiedergabe",auto:"Auto",forward:"berspringen",quicklySave:"Quickly Save",quicklyLoad:"Quickly Load",save:"Speichern",load:"Laden",options:"Optionen",title:"Titel"}},extra:{title:"EXTRA"}},QV={common:{yes:"",no:""},menu:{options:{title:"",pages:{system:{title:"",options:{autoSpeed:{title:"",options:{slow:"",medium:"",fast:""}},language:{title:""},resetData:{title:"",options:{clearGameSave:"",resetSettings:"",clearAll:""},dialogs:{clearGameSave:"",resetSettings:"",clearAll:""}},gameSave:{title:"",options:{export:"",import:""},dialogs:{import:{title:"",tip:"",error:""}}},about:{title:" WebGAL",subTitle:"WebGAL",version:"",source:"",contributors:"",website:""}}},display:{title:"",options:{fullScreen:{title:"",options:{on:"",off:""}},textSpeed:{title:"",options:{slow:"",medium:"",fast:""}},textSize:{title:"",options:{small:"",medium:"",large:""}},textFont:{title:"",options:{siYuanSimSun:"",SimHei:"",lxgw:""}},textboxOpacity:{title:""},textPreview:{title:"",text:""}}},sound:{title:"",options:{volumeMain:{title:""},vocalVolume:{title:""},bgmVolume:{title:""},seVolume:{title:""},uiSeVolume:{title:""},voiceOption:{title:""},voiceStop:{title:""},voiceContinue:{title:""}}}}},saving:{title:"",isOverwrite:"?"},loadSaving:{title:""},title:{title:"",options:{load:"",extra:"CG"}},exit:{title:""}},title:{start:{title:"",subtitle:"START"},continue:{title:"",subtitle:"CONTINUE"},options:{title:"",subtitle:"OPTIONS"},load:{title:"",subtitle:"LOAD"},extra:{title:"CG",subtitle:"EXTRA"}},gaming:{noSaving:"",buttons:{hide:"",show:"",backlog:"",replay:"",auto:"",forward:"",quicklySave:"",quicklyLoad:"",save:"",load:"",options:"",title:"",titleTips:""}},extra:{title:"CG"}};var $a=(e=>(e[e.zhCn=0]="zhCn",e[e.en=1]="en",e[e.jp=2]="jp",e[e.fr=3]="fr",e[e.de=4]="de",e[e.zhTw=5]="zhTw",e))($a||{});const pd={zhCn:"",en:"English",jp:"",fr:"Franais",de:"Deutsch",zhTw:""},eH={en:{translation:qV},zhCn:{translation:KV},jp:{translation:YV},fr:{translation:ZV},de:{translation:JV},zhTw:{translation:QV}},tH=0;var yn=(e=>(e[e.small=0]="small",e[e.medium=1]="medium",e[e.large=2]="large",e))(yn||{}),ui=(e=>(e[e.song=0]="song",e[e.hei=1]="hei",e[e.lxgw=2]="lxgw",e))(ui||{}),uc=(e=>(e[e.yes=0]="yes",e[e.no=1]="no",e))(uc||{}),ci=(e=>(e[e.on=0]="on",e[e.off=1]="off",e))(ci||{});const uM={slPage:1,volumeMain:100,textSpeed:50,autoSpeed:50,textSize:yn.medium,vocalVolume:100,bgmVolume:25,seVolume:100,uiSeVolume:50,textboxFont:ui.song,textboxOpacity:75,language:$a.zhCn,voiceInterruption:uc.yes,fullScreen:ci.off},i_={optionData:uM,scriptManagedGlobalVar:[],globalGameVar:{},appreciationData:{bgm:[],cg:[]}},cM=ip({name:"userData",initialState:Pt(i_),reducers:{setUserData:(e,t)=>{const{key:r,value:n}=t.payload;e[r]=n},unlockCgInUserData:(e,t)=>{const{name:r,url:n,series:i}=t.payload;let o=!1;e.appreciationData.cg.forEach(a=>{n===a.url&&(o=!0,a.url=n,a.series=i)}),o||e.appreciationData.cg.push(t.payload)},unlockBgmInUserData:(e,t)=>{const{name:r,url:n,series:i}=t.payload;let o=!1;e.appreciationData.bgm.forEach(a=>{n===a.url&&(o=!0,a.url=n,a.series=i)}),o||e.appreciationData.bgm.push(t.payload)},resetUserData:(e,t)=>{Object.assign(e,t.payload)},setOptionData:(e,t)=>{const{key:r,value:n}=t.payload;e.optionData[r]=n},setGlobalVar:(e,t)=>{e.scriptManagedGlobalVar.findIndex(n=>n===t.payload.key)>=0||(e.globalGameVar[t.payload.key]=t.payload.value)},setScriptManagedGlobalVar:(e,t)=>{const r=e.scriptManagedGlobalVar.findIndex(n=>n===t.payload.key)>=0;e.globalGameVar[t.payload.key]=t.payload.value,r||e.scriptManagedGlobalVar.push(t.payload.key)},setSlPage:(e,t)=>{e.optionData.slPage=t.payload},resetOptionSet(e){Object.assign(e.optionData,uM)},resetAllData(e){Object.assign(e,Pt(i_))}}}),{setUserData:q1e,resetUserData:Lb,setOptionData:Rt,setGlobalVar:AT,setScriptManagedGlobalVar:rH,setSlPage:fM,unlockCgInUserData:hM,unlockBgmInUserData:dM,resetOptionSet:nH,resetAllData:iH}=cM.actions,oH=cM.reducer,pM={backlog_size:200,fast_timeout:50},aH={textInitialDelay:80};class sH{constructor(t){oe(this,"isSaveBacklogNext",!1);oe(this,"backlog",[]);oe(this,"sceneManager");this.sceneManager=t}getBacklog(){return this.backlog}editLastBacklogItemEffect(t){this.backlog[this.backlog.length-1].currentStageState.effects=t}makeBacklogEmpty(){this.backlog.splice(0,this.backlog.length)}insertBacklogItem(t){this.backlog.push(t)}saveCurrentStateToBacklog(){const t=N.getState().stage,r=Pt(t);r.PerformList.forEach(i=>{i.script.args.forEach(o=>{o.key==="concat"&&(o.value=!1,i.script.content=r.showText)})});const n={currentStageState:r,saveScene:{currentSentenceId:this.sceneManager.sceneData.currentSentenceId,sceneStack:Pt(this.sceneManager.sceneData.sceneStack),sceneName:this.sceneManager.sceneData.currentScene.sceneName,sceneUrl:this.sceneManager.sceneData.currentScene.sceneUrl}};for(this.getBacklog().push(n);this.getBacklog().length>pM.backlog_size;)this.getBacklog().shift()}}const OT={currentSentenceId:0,sceneStack:[],currentScene:{sceneName:"",sceneUrl:"",sentenceList:[],assetsList:[],subSceneList:[]}};class lH{constructor(){oe(this,"settledScenes",[]);oe(this,"settledAssets",[]);oe(this,"sceneData",Pt(OT));oe(this,"lockSceneWrite",!1)}resetScene(){this.sceneData.currentSentenceId=0,this.sceneData.sceneStack=[],this.sceneData.currentScene=Pt(OT.currentScene)}}class uH{constructor(){oe(this,"nextEnterAnimationName",new Map);oe(this,"nextExitAnimationName",new Map);oe(this,"animations",[])}addAnimation(t){this.animations.push(t)}getAnimations(){return this.animations}}const cH={performName:"",duration:100,isHoldOn:!1,stopFunction:()=>{},blockingNext:()=>!1,blockingAuto:()=>!0,stopTimeout:void 0};var qr=(e=>(e[e.background=0]="background",e[e.bgm=1]="bgm",e[e.figure=2]="figure",e[e.scene=3]="scene",e[e.tex=4]="tex",e[e.vocal=5]="vocal",e[e.video=6]="video",e))(qr||{});const Yr=(e,t)=>{if(e.match("http://")||e.match("https://"))return e;{let r;switch(t){case 0:r=`./game/background/${e}`;break;case 3:r=`./game/scene/${e}`;break;case 5:r=`./game/vocal/${e}`;break;case 2:r=`./game/figure/${e}`;break;case 1:r=`./game/bgm/${e}`;break;case 6:r=`./game/video/${e}`;break;default:r="";break}return r}},fH=e=>{for(const t of e)if(C.sceneManager.settledAssets.includes(t.url))te.debug(`${t.url}`);else{const n=document.createElement("link");n.setAttribute("rel","prefetch"),n.setAttribute("href",t.url);const i=document.getElementsByTagName("head");if(i.length)try{i[0].appendChild(n)}catch(o){console.log("",o)}C.sceneManager.settledAssets.push(t.url)}};var se;(function(e){e[e.say=0]="say",e[e.changeBg=1]="changeBg",e[e.changeFigure=2]="changeFigure",e[e.bgm=3]="bgm",e[e.video=4]="video",e[e.pixi=5]="pixi",e[e.pixiInit=6]="pixiInit",e[e.intro=7]="intro",e[e.miniAvatar=8]="miniAvatar",e[e.changeScene=9]="changeScene",e[e.choose=10]="choose",e[e.end=11]="end",e[e.setComplexAnimation=12]="setComplexAnimation",e[e.setFilter=13]="setFilter",e[e.label=14]="label",e[e.jumpLabel=15]="jumpLabel",e[e.chooseLabel=16]="chooseLabel",e[e.setVar=17]="setVar",e[e.if=18]="if",e[e.callScene=19]="callScene",e[e.showVars=20]="showVars",e[e.unlockCg=21]="unlockCg",e[e.unlockBgm=22]="unlockBgm",e[e.filmMode=23]="filmMode",e[e.setTextbox=24]="setTextbox",e[e.setAnimation=25]="setAnimation",e[e.playEffect=26]="playEffect",e[e.setTempAnimation=27]="setTempAnimation",e[e.comment=28]="comment",e[e.setTransform=29]="setTransform",e[e.setTransition=30]="setTransition",e[e.getUserInput=31]="getUserInput",e[e.applyStyle=32]="applyStyle"})(se||(se={}));se.intro,se.changeBg,se.changeFigure,se.miniAvatar,se.changeScene,se.choose,se.end,se.bgm,se.video,se.setComplexAnimation,se.setFilter,se.pixiInit,se.pixi,se.label,se.jumpLabel,se.setVar,se.callScene,se.showVars,se.unlockCg,se.unlockBgm,se.say,se.filmMode,se.callScene,se.setTextbox,se.setAnimation,se.playEffect,se.applyStyle;se.bgm,se.pixi,se.pixiInit,se.label,se.if,se.miniAvatar,se.setVar,se.unlockBgm,se.unlockCg,se.filmMode,se.playEffect;var Ft;(function(e){e[e.background=0]="background",e[e.bgm=1]="bgm",e[e.figure=2]="figure",e[e.scene=3]="scene",e[e.tex=4]="tex",e[e.vocal=5]="vocal",e[e.video=6]="video"})(Ft||(Ft={}));function mM(e,t){const r=[];let i=e.replace(/ /g," ").split(" -");return i=i.filter(o=>o!==""),i.forEach(o=>{const a=o.indexOf("=");let s=o.slice(0,a),l=o.slice(a+1);a<0&&(s=o,l=void 0),s.toLowerCase().match(/.ogg|.mp3|.wav/)?r.push({key:"vocal",value:t(o,Ft.vocal)}):l===void 0?r.push({key:s,value:!0}):l==="true"||l==="false"?r.push({key:s,value:l==="true"}):isNaN(Number(l))?r.push({key:s,value:l}):r.push({key:s,value:Number(l)})}),r}function hH(e){const t=[];let r,n=e.split(";")[0];if(n==="")return{command:"",args:[],options:[]};const i=/\s*:\s*/.exec(n);i===null?r="":(r=n.substring(0,i.index),n=n.substring(i.index+1,n.length));const o=/ -/.exec(n);if(o){const a=n.substring(o.index,n.length);n=n.substring(0,o.index);for(const s of mM(a,(l,u)=>l))t.push(s)}return{command:r,args:n.split("|").map(a=>a.trim()).filter(a=>a!==""),options:t}}function dH(e){return e.replaceAll("\r","").split(`
`).map(r=>hH(r)).filter(r=>r.command!=="")}const IT=(e,t,r)=>{let n={type:se.say,additionalArgs:[]};const i=pH(e,t,r);return n.type=i,i===se.say&&e!=="say"&&n.additionalArgs.push({key:"speaker",value:e}),n=mH(n,i,t),n};function pH(e,t,r){var n;return((n=r.get(e))==null?void 0:n.scriptType)??se.say}function mH(e,t,r){return r.includes(t)&&e.additionalArgs.push({key:"next",value:!0}),e}const vH=(e,t,r)=>{if(e==="none"||e==="")return"";switch(t){case se.playEffect:return r(e,Ft.vocal);case se.changeBg:return r(e,Ft.background);case se.changeFigure:return r(e,Ft.figure);case se.bgm:return r(e,Ft.bgm);case se.callScene:return r(e,Ft.scene);case se.changeScene:return r(e,Ft.scene);case se.miniAvatar:return r(e,Ft.figure);case se.video:return r(e,Ft.video);case se.choose:return gH(e,r);case se.unlockBgm:return r(e,Ft.bgm);case se.unlockCg:return r(e,Ft.background);default:return e}};function gH(e,t){const r=e.split(new RegExp("(?<!\\\\)\\|")),n=[],i=[];for(const s of r)n.push(s.split(new RegExp("(?<!\\\\):"))[0]??""),i.push(s.split(new RegExp("(?<!\\\\):"))[1]??"");const o=i.map(s=>s.match(/\./)?t(s,Ft.scene):s);let a="";for(let s=0;s<n.length;s++)s!==0&&(a=a+"|"),a=a+`${n[s]}:${o[s]}`;return a}const yH=(e,t,r)=>{const n=[];return e===se.say&&r.forEach(i=>{i.key==="vocal"&&n.push({name:i.value,url:i.value,lineNumber:0,type:Ft.vocal})}),t==="none"||t===""||(e===se.changeBg&&n.push({name:t,url:t,lineNumber:0,type:Ft.background}),e===se.changeFigure&&n.push({name:t,url:t,lineNumber:0,type:Ft.figure}),e===se.miniAvatar&&n.push({name:t,url:t,lineNumber:0,type:Ft.figure}),e===se.video&&n.push({name:t,url:t,lineNumber:0,type:Ft.video}),e===se.bgm&&n.push({name:t,url:t,lineNumber:0,type:Ft.bgm})),n},_H=(e,t)=>{const r=[];return(e===se.changeScene||e===se.callScene)&&r.push(t),e===se.choose&&t.split("|").map(o=>o.split(":")[1]??"").forEach(o=>{o.match(/\./)&&r.push(o)}),r},xH=(e,t,r,n)=>{let i,o,a;const s=[];let l,u,c,f=e.split(new RegExp("(?<!\\\\);"))[0];if(f=f.replaceAll("\\;",";"),f==="")return{command:se.comment,commandRaw:"comment",content:e.split(";")[1]??"",args:[{key:"next",value:!0}],sentenceAssets:[],subScene:[]};const h=/:/.exec(f);if(h===null){c=f,u=IT(c,r,n),i=u.type;for(const m of u.additionalArgs)i===se.say&&m.key==="speaker"||s.push(m)}else{c=f.substring(0,h.index),f=f.substring(h.index+1,f.length),u=IT(c,r,n),i=u.type;for(const m of u.additionalArgs)s.push(m)}const d=/ -/.exec(f);if(d){const m=f.substring(d.index,e.length);f=f.substring(0,d.index);for(const g of mM(m,t))s.push(g)}return o=vH(f.trim(),i,t),l=yH(i,o,s),a=_H(i,o),{command:i,commandRaw:c.trim(),content:o,args:s,sentenceAssets:l,subScene:a}};var Sf=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},bH=typeof Sf=="object"&&Sf&&Sf.Object===Object&&Sf,SH=bH,wH=SH,EH=typeof self=="object"&&self&&self.Object===Object&&self,TH=wH||EH||Function("return this")(),gp=TH,CH=gp,PH=CH.Symbol,vM=PH,MT=vM,gM=Object.prototype,AH=gM.hasOwnProperty,OH=gM.toString,ql=MT?MT.toStringTag:void 0;function IH(e){var t=AH.call(e,ql),r=e[ql];try{e[ql]=void 0;var n=!0}catch{}var i=OH.call(e);return n&&(t?e[ql]=r:delete e[ql]),i}var MH=IH,RH=Object.prototype,kH=RH.toString;function LH(e){return kH.call(e)}var FH=LH,RT=vM,DH=MH,NH=FH,BH="[object Null]",jH="[object Undefined]",kT=RT?RT.toStringTag:void 0;function UH(e){return e==null?e===void 0?jH:BH:kT&&kT in Object(e)?DH(e):NH(e)}var $H=UH;function GH(e){var t=typeof e;return e!=null&&(t=="object"||t=="function")}var yM=GH,zH=$H,VH=yM,HH="[object AsyncFunction]",WH="[object Function]",XH="[object GeneratorFunction]",qH="[object Proxy]";function YH(e){if(!VH(e))return!1;var t=zH(e);return t==WH||t==XH||t==HH||t==qH}var KH=YH,ZH=gp,JH=ZH["__core-js_shared__"],QH=JH,Iv=QH,LT=function(){var e=/[^.]+$/.exec(Iv&&Iv.keys&&Iv.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""}();function e9(e){return!!LT&&LT in e}var t9=e9,r9=Function.prototype,n9=r9.toString;function i9(e){if(e!=null){try{return n9.call(e)}catch{}try{return e+""}catch{}}return""}var o9=i9,a9=KH,s9=t9,l9=yM,u9=o9,c9=/[\\^$.*+?()[\]{}|]/g,f9=/^\[object .+?Constructor\]$/,h9=Function.prototype,d9=Object.prototype,p9=h9.toString,m9=d9.hasOwnProperty,v9=RegExp("^"+p9.call(m9).replace(c9,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function g9(e){if(!l9(e)||s9(e))return!1;var t=a9(e)?v9:f9;return t.test(u9(e))}var y9=g9;function _9(e,t){return e==null?void 0:e[t]}var x9=_9,b9=y9,S9=x9;function w9(e,t){var r=S9(e,t);return b9(r)?r:void 0}var Fb=w9,E9=Fb,T9=E9(Object,"create"),yp=T9,FT=yp;function C9(){this.__data__=FT?FT(null):{},this.size=0}var P9=C9;function A9(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t}var O9=A9,I9=yp,M9="__lodash_hash_undefined__",R9=Object.prototype,k9=R9.hasOwnProperty;function L9(e){var t=this.__data__;if(I9){var r=t[e];return r===M9?void 0:r}return k9.call(t,e)?t[e]:void 0}var F9=L9,D9=yp,N9=Object.prototype,B9=N9.hasOwnProperty;function j9(e){var t=this.__data__;return D9?t[e]!==void 0:B9.call(t,e)}var U9=j9,$9=yp,G9="__lodash_hash_undefined__";function z9(e,t){var r=this.__data__;return this.size+=this.has(e)?0:1,r[e]=$9&&t===void 0?G9:t,this}var V9=z9,H9=P9,W9=O9,X9=F9,q9=U9,Y9=V9;function yl(e){var t=-1,r=e==null?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}yl.prototype.clear=H9;yl.prototype.delete=W9;yl.prototype.get=X9;yl.prototype.has=q9;yl.prototype.set=Y9;var K9=yl;function Z9(){this.__data__=[],this.size=0}var J9=Z9;function Q9(e,t){return e===t||e!==e&&t!==t}var eW=Q9,tW=eW;function rW(e,t){for(var r=e.length;r--;)if(tW(e[r][0],t))return r;return-1}var _p=rW,nW=_p,iW=Array.prototype,oW=iW.splice;function aW(e){var t=this.__data__,r=nW(t,e);if(r<0)return!1;var n=t.length-1;return r==n?t.pop():oW.call(t,r,1),--this.size,!0}var sW=aW,lW=_p;function uW(e){var t=this.__data__,r=lW(t,e);return r<0?void 0:t[r][1]}var cW=uW,fW=_p;function hW(e){return fW(this.__data__,e)>-1}var dW=hW,pW=_p;function mW(e,t){var r=this.__data__,n=pW(r,e);return n<0?(++this.size,r.push([e,t])):r[n][1]=t,this}var vW=mW,gW=J9,yW=sW,_W=cW,xW=dW,bW=vW;function _l(e){var t=-1,r=e==null?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}_l.prototype.clear=gW;_l.prototype.delete=yW;_l.prototype.get=_W;_l.prototype.has=xW;_l.prototype.set=bW;var SW=_l,wW=Fb,EW=gp,TW=wW(EW,"Map"),CW=TW,DT=K9,PW=SW,AW=CW;function OW(){this.size=0,this.__data__={hash:new DT,map:new(AW||PW),string:new DT}}var IW=OW;function MW(e){var t=typeof e;return t=="string"||t=="number"||t=="symbol"||t=="boolean"?e!=="__proto__":e===null}var RW=MW,kW=RW;function LW(e,t){var r=e.__data__;return kW(t)?r[typeof t=="string"?"string":"hash"]:r.map}var xp=LW,FW=xp;function DW(e){var t=FW(this,e).delete(e);return this.size-=t?1:0,t}var NW=DW,BW=xp;function jW(e){return BW(this,e).get(e)}var UW=jW,$W=xp;function GW(e){return $W(this,e).has(e)}var zW=GW,VW=xp;function HW(e,t){var r=VW(this,e),n=r.size;return r.set(e,t),this.size+=r.size==n?0:1,this}var WW=HW,XW=IW,qW=NW,YW=UW,KW=zW,ZW=WW;function xl(e){var t=-1,r=e==null?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}xl.prototype.clear=XW;xl.prototype.delete=qW;xl.prototype.get=YW;xl.prototype.has=KW;xl.prototype.set=ZW;var JW=xl,QW="__lodash_hash_undefined__";function eX(e){return this.__data__.set(e,QW),this}var tX=eX;function rX(e){return this.__data__.has(e)}var nX=rX,iX=JW,oX=tX,aX=nX;function md(e){var t=-1,r=e==null?0:e.length;for(this.__data__=new iX;++t<r;)this.add(e[t])}md.prototype.add=md.prototype.push=oX;md.prototype.has=aX;var sX=md;function lX(e,t,r,n){for(var i=e.length,o=r+(n?1:-1);n?o--:++o<i;)if(t(e[o],o,e))return o;return-1}var uX=lX;function cX(e){return e!==e}var fX=cX;function hX(e,t,r){for(var n=r-1,i=e.length;++n<i;)if(e[n]===t)return n;return-1}var dX=hX,pX=uX,mX=fX,vX=dX;function gX(e,t,r){return t===t?vX(e,t,r):pX(e,mX,r)}var yX=gX,_X=yX;function xX(e,t){var r=e==null?0:e.length;return!!r&&_X(e,t,0)>-1}var bX=xX;function SX(e,t,r){for(var n=-1,i=e==null?0:e.length;++n<i;)if(r(t,e[n]))return!0;return!1}var wX=SX;function EX(e,t){return e.has(t)}var TX=EX,CX=Fb,PX=gp,AX=CX(PX,"Set"),OX=AX;function IX(){}var MX=IX;function RX(e){var t=-1,r=Array(e.size);return e.forEach(function(n){r[++t]=n}),r}var _M=RX,Mv=OX,kX=MX,LX=_M,FX=1/0,DX=Mv&&1/LX(new Mv([,-0]))[1]==FX?function(e){return new Mv(e)}:kX,NX=DX,BX=sX,jX=bX,UX=wX,$X=TX,GX=NX,zX=_M,VX=200;function HX(e,t,r){var n=-1,i=jX,o=e.length,a=!0,s=[],l=s;if(r)a=!1,i=UX;else if(o>=VX){var u=t?null:GX(e);if(u)return zX(u);a=!1,i=$X,l=new BX}else l=t?[]:s;e:for(;++n<o;){var c=e[n],f=t?t(c):c;if(c=r||c!==0?c:0,a&&f===f){for(var h=l.length;h--;)if(l[h]===f)continue e;t&&l.push(f),s.push(c)}else i(l,f,r)||(l!==s&&l.push(f),s.push(c))}return s}var WX=HX,XX=WX;function qX(e,t){return t=typeof t=="function"?t:void 0,e&&e.length?XX(e,void 0,t):[]}var YX=qX;const KX=(e,t,r,n,i,o,a)=>{const l=e.split(`
`);let u=[],c=[];const f=l.map(h=>{const d=xH(h,i,o,a);return u=[...u,...d.sentenceAssets],c=[...c,...d.subScene],d});return u=YX(u),n(u),{sceneName:t,sceneUrl:r,sentenceList:f,assetsList:u,subSceneList:c}};function ZX(e){const[t,r]=JX(e);return{classNameStyles:t,others:r}}function JX(e){const t={};let r="",n;const i=/\.([^{\s]+)\s*{((?:[^{}]*|{[^}]*})*)}/g,o=/(@[^{]+{\s*(?:[^{}]*{[^}]*}[^{}]*)+\s*})/g;for(;(n=i.exec(e))!==null;){const a=n[1],s=n[2].trim().replace(/\s*;\s*/g,`;
`);t[a]=s}for(;(n=o.exec(e))!==null;)r+=n[1].trim()+`
`;return[t,r.trim()]}class QX{constructor(t,r,n,i){oe(this,"assetsPrefetcher");oe(this,"assetSetter");oe(this,"ADD_NEXT_ARG_LIST");oe(this,"SCRIPT_CONFIG_MAP");this.assetsPrefetcher=t,this.assetSetter=r,this.ADD_NEXT_ARG_LIST=n,Array.isArray(i)?(this.SCRIPT_CONFIG_MAP=new Map,i.forEach(o=>{this.SCRIPT_CONFIG_MAP.set(o.scriptString,o)})):this.SCRIPT_CONFIG_MAP=i}parse(t,r,n){return KX(t,r,n,this.assetsPrefetcher,this.assetSetter,this.ADD_NEXT_ARG_LIST,this.SCRIPT_CONFIG_MAP)}parseConfig(t){return dH(t)}stringifyConfig(t){return t.reduce((r,n)=>r+`${n.command}:${n.args.join("|")}${n.options.length<=0?"":n.options.reduce((i,o)=>i+" -"+o.key+"="+o.value,"")};
`,"")}parseScssToWebgalStyleObj(t){return ZX(t)}}function Ie(e,t){const n=e.args.find(i=>i.key===t);return n?n.value:null}const eq=e=>{let t=e.content,r="",n="default";e.args.forEach(a=>{a.key==="unlockname"&&(r=a.value.toString()),a.key==="series"&&(n=a.value.toString())});const i=Ie(e,"enter"),o=Ie(e,"volume");return r!==""&&N.dispatch(dM({name:r,url:t,series:n})),kS(t,typeof i=="number"&&i>=0?i:0,typeof o=="number"&&o>=0&&o<=100?o:100),{performName:"none",duration:0,isHoldOn:!0,stopFunction:()=>{},blockingNext:()=>!1,blockingAuto:()=>!0,stopTimeout:void 0}};var Db={exports:{}},xM=function(t,r){return function(){return t.apply(r,arguments)}},tq=xM,Nb=Object.prototype.toString,Bb=function(e){return function(t){var r=Nb.call(t);return e[r]||(e[r]=r.slice(8,-1).toLowerCase())}}(Object.create(null));function Uo(e){return e=e.toLowerCase(),function(r){return Bb(r)===e}}function bp(e){return Array.isArray(e)}function o_(e){return typeof e>"u"}function rq(e){return e!==null&&!o_(e)&&e.constructor!==null&&!o_(e.constructor)&&typeof e.constructor.isBuffer=="function"&&e.constructor.isBuffer(e)}var bM=Uo("ArrayBuffer");function nq(e){var t;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?t=ArrayBuffer.isView(e):t=e&&e.buffer&&bM(e.buffer),t}function iq(e){return typeof e=="string"}function SM(e){return typeof e=="number"}function wM(e){return e!==null&&typeof e=="object"}function _h(e){if(Bb(e)!=="object")return!1;var t=Object.getPrototypeOf(e);return t===null||t===Object.prototype}function oq(e){return e&&Object.keys(e).length===0&&Object.getPrototypeOf(e)===Object.prototype}var aq=Uo("Date"),sq=Uo("File"),lq=Uo("Blob"),uq=Uo("FileList");function jb(e){return Nb.call(e)==="[object Function]"}function cq(e){return wM(e)&&jb(e.pipe)}function fq(e){var t="[object FormData]";return e&&(typeof FormData=="function"&&e instanceof FormData||Nb.call(e)===t||jb(e.toString)&&e.toString()===t)}var hq=Uo("URLSearchParams");function dq(e){return e.trim?e.trim():e.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"")}function pq(){var e;return typeof navigator<"u"&&((e=navigator.product)==="ReactNative"||e==="NativeScript"||e==="NS")?!1:typeof window<"u"&&typeof document<"u"}function Ub(e,t){if(!(e===null||typeof e>"u"))if(typeof e!="object"&&(e=[e]),bp(e))for(var r=0,n=e.length;r<n;r++)t.call(null,e[r],r,e);else for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.call(null,e[i],i,e)}function a_(){var e={};function t(i,o){_h(e[o])&&_h(i)?e[o]=a_(e[o],i):_h(i)?e[o]=a_({},i):bp(i)?e[o]=i.slice():e[o]=i}for(var r=0,n=arguments.length;r<n;r++)Ub(arguments[r],t);return e}function mq(e,t,r){return Ub(t,function(i,o){r&&typeof i=="function"?e[o]=tq(i,r):e[o]=i}),e}function vq(e){return e.charCodeAt(0)===65279&&(e=e.slice(1)),e}function gq(e,t,r,n){e.prototype=Object.create(t.prototype,n),e.prototype.constructor=e,r&&Object.assign(e.prototype,r)}function yq(e,t,r,n){var i,o,a,s={};if(t=t||{},e==null)return t;do{for(i=Object.getOwnPropertyNames(e),o=i.length;o-- >0;)a=i[o],(!n||n(a,e,t))&&!s[a]&&(t[a]=e[a],s[a]=!0);e=r!==!1&&Object.getPrototypeOf(e)}while(e&&(!r||r(e,t))&&e!==Object.prototype);return t}function _q(e,t,r){e=String(e),(r===void 0||r>e.length)&&(r=e.length),r-=t.length;var n=e.indexOf(t,r);return n!==-1&&n===r}function xq(e){if(!e)return null;if(bp(e))return e;var t=e.length;if(!SM(t))return null;for(var r=new Array(t);t-- >0;)r[t]=e[t];return r}var bq=function(e){return function(t){return e&&t instanceof e}}(typeof Uint8Array<"u"&&Object.getPrototypeOf(Uint8Array));function Sq(e,t){for(var r=e&&e[Symbol.iterator],n=r.call(e),i;(i=n.next())&&!i.done;){var o=i.value;t.call(e,o[0],o[1])}}function wq(e,t){for(var r,n=[];(r=e.exec(t))!==null;)n.push(r);return n}var Eq=Uo("HTMLFormElement"),Tq=function(t){return function(r,n){return t.call(r,n)}}(Object.prototype.hasOwnProperty),Vt={isArray:bp,isArrayBuffer:bM,isBuffer:rq,isFormData:fq,isArrayBufferView:nq,isString:iq,isNumber:SM,isObject:wM,isPlainObject:_h,isEmptyObject:oq,isUndefined:o_,isDate:aq,isFile:sq,isBlob:lq,isFunction:jb,isStream:cq,isURLSearchParams:hq,isStandardBrowserEnv:pq,forEach:Ub,merge:a_,extend:mq,trim:dq,stripBOM:vq,inherits:gq,toFlatObject:yq,kindOf:Bb,kindOfTest:Uo,endsWith:_q,toArray:xq,isTypedArray:bq,isFileList:uq,forEachEntry:Sq,matchAll:wq,isHTMLForm:Eq,hasOwnProperty:Tq},EM=Vt;function Ws(e,t,r,n,i){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=e,this.name="AxiosError",t&&(this.code=t),r&&(this.config=r),n&&(this.request=n),i&&(this.response=i)}EM.inherits(Ws,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:this.config,code:this.code,status:this.response&&this.response.status?this.response.status:null}}});var TM=Ws.prototype,CM={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(function(e){CM[e]={value:e}});Object.defineProperties(Ws,CM);Object.defineProperty(TM,"isAxiosError",{value:!0});Ws.from=function(e,t,r,n,i,o){var a=Object.create(TM);return EM.toFlatObject(e,a,function(l){return l!==Error.prototype}),Ws.call(a,e.message,t,r,n,i),a.cause=e,a.name=e.name,o&&Object.assign(a,o),a};var Ga=Ws,Cq=typeof self=="object"?self.FormData:window.FormData,Pq=Cq,it=Vt,Aq=Ga,Oq=Pq;function s_(e){return it.isPlainObject(e)||it.isArray(e)}function PM(e){return it.endsWith(e,"[]")?e.slice(0,-2):e}function NT(e,t,r){return e?e.concat(t).map(function(i,o){return i=PM(i),!r&&o?"["+i+"]":i}).join(r?".":""):t}function Iq(e){return it.isArray(e)&&!e.some(s_)}var Mq=it.toFlatObject(it,{},null,function(t){return/^is[A-Z]/.test(t)});function Rq(e){return e&&it.isFunction(e.append)&&e[Symbol.toStringTag]==="FormData"&&e[Symbol.iterator]}function kq(e,t,r){if(!it.isObject(e))throw new TypeError("target must be an object");t=t||new(Oq||FormData),r=it.toFlatObject(r,{metaTokens:!0,dots:!1,indexes:!1},!1,function(g,p){return!it.isUndefined(p[g])});var n=r.metaTokens,i=r.visitor||c,o=r.dots,a=r.indexes,s=r.Blob||typeof Blob<"u"&&Blob,l=s&&Rq(t);if(!it.isFunction(i))throw new TypeError("visitor must be a function");function u(m){if(m===null)return"";if(it.isDate(m))return m.toISOString();if(!l&&it.isBlob(m))throw new Aq("Blob is not supported. Use a Buffer instead.");return it.isArrayBuffer(m)||it.isTypedArray(m)?l&&typeof Blob=="function"?new Blob([m]):Buffer.from(m):m}function c(m,g,p){var v=m;if(m&&!p&&typeof m=="object"){if(it.endsWith(g,"{}"))g=n?g:g.slice(0,-2),m=JSON.stringify(m);else if(it.isArray(m)&&Iq(m)||it.isFileList(m)||it.endsWith(g,"[]")&&(v=it.toArray(m)))return g=PM(g),v.forEach(function(_,x){!it.isUndefined(_)&&t.append(a===!0?NT([g],x,o):a===null?g:g+"[]",u(_))}),!1}return s_(m)?!0:(t.append(NT(p,g,o),u(m)),!1)}var f=[],h=Object.assign(Mq,{defaultVisitor:c,convertValue:u,isVisitable:s_});function d(m,g){if(!it.isUndefined(m)){if(f.indexOf(m)!==-1)throw Error("Circular reference detected in "+g.join("."));f.push(m),it.forEach(m,function(v,y){var _=!it.isUndefined(v)&&i.call(t,v,it.isString(y)?y.trim():y,g,h);_===!0&&d(v,g?g.concat(y):[y])}),f.pop()}}if(!it.isObject(e))throw new TypeError("data must be an object");return d(e),t}var Sp=kq,Lq=Sp;function BT(e){var t={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(e).replace(/[!'\(\)~]|%20|%00/g,function(n){return t[n]})}function AM(e,t){this._pairs=[],e&&Lq(e,this,t)}var OM=AM.prototype;OM.append=function(t,r){this._pairs.push([t,r])};OM.toString=function(t){var r=t?function(n){return t.call(this,n,BT)}:BT;return this._pairs.map(function(i){return r(i[0])+"="+r(i[1])},"").join("&")};var IM=AM,Fq=Vt,Dq=IM;function Nq(e){return encodeURIComponent(e).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}var MM=function(t,r,n){if(!r)return t;var i=t.indexOf("#");i!==-1&&(t=t.slice(0,i));var o=n&&n.encode||Nq,a=Fq.isURLSearchParams(r)?r.toString():new Dq(r,n).toString(o);return a&&(t+=(t.indexOf("?")===-1?"?":"&")+a),t},Bq=Vt;function Wc(){this.handlers=[]}Wc.prototype.use=function(t,r,n){return this.handlers.push({fulfilled:t,rejected:r,synchronous:n?n.synchronous:!1,runWhen:n?n.runWhen:null}),this.handlers.length-1};Wc.prototype.eject=function(t){this.handlers[t]&&(this.handlers[t]=null)};Wc.prototype.clear=function(){this.handlers&&(this.handlers=[])};Wc.prototype.forEach=function(t){Bq.forEach(this.handlers,function(n){n!==null&&t(n)})};var jq=Wc,Uq=Vt,RM=function(t,r){Uq.forEach(t,function(i,o){o!==r&&o.toUpperCase()===r.toUpperCase()&&(t[r]=i,delete t[o])})},kM={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},$q=IM,Gq=typeof URLSearchParams<"u"?URLSearchParams:$q,zq=FormData,Vq={isBrowser:!0,classes:{URLSearchParams:Gq,FormData:zq,Blob},protocols:["http","https","file","blob","url","data"]},$b=Vq,Hq=Vt,Wq=Sp,jT=$b,Xq=function(t,r){return Wq(t,new jT.classes.URLSearchParams,Object.assign({visitor:function(n,i,o,a){return jT.isNode&&Hq.isBuffer(n)?(this.append(i,n.toString("base64")),!1):a.defaultVisitor.apply(this,arguments)}},r))},Yi=Vt;function qq(e){return Yi.matchAll(/\w+|\[(\w*)]/g,e).map(function(t){return t[0]==="[]"?"":t[1]||t[0]})}function Yq(e){var t={},r=Object.keys(e),n,i=r.length,o;for(n=0;n<i;n++)o=r[n],t[o]=e[o];return t}function Kq(e){function t(n,i,o,a){var s=n[a++],l=Number.isFinite(+s),u=a>=n.length;if(s=!s&&Yi.isArray(o)?o.length:s,u)return Yi.hasOwnProperty(o,s)?o[s]=[o[s],i]:o[s]=i,!l;(!o[s]||!Yi.isObject(o[s]))&&(o[s]=[]);var c=t(n,i,o[s],a);return c&&Yi.isArray(o[s])&&(o[s]=Yq(o[s])),!l}if(Yi.isFormData(e)&&Yi.isFunction(e.entries)){var r={};return Yi.forEachEntry(e,function(n,i){t(qq(n),i,r,0)}),r}return null}var LM=Kq,Rv,UT;function Zq(){if(UT)return Rv;UT=1;var e=Ga;return Rv=function(r,n,i){var o=i.config.validateStatus;!i.status||!o||o(i.status)?r(i):n(new e("Request failed with status code "+i.status,[e.ERR_BAD_REQUEST,e.ERR_BAD_RESPONSE][Math.floor(i.status/100)-4],i.config,i.request,i))},Rv}var kv,$T;function Jq(){if($T)return kv;$T=1;var e=Vt;return kv=e.isStandardBrowserEnv()?function(){return{write:function(n,i,o,a,s,l){var u=[];u.push(n+"="+encodeURIComponent(i)),e.isNumber(o)&&u.push("expires="+new Date(o).toGMTString()),e.isString(a)&&u.push("path="+a),e.isString(s)&&u.push("domain="+s),l===!0&&u.push("secure"),document.cookie=u.join("; ")},read:function(n){var i=document.cookie.match(new RegExp("(^|;\\s*)("+n+")=([^;]*)"));return i?decodeURIComponent(i[3]):null},remove:function(n){this.write(n,"",Date.now()-864e5)}}}():function(){return{write:function(){},read:function(){return null},remove:function(){}}}(),kv}var Qq=function(t){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(t)},e7=function(t,r){return r?t.replace(/\/+$/,"")+"/"+r.replace(/^\/+/,""):t},t7=Qq,r7=e7,FM=function(t,r){return t&&!t7(r)?r7(t,r):r},Lv,GT;function n7(){if(GT)return Lv;GT=1;var e=Vt,t=["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"];return Lv=function(n){var i={},o,a,s;return n&&e.forEach(n.split(`
`),function(u){if(s=u.indexOf(":"),o=e.trim(u.slice(0,s)).toLowerCase(),a=e.trim(u.slice(s+1)),o){if(i[o]&&t.indexOf(o)>=0)return;o==="set-cookie"?i[o]=(i[o]?i[o]:[]).concat([a]):i[o]=i[o]?i[o]+", "+a:a}}),i},Lv}var Fv,zT;function i7(){if(zT)return Fv;zT=1;var e=Vt;return Fv=e.isStandardBrowserEnv()?function(){var r=/(msie|trident)/i.test(navigator.userAgent),n=document.createElement("a"),i;function o(a){var s=a;return r&&(n.setAttribute("href",s),s=n.href),n.setAttribute("href",s),{href:n.href,protocol:n.protocol?n.protocol.replace(/:$/,""):"",host:n.host,search:n.search?n.search.replace(/^\?/,""):"",hash:n.hash?n.hash.replace(/^#/,""):"",hostname:n.hostname,port:n.port,pathname:n.pathname.charAt(0)==="/"?n.pathname:"/"+n.pathname}}return i=o(window.location.href),function(s){var l=e.isString(s)?o(s):s;return l.protocol===i.protocol&&l.host===i.host}}():function(){return function(){return!0}}(),Fv}var Dv,VT;function wp(){if(VT)return Dv;VT=1;var e=Ga,t=Vt;function r(n,i,o){e.call(this,n??"canceled",e.ERR_CANCELED,i,o),this.name="CanceledError"}return t.inherits(r,e,{__CANCEL__:!0}),Dv=r,Dv}var Nv,HT;function o7(){return HT||(HT=1,Nv=function(t){var r=/^([-+\w]{1,25})(:?\/\/|:)/.exec(t);return r&&r[1]||""}),Nv}var Bv,WT;function XT(){if(WT)return Bv;WT=1;var e=Vt,t=Zq(),r=Jq(),n=MM,i=FM,o=n7(),a=i7(),s=kM,l=Ga,u=wp(),c=o7(),f=$b;return Bv=function(d){return new Promise(function(g,p){var v=d.data,y=d.headers,_=d.responseType,x=d.withXSRFToken,b;function S(){d.cancelToken&&d.cancelToken.unsubscribe(b),d.signal&&d.signal.removeEventListener("abort",b)}e.isFormData(v)&&e.isStandardBrowserEnv()&&delete y["Content-Type"];var E=new XMLHttpRequest;if(d.auth){var I=d.auth.username||"",A=d.auth.password?unescape(encodeURIComponent(d.auth.password)):"";y.Authorization="Basic "+btoa(I+":"+A)}var O=i(d.baseURL,d.url);E.open(d.method.toUpperCase(),n(O,d.params,d.paramsSerializer),!0),E.timeout=d.timeout;function D(){if(E){var W="getAllResponseHeaders"in E?o(E.getAllResponseHeaders()):null,$=!_||_==="text"||_==="json"?E.responseText:E.response,z={data:$,status:E.status,statusText:E.statusText,headers:W,config:d,request:E};t(function(Se){g(Se),S()},function(Se){p(Se),S()},z),E=null}}if("onloadend"in E?E.onloadend=D:E.onreadystatechange=function(){!E||E.readyState!==4||E.status===0&&!(E.responseURL&&E.responseURL.indexOf("file:")===0)||setTimeout(D)},E.onabort=function(){E&&(p(new l("Request aborted",l.ECONNABORTED,d,E)),E=null)},E.onerror=function(){p(new l("Network Error",l.ERR_NETWORK,d,E)),E=null},E.ontimeout=function(){var $=d.timeout?"timeout of "+d.timeout+"ms exceeded":"timeout exceeded",z=d.transitional||s;d.timeoutErrorMessage&&($=d.timeoutErrorMessage),p(new l($,z.clarifyTimeoutError?l.ETIMEDOUT:l.ECONNABORTED,d,E)),E=null},e.isStandardBrowserEnv()&&(x&&e.isFunction(x)&&(x=x(d)),x||x!==!1&&a(O))){var B=d.xsrfHeaderName&&d.xsrfCookieName&&r.read(d.xsrfCookieName);B&&(y[d.xsrfHeaderName]=B)}"setRequestHeader"in E&&e.forEach(y,function($,z){typeof v>"u"&&z.toLowerCase()==="content-type"?delete y[z]:E.setRequestHeader(z,$)}),e.isUndefined(d.withCredentials)||(E.withCredentials=!!d.withCredentials),_&&_!=="json"&&(E.responseType=d.responseType),typeof d.onDownloadProgress=="function"&&E.addEventListener("progress",d.onDownloadProgress),typeof d.onUploadProgress=="function"&&E.upload&&E.upload.addEventListener("progress",d.onUploadProgress),(d.cancelToken||d.signal)&&(b=function(W){E&&(p(!W||W.type?new u(null,d,req):W),E.abort(),E=null)},d.cancelToken&&d.cancelToken.subscribe(b),d.signal&&(d.signal.aborted?b():d.signal.addEventListener("abort",b))),!v&&v!==!1&&v!==0&&v!==""&&(v=null);var j=c(O);if(j&&f.protocols.indexOf(j)===-1){p(new l("Unsupported protocol "+j+":",l.ERR_BAD_REQUEST,d));return}E.send(v)})},Bv}var jt=Vt,qT=RM,YT=Ga,a7=kM,s7=Sp,l7=Xq,KT=$b,u7=LM,c7={"Content-Type":"application/x-www-form-urlencoded"};function ZT(e,t){!jt.isUndefined(e)&&jt.isUndefined(e["Content-Type"])&&(e["Content-Type"]=t)}function f7(){var e;return(typeof XMLHttpRequest<"u"||typeof process<"u"&&Object.prototype.toString.call(process)==="[object process]")&&(e=XT()),e}function h7(e,t,r){if(jt.isString(e))try{return(t||JSON.parse)(e),jt.trim(e)}catch(n){if(n.name!=="SyntaxError")throw n}return(r||JSON.stringify)(e)}var Ep={transitional:a7,adapter:f7(),transformRequest:[function(t,r){qT(r,"Accept"),qT(r,"Content-Type");var n=r&&r["Content-Type"]||"",i=n.indexOf("application/json")>-1,o=jt.isObject(t);o&&jt.isHTMLForm(t)&&(t=new FormData(t));var a=jt.isFormData(t);if(a)return i?JSON.stringify(u7(t)):t;if(jt.isArrayBuffer(t)||jt.isBuffer(t)||jt.isStream(t)||jt.isFile(t)||jt.isBlob(t))return t;if(jt.isArrayBufferView(t))return t.buffer;if(jt.isURLSearchParams(t))return ZT(r,"application/x-www-form-urlencoded;charset=utf-8"),t.toString();var s;if(o){if(n.indexOf("application/x-www-form-urlencoded")!==-1)return l7(t,this.formSerializer).toString();if((s=jt.isFileList(t))||n.indexOf("multipart/form-data")>-1){var l=this.env&&this.env.FormData;return s7(s?{"files[]":t}:t,l&&new l,this.formSerializer)}}return o||i?(ZT(r,"application/json"),h7(t)):t}],transformResponse:[function(t){var r=this.transitional||Ep.transitional,n=r&&r.forcedJSONParsing,i=this.responseType==="json";if(t&&jt.isString(t)&&(n&&!this.responseType||i)){var o=r&&r.silentJSONParsing,a=!o&&i;try{return JSON.parse(t)}catch(s){if(a)throw s.name==="SyntaxError"?YT.from(s,YT.ERR_BAD_RESPONSE,this,null,this.response):s}}return t}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:KT.classes.FormData,Blob:KT.classes.Blob},validateStatus:function(t){return t>=200&&t<300},headers:{common:{Accept:"application/json, text/plain, */*"}}};jt.forEach(["delete","get","head"],function(t){Ep.headers[t]={}});jt.forEach(["post","put","patch"],function(t){Ep.headers[t]=jt.merge(c7)});var Gb=Ep,d7=Vt,p7=Gb,m7=function(t,r,n,i){var o=this||p7;return d7.forEach(i,function(s){t=s.call(o,t,r,n)}),t},jv,JT;function DM(){return JT||(JT=1,jv=function(t){return!!(t&&t.__CANCEL__)}),jv}var QT=Vt,Uv=m7,v7=DM(),g7=Gb,y7=wp(),eC=RM;function $v(e){if(e.cancelToken&&e.cancelToken.throwIfRequested(),e.signal&&e.signal.aborted)throw new y7}var _7=function(t){$v(t),t.headers=t.headers||{},t.data=Uv.call(t,t.data,t.headers,null,t.transformRequest),eC(t.headers,"Accept"),eC(t.headers,"Content-Type"),t.headers=QT.merge(t.headers.common||{},t.headers[t.method]||{},t.headers),QT.forEach(["delete","get","head","post","put","patch","common"],function(i){delete t.headers[i]});var r=t.adapter||g7.adapter;return r(t).then(function(i){return $v(t),i.data=Uv.call(t,i.data,i.headers,i.status,t.transformResponse),i},function(i){return v7(i)||($v(t),i&&i.response&&(i.response.data=Uv.call(t,i.response.data,i.response.headers,i.response.status,t.transformResponse))),Promise.reject(i)})},Tr=Vt,NM=function(t,r){r=r||{};var n={};function i(c,f){return Tr.isPlainObject(c)&&Tr.isPlainObject(f)?Tr.merge(c,f):Tr.isEmptyObject(f)?Tr.merge({},c):Tr.isPlainObject(f)?Tr.merge({},f):Tr.isArray(f)?f.slice():f}function o(c){if(Tr.isUndefined(r[c])){if(!Tr.isUndefined(t[c]))return i(void 0,t[c])}else return i(t[c],r[c])}function a(c){if(!Tr.isUndefined(r[c]))return i(void 0,r[c])}function s(c){if(Tr.isUndefined(r[c])){if(!Tr.isUndefined(t[c]))return i(void 0,t[c])}else return i(void 0,r[c])}function l(c){if(c in r)return i(t[c],r[c]);if(c in t)return i(void 0,t[c])}var u={url:a,method:a,data:a,baseURL:s,transformRequest:s,transformResponse:s,paramsSerializer:s,timeout:s,timeoutMessage:s,withCredentials:s,withXSRFToken:s,adapter:s,responseType:s,xsrfCookieName:s,xsrfHeaderName:s,onUploadProgress:s,onDownloadProgress:s,decompress:s,maxContentLength:s,maxBodyLength:s,beforeRedirect:s,transport:s,httpAgent:s,httpsAgent:s,cancelToken:s,socketPath:s,responseEncoding:s,validateStatus:l};return Tr.forEach(Object.keys(t).concat(Object.keys(r)),function(f){var h=u[f]||o,d=h(f);Tr.isUndefined(d)&&h!==l||(n[f]=d)}),n},Gv,tC;function BM(){return tC||(tC=1,Gv={version:"0.28.0"}),Gv}var x7=BM().version,Ji=Ga,zb={};["object","boolean","number","function","string","symbol"].forEach(function(e,t){zb[e]=function(n){return typeof n===e||"a"+(t<1?"n ":" ")+e}});var rC={};zb.transitional=function(t,r,n){function i(o,a){return"[Axios v"+x7+"] Transitional option '"+o+"'"+a+(n?". "+n:"")}return function(o,a,s){if(t===!1)throw new Ji(i(a," has been removed"+(r?" in "+r:"")),Ji.ERR_DEPRECATED);return r&&!rC[a]&&(rC[a]=!0,console.warn(i(a," has been deprecated since v"+r+" and will be removed in the near future"))),t?t(o,a,s):!0}};function b7(e,t,r){if(typeof e!="object")throw new Ji("options must be an object",Ji.ERR_BAD_OPTION_VALUE);for(var n=Object.keys(e),i=n.length;i-- >0;){var o=n[i],a=t[o];if(a){var s=e[o],l=s===void 0||a(s,o,e);if(l!==!0)throw new Ji("option "+o+" must be "+l,Ji.ERR_BAD_OPTION_VALUE);continue}if(r!==!0)throw new Ji("Unknown option "+o,Ji.ERR_BAD_OPTION)}}var S7={assertOptions:b7,validators:zb},Vb=Vt,w7=MM,nC=jq,iC=_7,Tp=NM,E7=FM,jM=S7,Ka=jM.validators;function Xs(e){this.defaults=e,this.interceptors={request:new nC,response:new nC}}Xs.prototype.request=function(t,r){typeof t=="string"?(r=r||{},r.url=t):r=t||{},r=Tp(this.defaults,r),r.method?r.method=r.method.toLowerCase():this.defaults.method?r.method=this.defaults.method.toLowerCase():r.method="get";var n=r.transitional;n!==void 0&&jM.assertOptions(n,{silentJSONParsing:Ka.transitional(Ka.boolean),forcedJSONParsing:Ka.transitional(Ka.boolean),clarifyTimeoutError:Ka.transitional(Ka.boolean)},!1);var i=r.paramsSerializer;Vb.isFunction(i)&&(r.paramsSerializer={serialize:i});var o=[],a=!0;this.interceptors.request.forEach(function(m){typeof m.runWhen=="function"&&m.runWhen(r)===!1||(a=a&&m.synchronous,o.unshift(m.fulfilled,m.rejected))});var s=[];this.interceptors.response.forEach(function(m){s.push(m.fulfilled,m.rejected)});var l;if(!a){var u=[iC,void 0];for(Array.prototype.unshift.apply(u,o),u=u.concat(s),l=Promise.resolve(r);u.length;)l=l.then(u.shift(),u.shift());return l}for(var c=r;o.length;){var f=o.shift(),h=o.shift();try{c=f(c)}catch(d){h(d);break}}try{l=iC(c)}catch(d){return Promise.reject(d)}for(;s.length;)l=l.then(s.shift(),s.shift());return l};Xs.prototype.getUri=function(t){t=Tp(this.defaults,t);var r=E7(t.baseURL,t.url);return w7(r,t.params,t.paramsSerializer)};Vb.forEach(["delete","get","head","options"],function(t){Xs.prototype[t]=function(r,n){return this.request(Tp(n||{},{method:t,url:r,data:(n||{}).data}))}});Vb.forEach(["post","put","patch"],function(t){function r(n){return function(o,a,s){return this.request(Tp(s||{},{method:t,headers:n?{"Content-Type":"multipart/form-data"}:{},url:o,data:a}))}}Xs.prototype[t]=r(),Xs.prototype[t+"Form"]=r(!0)});var T7=Xs,zv,oC;function C7(){if(oC)return zv;oC=1;var e=wp();function t(r){if(typeof r!="function")throw new TypeError("executor must be a function.");var n;this.promise=new Promise(function(a){n=a});var i=this;this.promise.then(function(o){if(i._listeners){for(var a=i._listeners.length;a-- >0;)i._listeners[a](o);i._listeners=null}}),this.promise.then=function(o){var a,s=new Promise(function(l){i.subscribe(l),a=l}).then(o);return s.cancel=function(){i.unsubscribe(a)},s},r(function(a,s,l){i.reason||(i.reason=new e(a,s,l),n(i.reason))})}return t.prototype.throwIfRequested=function(){if(this.reason)throw this.reason},t.prototype.subscribe=function(n){if(this.reason){n(this.reason);return}this._listeners?this._listeners.push(n):this._listeners=[n]},t.prototype.unsubscribe=function(n){if(this._listeners){var i=this._listeners.indexOf(n);i!==-1&&this._listeners.splice(i,1)}},t.source=function(){var n,i=new t(function(a){n=a});return{token:i,cancel:n}},zv=t,zv}var Vv,aC;function P7(){return aC||(aC=1,Vv=function(t){return function(n){return t.apply(null,n)}}),Vv}var Hv,sC;function A7(){if(sC)return Hv;sC=1;var e=Vt;return Hv=function(r){return e.isObject(r)&&r.isAxiosError===!0},Hv}var l_=Vt,O7=xM,xh=T7,I7=NM,M7=Gb,R7=LM;function UM(e){var t=new xh(e),r=O7(xh.prototype.request,t);return l_.extend(r,xh.prototype,t),l_.extend(r,t),r.create=function(i){return UM(I7(e,i))},r}var Ir=UM(M7);Ir.Axios=xh;Ir.CanceledError=wp();Ir.CancelToken=C7();Ir.isCancel=DM();Ir.VERSION=BM().version;Ir.toFormData=Sp;Ir.AxiosError=Ga;Ir.Cancel=Ir.CanceledError;Ir.all=function(t){return Promise.all(t)};Ir.spread=P7();Ir.isAxiosError=A7();Ir.formToJSON=function(e){return R7(l_.isHTMLForm(e)?new FormData(e):e)};Db.exports=Ir;Db.exports.default=Ir;var k7=Db.exports,L7=k7;const cc=Sr(L7),bi=e=>new Promise((t,r)=>{cc.get(e).then(n=>{const i=n.data.toString();t(i)}).catch(n=>{r(n)})});var F7="__lodash_hash_undefined__";function D7(e){return this.__data__.set(e,F7),this}var N7=D7;function B7(e){return this.__data__.has(e)}var j7=B7,U7=gb,$7=N7,G7=j7;function vd(e){var t=-1,r=e==null?0:e.length;for(this.__data__=new U7;++t<r;)this.add(e[t])}vd.prototype.add=vd.prototype.push=$7;vd.prototype.has=G7;var $M=vd;function z7(e,t,r,n){for(var i=e.length,o=r+(n?1:-1);n?o--:++o<i;)if(t(e[o],o,e))return o;return-1}var V7=z7;function H7(e){return e!==e}var W7=H7;function X7(e,t,r){for(var n=r-1,i=e.length;++n<i;)if(e[n]===t)return n;return-1}var q7=X7,Y7=V7,K7=W7,Z7=q7;function J7(e,t,r){return t===t?Z7(e,t,r):Y7(e,K7,r)}var Q7=J7,eY=Q7;function tY(e,t){var r=e==null?0:e.length;return!!r&&eY(e,t,0)>-1}var rY=tY;function nY(e,t,r){for(var n=-1,i=e==null?0:e.length;++n<i;)if(r(t,e[n]))return!0;return!1}var iY=nY;function oY(e,t){return e.has(t)}var GM=oY;function aY(){}var sY=aY;function lY(e){var t=-1,r=Array(e.size);return e.forEach(function(n){r[++t]=n}),r}var Hb=lY,Wv=GI,uY=sY,cY=Hb,fY=1/0,hY=Wv&&1/cY(new Wv([,-0]))[1]==fY?function(e){return new Wv(e)}:uY,dY=hY,pY=$M,mY=rY,vY=iY,gY=GM,yY=dY,_Y=Hb,xY=200;function bY(e,t,r){var n=-1,i=mY,o=e.length,a=!0,s=[],l=s;if(r)a=!1,i=vY;else if(o>=xY){var u=t?null:yY(e);if(u)return _Y(u);a=!1,i=gY,l=new pY}else l=t?[]:s;e:for(;++n<o;){var c=e[n],f=t?t(c):c;if(c=r||c!==0?c:0,a&&f===f){for(var h=l.length;h--;)if(l[h]===f)continue e;t&&l.push(f),s.push(c)}else i(l,f,r)||(l!==s&&l.push(f),s.push(c))}return s}var SY=bY,wY=SY;function EY(e,t){return t=typeof t=="function"?t:void 0,e&&e.length?wY(e,void 0,t):[]}var TY=EY;const Xc=Sr(TY),qc=e=>{for(const t of e)C.sceneManager.settledScenes.includes(t)?te.warn(`${t}`):(te.info(`${t}`),bi(t).then(r=>{Un(r,t,t)}))},CY=(e,t)=>{C.sceneManager.lockSceneWrite||(C.sceneManager.lockSceneWrite=!0,C.sceneManager.sceneData.sceneStack.push({sceneName:C.sceneManager.sceneData.currentScene.sceneName,sceneUrl:C.sceneManager.sceneData.currentScene.sceneUrl,continueLine:C.sceneManager.sceneData.currentSentenceId}),bi(e).then(r=>{C.sceneManager.sceneData.currentScene=Un(r,t,e),C.sceneManager.sceneData.currentSentenceId=0;const n=C.sceneManager.sceneData.currentScene.subSceneList;C.sceneManager.settledScenes.push(e);const i=Xc(n);qc(i),te.debug("",C.sceneManager.sceneData),C.sceneManager.lockSceneWrite=!1,cr()}).catch(r=>{te.error("",r),C.sceneManager.lockSceneWrite=!1}))},PY=e=>{const t=e.content.split("/"),r=t[t.length-1];return CY(e.content,r),{performName:"none",duration:0,isHoldOn:!0,stopFunction:()=>{},blockingNext:()=>!1,blockingAuto:()=>!0,stopTimeout:void 0}};function AY(e){return e===null}var OY=AY;const IY=Sr(OY);function fc(e,t,r){let n;const o=N.getState().stage.effects.find(a=>a.target===e);if(t.duration=500,!IY(r)&&typeof r=="number"&&(t.duration=r),n=[t],o){const a={...o.transform,duration:0};n.unshift(a)}else{const a={...t,alpha:0,duration:0};n.unshift(a)}return n}function zM(e,t){const r=C.gameplay.pixiStage.getStageObjByKey(e);function n(){r&&(r.pixiContainer.alphaFilterVal=0)}function i(){r&&(r.pixiContainer.alphaFilterVal=1)}function o(a){if(r){const s=r.pixiContainer,l=C.gameplay.pixiStage.frameDuration,c=1/(t/l*a);s.alphaFilterVal<1&&(s.alpha+=c)}}return{setStartState:n,setEndState:i,tickerFunc:o}}function VM(e,t){const r=C.gameplay.pixiStage.getStageObjByKey(e);function n(){}function i(){r&&(r.pixiContainer.alphaFilterVal=0)}function o(a){if(r){const s=r.pixiContainer,l=C.gameplay.pixiStage.frameDuration,c=1/(t/l*a);s.alphaFilterVal>0&&(s.alphaFilterVal-=c)}}return{setStartState:n,setEndState:i,tickerFunc:o}}const Wb={alpha:1,scale:{x:1,y:1},position:{x:0,y:0},rotation:0,blur:0};function HM(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(e);i<n.length;i++)t.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(e,n[i])&&(r[n[i]]=e[n[i]]);return r}var MY=function(){},lC=function(){};const u_=(e,t,r)=>Math.min(Math.max(r,e),t),Xv=.001,RY=.01,uC=10,kY=.05,LY=1;function FY({duration:e=800,bounce:t=.25,velocity:r=0,mass:n=1}){let i,o;MY(e<=uC*1e3);let a=1-t;a=u_(kY,LY,a),e=u_(RY,uC,e/1e3),a<1?(i=u=>{const c=u*a,f=c*e,h=c-r,d=c_(u,a),m=Math.exp(-f);return Xv-h/d*m},o=u=>{const f=u*a*e,h=f*r+r,d=Math.pow(a,2)*Math.pow(u,2)*e,m=Math.exp(-f),g=c_(Math.pow(u,2),a);return(-i(u)+Xv>0?-1:1)*((h-d)*m)/g}):(i=u=>{const c=Math.exp(-u*e),f=(u-r)*e+1;return-Xv+c*f},o=u=>{const c=Math.exp(-u*e),f=(r-u)*(e*e);return c*f});const s=5/e,l=NY(i,o,s);if(e=e*1e3,isNaN(l))return{stiffness:100,damping:10,duration:e};{const u=Math.pow(l,2)*n;return{stiffness:u,damping:a*2*Math.sqrt(n*u),duration:e}}}const DY=12;function NY(e,t,r){let n=r;for(let i=1;i<DY;i++)n=n-e(n)/t(n);return n}function c_(e,t){return e*Math.sqrt(1-t*t)}const BY=["duration","bounce"],jY=["stiffness","damping","mass"];function cC(e,t){return t.some(r=>e[r]!==void 0)}function UY(e){let t=Object.assign({velocity:0,stiffness:100,damping:10,mass:1,isResolvedFromDuration:!1},e);if(!cC(e,jY)&&cC(e,BY)){const r=FY(e);t=Object.assign(Object.assign(Object.assign({},t),r),{velocity:0,mass:1}),t.isResolvedFromDuration=!0}return t}function Xb(e){var{from:t=0,to:r=1,restSpeed:n=2,restDelta:i}=e,o=HM(e,["from","to","restSpeed","restDelta"]);const a={done:!1,value:t};let{stiffness:s,damping:l,mass:u,velocity:c,duration:f,isResolvedFromDuration:h}=UY(o),d=fC,m=fC;function g(){const p=c?-(c/1e3):0,v=r-t,y=l/(2*Math.sqrt(s*u)),_=Math.sqrt(s/u)/1e3;if(i===void 0&&(i=Math.min(Math.abs(r-t)/100,.4)),y<1){const x=c_(_,y);d=b=>{const S=Math.exp(-y*_*b);return r-S*((p+y*_*v)/x*Math.sin(x*b)+v*Math.cos(x*b))},m=b=>{const S=Math.exp(-y*_*b);return y*_*S*(Math.sin(x*b)*(p+y*_*v)/x+v*Math.cos(x*b))-S*(Math.cos(x*b)*(p+y*_*v)-x*v*Math.sin(x*b))}}else if(y===1)d=x=>r-Math.exp(-_*x)*(v+(p+_*v)*x);else{const x=_*Math.sqrt(y*y-1);d=b=>{const S=Math.exp(-y*_*b),E=Math.min(x*b,300);return r-S*((p+y*_*v)*Math.sinh(E)+x*v*Math.cosh(E))/x}}}return g(),{next:p=>{const v=d(p);if(h)a.done=p>=f;else{const y=m(p)*1e3,_=Math.abs(y)<=n,x=Math.abs(r-v)<=i;a.done=_&&x}return a.value=a.done?r:v,a},flipTarget:()=>{c=-c,[t,r]=[r,t],g()}}}Xb.needsInterpolation=(e,t)=>typeof e=="string"||typeof t=="string";const fC=e=>0,WM=(e,t,r)=>{const n=t-e;return n===0?1:(r-e)/n},qb=(e,t,r)=>-r*e+r*t+e,XM=(e,t)=>r=>Math.max(Math.min(r,t),e),Nu=e=>e%1?Number(e.toFixed(5)):e,gd=/(-)?([\d]*\.?[\d])+/g,f_=/(#[0-9a-f]{6}|#[0-9a-f]{3}|#(?:[0-9a-f]{2}){2,4}|(rgb|hsl)a?\((-?[\d\.]+%?[,\s]+){2}(-?[\d\.]+%?)\s*[\,\/]?\s*[\d\.]*%?\))/gi,$Y=/^(#[0-9a-f]{3}|#(?:[0-9a-f]{2}){2,4}|(rgb|hsl)a?\((-?[\d\.]+%?[,\s]+){2}(-?[\d\.]+%?)\s*[\,\/]?\s*[\d\.]*%?\))$/i;function Yc(e){return typeof e=="string"}const Cp={test:e=>typeof e=="number",parse:parseFloat,transform:e=>e},qM=Object.assign(Object.assign({},Cp),{transform:XM(0,1)});Object.assign(Object.assign({},Cp),{default:1});const GY=e=>({test:t=>Yc(t)&&t.endsWith(e)&&t.split(" ").length===1,parse:parseFloat,transform:t=>`${t}${e}`}),Bu=GY("%");Object.assign(Object.assign({},Bu),{parse:e=>Bu.parse(e)/100,transform:e=>Bu.transform(e*100)});const Yb=(e,t)=>r=>!!(Yc(r)&&$Y.test(r)&&r.startsWith(e)||t&&Object.prototype.hasOwnProperty.call(r,t)),YM=(e,t,r)=>n=>{if(!Yc(n))return n;const[i,o,a,s]=n.match(gd);return{[e]:parseFloat(i),[t]:parseFloat(o),[r]:parseFloat(a),alpha:s!==void 0?parseFloat(s):1}},pa={test:Yb("hsl","hue"),parse:YM("hue","saturation","lightness"),transform:({hue:e,saturation:t,lightness:r,alpha:n=1})=>"hsla("+Math.round(e)+", "+Bu.transform(Nu(t))+", "+Bu.transform(Nu(r))+", "+Nu(qM.transform(n))+")"},zY=XM(0,255),qv=Object.assign(Object.assign({},Cp),{transform:e=>Math.round(zY(e))}),uo={test:Yb("rgb","red"),parse:YM("red","green","blue"),transform:({red:e,green:t,blue:r,alpha:n=1})=>"rgba("+qv.transform(e)+", "+qv.transform(t)+", "+qv.transform(r)+", "+Nu(qM.transform(n))+")"};function VY(e){let t="",r="",n="",i="";return e.length>5?(t=e.substr(1,2),r=e.substr(3,2),n=e.substr(5,2),i=e.substr(7,2)):(t=e.substr(1,1),r=e.substr(2,1),n=e.substr(3,1),i=e.substr(4,1),t+=t,r+=r,n+=n,i+=i),{red:parseInt(t,16),green:parseInt(r,16),blue:parseInt(n,16),alpha:i?parseInt(i,16)/255:1}}const h_={test:Yb("#"),parse:VY,transform:uo.transform},Pp={test:e=>uo.test(e)||h_.test(e)||pa.test(e),parse:e=>uo.test(e)?uo.parse(e):pa.test(e)?pa.parse(e):h_.parse(e),transform:e=>Yc(e)?e:e.hasOwnProperty("red")?uo.transform(e):pa.transform(e)},KM="${c}",ZM="${n}";function HY(e){var t,r,n,i;return isNaN(e)&&Yc(e)&&((r=(t=e.match(gd))===null||t===void 0?void 0:t.length)!==null&&r!==void 0?r:0)+((i=(n=e.match(f_))===null||n===void 0?void 0:n.length)!==null&&i!==void 0?i:0)>0}function JM(e){typeof e=="number"&&(e=`${e}`);const t=[];let r=0;const n=e.match(f_);n&&(r=n.length,e=e.replace(f_,KM),t.push(...n.map(Pp.parse)));const i=e.match(gd);return i&&(e=e.replace(gd,ZM),t.push(...i.map(Cp.parse))),{values:t,numColors:r,tokenised:e}}function QM(e){return JM(e).values}function eR(e){const{values:t,numColors:r,tokenised:n}=JM(e),i=t.length;return o=>{let a=n;for(let s=0;s<i;s++)a=a.replace(s<r?KM:ZM,s<r?Pp.transform(o[s]):Nu(o[s]));return a}}const WY=e=>typeof e=="number"?0:e;function XY(e){const t=QM(e);return eR(e)(t.map(WY))}const tR={test:HY,parse:QM,createTransformer:eR,getAnimatableNone:XY};function Yv(e,t,r){return r<0&&(r+=1),r>1&&(r-=1),r<1/6?e+(t-e)*6*r:r<1/2?t:r<2/3?e+(t-e)*(2/3-r)*6:e}function hC({hue:e,saturation:t,lightness:r,alpha:n}){e/=360,t/=100,r/=100;let i=0,o=0,a=0;if(!t)i=o=a=r;else{const s=r<.5?r*(1+t):r+t-r*t,l=2*r-s;i=Yv(l,s,e+1/3),o=Yv(l,s,e),a=Yv(l,s,e-1/3)}return{red:Math.round(i*255),green:Math.round(o*255),blue:Math.round(a*255),alpha:n}}const qY=(e,t,r)=>{const n=e*e,i=t*t;return Math.sqrt(Math.max(0,r*(i-n)+n))},YY=[h_,uo,pa],dC=e=>YY.find(t=>t.test(e)),rR=(e,t)=>{let r=dC(e),n=dC(t),i=r.parse(e),o=n.parse(t);r===pa&&(i=hC(i),r=uo),n===pa&&(o=hC(o),n=uo);const a=Object.assign({},i);return s=>{for(const l in a)l!=="alpha"&&(a[l]=qY(i[l],o[l],s));return a.alpha=qb(i.alpha,o.alpha,s),r.transform(a)}},KY=e=>typeof e=="number",ZY=(e,t)=>r=>t(e(r)),nR=(...e)=>e.reduce(ZY);function iR(e,t){return KY(e)?r=>qb(e,t,r):Pp.test(e)?rR(e,t):aR(e,t)}const oR=(e,t)=>{const r=[...e],n=r.length,i=e.map((o,a)=>iR(o,t[a]));return o=>{for(let a=0;a<n;a++)r[a]=i[a](o);return r}},JY=(e,t)=>{const r=Object.assign(Object.assign({},e),t),n={};for(const i in r)e[i]!==void 0&&t[i]!==void 0&&(n[i]=iR(e[i],t[i]));return i=>{for(const o in n)r[o]=n[o](i);return r}};function pC(e){const t=tR.parse(e),r=t.length;let n=0,i=0,o=0;for(let a=0;a<r;a++)n||typeof t[a]=="number"?n++:t[a].hue!==void 0?o++:i++;return{parsed:t,numNumbers:n,numRGB:i,numHSL:o}}const aR=(e,t)=>{const r=tR.createTransformer(t),n=pC(e),i=pC(t);return n.numHSL===i.numHSL&&n.numRGB===i.numRGB&&n.numNumbers>=i.numNumbers?nR(oR(n.parsed,i.parsed),r):a=>`${a>0?t:e}`},QY=(e,t)=>r=>qb(e,t,r);function eK(e){if(typeof e=="number")return QY;if(typeof e=="string")return Pp.test(e)?rR:aR;if(Array.isArray(e))return oR;if(typeof e=="object")return JY}function tK(e,t,r){const n=[],i=r||eK(e[0]),o=e.length-1;for(let a=0;a<o;a++){let s=i(e[a],e[a+1]);if(t){const l=Array.isArray(t)?t[a]:t;s=nR(l,s)}n.push(s)}return n}function rK([e,t],[r]){return n=>r(WM(e,t,n))}function nK(e,t){const r=e.length,n=r-1;return i=>{let o=0,a=!1;if(i<=e[0]?a=!0:i>=e[n]&&(o=n-1,a=!0),!a){let l=1;for(;l<r&&!(e[l]>i||l===n);l++);o=l-1}const s=WM(e[o],e[o+1],i);return t[o](s)}}function sR(e,t,{clamp:r=!0,ease:n,mixer:i}={}){const o=e.length;lC(o===t.length),lC(!n||!Array.isArray(n)||n.length===o-1),e[0]>e[o-1]&&(e=[].concat(e),t=[].concat(t),e.reverse(),t.reverse());const a=tK(t,n,i),s=o===2?rK(e,a):nK(e,a);return r?l=>s(u_(e[0],e[o-1],l)):s}const iK=e=>t=>t<=.5?e(2*t)/2:(2-e(2*(1-t)))/2,oK=e=>t=>Math.pow(t,e),aK=e=>t=>t*t*((e+1)*t-e),sK=e=>{const t=aK(e);return r=>(r*=2)<1?.5*t(r):.5*(2-Math.pow(2,-10*(r-1)))},lK=1.525,uK=oK(2),cK=iK(uK);sK(lK);function fK(e,t){return e.map(()=>t||cK).splice(0,e.length-1)}function hK(e){const t=e.length;return e.map((r,n)=>n!==0?n/(t-1):0)}function dK(e,t){return e.map(r=>r*t)}function bh({from:e=0,to:t=1,ease:r,offset:n,duration:i=300}){const o={done:!1,value:e},a=Array.isArray(t)?t:[e,t],s=dK(n&&n.length===a.length?n:hK(a),i);function l(){return sR(s,a,{ease:Array.isArray(r)?r:fK(a,r)})}let u=l();return{next:c=>(o.value=u(c),o.done=c>=i,o),flipTarget:()=>{a.reverse(),u=l()}}}function pK({velocity:e=0,from:t=0,power:r=.8,timeConstant:n=350,restDelta:i=.5,modifyTarget:o}){const a={done:!1,value:t};let s=r*e;const l=t+s,u=o===void 0?l:o(l);return u!==l&&(s=u-t),{next:c=>{const f=-s*Math.exp(-c/n);return a.done=!(f>i||f<-i),a.value=a.done?u:u+f,a},flipTarget:()=>{}}}const mC={keyframes:bh,spring:Xb,decay:pK};function mK(e){if(Array.isArray(e.to))return bh;if(mC[e.type])return mC[e.type];const t=new Set(Object.keys(e));return t.has("ease")||t.has("duration")&&!t.has("dampingRatio")?bh:t.has("dampingRatio")||t.has("stiffness")||t.has("mass")||t.has("damping")||t.has("restSpeed")||t.has("restDelta")?Xb:bh}const lR=1/60*1e3,vK=typeof performance<"u"?()=>performance.now():()=>Date.now(),uR=typeof window<"u"?e=>window.requestAnimationFrame(e):e=>setTimeout(()=>e(vK()),lR);function gK(e){let t=[],r=[],n=0,i=!1,o=!1;const a=new WeakSet,s={schedule:(l,u=!1,c=!1)=>{const f=c&&i,h=f?t:r;return u&&a.add(l),h.indexOf(l)===-1&&(h.push(l),f&&i&&(n=t.length)),l},cancel:l=>{const u=r.indexOf(l);u!==-1&&r.splice(u,1),a.delete(l)},process:l=>{if(i){o=!0;return}if(i=!0,[t,r]=[r,t],r.length=0,n=t.length,n)for(let u=0;u<n;u++){const c=t[u];c(l),a.has(c)&&(s.schedule(c),e())}i=!1,o&&(o=!1,s.process(l))}};return s}const yK=40;let d_=!0,hc=!1,p_=!1;const ju={delta:0,timestamp:0},Kc=["read","update","preRender","render","postRender"],Ap=Kc.reduce((e,t)=>(e[t]=gK(()=>hc=!0),e),{}),_K=Kc.reduce((e,t)=>{const r=Ap[t];return e[t]=(n,i=!1,o=!1)=>(hc||SK(),r.schedule(n,i,o)),e},{}),xK=Kc.reduce((e,t)=>(e[t]=Ap[t].cancel,e),{});Kc.reduce((e,t)=>(e[t]=()=>Ap[t].process(ju),e),{});const bK=e=>Ap[e].process(ju),cR=e=>{hc=!1,ju.delta=d_?lR:Math.max(Math.min(e-ju.timestamp,yK),1),ju.timestamp=e,p_=!0,Kc.forEach(bK),p_=!1,hc&&(d_=!1,uR(cR))},SK=()=>{hc=!0,d_=!0,p_||uR(cR)},wK=_K;function fR(e,t,r=0){return e-t-r}function EK(e,t,r=0,n=!0){return n?fR(t+-e,t,r):t-(e-t)+r}function TK(e,t,r,n){return n?e>=t+r:e<=-r}const CK=e=>{const t=({delta:r})=>e(r);return{start:()=>wK.update(t,!0),stop:()=>xK.update(t)}};function PK(e){var t,r,{from:n,autoplay:i=!0,driver:o=CK,elapsed:a=0,repeat:s=0,repeatType:l="loop",repeatDelay:u=0,onPlay:c,onStop:f,onComplete:h,onRepeat:d,onUpdate:m}=e,g=HM(e,["from","autoplay","driver","elapsed","repeat","repeatType","repeatDelay","onPlay","onStop","onComplete","onRepeat","onUpdate"]);let{to:p}=g,v,y=0,_=g.duration,x,b=!1,S=!0,E;const I=mK(g);!((r=(t=I).needsInterpolation)===null||r===void 0)&&r.call(t,n,p)&&(E=sR([0,100],[n,p],{clamp:!1}),n=0,p=100);const A=I(Object.assign(Object.assign({},g),{from:n,to:p}));function O(){y++,l==="reverse"?(S=y%2===0,a=EK(a,_,u,S)):(a=fR(a,_,u),l==="mirror"&&A.flipTarget()),b=!1,d&&d()}function D(){v.stop(),h&&h()}function B(W){if(S||(W=-W),a+=W,!b){const $=A.next(Math.max(0,a));x=$.value,E&&(x=E(x)),b=S?$.done:a<=0}m==null||m(x),b&&(y===0&&(_??(_=a)),y<s?TK(a,_,u,S)&&O():D())}function j(){c==null||c(),v=o(B),v.start()}return i&&j(),{stop:()=>{f==null||f(),v.stop()}}}function AK(e,t){for(var r=-1,n=e==null?0:e.length;++r<n;)if(t(e[r],r,e))return!0;return!1}var OK=AK,IK=$M,MK=OK,RK=GM,kK=1,LK=2;function FK(e,t,r,n,i,o){var a=r&kK,s=e.length,l=t.length;if(s!=l&&!(a&&l>s))return!1;var u=o.get(e),c=o.get(t);if(u&&c)return u==t&&c==e;var f=-1,h=!0,d=r&LK?new IK:void 0;for(o.set(e,t),o.set(t,e);++f<s;){var m=e[f],g=t[f];if(n)var p=a?n(g,m,f,t,e,o):n(m,g,f,e,t,o);if(p!==void 0){if(p)continue;h=!1;break}if(d){if(!MK(t,function(v,y){if(!RK(d,y)&&(m===v||i(m,v,r,n,o)))return d.push(y)})){h=!1;break}}else if(!(m===g||i(m,g,r,n,o))){h=!1;break}}return o.delete(e),o.delete(t),h}var hR=FK;function DK(e){var t=-1,r=Array(e.size);return e.forEach(function(n,i){r[++t]=[i,n]}),r}var NK=DK,vC=zc,gC=VI,BK=mb,jK=hR,UK=NK,$K=Hb,GK=1,zK=2,VK="[object Boolean]",HK="[object Date]",WK="[object Error]",XK="[object Map]",qK="[object Number]",YK="[object RegExp]",KK="[object Set]",ZK="[object String]",JK="[object Symbol]",QK="[object ArrayBuffer]",eZ="[object DataView]",yC=vC?vC.prototype:void 0,Kv=yC?yC.valueOf:void 0;function tZ(e,t,r,n,i,o,a){switch(r){case eZ:if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case QK:return!(e.byteLength!=t.byteLength||!o(new gC(e),new gC(t)));case VK:case HK:case qK:return BK(+e,+t);case WK:return e.name==t.name&&e.message==t.message;case YK:case ZK:return e==t+"";case XK:var s=UK;case KK:var l=n&GK;if(s||(s=$K),e.size!=t.size&&!l)return!1;var u=a.get(e);if(u)return u==t;n|=zK,a.set(e,t);var c=jK(s(e),s(t),n,i,o,a);return a.delete(e),c;case JK:if(Kv)return Kv.call(e)==Kv.call(t)}return!1}var rZ=tZ,_C=UI,nZ=1,iZ=Object.prototype,oZ=iZ.hasOwnProperty;function aZ(e,t,r,n,i,o){var a=r&nZ,s=_C(e),l=s.length,u=_C(t),c=u.length;if(l!=c&&!a)return!1;for(var f=l;f--;){var h=s[f];if(!(a?h in t:oZ.call(t,h)))return!1}var d=o.get(e),m=o.get(t);if(d&&m)return d==t&&m==e;var g=!0;o.set(e,t),o.set(t,e);for(var p=a;++f<l;){h=s[f];var v=e[h],y=t[h];if(n)var _=a?n(y,v,h,t,e,o):n(v,y,h,e,t,o);if(!(_===void 0?v===y||i(v,y,r,n,o):_)){g=!1;break}p||(p=h=="constructor")}if(g&&!p){var x=e.constructor,b=t.constructor;x!=b&&"constructor"in e&&"constructor"in t&&!(typeof x=="function"&&x instanceof x&&typeof b=="function"&&b instanceof b)&&(g=!1)}return o.delete(e),o.delete(t),g}var sZ=aZ,Zv=yb,lZ=hR,uZ=rZ,cZ=sZ,xC=fp,bC=zi,SC=xb,fZ=MI,hZ=1,wC="[object Arguments]",EC="[object Array]",wf="[object Object]",dZ=Object.prototype,TC=dZ.hasOwnProperty;function pZ(e,t,r,n,i,o){var a=bC(e),s=bC(t),l=a?EC:xC(e),u=s?EC:xC(t);l=l==wC?wf:l,u=u==wC?wf:u;var c=l==wf,f=u==wf,h=l==u;if(h&&SC(e)){if(!SC(t))return!1;a=!0,c=!1}if(h&&!c)return o||(o=new Zv),a||fZ(e)?lZ(e,t,r,n,i,o):uZ(e,t,l,r,n,i,o);if(!(r&hZ)){var d=c&&TC.call(e,"__wrapped__"),m=f&&TC.call(t,"__wrapped__");if(d||m){var g=d?e.value():e,p=m?t.value():t;return o||(o=new Zv),i(g,p,r,n,o)}}return h?(o||(o=new Zv),cZ(e,t,r,n,i,o)):!1}var mZ=pZ,vZ=mZ,CC=Ba;function dR(e,t,r,n,i){return e===t?!0:e==null||t==null||!CC(e)&&!CC(t)?e!==e&&t!==t:vZ(e,t,r,n,dR,i)}var pR=dR,gZ=yb,yZ=pR,_Z=1,xZ=2;function bZ(e,t,r,n){var i=r.length,o=i,a=!n;if(e==null)return!o;for(e=Object(e);i--;){var s=r[i];if(a&&s[2]?s[1]!==e[s[0]]:!(s[0]in e))return!1}for(;++i<o;){s=r[i];var l=s[0],u=e[l],c=s[1];if(a&&s[2]){if(u===void 0&&!(l in e))return!1}else{var f=new gZ;if(n)var h=n(u,c,l,e,t,f);if(!(h===void 0?yZ(c,u,_Z|xZ,n,f):h))return!1}}return!0}var SZ=bZ,wZ=_i;function EZ(e){return e===e&&!wZ(e)}var mR=EZ,TZ=mR,CZ=cp;function PZ(e){for(var t=CZ(e),r=t.length;r--;){var n=t[r],i=e[n];t[r]=[n,i,TZ(i)]}return t}var AZ=PZ;function OZ(e,t){return function(r){return r==null?!1:r[e]===t&&(t!==void 0||e in Object(r))}}var vR=OZ,IZ=SZ,MZ=AZ,RZ=vR;function kZ(e){var t=MZ(e);return t.length==1&&t[0][2]?RZ(t[0][0],t[0][1]):function(r){return r===e||IZ(r,e,t)}}var LZ=kZ,FZ=Vc,DZ=Ba,NZ="[object Symbol]";function BZ(e){return typeof e=="symbol"||DZ(e)&&FZ(e)==NZ}var Op=BZ,jZ=zi,UZ=Op,$Z=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,GZ=/^\w*$/;function zZ(e,t){if(jZ(e))return!1;var r=typeof e;return r=="number"||r=="symbol"||r=="boolean"||e==null||UZ(e)?!0:GZ.test(e)||!$Z.test(e)||t!=null&&e in Object(t)}var Kb=zZ,gR=gb,VZ="Expected a function";function Zb(e,t){if(typeof e!="function"||t!=null&&typeof t!="function")throw new TypeError(VZ);var r=function(){var n=arguments,i=t?t.apply(this,n):n[0],o=r.cache;if(o.has(i))return o.get(i);var a=e.apply(this,n);return r.cache=o.set(i,a)||o,a};return r.cache=new(Zb.Cache||gR),r}Zb.Cache=gR;var HZ=Zb,WZ=HZ,XZ=500;function qZ(e){var t=WZ(e,function(n){return r.size===XZ&&r.clear(),n}),r=t.cache;return t}var YZ=qZ,KZ=YZ,ZZ=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,JZ=/\\(\\)?/g,QZ=KZ(function(e){var t=[];return e.charCodeAt(0)===46&&t.push(""),e.replace(ZZ,function(r,n,i,o){t.push(i?o.replace(JZ,"$1"):n||r)}),t}),eJ=QZ;function tJ(e,t){for(var r=-1,n=e==null?0:e.length,i=Array(n);++r<n;)i[r]=t(e[r],r,e);return i}var yR=tJ,PC=zc,rJ=yR,nJ=zi,iJ=Op,oJ=1/0,AC=PC?PC.prototype:void 0,OC=AC?AC.toString:void 0;function _R(e){if(typeof e=="string")return e;if(nJ(e))return rJ(e,_R)+"";if(iJ(e))return OC?OC.call(e):"";var t=e+"";return t=="0"&&1/e==-oJ?"-0":t}var aJ=_R,sJ=aJ;function lJ(e){return e==null?"":sJ(e)}var uJ=lJ,cJ=zi,fJ=Kb,hJ=eJ,dJ=uJ;function pJ(e,t){return cJ(e)?e:fJ(e,t)?[e]:hJ(dJ(e))}var Ip=pJ,mJ=Op,vJ=1/0;function gJ(e){if(typeof e=="string"||mJ(e))return e;var t=e+"";return t=="0"&&1/e==-vJ?"-0":t}var Zc=gJ,yJ=Ip,_J=Zc;function xJ(e,t){t=yJ(t,e);for(var r=0,n=t.length;e!=null&&r<n;)e=e[_J(t[r++])];return r&&r==n?e:void 0}var Jb=xJ,bJ=Jb;function SJ(e,t,r){var n=e==null?void 0:bJ(e,t);return n===void 0?r:n}var xR=SJ;const wJ=Sr(xR);function EJ(e,t){return e!=null&&t in Object(e)}var TJ=EJ,CJ=Ip,PJ=II,AJ=zi,OJ=bb,IJ=Sb,MJ=Zc;function RJ(e,t,r){t=CJ(t,e);for(var n=-1,i=t.length,o=!1;++n<i;){var a=MJ(t[n]);if(!(o=e!=null&&r(e,a)))break;e=e[a]}return o||++n!=i?o:(i=e==null?0:e.length,!!i&&IJ(i)&&OJ(a,i)&&(AJ(e)||PJ(e)))}var kJ=RJ,LJ=TJ,FJ=kJ;function DJ(e,t){return e!=null&&FJ(e,t,LJ)}var NJ=DJ,BJ=pR,jJ=xR,UJ=NJ,$J=Kb,GJ=mR,zJ=vR,VJ=Zc,HJ=1,WJ=2;function XJ(e,t){return $J(e)&&GJ(t)?zJ(VJ(e),t):function(r){var n=jJ(r,e);return n===void 0&&n===t?UJ(r,e):BJ(t,n,HJ|WJ)}}var qJ=XJ;function YJ(e){return e}var KJ=YJ;function ZJ(e){return function(t){return t==null?void 0:t[e]}}var JJ=ZJ,QJ=Jb;function eQ(e){return function(t){return QJ(t,e)}}var tQ=eQ,rQ=JJ,nQ=tQ,iQ=Kb,oQ=Zc;function aQ(e){return iQ(e)?rQ(oQ(e)):nQ(e)}var sQ=aQ,lQ=LZ,uQ=qJ,cQ=KJ,fQ=zi,hQ=sQ;function dQ(e){return typeof e=="function"?e:e==null?cQ:typeof e=="object"?fQ(e)?uQ(e[0],e[1]):lQ(e):hQ(e)}var bR=dQ,pQ="Expected a function";function mQ(e){if(typeof e!="function")throw new TypeError(pQ);return function(){var t=arguments;switch(t.length){case 0:return!e.call(this);case 1:return!e.call(this,t[0]);case 2:return!e.call(this,t[0],t[1]);case 3:return!e.call(this,t[0],t[1],t[2])}return!e.apply(this,t)}}var vQ=mQ,gQ=_b,yQ=Ip,_Q=bb,IC=_i,xQ=Zc;function bQ(e,t,r,n){if(!IC(e))return e;t=yQ(t,e);for(var i=-1,o=t.length,a=o-1,s=e;s!=null&&++i<o;){var l=xQ(t[i]),u=r;if(l==="__proto__"||l==="constructor"||l==="prototype")return e;if(i!=a){var c=s[l];u=n?n(c,l,s):void 0,u===void 0&&(u=IC(c)?c:_Q(t[i+1])?[]:{})}gQ(s,l,u),s=s[l]}return e}var SQ=bQ,wQ=Jb,EQ=SQ,TQ=Ip;function CQ(e,t,r){for(var n=-1,i=t.length,o={};++n<i;){var a=t[n],s=wQ(e,a);r(s,a)&&EQ(o,TQ(a,e),s)}return o}var PQ=CQ,AQ=yR,OQ=bR,IQ=PQ,MQ=$I;function RQ(e,t){if(e==null)return{};var r=AQ(MQ(e),function(n){return[n]});return t=OQ(t),IQ(e,r,function(n,i){return t(n,i[0])})}var kQ=RQ,LQ=bR,FQ=vQ,DQ=kQ;function NQ(e,t){return DQ(e,FQ(LQ(t)))}var BQ=NQ;const Jv=Sr(BQ);function jQ(e){return e===void 0}var UQ=jQ;const wi=Sr(UQ);function $Q(e){var t=this.constructor;return this.then(function(r){return t.resolve(e()).then(function(){return r})},function(r){return t.resolve(e()).then(function(){return t.reject(r)})})}function GQ(e){var t=this;return new t(function(r,n){if(!(e&&typeof e.length<"u"))return n(new TypeError(typeof e+" "+e+" is not iterable(cannot read property Symbol(Symbol.iterator))"));var i=Array.prototype.slice.call(e);if(i.length===0)return r([]);var o=i.length;function a(l,u){if(u&&(typeof u=="object"||typeof u=="function")){var c=u.then;if(typeof c=="function"){c.call(u,function(f){a(l,f)},function(f){i[l]={status:"rejected",reason:f},--o===0&&r(i)});return}}i[l]={status:"fulfilled",value:u},--o===0&&r(i)}for(var s=0;s<i.length;s++)a(s,i[s])})}function SR(e,t){this.name="AggregateError",this.errors=e,this.message=t||""}SR.prototype=Error.prototype;function zQ(e){var t=this;return new t(function(r,n){if(!(e&&typeof e.length<"u"))return n(new TypeError("Promise.any accepts an array"));var i=Array.prototype.slice.call(e);if(i.length===0)return n();for(var o=[],a=0;a<i.length;a++)try{t.resolve(i[a]).then(r).catch(function(s){o.push(s),o.length===i.length&&n(new SR(o,"All promises were rejected"))})}catch(s){n(s)}})}var VQ=setTimeout;function wR(e){return!!(e&&typeof e.length<"u")}function HQ(){}function WQ(e,t){return function(){e.apply(t,arguments)}}function Et(e){if(!(this instanceof Et))throw new TypeError("Promises must be constructed via new");if(typeof e!="function")throw new TypeError("not a function");this._state=0,this._handled=!1,this._value=void 0,this._deferreds=[],TR(e,this)}function ER(e,t){for(;e._state===3;)e=e._value;if(e._state===0){e._deferreds.push(t);return}e._handled=!0,Et._immediateFn(function(){var r=e._state===1?t.onFulfilled:t.onRejected;if(r===null){(e._state===1?m_:dc)(t.promise,e._value);return}var n;try{n=r(e._value)}catch(i){dc(t.promise,i);return}m_(t.promise,n)})}function m_(e,t){try{if(t===e)throw new TypeError("A promise cannot be resolved with itself.");if(t&&(typeof t=="object"||typeof t=="function")){var r=t.then;if(t instanceof Et){e._state=3,e._value=t,v_(e);return}else if(typeof r=="function"){TR(WQ(r,t),e);return}}e._state=1,e._value=t,v_(e)}catch(n){dc(e,n)}}function dc(e,t){e._state=2,e._value=t,v_(e)}function v_(e){e._state===2&&e._deferreds.length===0&&Et._immediateFn(function(){e._handled||Et._unhandledRejectionFn(e._value)});for(var t=0,r=e._deferreds.length;t<r;t++)ER(e,e._deferreds[t]);e._deferreds=null}function XQ(e,t,r){this.onFulfilled=typeof e=="function"?e:null,this.onRejected=typeof t=="function"?t:null,this.promise=r}function TR(e,t){var r=!1;try{e(function(n){r||(r=!0,m_(t,n))},function(n){r||(r=!0,dc(t,n))})}catch(n){if(r)return;r=!0,dc(t,n)}}Et.prototype.catch=function(e){return this.then(null,e)};Et.prototype.then=function(e,t){var r=new this.constructor(HQ);return ER(this,new XQ(e,t,r)),r};Et.prototype.finally=$Q;Et.all=function(e){return new Et(function(t,r){if(!wR(e))return r(new TypeError("Promise.all accepts an array"));var n=Array.prototype.slice.call(e);if(n.length===0)return t([]);var i=n.length;function o(s,l){try{if(l&&(typeof l=="object"||typeof l=="function")){var u=l.then;if(typeof u=="function"){u.call(l,function(c){o(s,c)},r);return}}n[s]=l,--i===0&&t(n)}catch(c){r(c)}}for(var a=0;a<n.length;a++)o(a,n[a])})};Et.any=zQ;Et.allSettled=GQ;Et.resolve=function(e){return e&&typeof e=="object"&&e.constructor===Et?e:new Et(function(t){t(e)})};Et.reject=function(e){return new Et(function(t,r){r(e)})};Et.race=function(e){return new Et(function(t,r){if(!wR(e))return r(new TypeError("Promise.race accepts an array"));for(var n=0,i=e.length;n<i;n++)Et.resolve(e[n]).then(t,r)})};Et._immediateFn=typeof setImmediate=="function"&&function(e){setImmediate(e)}||function(e){VQ(e,0)};Et._unhandledRejectionFn=function(t){typeof console<"u"&&console&&console.warn("Possible Unhandled Promise Rejection:",t)};/*!
 * @pixi/polyfill - v6.5.10
 * Compiled Thu, 06 Jul 2023 15:25:11 UTC
 *
 * @pixi/polyfill is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */typeof globalThis>"u"&&(typeof self<"u"?self.globalThis=self:typeof global<"u"&&(global.globalThis=global));globalThis.Promise||(globalThis.Promise=Et);Object.assign||(Object.assign=LN);var qQ=16;Date.now&&Date.prototype.getTime||(Date.now=function(){return new Date().getTime()});if(!(globalThis.performance&&globalThis.performance.now)){var YQ=Date.now();globalThis.performance||(globalThis.performance={}),globalThis.performance.now=function(){return Date.now()-YQ}}var Qv=Date.now(),MC=["ms","moz","webkit","o"];for(var eg=0;eg<MC.length&&!globalThis.requestAnimationFrame;++eg){var tg=MC[eg];globalThis.requestAnimationFrame=globalThis[tg+"RequestAnimationFrame"],globalThis.cancelAnimationFrame=globalThis[tg+"CancelAnimationFrame"]||globalThis[tg+"CancelRequestAnimationFrame"]}globalThis.requestAnimationFrame||(globalThis.requestAnimationFrame=function(e){if(typeof e!="function")throw new TypeError(e+"is not a function");var t=Date.now(),r=qQ+Qv-t;return r<0&&(r=0),Qv=t,globalThis.self.setTimeout(function(){Qv=Date.now(),e(performance.now())},r)});globalThis.cancelAnimationFrame||(globalThis.cancelAnimationFrame=function(e){return clearTimeout(e)});Math.sign||(Math.sign=function(t){return t=Number(t),t===0||isNaN(t)?t:t>0?1:-1});Number.isInteger||(Number.isInteger=function(t){return typeof t=="number"&&isFinite(t)&&Math.floor(t)===t});globalThis.ArrayBuffer||(globalThis.ArrayBuffer=Array);globalThis.Float32Array||(globalThis.Float32Array=Array);globalThis.Uint32Array||(globalThis.Uint32Array=Array);globalThis.Uint16Array||(globalThis.Uint16Array=Array);globalThis.Uint8Array||(globalThis.Uint8Array=Array);globalThis.Int32Array||(globalThis.Int32Array=Array);/*!
 * @pixi/constants - v6.5.10
 * Compiled Thu, 06 Jul 2023 15:25:11 UTC
 *
 * @pixi/constants is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */var pi;(function(e){e[e.WEBGL_LEGACY=0]="WEBGL_LEGACY",e[e.WEBGL=1]="WEBGL",e[e.WEBGL2=2]="WEBGL2"})(pi||(pi={}));var qs;(function(e){e[e.UNKNOWN=0]="UNKNOWN",e[e.WEBGL=1]="WEBGL",e[e.CANVAS=2]="CANVAS"})(qs||(qs={}));var pc;(function(e){e[e.COLOR=16384]="COLOR",e[e.DEPTH=256]="DEPTH",e[e.STENCIL=1024]="STENCIL"})(pc||(pc={}));var ce;(function(e){e[e.NORMAL=0]="NORMAL",e[e.ADD=1]="ADD",e[e.MULTIPLY=2]="MULTIPLY",e[e.SCREEN=3]="SCREEN",e[e.OVERLAY=4]="OVERLAY",e[e.DARKEN=5]="DARKEN",e[e.LIGHTEN=6]="LIGHTEN",e[e.COLOR_DODGE=7]="COLOR_DODGE",e[e.COLOR_BURN=8]="COLOR_BURN",e[e.HARD_LIGHT=9]="HARD_LIGHT",e[e.SOFT_LIGHT=10]="SOFT_LIGHT",e[e.DIFFERENCE=11]="DIFFERENCE",e[e.EXCLUSION=12]="EXCLUSION",e[e.HUE=13]="HUE",e[e.SATURATION=14]="SATURATION",e[e.COLOR=15]="COLOR",e[e.LUMINOSITY=16]="LUMINOSITY",e[e.NORMAL_NPM=17]="NORMAL_NPM",e[e.ADD_NPM=18]="ADD_NPM",e[e.SCREEN_NPM=19]="SCREEN_NPM",e[e.NONE=20]="NONE",e[e.SRC_OVER=0]="SRC_OVER",e[e.SRC_IN=21]="SRC_IN",e[e.SRC_OUT=22]="SRC_OUT",e[e.SRC_ATOP=23]="SRC_ATOP",e[e.DST_OVER=24]="DST_OVER",e[e.DST_IN=25]="DST_IN",e[e.DST_OUT=26]="DST_OUT",e[e.DST_ATOP=27]="DST_ATOP",e[e.ERASE=26]="ERASE",e[e.SUBTRACT=28]="SUBTRACT",e[e.XOR=29]="XOR"})(ce||(ce={}));var pn;(function(e){e[e.POINTS=0]="POINTS",e[e.LINES=1]="LINES",e[e.LINE_LOOP=2]="LINE_LOOP",e[e.LINE_STRIP=3]="LINE_STRIP",e[e.TRIANGLES=4]="TRIANGLES",e[e.TRIANGLE_STRIP=5]="TRIANGLE_STRIP",e[e.TRIANGLE_FAN=6]="TRIANGLE_FAN"})(pn||(pn={}));var Q;(function(e){e[e.RGBA=6408]="RGBA",e[e.RGB=6407]="RGB",e[e.RG=33319]="RG",e[e.RED=6403]="RED",e[e.RGBA_INTEGER=36249]="RGBA_INTEGER",e[e.RGB_INTEGER=36248]="RGB_INTEGER",e[e.RG_INTEGER=33320]="RG_INTEGER",e[e.RED_INTEGER=36244]="RED_INTEGER",e[e.ALPHA=6406]="ALPHA",e[e.LUMINANCE=6409]="LUMINANCE",e[e.LUMINANCE_ALPHA=6410]="LUMINANCE_ALPHA",e[e.DEPTH_COMPONENT=6402]="DEPTH_COMPONENT",e[e.DEPTH_STENCIL=34041]="DEPTH_STENCIL"})(Q||(Q={}));var So;(function(e){e[e.TEXTURE_2D=3553]="TEXTURE_2D",e[e.TEXTURE_CUBE_MAP=34067]="TEXTURE_CUBE_MAP",e[e.TEXTURE_2D_ARRAY=35866]="TEXTURE_2D_ARRAY",e[e.TEXTURE_CUBE_MAP_POSITIVE_X=34069]="TEXTURE_CUBE_MAP_POSITIVE_X",e[e.TEXTURE_CUBE_MAP_NEGATIVE_X=34070]="TEXTURE_CUBE_MAP_NEGATIVE_X",e[e.TEXTURE_CUBE_MAP_POSITIVE_Y=34071]="TEXTURE_CUBE_MAP_POSITIVE_Y",e[e.TEXTURE_CUBE_MAP_NEGATIVE_Y=34072]="TEXTURE_CUBE_MAP_NEGATIVE_Y",e[e.TEXTURE_CUBE_MAP_POSITIVE_Z=34073]="TEXTURE_CUBE_MAP_POSITIVE_Z",e[e.TEXTURE_CUBE_MAP_NEGATIVE_Z=34074]="TEXTURE_CUBE_MAP_NEGATIVE_Z"})(So||(So={}));var fe;(function(e){e[e.UNSIGNED_BYTE=5121]="UNSIGNED_BYTE",e[e.UNSIGNED_SHORT=5123]="UNSIGNED_SHORT",e[e.UNSIGNED_SHORT_5_6_5=33635]="UNSIGNED_SHORT_5_6_5",e[e.UNSIGNED_SHORT_4_4_4_4=32819]="UNSIGNED_SHORT_4_4_4_4",e[e.UNSIGNED_SHORT_5_5_5_1=32820]="UNSIGNED_SHORT_5_5_5_1",e[e.UNSIGNED_INT=5125]="UNSIGNED_INT",e[e.UNSIGNED_INT_10F_11F_11F_REV=35899]="UNSIGNED_INT_10F_11F_11F_REV",e[e.UNSIGNED_INT_2_10_10_10_REV=33640]="UNSIGNED_INT_2_10_10_10_REV",e[e.UNSIGNED_INT_24_8=34042]="UNSIGNED_INT_24_8",e[e.UNSIGNED_INT_5_9_9_9_REV=35902]="UNSIGNED_INT_5_9_9_9_REV",e[e.BYTE=5120]="BYTE",e[e.SHORT=5122]="SHORT",e[e.INT=5124]="INT",e[e.FLOAT=5126]="FLOAT",e[e.FLOAT_32_UNSIGNED_INT_24_8_REV=36269]="FLOAT_32_UNSIGNED_INT_24_8_REV",e[e.HALF_FLOAT=36193]="HALF_FLOAT"})(fe||(fe={}));var mc;(function(e){e[e.FLOAT=0]="FLOAT",e[e.INT=1]="INT",e[e.UINT=2]="UINT"})(mc||(mc={}));var Br;(function(e){e[e.NEAREST=0]="NEAREST",e[e.LINEAR=1]="LINEAR"})(Br||(Br={}));var Ln;(function(e){e[e.CLAMP=33071]="CLAMP",e[e.REPEAT=10497]="REPEAT",e[e.MIRRORED_REPEAT=33648]="MIRRORED_REPEAT"})(Ln||(Ln={}));var zr;(function(e){e[e.OFF=0]="OFF",e[e.POW2=1]="POW2",e[e.ON=2]="ON",e[e.ON_MANUAL=3]="ON_MANUAL"})(zr||(zr={}));var bn;(function(e){e[e.NPM=0]="NPM",e[e.UNPACK=1]="UNPACK",e[e.PMA=2]="PMA",e[e.NO_PREMULTIPLIED_ALPHA=0]="NO_PREMULTIPLIED_ALPHA",e[e.PREMULTIPLY_ON_UPLOAD=1]="PREMULTIPLY_ON_UPLOAD",e[e.PREMULTIPLY_ALPHA=2]="PREMULTIPLY_ALPHA",e[e.PREMULTIPLIED_ALPHA=2]="PREMULTIPLIED_ALPHA"})(bn||(bn={}));var un;(function(e){e[e.NO=0]="NO",e[e.YES=1]="YES",e[e.AUTO=2]="AUTO",e[e.BLEND=0]="BLEND",e[e.CLEAR=1]="CLEAR",e[e.BLIT=2]="BLIT"})(un||(un={}));var vc;(function(e){e[e.AUTO=0]="AUTO",e[e.MANUAL=1]="MANUAL"})(vc||(vc={}));var jr;(function(e){e.LOW="lowp",e.MEDIUM="mediump",e.HIGH="highp"})(jr||(jr={}));var Mt;(function(e){e[e.NONE=0]="NONE",e[e.SCISSOR=1]="SCISSOR",e[e.STENCIL=2]="STENCIL",e[e.SPRITE=3]="SPRITE",e[e.COLOR=4]="COLOR"})(Mt||(Mt={}));var g_;(function(e){e[e.RED=1]="RED",e[e.GREEN=2]="GREEN",e[e.BLUE=4]="BLUE",e[e.ALPHA=8]="ALPHA"})(g_||(g_={}));var ft;(function(e){e[e.NONE=0]="NONE",e[e.LOW=2]="LOW",e[e.MEDIUM=4]="MEDIUM",e[e.HIGH=8]="HIGH"})(ft||(ft={}));var Fn;(function(e){e[e.ELEMENT_ARRAY_BUFFER=34963]="ELEMENT_ARRAY_BUFFER",e[e.ARRAY_BUFFER=34962]="ARRAY_BUFFER",e[e.UNIFORM_BUFFER=35345]="UNIFORM_BUFFER"})(Fn||(Fn={}));/*!
 * @pixi/settings - v6.5.10
 * Compiled Thu, 06 Jul 2023 15:25:11 UTC
 *
 * @pixi/settings is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */var CR={createCanvas:function(e,t){var r=document.createElement("canvas");return r.width=e,r.height=t,r},getWebGLRenderingContext:function(){return WebGLRenderingContext},getNavigator:function(){return navigator},getBaseUrl:function(){var e;return(e=document.baseURI)!==null&&e!==void 0?e:window.location.href},fetch:function(e,t){return fetch(e,t)}},rg=/iPhone/i,RC=/iPod/i,kC=/iPad/i,LC=/\biOS-universal(?:.+)Mac\b/i,ng=/\bAndroid(?:.+)Mobile\b/i,FC=/Android/i,Za=/(?:SD4930UR|\bSilk(?:.+)Mobile\b)/i,Ef=/Silk/i,Ei=/Windows Phone/i,DC=/\bWindows(?:.+)ARM\b/i,NC=/BlackBerry/i,BC=/BB10/i,jC=/Opera Mini/i,UC=/\b(CriOS|Chrome)(?:.+)Mobile/i,$C=/Mobile(?:.+)Firefox\b/i,GC=function(e){return typeof e<"u"&&e.platform==="MacIntel"&&typeof e.maxTouchPoints=="number"&&e.maxTouchPoints>1&&typeof MSStream>"u"};function KQ(e){return function(t){return t.test(e)}}function ZQ(e){var t={userAgent:"",platform:"",maxTouchPoints:0};!e&&typeof navigator<"u"?t={userAgent:navigator.userAgent,platform:navigator.platform,maxTouchPoints:navigator.maxTouchPoints||0}:typeof e=="string"?t.userAgent=e:e&&e.userAgent&&(t={userAgent:e.userAgent,platform:e.platform,maxTouchPoints:e.maxTouchPoints||0});var r=t.userAgent,n=r.split("[FBAN");typeof n[1]<"u"&&(r=n[0]),n=r.split("Twitter"),typeof n[1]<"u"&&(r=n[0]);var i=KQ(r),o={apple:{phone:i(rg)&&!i(Ei),ipod:i(RC),tablet:!i(rg)&&(i(kC)||GC(t))&&!i(Ei),universal:i(LC),device:(i(rg)||i(RC)||i(kC)||i(LC)||GC(t))&&!i(Ei)},amazon:{phone:i(Za),tablet:!i(Za)&&i(Ef),device:i(Za)||i(Ef)},android:{phone:!i(Ei)&&i(Za)||!i(Ei)&&i(ng),tablet:!i(Ei)&&!i(Za)&&!i(ng)&&(i(Ef)||i(FC)),device:!i(Ei)&&(i(Za)||i(Ef)||i(ng)||i(FC))||i(/\bokhttp\b/i)},windows:{phone:i(Ei),tablet:i(DC),device:i(Ei)||i(DC)},other:{blackberry:i(NC),blackberry10:i(BC),opera:i(jC),firefox:i($C),chrome:i(UC),device:i(NC)||i(BC)||i(jC)||i($C)||i(UC)},any:!1,phone:!1,tablet:!1};return o.any=o.apple.device||o.android.device||o.windows.device||o.other.device,o.phone=o.apple.phone||o.android.phone||o.windows.phone,o.tablet=o.apple.tablet||o.android.tablet||o.windows.tablet,o}var mn=ZQ(globalThis.navigator);function JQ(){return!mn.apple.device}function QQ(e){var t=!0;if(mn.tablet||mn.phone){if(mn.apple.device){var r=navigator.userAgent.match(/OS (\d+)_(\d+)?/);if(r){var n=parseInt(r[1],10);n<11&&(t=!1)}}if(mn.android.device){var r=navigator.userAgent.match(/Android\s([0-9.]*)/);if(r){var n=parseInt(r[1],10);n<7&&(t=!1)}}}return t?e:4}var ne={ADAPTER:CR,MIPMAP_TEXTURES:zr.POW2,ANISOTROPIC_LEVEL:0,RESOLUTION:1,FILTER_RESOLUTION:1,FILTER_MULTISAMPLE:ft.NONE,SPRITE_MAX_TEXTURES:QQ(32),SPRITE_BATCH_SIZE:4096,RENDER_OPTIONS:{view:null,width:800,height:600,autoDensity:!1,backgroundColor:0,backgroundAlpha:1,useContextAlpha:!0,clearBeforeRender:!0,antialias:!1,preserveDrawingBuffer:!1},GC_MODE:vc.AUTO,GC_MAX_IDLE:60*60,GC_MAX_CHECK_COUNT:60*10,WRAP_MODE:Ln.CLAMP,SCALE_MODE:Br.LINEAR,PRECISION_VERTEX:jr.HIGH,PRECISION_FRAGMENT:mn.apple.device?jr.HIGH:jr.MEDIUM,CAN_UPLOAD_SAME_BUFFER:JQ(),CREATE_IMAGE_BITMAP:!1,ROUND_PIXELS:!1},PR={exports:{}};(function(e){var t=Object.prototype.hasOwnProperty,r="~";function n(){}Object.create&&(n.prototype=Object.create(null),new n().__proto__||(r=!1));function i(l,u,c){this.fn=l,this.context=u,this.once=c||!1}function o(l,u,c,f,h){if(typeof c!="function")throw new TypeError("The listener must be a function");var d=new i(c,f||l,h),m=r?r+u:u;return l._events[m]?l._events[m].fn?l._events[m]=[l._events[m],d]:l._events[m].push(d):(l._events[m]=d,l._eventsCount++),l}function a(l,u){--l._eventsCount===0?l._events=new n:delete l._events[u]}function s(){this._events=new n,this._eventsCount=0}s.prototype.eventNames=function(){var u=[],c,f;if(this._eventsCount===0)return u;for(f in c=this._events)t.call(c,f)&&u.push(r?f.slice(1):f);return Object.getOwnPropertySymbols?u.concat(Object.getOwnPropertySymbols(c)):u},s.prototype.listeners=function(u){var c=r?r+u:u,f=this._events[c];if(!f)return[];if(f.fn)return[f.fn];for(var h=0,d=f.length,m=new Array(d);h<d;h++)m[h]=f[h].fn;return m},s.prototype.listenerCount=function(u){var c=r?r+u:u,f=this._events[c];return f?f.fn?1:f.length:0},s.prototype.emit=function(u,c,f,h,d,m){var g=r?r+u:u;if(!this._events[g])return!1;var p=this._events[g],v=arguments.length,y,_;if(p.fn){switch(p.once&&this.removeListener(u,p.fn,void 0,!0),v){case 1:return p.fn.call(p.context),!0;case 2:return p.fn.call(p.context,c),!0;case 3:return p.fn.call(p.context,c,f),!0;case 4:return p.fn.call(p.context,c,f,h),!0;case 5:return p.fn.call(p.context,c,f,h,d),!0;case 6:return p.fn.call(p.context,c,f,h,d,m),!0}for(_=1,y=new Array(v-1);_<v;_++)y[_-1]=arguments[_];p.fn.apply(p.context,y)}else{var x=p.length,b;for(_=0;_<x;_++)switch(p[_].once&&this.removeListener(u,p[_].fn,void 0,!0),v){case 1:p[_].fn.call(p[_].context);break;case 2:p[_].fn.call(p[_].context,c);break;case 3:p[_].fn.call(p[_].context,c,f);break;case 4:p[_].fn.call(p[_].context,c,f,h);break;default:if(!y)for(b=1,y=new Array(v-1);b<v;b++)y[b-1]=arguments[b];p[_].fn.apply(p[_].context,y)}}return!0},s.prototype.on=function(u,c,f){return o(this,u,c,f,!1)},s.prototype.once=function(u,c,f){return o(this,u,c,f,!0)},s.prototype.removeListener=function(u,c,f,h){var d=r?r+u:u;if(!this._events[d])return this;if(!c)return a(this,d),this;var m=this._events[d];if(m.fn)m.fn===c&&(!h||m.once)&&(!f||m.context===f)&&a(this,d);else{for(var g=0,p=[],v=m.length;g<v;g++)(m[g].fn!==c||h&&!m[g].once||f&&m[g].context!==f)&&p.push(m[g]);p.length?this._events[d]=p.length===1?p[0]:p:a(this,d)}return this},s.prototype.removeAllListeners=function(u){var c;return u?(c=r?r+u:u,this._events[c]&&a(this,c)):(this._events=new n,this._eventsCount=0),this},s.prototype.off=s.prototype.removeListener,s.prototype.addListener=s.prototype.on,s.prefixed=r,s.EventEmitter=s,e.exports=s})(PR);var eee=PR.exports;const Vi=Sr(eee);var Qb={exports:{}};Qb.exports=Mp;Qb.exports.default=Mp;function Mp(e,t,r){r=r||2;var n=t&&t.length,i=n?t[0]*r:e.length,o=AR(e,0,i,r,!0),a=[];if(!o||o.next===o.prev)return a;var s,l,u,c,f,h,d;if(n&&(o=oee(e,t,o,r)),e.length>80*r){s=u=e[0],l=c=e[1];for(var m=r;m<i;m+=r)f=e[m],h=e[m+1],f<s&&(s=f),h<l&&(l=h),f>u&&(u=f),h>c&&(c=h);d=Math.max(u-s,c-l),d=d!==0?32767/d:0}return gc(o,a,r,s,l,d,0),a}function AR(e,t,r,n,i){var o,a;if(i===x_(e,t,r,n)>0)for(o=t;o<r;o+=n)a=zC(o,e[o],e[o+1],a);else for(o=r-n;o>=t;o-=n)a=zC(o,e[o],e[o+1],a);return a&&Rp(a,a.next)&&(_c(a),a=a.next),a}function Oa(e,t){if(!e)return e;t||(t=e);var r=e,n;do if(n=!1,!r.steiner&&(Rp(r,r.next)||St(r.prev,r,r.next)===0)){if(_c(r),r=t=r.prev,r===r.next)break;n=!0}else r=r.next;while(n||r!==t);return t}function gc(e,t,r,n,i,o,a){if(e){!a&&o&&cee(e,n,i,o);for(var s=e,l,u;e.prev!==e.next;){if(l=e.prev,u=e.next,o?ree(e,n,i,o):tee(e)){t.push(l.i/r|0),t.push(e.i/r|0),t.push(u.i/r|0),_c(e),e=u.next,s=u.next;continue}if(e=u,e===s){a?a===1?(e=nee(Oa(e),t,r),gc(e,t,r,n,i,o,2)):a===2&&iee(e,t,r,n,i,o):gc(Oa(e),t,r,n,i,o,1);break}}}}function tee(e){var t=e.prev,r=e,n=e.next;if(St(t,r,n)>=0)return!1;for(var i=t.x,o=r.x,a=n.x,s=t.y,l=r.y,u=n.y,c=i<o?i<a?i:a:o<a?o:a,f=s<l?s<u?s:u:l<u?l:u,h=i>o?i>a?i:a:o>a?o:a,d=s>l?s>u?s:u:l>u?l:u,m=n.next;m!==t;){if(m.x>=c&&m.x<=h&&m.y>=f&&m.y<=d&&gs(i,s,o,l,a,u,m.x,m.y)&&St(m.prev,m,m.next)>=0)return!1;m=m.next}return!0}function ree(e,t,r,n){var i=e.prev,o=e,a=e.next;if(St(i,o,a)>=0)return!1;for(var s=i.x,l=o.x,u=a.x,c=i.y,f=o.y,h=a.y,d=s<l?s<u?s:u:l<u?l:u,m=c<f?c<h?c:h:f<h?f:h,g=s>l?s>u?s:u:l>u?l:u,p=c>f?c>h?c:h:f>h?f:h,v=y_(d,m,t,r,n),y=y_(g,p,t,r,n),_=e.prevZ,x=e.nextZ;_&&_.z>=v&&x&&x.z<=y;){if(_.x>=d&&_.x<=g&&_.y>=m&&_.y<=p&&_!==i&&_!==a&&gs(s,c,l,f,u,h,_.x,_.y)&&St(_.prev,_,_.next)>=0||(_=_.prevZ,x.x>=d&&x.x<=g&&x.y>=m&&x.y<=p&&x!==i&&x!==a&&gs(s,c,l,f,u,h,x.x,x.y)&&St(x.prev,x,x.next)>=0))return!1;x=x.nextZ}for(;_&&_.z>=v;){if(_.x>=d&&_.x<=g&&_.y>=m&&_.y<=p&&_!==i&&_!==a&&gs(s,c,l,f,u,h,_.x,_.y)&&St(_.prev,_,_.next)>=0)return!1;_=_.prevZ}for(;x&&x.z<=y;){if(x.x>=d&&x.x<=g&&x.y>=m&&x.y<=p&&x!==i&&x!==a&&gs(s,c,l,f,u,h,x.x,x.y)&&St(x.prev,x,x.next)>=0)return!1;x=x.nextZ}return!0}function nee(e,t,r){var n=e;do{var i=n.prev,o=n.next.next;!Rp(i,o)&&OR(i,n,n.next,o)&&yc(i,o)&&yc(o,i)&&(t.push(i.i/r|0),t.push(n.i/r|0),t.push(o.i/r|0),_c(n),_c(n.next),n=e=o),n=n.next}while(n!==e);return Oa(n)}function iee(e,t,r,n,i,o){var a=e;do{for(var s=a.next.next;s!==a.prev;){if(a.i!==s.i&&dee(a,s)){var l=IR(a,s);a=Oa(a,a.next),l=Oa(l,l.next),gc(a,t,r,n,i,o,0),gc(l,t,r,n,i,o,0);return}s=s.next}a=a.next}while(a!==e)}function oee(e,t,r,n){var i=[],o,a,s,l,u;for(o=0,a=t.length;o<a;o++)s=t[o]*n,l=o<a-1?t[o+1]*n:e.length,u=AR(e,s,l,n,!1),u===u.next&&(u.steiner=!0),i.push(hee(u));for(i.sort(aee),o=0;o<i.length;o++)r=see(i[o],r);return r}function aee(e,t){return e.x-t.x}function see(e,t){var r=lee(e,t);if(!r)return t;var n=IR(r,e);return Oa(n,n.next),Oa(r,r.next)}function lee(e,t){var r=t,n=e.x,i=e.y,o=-1/0,a;do{if(i<=r.y&&i>=r.next.y&&r.next.y!==r.y){var s=r.x+(i-r.y)*(r.next.x-r.x)/(r.next.y-r.y);if(s<=n&&s>o&&(o=s,a=r.x<r.next.x?r:r.next,s===n))return a}r=r.next}while(r!==t);if(!a)return null;var l=a,u=a.x,c=a.y,f=1/0,h;r=a;do n>=r.x&&r.x>=u&&n!==r.x&&gs(i<c?n:o,i,u,c,i<c?o:n,i,r.x,r.y)&&(h=Math.abs(i-r.y)/(n-r.x),yc(r,e)&&(h<f||h===f&&(r.x>a.x||r.x===a.x&&uee(a,r)))&&(a=r,f=h)),r=r.next;while(r!==l);return a}function uee(e,t){return St(e.prev,e,t.prev)<0&&St(t.next,e,e.next)<0}function cee(e,t,r,n){var i=e;do i.z===0&&(i.z=y_(i.x,i.y,t,r,n)),i.prevZ=i.prev,i.nextZ=i.next,i=i.next;while(i!==e);i.prevZ.nextZ=null,i.prevZ=null,fee(i)}function fee(e){var t,r,n,i,o,a,s,l,u=1;do{for(r=e,e=null,o=null,a=0;r;){for(a++,n=r,s=0,t=0;t<u&&(s++,n=n.nextZ,!!n);t++);for(l=u;s>0||l>0&&n;)s!==0&&(l===0||!n||r.z<=n.z)?(i=r,r=r.nextZ,s--):(i=n,n=n.nextZ,l--),o?o.nextZ=i:e=i,i.prevZ=o,o=i;r=n}o.nextZ=null,u*=2}while(a>1);return e}function y_(e,t,r,n,i){return e=(e-r)*i|0,t=(t-n)*i|0,e=(e|e<<8)&16711935,e=(e|e<<4)&252645135,e=(e|e<<2)&858993459,e=(e|e<<1)&1431655765,t=(t|t<<8)&16711935,t=(t|t<<4)&252645135,t=(t|t<<2)&858993459,t=(t|t<<1)&1431655765,e|t<<1}function hee(e){var t=e,r=e;do(t.x<r.x||t.x===r.x&&t.y<r.y)&&(r=t),t=t.next;while(t!==e);return r}function gs(e,t,r,n,i,o,a,s){return(i-a)*(t-s)>=(e-a)*(o-s)&&(e-a)*(n-s)>=(r-a)*(t-s)&&(r-a)*(o-s)>=(i-a)*(n-s)}function dee(e,t){return e.next.i!==t.i&&e.prev.i!==t.i&&!pee(e,t)&&(yc(e,t)&&yc(t,e)&&mee(e,t)&&(St(e.prev,e,t.prev)||St(e,t.prev,t))||Rp(e,t)&&St(e.prev,e,e.next)>0&&St(t.prev,t,t.next)>0)}function St(e,t,r){return(t.y-e.y)*(r.x-t.x)-(t.x-e.x)*(r.y-t.y)}function Rp(e,t){return e.x===t.x&&e.y===t.y}function OR(e,t,r,n){var i=Cf(St(e,t,r)),o=Cf(St(e,t,n)),a=Cf(St(r,n,e)),s=Cf(St(r,n,t));return!!(i!==o&&a!==s||i===0&&Tf(e,r,t)||o===0&&Tf(e,n,t)||a===0&&Tf(r,e,n)||s===0&&Tf(r,t,n))}function Tf(e,t,r){return t.x<=Math.max(e.x,r.x)&&t.x>=Math.min(e.x,r.x)&&t.y<=Math.max(e.y,r.y)&&t.y>=Math.min(e.y,r.y)}function Cf(e){return e>0?1:e<0?-1:0}function pee(e,t){var r=e;do{if(r.i!==e.i&&r.next.i!==e.i&&r.i!==t.i&&r.next.i!==t.i&&OR(r,r.next,e,t))return!0;r=r.next}while(r!==e);return!1}function yc(e,t){return St(e.prev,e,e.next)<0?St(e,t,e.next)>=0&&St(e,e.prev,t)>=0:St(e,t,e.prev)<0||St(e,e.next,t)<0}function mee(e,t){var r=e,n=!1,i=(e.x+t.x)/2,o=(e.y+t.y)/2;do r.y>o!=r.next.y>o&&r.next.y!==r.y&&i<(r.next.x-r.x)*(o-r.y)/(r.next.y-r.y)+r.x&&(n=!n),r=r.next;while(r!==e);return n}function IR(e,t){var r=new __(e.i,e.x,e.y),n=new __(t.i,t.x,t.y),i=e.next,o=t.prev;return e.next=t,t.prev=e,r.next=i,i.prev=r,n.next=r,r.prev=n,o.next=n,n.prev=o,n}function zC(e,t,r,n){var i=new __(e,t,r);return n?(i.next=n.next,i.prev=n,n.next.prev=i,n.next=i):(i.prev=i,i.next=i),i}function _c(e){e.next.prev=e.prev,e.prev.next=e.next,e.prevZ&&(e.prevZ.nextZ=e.nextZ),e.nextZ&&(e.nextZ.prevZ=e.prevZ)}function __(e,t,r){this.i=e,this.x=t,this.y=r,this.prev=null,this.next=null,this.z=0,this.prevZ=null,this.nextZ=null,this.steiner=!1}Mp.deviation=function(e,t,r,n){var i=t&&t.length,o=i?t[0]*r:e.length,a=Math.abs(x_(e,0,o,r));if(i)for(var s=0,l=t.length;s<l;s++){var u=t[s]*r,c=s<l-1?t[s+1]*r:e.length;a-=Math.abs(x_(e,u,c,r))}var f=0;for(s=0;s<n.length;s+=3){var h=n[s]*r,d=n[s+1]*r,m=n[s+2]*r;f+=Math.abs((e[h]-e[m])*(e[d+1]-e[h+1])-(e[h]-e[d])*(e[m+1]-e[h+1]))}return a===0&&f===0?0:Math.abs((f-a)/a)};function x_(e,t,r,n){for(var i=0,o=t,a=r-n;o<r;o+=n)i+=(e[a]-e[o])*(e[o+1]+e[a+1]),a=o;return i}Mp.flatten=function(e){for(var t=e[0][0].length,r={vertices:[],holes:[],dimensions:t},n=0,i=0;i<e.length;i++){for(var o=0;o<e[i].length;o++)for(var a=0;a<t;a++)r.vertices.push(e[i][o][a]);i>0&&(n+=e[i-1].length,r.holes.push(n))}return r};var vee=Qb.exports;const e1=Sr(vee);var yd={exports:{}};/*! https://mths.be/punycode v1.4.1 by @mathias */yd.exports;(function(e,t){(function(r){var n=t&&!t.nodeType&&t,i=e&&!e.nodeType&&e,o=typeof dn=="object"&&dn;(o.global===o||o.window===o||o.self===o)&&(r=o);var a,s=2147483647,l=36,u=1,c=26,f=38,h=700,d=72,m=128,g="-",p=/^xn--/,v=/[^\x20-\x7E]/,y=/[\x2E\u3002\uFF0E\uFF61]/g,_={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},x=l-u,b=Math.floor,S=String.fromCharCode,E;function I(X){throw new RangeError(_[X])}function A(X,L){for(var q=X.length,re=[];q--;)re[q]=L(X[q]);return re}function O(X,L){var q=X.split("@"),re="";q.length>1&&(re=q[0]+"@",X=q[1]),X=X.replace(y,".");var le=X.split("."),ye=A(le,L).join(".");return re+ye}function D(X){for(var L=[],q=0,re=X.length,le,ye;q<re;)le=X.charCodeAt(q++),le>=55296&&le<=56319&&q<re?(ye=X.charCodeAt(q++),(ye&64512)==56320?L.push(((le&1023)<<10)+(ye&1023)+65536):(L.push(le),q--)):L.push(le);return L}function B(X){return A(X,function(L){var q="";return L>65535&&(L-=65536,q+=S(L>>>10&1023|55296),L=56320|L&1023),q+=S(L),q}).join("")}function j(X){return X-48<10?X-22:X-65<26?X-65:X-97<26?X-97:l}function W(X,L){return X+22+75*(X<26)-((L!=0)<<5)}function $(X,L,q){var re=0;for(X=q?b(X/h):X>>1,X+=b(X/L);X>x*c>>1;re+=l)X=b(X/x);return b(re+(x+1)*X/(X+f))}function z(X){var L=[],q=X.length,re,le=0,ye=m,we=d,Ee,Ge,He,Qe,Oe,Be,We,Te,dt;for(Ee=X.lastIndexOf(g),Ee<0&&(Ee=0),Ge=0;Ge<Ee;++Ge)X.charCodeAt(Ge)>=128&&I("not-basic"),L.push(X.charCodeAt(Ge));for(He=Ee>0?Ee+1:0;He<q;){for(Qe=le,Oe=1,Be=l;He>=q&&I("invalid-input"),We=j(X.charCodeAt(He++)),(We>=l||We>b((s-le)/Oe))&&I("overflow"),le+=We*Oe,Te=Be<=we?u:Be>=we+c?c:Be-we,!(We<Te);Be+=l)dt=l-Te,Oe>b(s/dt)&&I("overflow"),Oe*=dt;re=L.length+1,we=$(le-Qe,re,Qe==0),b(le/re)>s-ye&&I("overflow"),ye+=b(le/re),le%=re,L.splice(le++,0,ye)}return B(L)}function ie(X){var L,q,re,le,ye,we,Ee,Ge,He,Qe,Oe,Be=[],We,Te,dt,fr;for(X=D(X),We=X.length,L=m,q=0,ye=d,we=0;we<We;++we)Oe=X[we],Oe<128&&Be.push(S(Oe));for(re=le=Be.length,le&&Be.push(g);re<We;){for(Ee=s,we=0;we<We;++we)Oe=X[we],Oe>=L&&Oe<Ee&&(Ee=Oe);for(Te=re+1,Ee-L>b((s-q)/Te)&&I("overflow"),q+=(Ee-L)*Te,L=Ee,we=0;we<We;++we)if(Oe=X[we],Oe<L&&++q>s&&I("overflow"),Oe==L){for(Ge=q,He=l;Qe=He<=ye?u:He>=ye+c?c:He-ye,!(Ge<Qe);He+=l)fr=Ge-Qe,dt=l-Qe,Be.push(S(W(Qe+fr%dt,0))),Ge=b(fr/dt);Be.push(S(W(Ge,0))),ye=$(q,Te,re==le),q=0,++re}++q,++L}return Be.join("")}function Se(X){return O(X,function(L){return p.test(L)?z(L.slice(4).toLowerCase()):L})}function de(X){return O(X,function(L){return v.test(L)?"xn--"+ie(L):L})}if(a={version:"1.4.1",ucs2:{decode:D,encode:B},decode:z,encode:ie,toASCII:de,toUnicode:Se},n&&i)if(e.exports==n)i.exports=a;else for(E in a)a.hasOwnProperty(E)&&(n[E]=a[E]);else r.punycode=a})(dn)})(yd,yd.exports);var gee=yd.exports,yee=Error,_ee=EvalError,xee=RangeError,bee=ReferenceError,MR=SyntaxError,Jc=TypeError,See=URIError,wee=function(){if(typeof Symbol!="function"||typeof Object.getOwnPropertySymbols!="function")return!1;if(typeof Symbol.iterator=="symbol")return!0;var t={},r=Symbol("test"),n=Object(r);if(typeof r=="string"||Object.prototype.toString.call(r)!=="[object Symbol]"||Object.prototype.toString.call(n)!=="[object Symbol]")return!1;var i=42;t[r]=i;for(r in t)return!1;if(typeof Object.keys=="function"&&Object.keys(t).length!==0||typeof Object.getOwnPropertyNames=="function"&&Object.getOwnPropertyNames(t).length!==0)return!1;var o=Object.getOwnPropertySymbols(t);if(o.length!==1||o[0]!==r||!Object.prototype.propertyIsEnumerable.call(t,r))return!1;if(typeof Object.getOwnPropertyDescriptor=="function"){var a=Object.getOwnPropertyDescriptor(t,r);if(a.value!==i||a.enumerable!==!0)return!1}return!0},VC=typeof Symbol<"u"&&Symbol,Eee=wee,Tee=function(){return typeof VC!="function"||typeof Symbol!="function"||typeof VC("foo")!="symbol"||typeof Symbol("bar")!="symbol"?!1:Eee()},ig={__proto__:null,foo:{}},Cee=Object,Pee=function(){return{__proto__:ig}.foo===ig.foo&&!(ig instanceof Cee)},Aee="Function.prototype.bind called on incompatible ",Oee=Object.prototype.toString,Iee=Math.max,Mee="[object Function]",HC=function(t,r){for(var n=[],i=0;i<t.length;i+=1)n[i]=t[i];for(var o=0;o<r.length;o+=1)n[o+t.length]=r[o];return n},Ree=function(t,r){for(var n=[],i=r||0,o=0;i<t.length;i+=1,o+=1)n[o]=t[i];return n},kee=function(e,t){for(var r="",n=0;n<e.length;n+=1)r+=e[n],n+1<e.length&&(r+=t);return r},Lee=function(t){var r=this;if(typeof r!="function"||Oee.apply(r)!==Mee)throw new TypeError(Aee+r);for(var n=Ree(arguments,1),i,o=function(){if(this instanceof i){var c=r.apply(this,HC(n,arguments));return Object(c)===c?c:this}return r.apply(t,HC(n,arguments))},a=Iee(0,r.length-n.length),s=[],l=0;l<a;l++)s[l]="$"+l;if(i=Function("binder","return function ("+kee(s,",")+"){ return binder.apply(this,arguments); }")(o),r.prototype){var u=function(){};u.prototype=r.prototype,i.prototype=new u,u.prototype=null}return i},Fee=Lee,t1=Function.prototype.bind||Fee,Dee=Function.prototype.call,Nee=Object.prototype.hasOwnProperty,Bee=t1,jee=Bee.call(Dee,Nee),Me,Uee=yee,$ee=_ee,Gee=xee,zee=bee,Ys=MR,Fs=Jc,Vee=See,RR=Function,og=function(e){try{return RR('"use strict"; return ('+e+").constructor;")()}catch{}},ya=Object.getOwnPropertyDescriptor;if(ya)try{ya({},"")}catch{ya=null}var ag=function(){throw new Fs},Hee=ya?function(){try{return arguments.callee,ag}catch{try{return ya(arguments,"callee").get}catch{return ag}}}():ag,Ja=Tee(),Wee=Pee(),qt=Object.getPrototypeOf||(Wee?function(e){return e.__proto__}:null),us={},Xee=typeof Uint8Array>"u"||!qt?Me:qt(Uint8Array),_a={__proto__:null,"%AggregateError%":typeof AggregateError>"u"?Me:AggregateError,"%Array%":Array,"%ArrayBuffer%":typeof ArrayBuffer>"u"?Me:ArrayBuffer,"%ArrayIteratorPrototype%":Ja&&qt?qt([][Symbol.iterator]()):Me,"%AsyncFromSyncIteratorPrototype%":Me,"%AsyncFunction%":us,"%AsyncGenerator%":us,"%AsyncGeneratorFunction%":us,"%AsyncIteratorPrototype%":us,"%Atomics%":typeof Atomics>"u"?Me:Atomics,"%BigInt%":typeof BigInt>"u"?Me:BigInt,"%BigInt64Array%":typeof BigInt64Array>"u"?Me:BigInt64Array,"%BigUint64Array%":typeof BigUint64Array>"u"?Me:BigUint64Array,"%Boolean%":Boolean,"%DataView%":typeof DataView>"u"?Me:DataView,"%Date%":Date,"%decodeURI%":decodeURI,"%decodeURIComponent%":decodeURIComponent,"%encodeURI%":encodeURI,"%encodeURIComponent%":encodeURIComponent,"%Error%":Uee,"%eval%":eval,"%EvalError%":$ee,"%Float32Array%":typeof Float32Array>"u"?Me:Float32Array,"%Float64Array%":typeof Float64Array>"u"?Me:Float64Array,"%FinalizationRegistry%":typeof FinalizationRegistry>"u"?Me:FinalizationRegistry,"%Function%":RR,"%GeneratorFunction%":us,"%Int8Array%":typeof Int8Array>"u"?Me:Int8Array,"%Int16Array%":typeof Int16Array>"u"?Me:Int16Array,"%Int32Array%":typeof Int32Array>"u"?Me:Int32Array,"%isFinite%":isFinite,"%isNaN%":isNaN,"%IteratorPrototype%":Ja&&qt?qt(qt([][Symbol.iterator]())):Me,"%JSON%":typeof JSON=="object"?JSON:Me,"%Map%":typeof Map>"u"?Me:Map,"%MapIteratorPrototype%":typeof Map>"u"||!Ja||!qt?Me:qt(new Map()[Symbol.iterator]()),"%Math%":Math,"%Number%":Number,"%Object%":Object,"%parseFloat%":parseFloat,"%parseInt%":parseInt,"%Promise%":typeof Promise>"u"?Me:Promise,"%Proxy%":typeof Proxy>"u"?Me:Proxy,"%RangeError%":Gee,"%ReferenceError%":zee,"%Reflect%":typeof Reflect>"u"?Me:Reflect,"%RegExp%":RegExp,"%Set%":typeof Set>"u"?Me:Set,"%SetIteratorPrototype%":typeof Set>"u"||!Ja||!qt?Me:qt(new Set()[Symbol.iterator]()),"%SharedArrayBuffer%":typeof SharedArrayBuffer>"u"?Me:SharedArrayBuffer,"%String%":String,"%StringIteratorPrototype%":Ja&&qt?qt(""[Symbol.iterator]()):Me,"%Symbol%":Ja?Symbol:Me,"%SyntaxError%":Ys,"%ThrowTypeError%":Hee,"%TypedArray%":Xee,"%TypeError%":Fs,"%Uint8Array%":typeof Uint8Array>"u"?Me:Uint8Array,"%Uint8ClampedArray%":typeof Uint8ClampedArray>"u"?Me:Uint8ClampedArray,"%Uint16Array%":typeof Uint16Array>"u"?Me:Uint16Array,"%Uint32Array%":typeof Uint32Array>"u"?Me:Uint32Array,"%URIError%":Vee,"%WeakMap%":typeof WeakMap>"u"?Me:WeakMap,"%WeakRef%":typeof WeakRef>"u"?Me:WeakRef,"%WeakSet%":typeof WeakSet>"u"?Me:WeakSet};if(qt)try{null.error}catch(e){var qee=qt(qt(e));_a["%Error.prototype%"]=qee}var Yee=function e(t){var r;if(t==="%AsyncFunction%")r=og("async function () {}");else if(t==="%GeneratorFunction%")r=og("function* () {}");else if(t==="%AsyncGeneratorFunction%")r=og("async function* () {}");else if(t==="%AsyncGenerator%"){var n=e("%AsyncGeneratorFunction%");n&&(r=n.prototype)}else if(t==="%AsyncIteratorPrototype%"){var i=e("%AsyncGenerator%");i&&qt&&(r=qt(i.prototype))}return _a[t]=r,r},WC={__proto__:null,"%ArrayBufferPrototype%":["ArrayBuffer","prototype"],"%ArrayPrototype%":["Array","prototype"],"%ArrayProto_entries%":["Array","prototype","entries"],"%ArrayProto_forEach%":["Array","prototype","forEach"],"%ArrayProto_keys%":["Array","prototype","keys"],"%ArrayProto_values%":["Array","prototype","values"],"%AsyncFunctionPrototype%":["AsyncFunction","prototype"],"%AsyncGenerator%":["AsyncGeneratorFunction","prototype"],"%AsyncGeneratorPrototype%":["AsyncGeneratorFunction","prototype","prototype"],"%BooleanPrototype%":["Boolean","prototype"],"%DataViewPrototype%":["DataView","prototype"],"%DatePrototype%":["Date","prototype"],"%ErrorPrototype%":["Error","prototype"],"%EvalErrorPrototype%":["EvalError","prototype"],"%Float32ArrayPrototype%":["Float32Array","prototype"],"%Float64ArrayPrototype%":["Float64Array","prototype"],"%FunctionPrototype%":["Function","prototype"],"%Generator%":["GeneratorFunction","prototype"],"%GeneratorPrototype%":["GeneratorFunction","prototype","prototype"],"%Int8ArrayPrototype%":["Int8Array","prototype"],"%Int16ArrayPrototype%":["Int16Array","prototype"],"%Int32ArrayPrototype%":["Int32Array","prototype"],"%JSONParse%":["JSON","parse"],"%JSONStringify%":["JSON","stringify"],"%MapPrototype%":["Map","prototype"],"%NumberPrototype%":["Number","prototype"],"%ObjectPrototype%":["Object","prototype"],"%ObjProto_toString%":["Object","prototype","toString"],"%ObjProto_valueOf%":["Object","prototype","valueOf"],"%PromisePrototype%":["Promise","prototype"],"%PromiseProto_then%":["Promise","prototype","then"],"%Promise_all%":["Promise","all"],"%Promise_reject%":["Promise","reject"],"%Promise_resolve%":["Promise","resolve"],"%RangeErrorPrototype%":["RangeError","prototype"],"%ReferenceErrorPrototype%":["ReferenceError","prototype"],"%RegExpPrototype%":["RegExp","prototype"],"%SetPrototype%":["Set","prototype"],"%SharedArrayBufferPrototype%":["SharedArrayBuffer","prototype"],"%StringPrototype%":["String","prototype"],"%SymbolPrototype%":["Symbol","prototype"],"%SyntaxErrorPrototype%":["SyntaxError","prototype"],"%TypedArrayPrototype%":["TypedArray","prototype"],"%TypeErrorPrototype%":["TypeError","prototype"],"%Uint8ArrayPrototype%":["Uint8Array","prototype"],"%Uint8ClampedArrayPrototype%":["Uint8ClampedArray","prototype"],"%Uint16ArrayPrototype%":["Uint16Array","prototype"],"%Uint32ArrayPrototype%":["Uint32Array","prototype"],"%URIErrorPrototype%":["URIError","prototype"],"%WeakMapPrototype%":["WeakMap","prototype"],"%WeakSetPrototype%":["WeakSet","prototype"]},Qc=t1,_d=jee,Kee=Qc.call(Function.call,Array.prototype.concat),Zee=Qc.call(Function.apply,Array.prototype.splice),XC=Qc.call(Function.call,String.prototype.replace),xd=Qc.call(Function.call,String.prototype.slice),Jee=Qc.call(Function.call,RegExp.prototype.exec),Qee=/[^%.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|%$))/g,ete=/\\(\\)?/g,tte=function(t){var r=xd(t,0,1),n=xd(t,-1);if(r==="%"&&n!=="%")throw new Ys("invalid intrinsic syntax, expected closing `%`");if(n==="%"&&r!=="%")throw new Ys("invalid intrinsic syntax, expected opening `%`");var i=[];return XC(t,Qee,function(o,a,s,l){i[i.length]=s?XC(l,ete,"$1"):a||o}),i},rte=function(t,r){var n=t,i;if(_d(WC,n)&&(i=WC[n],n="%"+i[0]+"%"),_d(_a,n)){var o=_a[n];if(o===us&&(o=Yee(n)),typeof o>"u"&&!r)throw new Fs("intrinsic "+t+" exists, but is not available. Please file an issue!");return{alias:i,name:n,value:o}}throw new Ys("intrinsic "+t+" does not exist!")},bl=function(t,r){if(typeof t!="string"||t.length===0)throw new Fs("intrinsic name must be a non-empty string");if(arguments.length>1&&typeof r!="boolean")throw new Fs('"allowMissing" argument must be a boolean');if(Jee(/^%?[^%]*%?$/,t)===null)throw new Ys("`%` may not be present anywhere but at the beginning and end of the intrinsic name");var n=tte(t),i=n.length>0?n[0]:"",o=rte("%"+i+"%",r),a=o.name,s=o.value,l=!1,u=o.alias;u&&(i=u[0],Zee(n,Kee([0,1],u)));for(var c=1,f=!0;c<n.length;c+=1){var h=n[c],d=xd(h,0,1),m=xd(h,-1);if((d==='"'||d==="'"||d==="`"||m==='"'||m==="'"||m==="`")&&d!==m)throw new Ys("property names with quotes must have matching quotes");if((h==="constructor"||!f)&&(l=!0),i+="."+h,a="%"+i+"%",_d(_a,a))s=_a[a];else if(s!=null){if(!(h in s)){if(!r)throw new Fs("base intrinsic for "+t+" exists, but the property is not available.");return}if(ya&&c+1>=n.length){var g=ya(s,h);f=!!g,f&&"get"in g&&!("originalValue"in g.get)?s=g.get:s=s[h]}else f=_d(s,h),s=s[h];f&&!l&&(_a[a]=s)}}return s},kR={exports:{}},sg,qC;function r1(){if(qC)return sg;qC=1;var e=bl,t=e("%Object.defineProperty%",!0)||!1;if(t)try{t({},"a",{value:1})}catch{t=!1}return sg=t,sg}var nte=bl,Sh=nte("%Object.getOwnPropertyDescriptor%",!0);if(Sh)try{Sh([],"length")}catch{Sh=null}var LR=Sh,YC=r1(),ite=MR,Qa=Jc,KC=LR,ote=function(t,r,n){if(!t||typeof t!="object"&&typeof t!="function")throw new Qa("`obj` must be an object or a function`");if(typeof r!="string"&&typeof r!="symbol")throw new Qa("`property` must be a string or a symbol`");if(arguments.length>3&&typeof arguments[3]!="boolean"&&arguments[3]!==null)throw new Qa("`nonEnumerable`, if provided, must be a boolean or null");if(arguments.length>4&&typeof arguments[4]!="boolean"&&arguments[4]!==null)throw new Qa("`nonWritable`, if provided, must be a boolean or null");if(arguments.length>5&&typeof arguments[5]!="boolean"&&arguments[5]!==null)throw new Qa("`nonConfigurable`, if provided, must be a boolean or null");if(arguments.length>6&&typeof arguments[6]!="boolean")throw new Qa("`loose`, if provided, must be a boolean");var i=arguments.length>3?arguments[3]:null,o=arguments.length>4?arguments[4]:null,a=arguments.length>5?arguments[5]:null,s=arguments.length>6?arguments[6]:!1,l=!!KC&&KC(t,r);if(YC)YC(t,r,{configurable:a===null&&l?l.configurable:!a,enumerable:i===null&&l?l.enumerable:!i,value:n,writable:o===null&&l?l.writable:!o});else if(s||!i&&!o&&!a)t[r]=n;else throw new ite("This environment does not support defining a property as non-configurable, non-writable, or non-enumerable.")},b_=r1(),FR=function(){return!!b_};FR.hasArrayLengthDefineBug=function(){if(!b_)return null;try{return b_([],"length",{value:1}).length!==1}catch{return!0}};var ate=FR,ste=bl,ZC=ote,lte=ate(),JC=LR,QC=Jc,ute=ste("%Math.floor%"),cte=function(t,r){if(typeof t!="function")throw new QC("`fn` is not a function");if(typeof r!="number"||r<0||r>4294967295||ute(r)!==r)throw new QC("`length` must be a positive 32-bit integer");var n=arguments.length>2&&!!arguments[2],i=!0,o=!0;if("length"in t&&JC){var a=JC(t,"length");a&&!a.configurable&&(i=!1),a&&!a.writable&&(o=!1)}return(i||o||!n)&&(lte?ZC(t,"length",r,!0,!0):ZC(t,"length",r)),t};(function(e){var t=t1,r=bl,n=cte,i=Jc,o=r("%Function.prototype.apply%"),a=r("%Function.prototype.call%"),s=r("%Reflect.apply%",!0)||t.call(a,o),l=r1(),u=r("%Math.max%");e.exports=function(h){if(typeof h!="function")throw new i("a function is required");var d=s(t,a,arguments);return n(d,1+u(0,h.length-(arguments.length-1)),!0)};var c=function(){return s(t,o,arguments)};l?l(e.exports,"apply",{value:c}):e.exports.apply=c})(kR);var fte=kR.exports,DR=bl,NR=fte,hte=NR(DR("String.prototype.indexOf")),dte=function(t,r){var n=DR(t,!!r);return typeof n=="function"&&hte(t,".prototype.")>-1?NR(n):n};const pte={},mte=Object.freeze(Object.defineProperty({__proto__:null,default:pte},Symbol.toStringTag,{value:"Module"})),vte=ON(mte);var n1=typeof Map=="function"&&Map.prototype,lg=Object.getOwnPropertyDescriptor&&n1?Object.getOwnPropertyDescriptor(Map.prototype,"size"):null,bd=n1&&lg&&typeof lg.get=="function"?lg.get:null,eP=n1&&Map.prototype.forEach,i1=typeof Set=="function"&&Set.prototype,ug=Object.getOwnPropertyDescriptor&&i1?Object.getOwnPropertyDescriptor(Set.prototype,"size"):null,Sd=i1&&ug&&typeof ug.get=="function"?ug.get:null,tP=i1&&Set.prototype.forEach,gte=typeof WeakMap=="function"&&WeakMap.prototype,Uu=gte?WeakMap.prototype.has:null,yte=typeof WeakSet=="function"&&WeakSet.prototype,$u=yte?WeakSet.prototype.has:null,_te=typeof WeakRef=="function"&&WeakRef.prototype,rP=_te?WeakRef.prototype.deref:null,xte=Boolean.prototype.valueOf,bte=Object.prototype.toString,Ste=Function.prototype.toString,wte=String.prototype.match,o1=String.prototype.slice,co=String.prototype.replace,Ete=String.prototype.toUpperCase,nP=String.prototype.toLowerCase,BR=RegExp.prototype.test,iP=Array.prototype.concat,Kn=Array.prototype.join,Tte=Array.prototype.slice,oP=Math.floor,S_=typeof BigInt=="function"?BigInt.prototype.valueOf:null,cg=Object.getOwnPropertySymbols,w_=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?Symbol.prototype.toString:null,Ks=typeof Symbol=="function"&&typeof Symbol.iterator=="object",br=typeof Symbol=="function"&&Symbol.toStringTag&&(typeof Symbol.toStringTag===Ks||"symbol")?Symbol.toStringTag:null,jR=Object.prototype.propertyIsEnumerable,aP=(typeof Reflect=="function"?Reflect.getPrototypeOf:Object.getPrototypeOf)||([].__proto__===Array.prototype?function(e){return e.__proto__}:null);function sP(e,t){if(e===1/0||e===-1/0||e!==e||e&&e>-1e3&&e<1e3||BR.call(/e/,t))return t;var r=/[0-9](?=(?:[0-9]{3})+(?![0-9]))/g;if(typeof e=="number"){var n=e<0?-oP(-e):oP(e);if(n!==e){var i=String(n),o=o1.call(t,i.length+1);return co.call(i,r,"$&_")+"."+co.call(co.call(o,/([0-9]{3})/g,"$&_"),/_$/,"")}}return co.call(t,r,"$&_")}var E_=vte,lP=E_.custom,uP=$R(lP)?lP:null,Cte=function e(t,r,n,i){var o=r||{};if(Qi(o,"quoteStyle")&&o.quoteStyle!=="single"&&o.quoteStyle!=="double")throw new TypeError('option "quoteStyle" must be "single" or "double"');if(Qi(o,"maxStringLength")&&(typeof o.maxStringLength=="number"?o.maxStringLength<0&&o.maxStringLength!==1/0:o.maxStringLength!==null))throw new TypeError('option "maxStringLength", if provided, must be a positive integer, Infinity, or `null`');var a=Qi(o,"customInspect")?o.customInspect:!0;if(typeof a!="boolean"&&a!=="symbol")throw new TypeError("option \"customInspect\", if provided, must be `true`, `false`, or `'symbol'`");if(Qi(o,"indent")&&o.indent!==null&&o.indent!=="	"&&!(parseInt(o.indent,10)===o.indent&&o.indent>0))throw new TypeError('option "indent" must be "\\t", an integer > 0, or `null`');if(Qi(o,"numericSeparator")&&typeof o.numericSeparator!="boolean")throw new TypeError('option "numericSeparator", if provided, must be `true` or `false`');var s=o.numericSeparator;if(typeof t>"u")return"undefined";if(t===null)return"null";if(typeof t=="boolean")return t?"true":"false";if(typeof t=="string")return zR(t,o);if(typeof t=="number"){if(t===0)return 1/0/t>0?"0":"-0";var l=String(t);return s?sP(t,l):l}if(typeof t=="bigint"){var u=String(t)+"n";return s?sP(t,u):u}var c=typeof o.depth>"u"?5:o.depth;if(typeof n>"u"&&(n=0),n>=c&&c>0&&typeof t=="object")return T_(t)?"[Array]":"[Object]";var f=Vte(o,n);if(typeof i>"u")i=[];else if(GR(i,t)>=0)return"[Circular]";function h(j,W,$){if(W&&(i=Tte.call(i),i.push(W)),$){var z={depth:o.depth};return Qi(o,"quoteStyle")&&(z.quoteStyle=o.quoteStyle),e(j,z,n+1,i)}return e(j,o,n+1,i)}if(typeof t=="function"&&!cP(t)){var d=Fte(t),m=Pf(t,h);return"[Function"+(d?": "+d:" (anonymous)")+"]"+(m.length>0?" { "+Kn.call(m,", ")+" }":"")}if($R(t)){var g=Ks?co.call(String(t),/^(Symbol\(.*\))_[^)]*$/,"$1"):w_.call(t);return typeof t=="object"&&!Ks?Yl(g):g}if($te(t)){for(var p="<"+nP.call(String(t.nodeName)),v=t.attributes||[],y=0;y<v.length;y++)p+=" "+v[y].name+"="+UR(Pte(v[y].value),"double",o);return p+=">",t.childNodes&&t.childNodes.length&&(p+="..."),p+="</"+nP.call(String(t.nodeName))+">",p}if(T_(t)){if(t.length===0)return"[]";var _=Pf(t,h);return f&&!zte(_)?"["+C_(_,f)+"]":"[ "+Kn.call(_,", ")+" ]"}if(Ote(t)){var x=Pf(t,h);return!("cause"in Error.prototype)&&"cause"in t&&!jR.call(t,"cause")?"{ ["+String(t)+"] "+Kn.call(iP.call("[cause]: "+h(t.cause),x),", ")+" }":x.length===0?"["+String(t)+"]":"{ ["+String(t)+"] "+Kn.call(x,", ")+" }"}if(typeof t=="object"&&a){if(uP&&typeof t[uP]=="function"&&E_)return E_(t,{depth:c-n});if(a!=="symbol"&&typeof t.inspect=="function")return t.inspect()}if(Dte(t)){var b=[];return eP&&eP.call(t,function(j,W){b.push(h(W,t,!0)+" => "+h(j,t))}),fP("Map",bd.call(t),b,f)}if(jte(t)){var S=[];return tP&&tP.call(t,function(j){S.push(h(j,t))}),fP("Set",Sd.call(t),S,f)}if(Nte(t))return fg("WeakMap");if(Ute(t))return fg("WeakSet");if(Bte(t))return fg("WeakRef");if(Mte(t))return Yl(h(Number(t)));if(kte(t))return Yl(h(S_.call(t)));if(Rte(t))return Yl(xte.call(t));if(Ite(t))return Yl(h(String(t)));if(typeof window<"u"&&t===window)return"{ [object Window] }";if(t===dn)return"{ [object globalThis] }";if(!Ate(t)&&!cP(t)){var E=Pf(t,h),I=aP?aP(t)===Object.prototype:t instanceof Object||t.constructor===Object,A=t instanceof Object?"":"null prototype",O=!I&&br&&Object(t)===t&&br in t?o1.call($o(t),8,-1):A?"Object":"",D=I||typeof t.constructor!="function"?"":t.constructor.name?t.constructor.name+" ":"",B=D+(O||A?"["+Kn.call(iP.call([],O||[],A||[]),": ")+"] ":"");return E.length===0?B+"{}":f?B+"{"+C_(E,f)+"}":B+"{ "+Kn.call(E,", ")+" }"}return String(t)};function UR(e,t,r){var n=(r.quoteStyle||t)==="double"?'"':"'";return n+e+n}function Pte(e){return co.call(String(e),/"/g,"&quot;")}function T_(e){return $o(e)==="[object Array]"&&(!br||!(typeof e=="object"&&br in e))}function Ate(e){return $o(e)==="[object Date]"&&(!br||!(typeof e=="object"&&br in e))}function cP(e){return $o(e)==="[object RegExp]"&&(!br||!(typeof e=="object"&&br in e))}function Ote(e){return $o(e)==="[object Error]"&&(!br||!(typeof e=="object"&&br in e))}function Ite(e){return $o(e)==="[object String]"&&(!br||!(typeof e=="object"&&br in e))}function Mte(e){return $o(e)==="[object Number]"&&(!br||!(typeof e=="object"&&br in e))}function Rte(e){return $o(e)==="[object Boolean]"&&(!br||!(typeof e=="object"&&br in e))}function $R(e){if(Ks)return e&&typeof e=="object"&&e instanceof Symbol;if(typeof e=="symbol")return!0;if(!e||typeof e!="object"||!w_)return!1;try{return w_.call(e),!0}catch{}return!1}function kte(e){if(!e||typeof e!="object"||!S_)return!1;try{return S_.call(e),!0}catch{}return!1}var Lte=Object.prototype.hasOwnProperty||function(e){return e in this};function Qi(e,t){return Lte.call(e,t)}function $o(e){return bte.call(e)}function Fte(e){if(e.name)return e.name;var t=wte.call(Ste.call(e),/^function\s*([\w$]+)/);return t?t[1]:null}function GR(e,t){if(e.indexOf)return e.indexOf(t);for(var r=0,n=e.length;r<n;r++)if(e[r]===t)return r;return-1}function Dte(e){if(!bd||!e||typeof e!="object")return!1;try{bd.call(e);try{Sd.call(e)}catch{return!0}return e instanceof Map}catch{}return!1}function Nte(e){if(!Uu||!e||typeof e!="object")return!1;try{Uu.call(e,Uu);try{$u.call(e,$u)}catch{return!0}return e instanceof WeakMap}catch{}return!1}function Bte(e){if(!rP||!e||typeof e!="object")return!1;try{return rP.call(e),!0}catch{}return!1}function jte(e){if(!Sd||!e||typeof e!="object")return!1;try{Sd.call(e);try{bd.call(e)}catch{return!0}return e instanceof Set}catch{}return!1}function Ute(e){if(!$u||!e||typeof e!="object")return!1;try{$u.call(e,$u);try{Uu.call(e,Uu)}catch{return!0}return e instanceof WeakSet}catch{}return!1}function $te(e){return!e||typeof e!="object"?!1:typeof HTMLElement<"u"&&e instanceof HTMLElement?!0:typeof e.nodeName=="string"&&typeof e.getAttribute=="function"}function zR(e,t){if(e.length>t.maxStringLength){var r=e.length-t.maxStringLength,n="... "+r+" more character"+(r>1?"s":"");return zR(o1.call(e,0,t.maxStringLength),t)+n}var i=co.call(co.call(e,/(['\\])/g,"\\$1"),/[\x00-\x1f]/g,Gte);return UR(i,"single",t)}function Gte(e){var t=e.charCodeAt(0),r={8:"b",9:"t",10:"n",12:"f",13:"r"}[t];return r?"\\"+r:"\\x"+(t<16?"0":"")+Ete.call(t.toString(16))}function Yl(e){return"Object("+e+")"}function fg(e){return e+" { ? }"}function fP(e,t,r,n){var i=n?C_(r,n):Kn.call(r,", ");return e+" ("+t+") {"+i+"}"}function zte(e){for(var t=0;t<e.length;t++)if(GR(e[t],`
`)>=0)return!1;return!0}function Vte(e,t){var r;if(e.indent==="	")r="	";else if(typeof e.indent=="number"&&e.indent>0)r=Kn.call(Array(e.indent+1)," ");else return null;return{base:r,prev:Kn.call(Array(t+1),r)}}function C_(e,t){if(e.length===0)return"";var r=`
`+t.prev+t.base;return r+Kn.call(e,","+r)+`
`+t.prev}function Pf(e,t){var r=T_(e),n=[];if(r){n.length=e.length;for(var i=0;i<e.length;i++)n[i]=Qi(e,i)?t(e[i],e):""}var o=typeof cg=="function"?cg(e):[],a;if(Ks){a={};for(var s=0;s<o.length;s++)a["$"+o[s]]=o[s]}for(var l in e)Qi(e,l)&&(r&&String(Number(l))===l&&l<e.length||Ks&&a["$"+l]instanceof Symbol||(BR.call(/[^\w$]/,l)?n.push(t(l,e)+": "+t(e[l],e)):n.push(l+": "+t(e[l],e))));if(typeof cg=="function")for(var u=0;u<o.length;u++)jR.call(e,o[u])&&n.push("["+t(o[u])+"]: "+t(e[o[u]],e));return n}var VR=bl,Sl=dte,Hte=Cte,Wte=Jc,Af=VR("%WeakMap%",!0),Of=VR("%Map%",!0),Xte=Sl("WeakMap.prototype.get",!0),qte=Sl("WeakMap.prototype.set",!0),Yte=Sl("WeakMap.prototype.has",!0),Kte=Sl("Map.prototype.get",!0),Zte=Sl("Map.prototype.set",!0),Jte=Sl("Map.prototype.has",!0),a1=function(e,t){for(var r=e,n;(n=r.next)!==null;r=n)if(n.key===t)return r.next=n.next,n.next=e.next,e.next=n,n},Qte=function(e,t){var r=a1(e,t);return r&&r.value},ere=function(e,t,r){var n=a1(e,t);n?n.value=r:e.next={key:t,next:e.next,value:r}},tre=function(e,t){return!!a1(e,t)},rre=function(){var t,r,n,i={assert:function(o){if(!i.has(o))throw new Wte("Side channel does not contain "+Hte(o))},get:function(o){if(Af&&o&&(typeof o=="object"||typeof o=="function")){if(t)return Xte(t,o)}else if(Of){if(r)return Kte(r,o)}else if(n)return Qte(n,o)},has:function(o){if(Af&&o&&(typeof o=="object"||typeof o=="function")){if(t)return Yte(t,o)}else if(Of){if(r)return Jte(r,o)}else if(n)return tre(n,o);return!1},set:function(o,a){Af&&o&&(typeof o=="object"||typeof o=="function")?(t||(t=new Af),qte(t,o,a)):Of?(r||(r=new Of),Zte(r,o,a)):(n||(n={key:{},next:null}),ere(n,o,a))}};return i},nre=String.prototype.replace,ire=/%20/g,hg={RFC1738:"RFC1738",RFC3986:"RFC3986"},s1={default:hg.RFC3986,formatters:{RFC1738:function(e){return nre.call(e,ire,"+")},RFC3986:function(e){return String(e)}},RFC1738:hg.RFC1738,RFC3986:hg.RFC3986},ore=s1,dg=Object.prototype.hasOwnProperty,la=Array.isArray,Vn=function(){for(var e=[],t=0;t<256;++t)e.push("%"+((t<16?"0":"")+t.toString(16)).toUpperCase());return e}(),are=function(t){for(;t.length>1;){var r=t.pop(),n=r.obj[r.prop];if(la(n)){for(var i=[],o=0;o<n.length;++o)typeof n[o]<"u"&&i.push(n[o]);r.obj[r.prop]=i}}},HR=function(t,r){for(var n=r&&r.plainObjects?Object.create(null):{},i=0;i<t.length;++i)typeof t[i]<"u"&&(n[i]=t[i]);return n},sre=function e(t,r,n){if(!r)return t;if(typeof r!="object"){if(la(t))t.push(r);else if(t&&typeof t=="object")(n&&(n.plainObjects||n.allowPrototypes)||!dg.call(Object.prototype,r))&&(t[r]=!0);else return[t,r];return t}if(!t||typeof t!="object")return[t].concat(r);var i=t;return la(t)&&!la(r)&&(i=HR(t,n)),la(t)&&la(r)?(r.forEach(function(o,a){if(dg.call(t,a)){var s=t[a];s&&typeof s=="object"&&o&&typeof o=="object"?t[a]=e(s,o,n):t.push(o)}else t[a]=o}),t):Object.keys(r).reduce(function(o,a){var s=r[a];return dg.call(o,a)?o[a]=e(o[a],s,n):o[a]=s,o},i)},lre=function(t,r){return Object.keys(r).reduce(function(n,i){return n[i]=r[i],n},t)},ure=function(e,t,r){var n=e.replace(/\+/g," ");if(r==="iso-8859-1")return n.replace(/%[0-9a-f]{2}/gi,unescape);try{return decodeURIComponent(n)}catch{return n}},cre=function(t,r,n,i,o){if(t.length===0)return t;var a=t;if(typeof t=="symbol"?a=Symbol.prototype.toString.call(t):typeof t!="string"&&(a=String(t)),n==="iso-8859-1")return escape(a).replace(/%u[0-9a-f]{4}/gi,function(c){return"%26%23"+parseInt(c.slice(2),16)+"%3B"});for(var s="",l=0;l<a.length;++l){var u=a.charCodeAt(l);if(u===45||u===46||u===95||u===126||u>=48&&u<=57||u>=65&&u<=90||u>=97&&u<=122||o===ore.RFC1738&&(u===40||u===41)){s+=a.charAt(l);continue}if(u<128){s=s+Vn[u];continue}if(u<2048){s=s+(Vn[192|u>>6]+Vn[128|u&63]);continue}if(u<55296||u>=57344){s=s+(Vn[224|u>>12]+Vn[128|u>>6&63]+Vn[128|u&63]);continue}l+=1,u=65536+((u&1023)<<10|a.charCodeAt(l)&1023),s+=Vn[240|u>>18]+Vn[128|u>>12&63]+Vn[128|u>>6&63]+Vn[128|u&63]}return s},fre=function(t){for(var r=[{obj:{o:t},prop:"o"}],n=[],i=0;i<r.length;++i)for(var o=r[i],a=o.obj[o.prop],s=Object.keys(a),l=0;l<s.length;++l){var u=s[l],c=a[u];typeof c=="object"&&c!==null&&n.indexOf(c)===-1&&(r.push({obj:a,prop:u}),n.push(c))}return are(r),t},hre=function(t){return Object.prototype.toString.call(t)==="[object RegExp]"},dre=function(t){return!t||typeof t!="object"?!1:!!(t.constructor&&t.constructor.isBuffer&&t.constructor.isBuffer(t))},pre=function(t,r){return[].concat(t,r)},mre=function(t,r){if(la(t)){for(var n=[],i=0;i<t.length;i+=1)n.push(r(t[i]));return n}return r(t)},WR={arrayToObject:HR,assign:lre,combine:pre,compact:fre,decode:ure,encode:cre,isBuffer:dre,isRegExp:hre,maybeMap:mre,merge:sre},XR=rre,wh=WR,Gu=s1,vre=Object.prototype.hasOwnProperty,qR={brackets:function(t){return t+"[]"},comma:"comma",indices:function(t,r){return t+"["+r+"]"},repeat:function(t){return t}},qn=Array.isArray,gre=Array.prototype.push,YR=function(e,t){gre.apply(e,qn(t)?t:[t])},yre=Date.prototype.toISOString,hP=Gu.default,Bt={addQueryPrefix:!1,allowDots:!1,allowEmptyArrays:!1,arrayFormat:"indices",charset:"utf-8",charsetSentinel:!1,delimiter:"&",encode:!0,encodeDotInKeys:!1,encoder:wh.encode,encodeValuesOnly:!1,format:hP,formatter:Gu.formatters[hP],indices:!1,serializeDate:function(t){return yre.call(t)},skipNulls:!1,strictNullHandling:!1},_re=function(t){return typeof t=="string"||typeof t=="number"||typeof t=="boolean"||typeof t=="symbol"||typeof t=="bigint"},pg={},xre=function e(t,r,n,i,o,a,s,l,u,c,f,h,d,m,g,p,v,y){for(var _=t,x=y,b=0,S=!1;(x=x.get(pg))!==void 0&&!S;){var E=x.get(t);if(b+=1,typeof E<"u"){if(E===b)throw new RangeError("Cyclic object value");S=!0}typeof x.get(pg)>"u"&&(b=0)}if(typeof c=="function"?_=c(r,_):_ instanceof Date?_=d(_):n==="comma"&&qn(_)&&(_=wh.maybeMap(_,function(X){return X instanceof Date?d(X):X})),_===null){if(a)return u&&!p?u(r,Bt.encoder,v,"key",m):r;_=""}if(_re(_)||wh.isBuffer(_)){if(u){var I=p?r:u(r,Bt.encoder,v,"key",m);return[g(I)+"="+g(u(_,Bt.encoder,v,"value",m))]}return[g(r)+"="+g(String(_))]}var A=[];if(typeof _>"u")return A;var O;if(n==="comma"&&qn(_))p&&u&&(_=wh.maybeMap(_,u)),O=[{value:_.length>0?_.join(",")||null:void 0}];else if(qn(c))O=c;else{var D=Object.keys(_);O=f?D.sort(f):D}var B=l?r.replace(/\./g,"%2E"):r,j=i&&qn(_)&&_.length===1?B+"[]":B;if(o&&qn(_)&&_.length===0)return j+"[]";for(var W=0;W<O.length;++W){var $=O[W],z=typeof $=="object"&&typeof $.value<"u"?$.value:_[$];if(!(s&&z===null)){var ie=h&&l?$.replace(/\./g,"%2E"):$,Se=qn(_)?typeof n=="function"?n(j,ie):j:j+(h?"."+ie:"["+ie+"]");y.set(t,b);var de=XR();de.set(pg,y),YR(A,e(z,Se,n,i,o,a,s,l,n==="comma"&&p&&qn(_)?null:u,c,f,h,d,m,g,p,v,de))}}return A},bre=function(t){if(!t)return Bt;if(typeof t.allowEmptyArrays<"u"&&typeof t.allowEmptyArrays!="boolean")throw new TypeError("`allowEmptyArrays` option can only be `true` or `false`, when provided");if(typeof t.encodeDotInKeys<"u"&&typeof t.encodeDotInKeys!="boolean")throw new TypeError("`encodeDotInKeys` option can only be `true` or `false`, when provided");if(t.encoder!==null&&typeof t.encoder<"u"&&typeof t.encoder!="function")throw new TypeError("Encoder has to be a function.");var r=t.charset||Bt.charset;if(typeof t.charset<"u"&&t.charset!=="utf-8"&&t.charset!=="iso-8859-1")throw new TypeError("The charset option must be either utf-8, iso-8859-1, or undefined");var n=Gu.default;if(typeof t.format<"u"){if(!vre.call(Gu.formatters,t.format))throw new TypeError("Unknown format option provided.");n=t.format}var i=Gu.formatters[n],o=Bt.filter;(typeof t.filter=="function"||qn(t.filter))&&(o=t.filter);var a;if(t.arrayFormat in qR?a=t.arrayFormat:"indices"in t?a=t.indices?"indices":"repeat":a=Bt.arrayFormat,"commaRoundTrip"in t&&typeof t.commaRoundTrip!="boolean")throw new TypeError("`commaRoundTrip` must be a boolean, or absent");var s=typeof t.allowDots>"u"?t.encodeDotInKeys===!0?!0:Bt.allowDots:!!t.allowDots;return{addQueryPrefix:typeof t.addQueryPrefix=="boolean"?t.addQueryPrefix:Bt.addQueryPrefix,allowDots:s,allowEmptyArrays:typeof t.allowEmptyArrays=="boolean"?!!t.allowEmptyArrays:Bt.allowEmptyArrays,arrayFormat:a,charset:r,charsetSentinel:typeof t.charsetSentinel=="boolean"?t.charsetSentinel:Bt.charsetSentinel,commaRoundTrip:t.commaRoundTrip,delimiter:typeof t.delimiter>"u"?Bt.delimiter:t.delimiter,encode:typeof t.encode=="boolean"?t.encode:Bt.encode,encodeDotInKeys:typeof t.encodeDotInKeys=="boolean"?t.encodeDotInKeys:Bt.encodeDotInKeys,encoder:typeof t.encoder=="function"?t.encoder:Bt.encoder,encodeValuesOnly:typeof t.encodeValuesOnly=="boolean"?t.encodeValuesOnly:Bt.encodeValuesOnly,filter:o,format:n,formatter:i,serializeDate:typeof t.serializeDate=="function"?t.serializeDate:Bt.serializeDate,skipNulls:typeof t.skipNulls=="boolean"?t.skipNulls:Bt.skipNulls,sort:typeof t.sort=="function"?t.sort:null,strictNullHandling:typeof t.strictNullHandling=="boolean"?t.strictNullHandling:Bt.strictNullHandling}},Sre=function(e,t){var r=e,n=bre(t),i,o;typeof n.filter=="function"?(o=n.filter,r=o("",r)):qn(n.filter)&&(o=n.filter,i=o);var a=[];if(typeof r!="object"||r===null)return"";var s=qR[n.arrayFormat],l=s==="comma"&&n.commaRoundTrip;i||(i=Object.keys(r)),n.sort&&i.sort(n.sort);for(var u=XR(),c=0;c<i.length;++c){var f=i[c];n.skipNulls&&r[f]===null||YR(a,xre(r[f],f,s,l,n.allowEmptyArrays,n.strictNullHandling,n.skipNulls,n.encodeDotInKeys,n.encode?n.encoder:null,n.filter,n.sort,n.allowDots,n.serializeDate,n.format,n.formatter,n.encodeValuesOnly,n.charset,u))}var h=a.join(n.delimiter),d=n.addQueryPrefix===!0?"?":"";return n.charsetSentinel&&(n.charset==="iso-8859-1"?d+="utf8=%26%2310003%3B&":d+="utf8=%E2%9C%93&"),h.length>0?d+h:""},Zs=WR,P_=Object.prototype.hasOwnProperty,wre=Array.isArray,It={allowDots:!1,allowEmptyArrays:!1,allowPrototypes:!1,allowSparse:!1,arrayLimit:20,charset:"utf-8",charsetSentinel:!1,comma:!1,decodeDotInKeys:!0,decoder:Zs.decode,delimiter:"&",depth:5,duplicates:"combine",ignoreQueryPrefix:!1,interpretNumericEntities:!1,parameterLimit:1e3,parseArrays:!0,plainObjects:!1,strictNullHandling:!1},Ere=function(e){return e.replace(/&#(\d+);/g,function(t,r){return String.fromCharCode(parseInt(r,10))})},KR=function(e,t){return e&&typeof e=="string"&&t.comma&&e.indexOf(",")>-1?e.split(","):e},Tre="utf8=%26%2310003%3B",Cre="utf8=%E2%9C%93",Pre=function(t,r){var n={__proto__:null},i=r.ignoreQueryPrefix?t.replace(/^\?/,""):t,o=r.parameterLimit===1/0?void 0:r.parameterLimit,a=i.split(r.delimiter,o),s=-1,l,u=r.charset;if(r.charsetSentinel)for(l=0;l<a.length;++l)a[l].indexOf("utf8=")===0&&(a[l]===Cre?u="utf-8":a[l]===Tre&&(u="iso-8859-1"),s=l,l=a.length);for(l=0;l<a.length;++l)if(l!==s){var c=a[l],f=c.indexOf("]="),h=f===-1?c.indexOf("="):f+1,d,m;h===-1?(d=r.decoder(c,It.decoder,u,"key"),m=r.strictNullHandling?null:""):(d=r.decoder(c.slice(0,h),It.decoder,u,"key"),m=Zs.maybeMap(KR(c.slice(h+1),r),function(p){return r.decoder(p,It.decoder,u,"value")})),m&&r.interpretNumericEntities&&u==="iso-8859-1"&&(m=Ere(m)),c.indexOf("[]=")>-1&&(m=wre(m)?[m]:m);var g=P_.call(n,d);g&&r.duplicates==="combine"?n[d]=Zs.combine(n[d],m):(!g||r.duplicates==="last")&&(n[d]=m)}return n},Are=function(e,t,r,n){for(var i=n?t:KR(t,r),o=e.length-1;o>=0;--o){var a,s=e[o];if(s==="[]"&&r.parseArrays)a=r.allowEmptyArrays&&i===""?[]:[].concat(i);else{a=r.plainObjects?Object.create(null):{};var l=s.charAt(0)==="["&&s.charAt(s.length-1)==="]"?s.slice(1,-1):s,u=r.decodeDotInKeys?l.replace(/%2E/g,"."):l,c=parseInt(u,10);!r.parseArrays&&u===""?a={0:i}:!isNaN(c)&&s!==u&&String(c)===u&&c>=0&&r.parseArrays&&c<=r.arrayLimit?(a=[],a[c]=i):u!=="__proto__"&&(a[u]=i)}i=a}return i},Ore=function(t,r,n,i){if(t){var o=n.allowDots?t.replace(/\.([^.[]+)/g,"[$1]"):t,a=/(\[[^[\]]*])/,s=/(\[[^[\]]*])/g,l=n.depth>0&&a.exec(o),u=l?o.slice(0,l.index):o,c=[];if(u){if(!n.plainObjects&&P_.call(Object.prototype,u)&&!n.allowPrototypes)return;c.push(u)}for(var f=0;n.depth>0&&(l=s.exec(o))!==null&&f<n.depth;){if(f+=1,!n.plainObjects&&P_.call(Object.prototype,l[1].slice(1,-1))&&!n.allowPrototypes)return;c.push(l[1])}return l&&c.push("["+o.slice(l.index)+"]"),Are(c,r,n,i)}},Ire=function(t){if(!t)return It;if(typeof t.allowEmptyArrays<"u"&&typeof t.allowEmptyArrays!="boolean")throw new TypeError("`allowEmptyArrays` option can only be `true` or `false`, when provided");if(typeof t.decodeDotInKeys<"u"&&typeof t.decodeDotInKeys!="boolean")throw new TypeError("`decodeDotInKeys` option can only be `true` or `false`, when provided");if(t.decoder!==null&&typeof t.decoder<"u"&&typeof t.decoder!="function")throw new TypeError("Decoder has to be a function.");if(typeof t.charset<"u"&&t.charset!=="utf-8"&&t.charset!=="iso-8859-1")throw new TypeError("The charset option must be either utf-8, iso-8859-1, or undefined");var r=typeof t.charset>"u"?It.charset:t.charset,n=typeof t.duplicates>"u"?It.duplicates:t.duplicates;if(n!=="combine"&&n!=="first"&&n!=="last")throw new TypeError("The duplicates option must be either combine, first, or last");var i=typeof t.allowDots>"u"?t.decodeDotInKeys===!0?!0:It.allowDots:!!t.allowDots;return{allowDots:i,allowEmptyArrays:typeof t.allowEmptyArrays=="boolean"?!!t.allowEmptyArrays:It.allowEmptyArrays,allowPrototypes:typeof t.allowPrototypes=="boolean"?t.allowPrototypes:It.allowPrototypes,allowSparse:typeof t.allowSparse=="boolean"?t.allowSparse:It.allowSparse,arrayLimit:typeof t.arrayLimit=="number"?t.arrayLimit:It.arrayLimit,charset:r,charsetSentinel:typeof t.charsetSentinel=="boolean"?t.charsetSentinel:It.charsetSentinel,comma:typeof t.comma=="boolean"?t.comma:It.comma,decodeDotInKeys:typeof t.decodeDotInKeys=="boolean"?t.decodeDotInKeys:It.decodeDotInKeys,decoder:typeof t.decoder=="function"?t.decoder:It.decoder,delimiter:typeof t.delimiter=="string"||Zs.isRegExp(t.delimiter)?t.delimiter:It.delimiter,depth:typeof t.depth=="number"||t.depth===!1?+t.depth:It.depth,duplicates:n,ignoreQueryPrefix:t.ignoreQueryPrefix===!0,interpretNumericEntities:typeof t.interpretNumericEntities=="boolean"?t.interpretNumericEntities:It.interpretNumericEntities,parameterLimit:typeof t.parameterLimit=="number"?t.parameterLimit:It.parameterLimit,parseArrays:t.parseArrays!==!1,plainObjects:typeof t.plainObjects=="boolean"?t.plainObjects:It.plainObjects,strictNullHandling:typeof t.strictNullHandling=="boolean"?t.strictNullHandling:It.strictNullHandling}},Mre=function(e,t){var r=Ire(t);if(e===""||e===null||typeof e>"u")return r.plainObjects?Object.create(null):{};for(var n=typeof e=="string"?Pre(e,r):e,i=r.plainObjects?Object.create(null):{},o=Object.keys(n),a=0;a<o.length;++a){var s=o[a],l=Ore(s,n[s],r,typeof e=="string");i=Zs.merge(i,l,r)}return r.allowSparse===!0?i:Zs.compact(i)},Rre=Sre,kre=Mre,Lre=s1,Fre={formats:Lre,parse:kre,stringify:Rre},Dre=gee;function Dn(){this.protocol=null,this.slashes=null,this.auth=null,this.host=null,this.port=null,this.hostname=null,this.hash=null,this.search=null,this.query=null,this.pathname=null,this.path=null,this.href=null}var Nre=/^([a-z0-9.+-]+:)/i,Bre=/:[0-9]*$/,jre=/^(\/\/?(?!\/)[^?\s]*)(\?[^\s]*)?$/,Ure=["<",">",'"',"`"," ","\r",`
`,"	"],$re=["{","}","|","\\","^","`"].concat(Ure),A_=["'"].concat($re),dP=["%","/","?",";","#"].concat(A_),pP=["/","?","#"],Gre=255,mP=/^[+a-z0-9A-Z_-]{0,63}$/,zre=/^([+a-z0-9A-Z_-]{0,63})(.*)$/,Vre={javascript:!0,"javascript:":!0},O_={javascript:!0,"javascript:":!0},Ds={http:!0,https:!0,ftp:!0,gopher:!0,file:!0,"http:":!0,"https:":!0,"ftp:":!0,"gopher:":!0,"file:":!0},I_=Fre;function kp(e,t,r){if(e&&typeof e=="object"&&e instanceof Dn)return e;var n=new Dn;return n.parse(e,t,r),n}Dn.prototype.parse=function(e,t,r){if(typeof e!="string")throw new TypeError("Parameter 'url' must be a string, not "+typeof e);var n=e.indexOf("?"),i=n!==-1&&n<e.indexOf("#")?"?":"#",o=e.split(i),a=/\\/g;o[0]=o[0].replace(a,"/"),e=o.join(i);var s=e;if(s=s.trim(),!r&&e.split("#").length===1){var l=jre.exec(s);if(l)return this.path=s,this.href=s,this.pathname=l[1],l[2]?(this.search=l[2],t?this.query=I_.parse(this.search.substr(1)):this.query=this.search.substr(1)):t&&(this.search="",this.query={}),this}var u=Nre.exec(s);if(u){u=u[0];var c=u.toLowerCase();this.protocol=c,s=s.substr(u.length)}if(r||u||s.match(/^\/\/[^@/]+@[^@/]+/)){var f=s.substr(0,2)==="//";f&&!(u&&O_[u])&&(s=s.substr(2),this.slashes=!0)}if(!O_[u]&&(f||u&&!Ds[u])){for(var h=-1,d=0;d<pP.length;d++){var m=s.indexOf(pP[d]);m!==-1&&(h===-1||m<h)&&(h=m)}var g,p;h===-1?p=s.lastIndexOf("@"):p=s.lastIndexOf("@",h),p!==-1&&(g=s.slice(0,p),s=s.slice(p+1),this.auth=decodeURIComponent(g)),h=-1;for(var d=0;d<dP.length;d++){var m=s.indexOf(dP[d]);m!==-1&&(h===-1||m<h)&&(h=m)}h===-1&&(h=s.length),this.host=s.slice(0,h),s=s.slice(h),this.parseHost(),this.hostname=this.hostname||"";var v=this.hostname[0]==="["&&this.hostname[this.hostname.length-1]==="]";if(!v)for(var y=this.hostname.split(/\./),d=0,_=y.length;d<_;d++){var x=y[d];if(x&&!x.match(mP)){for(var b="",S=0,E=x.length;S<E;S++)x.charCodeAt(S)>127?b+="x":b+=x[S];if(!b.match(mP)){var I=y.slice(0,d),A=y.slice(d+1),O=x.match(zre);O&&(I.push(O[1]),A.unshift(O[2])),A.length&&(s="/"+A.join(".")+s),this.hostname=I.join(".");break}}}this.hostname.length>Gre?this.hostname="":this.hostname=this.hostname.toLowerCase(),v||(this.hostname=Dre.toASCII(this.hostname));var D=this.port?":"+this.port:"",B=this.hostname||"";this.host=B+D,this.href+=this.host,v&&(this.hostname=this.hostname.substr(1,this.hostname.length-2),s[0]!=="/"&&(s="/"+s))}if(!Vre[c])for(var d=0,_=A_.length;d<_;d++){var j=A_[d];if(s.indexOf(j)!==-1){var W=encodeURIComponent(j);W===j&&(W=escape(j)),s=s.split(j).join(W)}}var $=s.indexOf("#");$!==-1&&(this.hash=s.substr($),s=s.slice(0,$));var z=s.indexOf("?");if(z!==-1?(this.search=s.substr(z),this.query=s.substr(z+1),t&&(this.query=I_.parse(this.query)),s=s.slice(0,z)):t&&(this.search="",this.query={}),s&&(this.pathname=s),Ds[c]&&this.hostname&&!this.pathname&&(this.pathname="/"),this.pathname||this.search){var D=this.pathname||"",ie=this.search||"";this.path=D+ie}return this.href=this.format(),this};function Hre(e){return typeof e=="string"&&(e=kp(e)),e instanceof Dn?e.format():Dn.prototype.format.call(e)}Dn.prototype.format=function(){var e=this.auth||"";e&&(e=encodeURIComponent(e),e=e.replace(/%3A/i,":"),e+="@");var t=this.protocol||"",r=this.pathname||"",n=this.hash||"",i=!1,o="";this.host?i=e+this.host:this.hostname&&(i=e+(this.hostname.indexOf(":")===-1?this.hostname:"["+this.hostname+"]"),this.port&&(i+=":"+this.port)),this.query&&typeof this.query=="object"&&Object.keys(this.query).length&&(o=I_.stringify(this.query,{arrayFormat:"repeat",addQueryPrefix:!1}));var a=this.search||o&&"?"+o||"";return t&&t.substr(-1)!==":"&&(t+=":"),this.slashes||(!t||Ds[t])&&i!==!1?(i="//"+(i||""),r&&r.charAt(0)!=="/"&&(r="/"+r)):i||(i=""),n&&n.charAt(0)!=="#"&&(n="#"+n),a&&a.charAt(0)!=="?"&&(a="?"+a),r=r.replace(/[?#]/g,function(s){return encodeURIComponent(s)}),a=a.replace("#","%23"),t+i+r+a+n};function Wre(e,t){return kp(e,!1,!0).resolve(t)}Dn.prototype.resolve=function(e){return this.resolveObject(kp(e,!1,!0)).format()};Dn.prototype.resolveObject=function(e){if(typeof e=="string"){var t=new Dn;t.parse(e,!1,!0),e=t}for(var r=new Dn,n=Object.keys(this),i=0;i<n.length;i++){var o=n[i];r[o]=this[o]}if(r.hash=e.hash,e.href==="")return r.href=r.format(),r;if(e.slashes&&!e.protocol){for(var a=Object.keys(e),s=0;s<a.length;s++){var l=a[s];l!=="protocol"&&(r[l]=e[l])}return Ds[r.protocol]&&r.hostname&&!r.pathname&&(r.pathname="/",r.path=r.pathname),r.href=r.format(),r}if(e.protocol&&e.protocol!==r.protocol){if(!Ds[e.protocol]){for(var u=Object.keys(e),c=0;c<u.length;c++){var f=u[c];r[f]=e[f]}return r.href=r.format(),r}if(r.protocol=e.protocol,!e.host&&!O_[e.protocol]){for(var _=(e.pathname||"").split("/");_.length&&!(e.host=_.shift()););e.host||(e.host=""),e.hostname||(e.hostname=""),_[0]!==""&&_.unshift(""),_.length<2&&_.unshift(""),r.pathname=_.join("/")}else r.pathname=e.pathname;if(r.search=e.search,r.query=e.query,r.host=e.host||"",r.auth=e.auth,r.hostname=e.hostname||e.host,r.port=e.port,r.pathname||r.search){var h=r.pathname||"",d=r.search||"";r.path=h+d}return r.slashes=r.slashes||e.slashes,r.href=r.format(),r}var m=r.pathname&&r.pathname.charAt(0)==="/",g=e.host||e.pathname&&e.pathname.charAt(0)==="/",p=g||m||r.host&&e.pathname,v=p,y=r.pathname&&r.pathname.split("/")||[],_=e.pathname&&e.pathname.split("/")||[],x=r.protocol&&!Ds[r.protocol];if(x&&(r.hostname="",r.port=null,r.host&&(y[0]===""?y[0]=r.host:y.unshift(r.host)),r.host="",e.protocol&&(e.hostname=null,e.port=null,e.host&&(_[0]===""?_[0]=e.host:_.unshift(e.host)),e.host=null),p=p&&(_[0]===""||y[0]==="")),g)r.host=e.host||e.host===""?e.host:r.host,r.hostname=e.hostname||e.hostname===""?e.hostname:r.hostname,r.search=e.search,r.query=e.query,y=_;else if(_.length)y||(y=[]),y.pop(),y=y.concat(_),r.search=e.search,r.query=e.query;else if(e.search!=null){if(x){r.host=y.shift(),r.hostname=r.host;var b=r.host&&r.host.indexOf("@")>0?r.host.split("@"):!1;b&&(r.auth=b.shift(),r.hostname=b.shift(),r.host=r.hostname)}return r.search=e.search,r.query=e.query,(r.pathname!==null||r.search!==null)&&(r.path=(r.pathname?r.pathname:"")+(r.search?r.search:"")),r.href=r.format(),r}if(!y.length)return r.pathname=null,r.search?r.path="/"+r.search:r.path=null,r.href=r.format(),r;for(var S=y.slice(-1)[0],E=(r.host||e.host||y.length>1)&&(S==="."||S==="..")||S==="",I=0,A=y.length;A>=0;A--)S=y[A],S==="."?y.splice(A,1):S===".."?(y.splice(A,1),I++):I&&(y.splice(A,1),I--);if(!p&&!v)for(;I--;I)y.unshift("..");p&&y[0]!==""&&(!y[0]||y[0].charAt(0)!=="/")&&y.unshift(""),E&&y.join("/").substr(-1)!=="/"&&y.push("");var O=y[0]===""||y[0]&&y[0].charAt(0)==="/";if(x){r.hostname=O?"":y.length?y.shift():"",r.host=r.hostname;var b=r.host&&r.host.indexOf("@")>0?r.host.split("@"):!1;b&&(r.auth=b.shift(),r.hostname=b.shift(),r.host=r.hostname)}return p=p||r.host&&y.length,p&&!O&&y.unshift(""),y.length>0?r.pathname=y.join("/"):(r.pathname=null,r.path=null),(r.pathname!==null||r.search!==null)&&(r.path=(r.pathname?r.pathname:"")+(r.search?r.search:"")),r.auth=e.auth||r.auth,r.slashes=r.slashes||e.slashes,r.href=r.format(),r};Dn.prototype.parseHost=function(){var e=this.host,t=Bre.exec(e);t&&(t=t[0],t!==":"&&(this.port=t.substr(1)),e=e.substr(0,e.length-t.length)),e&&(this.hostname=e)};var Xre=kp,qre=Wre,Yre=Hre;/*!
 * @pixi/utils - v6.5.10
 * Compiled Thu, 06 Jul 2023 15:25:11 UTC
 *
 * @pixi/utils is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */var ii={parse:Xre,format:Yre,resolve:qre};function Cn(e){if(typeof e!="string")throw new TypeError("Path must be a string. Received "+JSON.stringify(e))}function vP(e){var t=e.split("?")[0];return t.split("#")[0]}function Kre(e){return e.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function Zre(e,t,r){return e.replace(new RegExp(Kre(t),"g"),r)}function Jre(e,t){for(var r="",n=0,i=-1,o=0,a,s=0;s<=e.length;++s){if(s<e.length)a=e.charCodeAt(s);else{if(a===47)break;a=47}if(a===47){if(!(i===s-1||o===1))if(i!==s-1&&o===2){if(r.length<2||n!==2||r.charCodeAt(r.length-1)!==46||r.charCodeAt(r.length-2)!==46){if(r.length>2){var l=r.lastIndexOf("/");if(l!==r.length-1){l===-1?(r="",n=0):(r=r.slice(0,l),n=r.length-1-r.lastIndexOf("/")),i=s,o=0;continue}}else if(r.length===2||r.length===1){r="",n=0,i=s,o=0;continue}}t&&(r.length>0?r+="/..":r="..",n=2)}else r.length>0?r+="/"+e.slice(i+1,s):r=e.slice(i+1,s),n=s-i-1;i=s,o=0}else a===46&&o!==-1?++o:o=-1}return r}var ZR={toPosix:function(e){return Zre(e,"\\","/")},isUrl:function(e){return/^https?:/.test(this.toPosix(e))},isDataUrl:function(e){return/^data:([a-z]+\/[a-z0-9-+.]+(;[a-z0-9-.!#$%*+.{}|~`]+=[a-z0-9-.!#$%*+.{}()_|~`]+)*)?(;base64)?,([a-z0-9!$&',()*+;=\-._~:@\/?%\s<>]*?)$/i.test(e)},hasProtocol:function(e){return/^[^/:]+:\//.test(this.toPosix(e))},getProtocol:function(e){Cn(e),e=this.toPosix(e);var t="",r=/^file:\/\/\//.exec(e),n=/^[^/:]+:\/\//.exec(e),i=/^[^/:]+:\//.exec(e);if(r||n||i){var o=(r==null?void 0:r[0])||(n==null?void 0:n[0])||(i==null?void 0:i[0]);t=o,e=e.slice(o.length)}return t},toAbsolute:function(e,t,r){if(this.isDataUrl(e))return e;var n=vP(this.toPosix(t??ne.ADAPTER.getBaseUrl())),i=vP(this.toPosix(r??this.rootname(n)));if(Cn(e),e=this.toPosix(e),e.startsWith("/"))return ZR.join(i,e.slice(1));var o=this.isAbsolute(e)?e:this.join(n,e);return o},normalize:function(e){if(e=this.toPosix(e),Cn(e),e.length===0)return".";var t="",r=e.startsWith("/");this.hasProtocol(e)&&(t=this.rootname(e),e=e.slice(t.length));var n=e.endsWith("/");return e=Jre(e,!1),e.length>0&&n&&(e+="/"),r?"/"+e:t+e},isAbsolute:function(e){return Cn(e),e=this.toPosix(e),this.hasProtocol(e)?!0:e.startsWith("/")},join:function(){for(var e=arguments,t,r=[],n=0;n<arguments.length;n++)r[n]=e[n];if(r.length===0)return".";for(var i,o=0;o<r.length;++o){var a=r[o];if(Cn(a),a.length>0)if(i===void 0)i=a;else{var s=(t=r[o-1])!==null&&t!==void 0?t:"";this.extname(s)?i+="/../"+a:i+="/"+a}}return i===void 0?".":this.normalize(i)},dirname:function(e){if(Cn(e),e.length===0)return".";e=this.toPosix(e);var t=e.charCodeAt(0),r=t===47,n=-1,i=!0,o=this.getProtocol(e),a=e;e=e.slice(o.length);for(var s=e.length-1;s>=1;--s)if(t=e.charCodeAt(s),t===47){if(!i){n=s;break}}else i=!1;return n===-1?r?"/":this.isUrl(a)?o+e:o:r&&n===1?"//":o+e.slice(0,n)},rootname:function(e){Cn(e),e=this.toPosix(e);var t="";if(e.startsWith("/")?t="/":t=this.getProtocol(e),this.isUrl(e)){var r=e.indexOf("/",t.length);r!==-1?t=e.slice(0,r):t=e,t.endsWith("/")||(t+="/")}return t},basename:function(e,t){Cn(e),t&&Cn(t),e=this.toPosix(e);var r=0,n=-1,i=!0,o;if(t!==void 0&&t.length>0&&t.length<=e.length){if(t.length===e.length&&t===e)return"";var a=t.length-1,s=-1;for(o=e.length-1;o>=0;--o){var l=e.charCodeAt(o);if(l===47){if(!i){r=o+1;break}}else s===-1&&(i=!1,s=o+1),a>=0&&(l===t.charCodeAt(a)?--a===-1&&(n=o):(a=-1,n=s))}return r===n?n=s:n===-1&&(n=e.length),e.slice(r,n)}for(o=e.length-1;o>=0;--o)if(e.charCodeAt(o)===47){if(!i){r=o+1;break}}else n===-1&&(i=!1,n=o+1);return n===-1?"":e.slice(r,n)},extname:function(e){Cn(e),e=this.toPosix(e);for(var t=-1,r=0,n=-1,i=!0,o=0,a=e.length-1;a>=0;--a){var s=e.charCodeAt(a);if(s===47){if(!i){r=a+1;break}continue}n===-1&&(i=!1,n=a+1),s===46?t===-1?t=a:o!==1&&(o=1):t!==-1&&(o=-1)}return t===-1||n===-1||o===0||o===1&&t===n-1&&t===r+1?"":e.slice(t,n)},parse:function(e){Cn(e);var t={root:"",dir:"",base:"",ext:"",name:""};if(e.length===0)return t;e=this.toPosix(e);var r=e.charCodeAt(0),n=this.isAbsolute(e),i;t.root=this.rootname(e),n||this.hasProtocol(e)?i=1:i=0;for(var o=-1,a=0,s=-1,l=!0,u=e.length-1,c=0;u>=i;--u){if(r=e.charCodeAt(u),r===47){if(!l){a=u+1;break}continue}s===-1&&(l=!1,s=u+1),r===46?o===-1?o=u:c!==1&&(c=1):o!==-1&&(c=-1)}return o===-1||s===-1||c===0||c===1&&o===s-1&&o===a+1?s!==-1&&(a===0&&n?t.base=t.name=e.slice(1,s):t.base=t.name=e.slice(a,s)):(a===0&&n?(t.name=e.slice(1,o),t.base=e.slice(1,s)):(t.name=e.slice(a,o),t.base=e.slice(a,s)),t.ext=e.slice(o,s)),t.dir=this.dirname(e),t},sep:"/",delimiter:":"};ne.RETINA_PREFIX=/@([0-9\.]+)x/;ne.FAIL_IF_MAJOR_PERFORMANCE_CAVEAT=!1;var M_=!1,gP="6.5.10";function Qre(){M_=!0}function JR(e){var t;if(!M_){if(ne.ADAPTER.getNavigator().userAgent.toLowerCase().indexOf("chrome")>-1){var r=[`
 %c %c %c PixiJS `+gP+" -  "+e+`   %c  %c  http://www.pixijs.com/  %c %c %c%c 

`,"background: #ff66a5; padding:5px 0;","background: #ff66a5; padding:5px 0;","color: #ff66a5; background: #030307; padding:5px 0;","background: #ff66a5; padding:5px 0;","background: #ffc3dc; padding:5px 0;","background: #ff66a5; padding:5px 0;","color: #ff2424; background: #fff; padding:5px 0;","color: #ff2424; background: #fff; padding:5px 0;","color: #ff2424; background: #fff; padding:5px 0;"];(t=globalThis.console).log.apply(t,r)}else globalThis.console&&globalThis.console.log("PixiJS "+gP+" - "+e+" - http://www.pixijs.com/");M_=!0}}var mg;function QR(){return typeof mg>"u"&&(mg=function(){var t={stencil:!0,failIfMajorPerformanceCaveat:ne.FAIL_IF_MAJOR_PERFORMANCE_CAVEAT};try{if(!ne.ADAPTER.getWebGLRenderingContext())return!1;var r=ne.ADAPTER.createCanvas(),n=r.getContext("webgl",t)||r.getContext("experimental-webgl",t),i=!!(n&&n.getContextAttributes().stencil);if(n){var o=n.getExtension("WEBGL_lose_context");o&&o.loseContext()}return n=null,i}catch{return!1}}()),mg}var ene="#f0f8ff",tne="#faebd7",rne="#00ffff",nne="#7fffd4",ine="#f0ffff",one="#f5f5dc",ane="#ffe4c4",sne="#000000",lne="#ffebcd",une="#0000ff",cne="#8a2be2",fne="#a52a2a",hne="#deb887",dne="#5f9ea0",pne="#7fff00",mne="#d2691e",vne="#ff7f50",gne="#6495ed",yne="#fff8dc",_ne="#dc143c",xne="#00ffff",bne="#00008b",Sne="#008b8b",wne="#b8860b",Ene="#a9a9a9",Tne="#006400",Cne="#a9a9a9",Pne="#bdb76b",Ane="#8b008b",One="#556b2f",Ine="#ff8c00",Mne="#9932cc",Rne="#8b0000",kne="#e9967a",Lne="#8fbc8f",Fne="#483d8b",Dne="#2f4f4f",Nne="#2f4f4f",Bne="#00ced1",jne="#9400d3",Une="#ff1493",$ne="#00bfff",Gne="#696969",zne="#696969",Vne="#1e90ff",Hne="#b22222",Wne="#fffaf0",Xne="#228b22",qne="#ff00ff",Yne="#dcdcdc",Kne="#f8f8ff",Zne="#daa520",Jne="#ffd700",Qne="#808080",eie="#008000",tie="#adff2f",rie="#808080",nie="#f0fff0",iie="#ff69b4",oie="#cd5c5c",aie="#4b0082",sie="#fffff0",lie="#f0e68c",uie="#fff0f5",cie="#e6e6fa",fie="#7cfc00",hie="#fffacd",die="#add8e6",pie="#f08080",mie="#e0ffff",vie="#fafad2",gie="#d3d3d3",yie="#90ee90",_ie="#d3d3d3",xie="#ffb6c1",bie="#ffa07a",Sie="#20b2aa",wie="#87cefa",Eie="#778899",Tie="#778899",Cie="#b0c4de",Pie="#ffffe0",Aie="#00ff00",Oie="#32cd32",Iie="#faf0e6",Mie="#ff00ff",Rie="#800000",kie="#66cdaa",Lie="#0000cd",Fie="#ba55d3",Die="#9370db",Nie="#3cb371",Bie="#7b68ee",jie="#00fa9a",Uie="#48d1cc",$ie="#c71585",Gie="#191970",zie="#f5fffa",Vie="#ffe4e1",Hie="#ffe4b5",Wie="#ffdead",Xie="#000080",qie="#fdf5e6",Yie="#808000",Kie="#6b8e23",Zie="#ffa500",Jie="#ff4500",Qie="#da70d6",eoe="#eee8aa",toe="#98fb98",roe="#afeeee",noe="#db7093",ioe="#ffefd5",ooe="#ffdab9",aoe="#cd853f",soe="#ffc0cb",loe="#dda0dd",uoe="#b0e0e6",coe="#800080",foe="#663399",hoe="#ff0000",doe="#bc8f8f",poe="#4169e1",moe="#8b4513",voe="#fa8072",goe="#f4a460",yoe="#2e8b57",_oe="#fff5ee",xoe="#a0522d",boe="#c0c0c0",Soe="#87ceeb",woe="#6a5acd",Eoe="#708090",Toe="#708090",Coe="#fffafa",Poe="#00ff7f",Aoe="#4682b4",Ooe="#d2b48c",Ioe="#008080",Moe="#d8bfd8",Roe="#ff6347",koe="#40e0d0",Loe="#ee82ee",Foe="#f5deb3",Doe="#ffffff",Noe="#f5f5f5",Boe="#ffff00",joe="#9acd32",Uoe={aliceblue:ene,antiquewhite:tne,aqua:rne,aquamarine:nne,azure:ine,beige:one,bisque:ane,black:sne,blanchedalmond:lne,blue:une,blueviolet:cne,brown:fne,burlywood:hne,cadetblue:dne,chartreuse:pne,chocolate:mne,coral:vne,cornflowerblue:gne,cornsilk:yne,crimson:_ne,cyan:xne,darkblue:bne,darkcyan:Sne,darkgoldenrod:wne,darkgray:Ene,darkgreen:Tne,darkgrey:Cne,darkkhaki:Pne,darkmagenta:Ane,darkolivegreen:One,darkorange:Ine,darkorchid:Mne,darkred:Rne,darksalmon:kne,darkseagreen:Lne,darkslateblue:Fne,darkslategray:Dne,darkslategrey:Nne,darkturquoise:Bne,darkviolet:jne,deeppink:Une,deepskyblue:$ne,dimgray:Gne,dimgrey:zne,dodgerblue:Vne,firebrick:Hne,floralwhite:Wne,forestgreen:Xne,fuchsia:qne,gainsboro:Yne,ghostwhite:Kne,goldenrod:Zne,gold:Jne,gray:Qne,green:eie,greenyellow:tie,grey:rie,honeydew:nie,hotpink:iie,indianred:oie,indigo:aie,ivory:sie,khaki:lie,lavenderblush:uie,lavender:cie,lawngreen:fie,lemonchiffon:hie,lightblue:die,lightcoral:pie,lightcyan:mie,lightgoldenrodyellow:vie,lightgray:gie,lightgreen:yie,lightgrey:_ie,lightpink:xie,lightsalmon:bie,lightseagreen:Sie,lightskyblue:wie,lightslategray:Eie,lightslategrey:Tie,lightsteelblue:Cie,lightyellow:Pie,lime:Aie,limegreen:Oie,linen:Iie,magenta:Mie,maroon:Rie,mediumaquamarine:kie,mediumblue:Lie,mediumorchid:Fie,mediumpurple:Die,mediumseagreen:Nie,mediumslateblue:Bie,mediumspringgreen:jie,mediumturquoise:Uie,mediumvioletred:$ie,midnightblue:Gie,mintcream:zie,mistyrose:Vie,moccasin:Hie,navajowhite:Wie,navy:Xie,oldlace:qie,olive:Yie,olivedrab:Kie,orange:Zie,orangered:Jie,orchid:Qie,palegoldenrod:eoe,palegreen:toe,paleturquoise:roe,palevioletred:noe,papayawhip:ioe,peachpuff:ooe,peru:aoe,pink:soe,plum:loe,powderblue:uoe,purple:coe,rebeccapurple:foe,red:hoe,rosybrown:doe,royalblue:poe,saddlebrown:moe,salmon:voe,sandybrown:goe,seagreen:yoe,seashell:_oe,sienna:xoe,silver:boe,skyblue:Soe,slateblue:woe,slategray:Eoe,slategrey:Toe,snow:Coe,springgreen:Poe,steelblue:Aoe,tan:Ooe,teal:Ioe,thistle:Moe,tomato:Roe,turquoise:koe,violet:Loe,wheat:Foe,white:Doe,whitesmoke:Noe,yellow:Boe,yellowgreen:joe};function Qt(e,t){return t===void 0&&(t=[]),t[0]=(e>>16&255)/255,t[1]=(e>>8&255)/255,t[2]=(e&255)/255,t}function l1(e){var t=e.toString(16);return t="000000".substring(0,6-t.length)+t,"#"+t}function u1(e){return typeof e=="string"&&(e=Uoe[e.toLowerCase()]||e,e[0]==="#"&&(e=e.slice(1))),parseInt(e,16)}function Sn(e){return(e[0]*255<<16)+(e[1]*255<<8)+(e[2]*255|0)}function $oe(){for(var e=[],t=[],r=0;r<32;r++)e[r]=r,t[r]=r;e[ce.NORMAL_NPM]=ce.NORMAL,e[ce.ADD_NPM]=ce.ADD,e[ce.SCREEN_NPM]=ce.SCREEN,t[ce.NORMAL]=ce.NORMAL_NPM,t[ce.ADD]=ce.ADD_NPM,t[ce.SCREEN]=ce.SCREEN_NPM;var n=[];return n.push(t),n.push(e),n}var c1=$oe();function f1(e,t){return c1[t?1:0][e]}function ek(e,t,r,n){return r=r||new Float32Array(4),n||n===void 0?(r[0]=e[0]*t,r[1]=e[1]*t,r[2]=e[2]*t):(r[0]=e[0],r[1]=e[1],r[2]=e[2]),r[3]=t,r}function Lp(e,t){if(t===1)return(t*255<<24)+e;if(t===0)return 0;var r=e>>16&255,n=e>>8&255,i=e&255;return r=r*t+.5|0,n=n*t+.5|0,i=i*t+.5|0,(t*255<<24)+(r<<16)+(n<<8)+i}function h1(e,t,r,n){return r=r||new Float32Array(4),r[0]=(e>>16&255)/255,r[1]=(e>>8&255)/255,r[2]=(e&255)/255,(n||n===void 0)&&(r[0]*=t,r[1]*=t,r[2]*=t),r[3]=t,r}function tk(e,t){t===void 0&&(t=null);var r=e*6;if(t=t||new Uint16Array(r),t.length!==r)throw new Error("Out buffer length is incorrect, got "+t.length+" and expected "+r);for(var n=0,i=0;n<r;n+=6,i+=4)t[n+0]=i+0,t[n+1]=i+1,t[n+2]=i+2,t[n+3]=i+0,t[n+4]=i+2,t[n+5]=i+3;return t}function Fp(e){if(e.BYTES_PER_ELEMENT===4)return e instanceof Float32Array?"Float32Array":e instanceof Uint32Array?"Uint32Array":"Int32Array";if(e.BYTES_PER_ELEMENT===2){if(e instanceof Uint16Array)return"Uint16Array"}else if(e.BYTES_PER_ELEMENT===1&&e instanceof Uint8Array)return"Uint8Array";return null}var Goe={Float32Array,Uint32Array,Int32Array,Uint8Array};function zoe(e,t){for(var r=0,n=0,i={},o=0;o<e.length;o++)n+=t[o],r+=e[o].length;for(var a=new ArrayBuffer(r*4),s=null,l=0,o=0;o<e.length;o++){var u=t[o],c=e[o],f=Fp(c);i[f]||(i[f]=new Goe[f](a)),s=i[f];for(var h=0;h<c.length;h++){var d=(h/u|0)*n+l,m=h%u;s[d+m]=c[h]}l+=u}return new Float32Array(a)}function xc(e){return e+=e===0?1:0,--e,e|=e>>>1,e|=e>>>2,e|=e>>>4,e|=e>>>8,e|=e>>>16,e+1}function R_(e){return!(e&e-1)&&!!e}function k_(e){var t=(e>65535?1:0)<<4;e>>>=t;var r=(e>255?1:0)<<3;return e>>>=r,t|=r,r=(e>15?1:0)<<2,e>>>=r,t|=r,r=(e>3?1:0)<<1,e>>>=r,t|=r,t|e>>1}function xa(e,t,r){var n=e.length,i;if(!(t>=n||r===0)){r=t+r>n?n-t:r;var o=n-r;for(i=t;i<o;++i)e[i]=e[i+r];e.length=o}}function ma(e){return e===0?0:e<0?-1:1}var Voe=0;function Ro(){return++Voe}var yP={};function Or(e,t,r){if(r===void 0&&(r=3),!yP[t]){var n=new Error().stack;typeof n>"u"?console.warn("PixiJS Deprecation Warning: ",t+`
Deprecated since v`+e):(n=n.split(`
`).splice(r).join(`
`),console.groupCollapsed?(console.groupCollapsed("%cPixiJS Deprecation Warning: %c%s","color:#614108;background:#fffbe6","font-weight:normal;color:#614108;background:#fffbe6",t+`
Deprecated since v`+e),console.warn(n),console.groupEnd()):(console.warn("PixiJS Deprecation Warning: ",t+`
Deprecated since v`+e),console.warn(n))),yP[t]=!0}}var L_={},Nr=Object.create(null),ln=Object.create(null);function Hoe(){var e;for(e in Nr)Nr[e].destroy();for(e in ln)ln[e].destroy()}function rk(){var e;for(e in Nr)delete Nr[e];for(e in ln)delete ln[e]}var F_=function(){function e(t,r,n){this.canvas=ne.ADAPTER.createCanvas(),this.context=this.canvas.getContext("2d"),this.resolution=n||ne.RESOLUTION,this.resize(t,r)}return e.prototype.clear=function(){this.context.setTransform(1,0,0,1,0,0),this.context.clearRect(0,0,this.canvas.width,this.canvas.height)},e.prototype.resize=function(t,r){this.canvas.width=Math.round(t*this.resolution),this.canvas.height=Math.round(r*this.resolution)},e.prototype.destroy=function(){this.context=null,this.canvas=null},Object.defineProperty(e.prototype,"width",{get:function(){return this.canvas.width},set:function(t){this.canvas.width=Math.round(t)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"height",{get:function(){return this.canvas.height},set:function(t){this.canvas.height=Math.round(t)},enumerable:!1,configurable:!0}),e}();function nk(e){var t=e.width,r=e.height,n=e.getContext("2d",{willReadFrequently:!0}),i=n.getImageData(0,0,t,r),o=i.data,a=o.length,s={top:null,left:null,right:null,bottom:null},l=null,u,c,f;for(u=0;u<a;u+=4)o[u+3]!==0&&(c=u/4%t,f=~~(u/4/t),s.top===null&&(s.top=f),(s.left===null||c<s.left)&&(s.left=c),(s.right===null||s.right<c)&&(s.right=c+1),(s.bottom===null||s.bottom<f)&&(s.bottom=f));return s.top!==null&&(t=s.right-s.left,r=s.bottom-s.top+1,l=n.getImageData(s.left,s.top,t,r)),{height:r,width:t,data:l}}var ik=/^\s*data:(?:([\w-]+)\/([\w+.-]+))?(?:;charset=([\w-]+))?(?:;(base64))?,(.*)/i;function Woe(e){var t=ik.exec(e);if(t)return{mediaType:t[1]?t[1].toLowerCase():void 0,subType:t[2]?t[2].toLowerCase():void 0,charset:t[3]?t[3].toLowerCase():void 0,encoding:t[4]?t[4].toLowerCase():void 0,data:t[5]}}var If;function ok(e,t){if(t===void 0&&(t=globalThis.location),e.indexOf("data:")===0)return"";t=t||globalThis.location,If||(If=document.createElement("a")),If.href=e;var r=ii.parse(If.href),n=!r.port&&t.port===""||r.port===t.port;return r.hostname!==t.hostname||!n||r.protocol!==t.protocol?"anonymous":""}function bc(e,t){var r=ne.RETINA_PREFIX.exec(e);return r?parseFloat(r[1]):t!==void 0?t:1}const Xoe=Object.freeze(Object.defineProperty({__proto__:null,BaseTextureCache:ln,CanvasRenderTarget:F_,DATA_URI:ik,EventEmitter:Vi,ProgramCache:L_,TextureCache:Nr,clearTextureCache:rk,correctBlendMode:f1,createIndicesForQuads:tk,decomposeDataUri:Woe,deprecation:Or,destroyTextureCache:Hoe,determineCrossOrigin:ok,earcut:e1,getBufferType:Fp,getResolutionOfUrl:bc,hex2rgb:Qt,hex2string:l1,interleaveTypedArrays:zoe,isMobile:mn,isPow2:R_,isWebGLSupported:QR,log2:k_,nextPow2:xc,path:ZR,premultiplyBlendMode:c1,premultiplyRgba:ek,premultiplyTint:Lp,premultiplyTintToRgba:h1,removeItems:xa,rgb2hex:Sn,sayHello:JR,sign:ma,skipHello:Qre,string2hex:u1,trimCanvas:nk,uid:Ro,url:ii},Symbol.toStringTag,{value:"Module"}));/*!
 * @pixi/math - v6.5.10
 * Compiled Thu, 06 Jul 2023 15:25:11 UTC
 *
 * @pixi/math is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */var Sc=Math.PI*2,ak=180/Math.PI,ko=Math.PI/180,Gt;(function(e){e[e.POLY=0]="POLY",e[e.RECT=1]="RECT",e[e.CIRC=2]="CIRC",e[e.ELIP=3]="ELIP",e[e.RREC=4]="RREC"})(Gt||(Gt={}));var Pe=function(){function e(t,r){t===void 0&&(t=0),r===void 0&&(r=0),this.x=0,this.y=0,this.x=t,this.y=r}return e.prototype.clone=function(){return new e(this.x,this.y)},e.prototype.copyFrom=function(t){return this.set(t.x,t.y),this},e.prototype.copyTo=function(t){return t.set(this.x,this.y),t},e.prototype.equals=function(t){return t.x===this.x&&t.y===this.y},e.prototype.set=function(t,r){return t===void 0&&(t=0),r===void 0&&(r=t),this.x=t,this.y=r,this},e.prototype.toString=function(){return"[@pixi/math:Point x="+this.x+" y="+this.y+"]"},e}(),Mf=[new Pe,new Pe,new Pe,new Pe],Fe=function(){function e(t,r,n,i){t===void 0&&(t=0),r===void 0&&(r=0),n===void 0&&(n=0),i===void 0&&(i=0),this.x=Number(t),this.y=Number(r),this.width=Number(n),this.height=Number(i),this.type=Gt.RECT}return Object.defineProperty(e.prototype,"left",{get:function(){return this.x},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"right",{get:function(){return this.x+this.width},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"top",{get:function(){return this.y},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"bottom",{get:function(){return this.y+this.height},enumerable:!1,configurable:!0}),Object.defineProperty(e,"EMPTY",{get:function(){return new e(0,0,0,0)},enumerable:!1,configurable:!0}),e.prototype.clone=function(){return new e(this.x,this.y,this.width,this.height)},e.prototype.copyFrom=function(t){return this.x=t.x,this.y=t.y,this.width=t.width,this.height=t.height,this},e.prototype.copyTo=function(t){return t.x=this.x,t.y=this.y,t.width=this.width,t.height=this.height,t},e.prototype.contains=function(t,r){return this.width<=0||this.height<=0?!1:t>=this.x&&t<this.x+this.width&&r>=this.y&&r<this.y+this.height},e.prototype.intersects=function(t,r){if(!r){var n=this.x<t.x?t.x:this.x,i=this.right>t.right?t.right:this.right;if(i<=n)return!1;var o=this.y<t.y?t.y:this.y,a=this.bottom>t.bottom?t.bottom:this.bottom;return a>o}var s=this.left,l=this.right,u=this.top,c=this.bottom;if(l<=s||c<=u)return!1;var f=Mf[0].set(t.left,t.top),h=Mf[1].set(t.left,t.bottom),d=Mf[2].set(t.right,t.top),m=Mf[3].set(t.right,t.bottom);if(d.x<=f.x||h.y<=f.y)return!1;var g=Math.sign(r.a*r.d-r.b*r.c);if(g===0||(r.apply(f,f),r.apply(h,h),r.apply(d,d),r.apply(m,m),Math.max(f.x,h.x,d.x,m.x)<=s||Math.min(f.x,h.x,d.x,m.x)>=l||Math.max(f.y,h.y,d.y,m.y)<=u||Math.min(f.y,h.y,d.y,m.y)>=c))return!1;var p=g*(h.y-f.y),v=g*(f.x-h.x),y=p*s+v*u,_=p*l+v*u,x=p*s+v*c,b=p*l+v*c;if(Math.max(y,_,x,b)<=p*f.x+v*f.y||Math.min(y,_,x,b)>=p*m.x+v*m.y)return!1;var S=g*(f.y-d.y),E=g*(d.x-f.x),I=S*s+E*u,A=S*l+E*u,O=S*s+E*c,D=S*l+E*c;return!(Math.max(I,A,O,D)<=S*f.x+E*f.y||Math.min(I,A,O,D)>=S*m.x+E*m.y)},e.prototype.pad=function(t,r){return t===void 0&&(t=0),r===void 0&&(r=t),this.x-=t,this.y-=r,this.width+=t*2,this.height+=r*2,this},e.prototype.fit=function(t){var r=Math.max(this.x,t.x),n=Math.min(this.x+this.width,t.x+t.width),i=Math.max(this.y,t.y),o=Math.min(this.y+this.height,t.y+t.height);return this.x=r,this.width=Math.max(n-r,0),this.y=i,this.height=Math.max(o-i,0),this},e.prototype.ceil=function(t,r){t===void 0&&(t=1),r===void 0&&(r=.001);var n=Math.ceil((this.x+this.width-r)*t)/t,i=Math.ceil((this.y+this.height-r)*t)/t;return this.x=Math.floor((this.x+r)*t)/t,this.y=Math.floor((this.y+r)*t)/t,this.width=n-this.x,this.height=i-this.y,this},e.prototype.enlarge=function(t){var r=Math.min(this.x,t.x),n=Math.max(this.x+this.width,t.x+t.width),i=Math.min(this.y,t.y),o=Math.max(this.y+this.height,t.y+t.height);return this.x=r,this.width=n-r,this.y=i,this.height=o-i,this},e.prototype.toString=function(){return"[@pixi/math:Rectangle x="+this.x+" y="+this.y+" width="+this.width+" height="+this.height+"]"},e}(),sk=function(){function e(t,r,n){t===void 0&&(t=0),r===void 0&&(r=0),n===void 0&&(n=0),this.x=t,this.y=r,this.radius=n,this.type=Gt.CIRC}return e.prototype.clone=function(){return new e(this.x,this.y,this.radius)},e.prototype.contains=function(t,r){if(this.radius<=0)return!1;var n=this.radius*this.radius,i=this.x-t,o=this.y-r;return i*=i,o*=o,i+o<=n},e.prototype.getBounds=function(){return new Fe(this.x-this.radius,this.y-this.radius,this.radius*2,this.radius*2)},e.prototype.toString=function(){return"[@pixi/math:Circle x="+this.x+" y="+this.y+" radius="+this.radius+"]"},e}(),lk=function(){function e(t,r,n,i){t===void 0&&(t=0),r===void 0&&(r=0),n===void 0&&(n=0),i===void 0&&(i=0),this.x=t,this.y=r,this.width=n,this.height=i,this.type=Gt.ELIP}return e.prototype.clone=function(){return new e(this.x,this.y,this.width,this.height)},e.prototype.contains=function(t,r){if(this.width<=0||this.height<=0)return!1;var n=(t-this.x)/this.width,i=(r-this.y)/this.height;return n*=n,i*=i,n+i<=1},e.prototype.getBounds=function(){return new Fe(this.x-this.width,this.y-this.height,this.width,this.height)},e.prototype.toString=function(){return"[@pixi/math:Ellipse x="+this.x+" y="+this.y+" width="+this.width+" height="+this.height+"]"},e}(),zu=function(){function e(){for(var t=arguments,r=[],n=0;n<arguments.length;n++)r[n]=t[n];var i=Array.isArray(r[0])?r[0]:r;if(typeof i[0]!="number"){for(var o=[],a=0,s=i.length;a<s;a++)o.push(i[a].x,i[a].y);i=o}this.points=i,this.type=Gt.POLY,this.closeStroke=!0}return e.prototype.clone=function(){var t=this.points.slice(),r=new e(t);return r.closeStroke=this.closeStroke,r},e.prototype.contains=function(t,r){for(var n=!1,i=this.points.length/2,o=0,a=i-1;o<i;a=o++){var s=this.points[o*2],l=this.points[o*2+1],u=this.points[a*2],c=this.points[a*2+1],f=l>r!=c>r&&t<(u-s)*((r-l)/(c-l))+s;f&&(n=!n)}return n},e.prototype.toString=function(){return"[@pixi/math:Polygon"+("closeStroke="+this.closeStroke)+("points="+this.points.reduce(function(t,r){return t+", "+r},"")+"]")},e}(),uk=function(){function e(t,r,n,i,o){t===void 0&&(t=0),r===void 0&&(r=0),n===void 0&&(n=0),i===void 0&&(i=0),o===void 0&&(o=20),this.x=t,this.y=r,this.width=n,this.height=i,this.radius=o,this.type=Gt.RREC}return e.prototype.clone=function(){return new e(this.x,this.y,this.width,this.height,this.radius)},e.prototype.contains=function(t,r){if(this.width<=0||this.height<=0)return!1;if(t>=this.x&&t<=this.x+this.width&&r>=this.y&&r<=this.y+this.height){var n=Math.max(0,Math.min(this.radius,Math.min(this.width,this.height)/2));if(r>=this.y+n&&r<=this.y+this.height-n||t>=this.x+n&&t<=this.x+this.width-n)return!0;var i=t-(this.x+n),o=r-(this.y+n),a=n*n;if(i*i+o*o<=a||(i=t-(this.x+this.width-n),i*i+o*o<=a)||(o=r-(this.y+this.height-n),i*i+o*o<=a)||(i=t-(this.x+n),i*i+o*o<=a))return!0}return!1},e.prototype.toString=function(){return"[@pixi/math:RoundedRectangle x="+this.x+" y="+this.y+("width="+this.width+" height="+this.height+" radius="+this.radius+"]")},e}(),Li=function(){function e(t,r,n,i){n===void 0&&(n=0),i===void 0&&(i=0),this._x=n,this._y=i,this.cb=t,this.scope=r}return e.prototype.clone=function(t,r){return t===void 0&&(t=this.cb),r===void 0&&(r=this.scope),new e(t,r,this._x,this._y)},e.prototype.set=function(t,r){return t===void 0&&(t=0),r===void 0&&(r=t),(this._x!==t||this._y!==r)&&(this._x=t,this._y=r,this.cb.call(this.scope)),this},e.prototype.copyFrom=function(t){return(this._x!==t.x||this._y!==t.y)&&(this._x=t.x,this._y=t.y,this.cb.call(this.scope)),this},e.prototype.copyTo=function(t){return t.set(this._x,this._y),t},e.prototype.equals=function(t){return t.x===this._x&&t.y===this._y},e.prototype.toString=function(){return"[@pixi/math:ObservablePoint x=0 y=0 scope="+this.scope+"]"},Object.defineProperty(e.prototype,"x",{get:function(){return this._x},set:function(t){this._x!==t&&(this._x=t,this.cb.call(this.scope))},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"y",{get:function(){return this._y},set:function(t){this._y!==t&&(this._y=t,this.cb.call(this.scope))},enumerable:!1,configurable:!0}),e}(),gt=function(){function e(t,r,n,i,o,a){t===void 0&&(t=1),r===void 0&&(r=0),n===void 0&&(n=0),i===void 0&&(i=1),o===void 0&&(o=0),a===void 0&&(a=0),this.array=null,this.a=t,this.b=r,this.c=n,this.d=i,this.tx=o,this.ty=a}return e.prototype.fromArray=function(t){this.a=t[0],this.b=t[1],this.c=t[3],this.d=t[4],this.tx=t[2],this.ty=t[5]},e.prototype.set=function(t,r,n,i,o,a){return this.a=t,this.b=r,this.c=n,this.d=i,this.tx=o,this.ty=a,this},e.prototype.toArray=function(t,r){this.array||(this.array=new Float32Array(9));var n=r||this.array;return t?(n[0]=this.a,n[1]=this.b,n[2]=0,n[3]=this.c,n[4]=this.d,n[5]=0,n[6]=this.tx,n[7]=this.ty,n[8]=1):(n[0]=this.a,n[1]=this.c,n[2]=this.tx,n[3]=this.b,n[4]=this.d,n[5]=this.ty,n[6]=0,n[7]=0,n[8]=1),n},e.prototype.apply=function(t,r){r=r||new Pe;var n=t.x,i=t.y;return r.x=this.a*n+this.c*i+this.tx,r.y=this.b*n+this.d*i+this.ty,r},e.prototype.applyInverse=function(t,r){r=r||new Pe;var n=1/(this.a*this.d+this.c*-this.b),i=t.x,o=t.y;return r.x=this.d*n*i+-this.c*n*o+(this.ty*this.c-this.tx*this.d)*n,r.y=this.a*n*o+-this.b*n*i+(-this.ty*this.a+this.tx*this.b)*n,r},e.prototype.translate=function(t,r){return this.tx+=t,this.ty+=r,this},e.prototype.scale=function(t,r){return this.a*=t,this.d*=r,this.c*=t,this.b*=r,this.tx*=t,this.ty*=r,this},e.prototype.rotate=function(t){var r=Math.cos(t),n=Math.sin(t),i=this.a,o=this.c,a=this.tx;return this.a=i*r-this.b*n,this.b=i*n+this.b*r,this.c=o*r-this.d*n,this.d=o*n+this.d*r,this.tx=a*r-this.ty*n,this.ty=a*n+this.ty*r,this},e.prototype.append=function(t){var r=this.a,n=this.b,i=this.c,o=this.d;return this.a=t.a*r+t.b*i,this.b=t.a*n+t.b*o,this.c=t.c*r+t.d*i,this.d=t.c*n+t.d*o,this.tx=t.tx*r+t.ty*i+this.tx,this.ty=t.tx*n+t.ty*o+this.ty,this},e.prototype.setTransform=function(t,r,n,i,o,a,s,l,u){return this.a=Math.cos(s+u)*o,this.b=Math.sin(s+u)*o,this.c=-Math.sin(s-l)*a,this.d=Math.cos(s-l)*a,this.tx=t-(n*this.a+i*this.c),this.ty=r-(n*this.b+i*this.d),this},e.prototype.prepend=function(t){var r=this.tx;if(t.a!==1||t.b!==0||t.c!==0||t.d!==1){var n=this.a,i=this.c;this.a=n*t.a+this.b*t.c,this.b=n*t.b+this.b*t.d,this.c=i*t.a+this.d*t.c,this.d=i*t.b+this.d*t.d}return this.tx=r*t.a+this.ty*t.c+t.tx,this.ty=r*t.b+this.ty*t.d+t.ty,this},e.prototype.decompose=function(t){var r=this.a,n=this.b,i=this.c,o=this.d,a=t.pivot,s=-Math.atan2(-i,o),l=Math.atan2(n,r),u=Math.abs(s+l);return u<1e-5||Math.abs(Sc-u)<1e-5?(t.rotation=l,t.skew.x=t.skew.y=0):(t.rotation=0,t.skew.x=s,t.skew.y=l),t.scale.x=Math.sqrt(r*r+n*n),t.scale.y=Math.sqrt(i*i+o*o),t.position.x=this.tx+(a.x*r+a.y*i),t.position.y=this.ty+(a.x*n+a.y*o),t},e.prototype.invert=function(){var t=this.a,r=this.b,n=this.c,i=this.d,o=this.tx,a=t*i-r*n;return this.a=i/a,this.b=-r/a,this.c=-n/a,this.d=t/a,this.tx=(n*this.ty-i*o)/a,this.ty=-(t*this.ty-r*o)/a,this},e.prototype.identity=function(){return this.a=1,this.b=0,this.c=0,this.d=1,this.tx=0,this.ty=0,this},e.prototype.clone=function(){var t=new e;return t.a=this.a,t.b=this.b,t.c=this.c,t.d=this.d,t.tx=this.tx,t.ty=this.ty,t},e.prototype.copyTo=function(t){return t.a=this.a,t.b=this.b,t.c=this.c,t.d=this.d,t.tx=this.tx,t.ty=this.ty,t},e.prototype.copyFrom=function(t){return this.a=t.a,this.b=t.b,this.c=t.c,this.d=t.d,this.tx=t.tx,this.ty=t.ty,this},e.prototype.toString=function(){return"[@pixi/math:Matrix a="+this.a+" b="+this.b+" c="+this.c+" d="+this.d+" tx="+this.tx+" ty="+this.ty+"]"},Object.defineProperty(e,"IDENTITY",{get:function(){return new e},enumerable:!1,configurable:!0}),Object.defineProperty(e,"TEMP_MATRIX",{get:function(){return new e},enumerable:!1,configurable:!0}),e}(),ea=[1,1,0,-1,-1,-1,0,1,1,1,0,-1,-1,-1,0,1],ta=[0,1,1,1,0,-1,-1,-1,0,1,1,1,0,-1,-1,-1],ra=[0,-1,-1,-1,0,1,1,1,0,1,1,1,0,-1,-1,-1],na=[1,1,0,-1,-1,-1,0,1,-1,-1,0,1,1,1,0,-1],D_=[],ck=[],Rf=Math.sign;function qoe(){for(var e=0;e<16;e++){var t=[];D_.push(t);for(var r=0;r<16;r++)for(var n=Rf(ea[e]*ea[r]+ra[e]*ta[r]),i=Rf(ta[e]*ea[r]+na[e]*ta[r]),o=Rf(ea[e]*ra[r]+ra[e]*na[r]),a=Rf(ta[e]*ra[r]+na[e]*na[r]),s=0;s<16;s++)if(ea[s]===n&&ta[s]===i&&ra[s]===o&&na[s]===a){t.push(s);break}}for(var e=0;e<16;e++){var l=new gt;l.set(ea[e],ta[e],ra[e],na[e],0,0),ck.push(l)}}qoe();var pt={E:0,SE:1,S:2,SW:3,W:4,NW:5,N:6,NE:7,MIRROR_VERTICAL:8,MAIN_DIAGONAL:10,MIRROR_HORIZONTAL:12,REVERSE_DIAGONAL:14,uX:function(e){return ea[e]},uY:function(e){return ta[e]},vX:function(e){return ra[e]},vY:function(e){return na[e]},inv:function(e){return e&8?e&15:-e&7},add:function(e,t){return D_[e][t]},sub:function(e,t){return D_[e][pt.inv(t)]},rotate180:function(e){return e^4},isVertical:function(e){return(e&3)===2},byDirection:function(e,t){return Math.abs(e)*2<=Math.abs(t)?t>=0?pt.S:pt.N:Math.abs(t)*2<=Math.abs(e)?e>0?pt.E:pt.W:t>0?e>0?pt.SE:pt.SW:e>0?pt.NE:pt.NW},matrixAppendRotationInv:function(e,t,r,n){r===void 0&&(r=0),n===void 0&&(n=0);var i=ck[pt.inv(t)];i.tx=r,i.ty=n,e.append(i)}},Dp=function(){function e(){this.worldTransform=new gt,this.localTransform=new gt,this.position=new Li(this.onChange,this,0,0),this.scale=new Li(this.onChange,this,1,1),this.pivot=new Li(this.onChange,this,0,0),this.skew=new Li(this.updateSkew,this,0,0),this._rotation=0,this._cx=1,this._sx=0,this._cy=0,this._sy=1,this._localID=0,this._currentLocalID=0,this._worldID=0,this._parentID=0}return e.prototype.onChange=function(){this._localID++},e.prototype.updateSkew=function(){this._cx=Math.cos(this._rotation+this.skew.y),this._sx=Math.sin(this._rotation+this.skew.y),this._cy=-Math.sin(this._rotation-this.skew.x),this._sy=Math.cos(this._rotation-this.skew.x),this._localID++},e.prototype.toString=function(){return"[@pixi/math:Transform "+("position=("+this.position.x+", "+this.position.y+") ")+("rotation="+this.rotation+" ")+("scale=("+this.scale.x+", "+this.scale.y+") ")+("skew=("+this.skew.x+", "+this.skew.y+") ")+"]"},e.prototype.updateLocalTransform=function(){var t=this.localTransform;this._localID!==this._currentLocalID&&(t.a=this._cx*this.scale.x,t.b=this._sx*this.scale.x,t.c=this._cy*this.scale.y,t.d=this._sy*this.scale.y,t.tx=this.position.x-(this.pivot.x*t.a+this.pivot.y*t.c),t.ty=this.position.y-(this.pivot.x*t.b+this.pivot.y*t.d),this._currentLocalID=this._localID,this._parentID=-1)},e.prototype.updateTransform=function(t){var r=this.localTransform;if(this._localID!==this._currentLocalID&&(r.a=this._cx*this.scale.x,r.b=this._sx*this.scale.x,r.c=this._cy*this.scale.y,r.d=this._sy*this.scale.y,r.tx=this.position.x-(this.pivot.x*r.a+this.pivot.y*r.c),r.ty=this.position.y-(this.pivot.x*r.b+this.pivot.y*r.d),this._currentLocalID=this._localID,this._parentID=-1),this._parentID!==t._worldID){var n=t.worldTransform,i=this.worldTransform;i.a=r.a*n.a+r.b*n.c,i.b=r.a*n.b+r.b*n.d,i.c=r.c*n.a+r.d*n.c,i.d=r.c*n.b+r.d*n.d,i.tx=r.tx*n.a+r.ty*n.c+n.tx,i.ty=r.tx*n.b+r.ty*n.d+n.ty,this._parentID=t._worldID,this._worldID++}},e.prototype.setFromMatrix=function(t){t.decompose(this),this._localID++},Object.defineProperty(e.prototype,"rotation",{get:function(){return this._rotation},set:function(t){this._rotation!==t&&(this._rotation=t,this.updateSkew())},enumerable:!1,configurable:!0}),e.IDENTITY=new e,e}();/*!
 * @pixi/display - v6.5.10
 * Compiled Thu, 06 Jul 2023 15:25:11 UTC
 *
 * @pixi/display is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */ne.SORTABLE_CHILDREN=!1;var wc=function(){function e(){this.minX=1/0,this.minY=1/0,this.maxX=-1/0,this.maxY=-1/0,this.rect=null,this.updateID=-1}return e.prototype.isEmpty=function(){return this.minX>this.maxX||this.minY>this.maxY},e.prototype.clear=function(){this.minX=1/0,this.minY=1/0,this.maxX=-1/0,this.maxY=-1/0},e.prototype.getRectangle=function(t){return this.minX>this.maxX||this.minY>this.maxY?Fe.EMPTY:(t=t||new Fe(0,0,1,1),t.x=this.minX,t.y=this.minY,t.width=this.maxX-this.minX,t.height=this.maxY-this.minY,t)},e.prototype.addPoint=function(t){this.minX=Math.min(this.minX,t.x),this.maxX=Math.max(this.maxX,t.x),this.minY=Math.min(this.minY,t.y),this.maxY=Math.max(this.maxY,t.y)},e.prototype.addPointMatrix=function(t,r){var n=t.a,i=t.b,o=t.c,a=t.d,s=t.tx,l=t.ty,u=n*r.x+o*r.y+s,c=i*r.x+a*r.y+l;this.minX=Math.min(this.minX,u),this.maxX=Math.max(this.maxX,u),this.minY=Math.min(this.minY,c),this.maxY=Math.max(this.maxY,c)},e.prototype.addQuad=function(t){var r=this.minX,n=this.minY,i=this.maxX,o=this.maxY,a=t[0],s=t[1];r=a<r?a:r,n=s<n?s:n,i=a>i?a:i,o=s>o?s:o,a=t[2],s=t[3],r=a<r?a:r,n=s<n?s:n,i=a>i?a:i,o=s>o?s:o,a=t[4],s=t[5],r=a<r?a:r,n=s<n?s:n,i=a>i?a:i,o=s>o?s:o,a=t[6],s=t[7],r=a<r?a:r,n=s<n?s:n,i=a>i?a:i,o=s>o?s:o,this.minX=r,this.minY=n,this.maxX=i,this.maxY=o},e.prototype.addFrame=function(t,r,n,i,o){this.addFrameMatrix(t.worldTransform,r,n,i,o)},e.prototype.addFrameMatrix=function(t,r,n,i,o){var a=t.a,s=t.b,l=t.c,u=t.d,c=t.tx,f=t.ty,h=this.minX,d=this.minY,m=this.maxX,g=this.maxY,p=a*r+l*n+c,v=s*r+u*n+f;h=p<h?p:h,d=v<d?v:d,m=p>m?p:m,g=v>g?v:g,p=a*i+l*n+c,v=s*i+u*n+f,h=p<h?p:h,d=v<d?v:d,m=p>m?p:m,g=v>g?v:g,p=a*r+l*o+c,v=s*r+u*o+f,h=p<h?p:h,d=v<d?v:d,m=p>m?p:m,g=v>g?v:g,p=a*i+l*o+c,v=s*i+u*o+f,h=p<h?p:h,d=v<d?v:d,m=p>m?p:m,g=v>g?v:g,this.minX=h,this.minY=d,this.maxX=m,this.maxY=g},e.prototype.addVertexData=function(t,r,n){for(var i=this.minX,o=this.minY,a=this.maxX,s=this.maxY,l=r;l<n;l+=2){var u=t[l],c=t[l+1];i=u<i?u:i,o=c<o?c:o,a=u>a?u:a,s=c>s?c:s}this.minX=i,this.minY=o,this.maxX=a,this.maxY=s},e.prototype.addVertices=function(t,r,n,i){this.addVerticesMatrix(t.worldTransform,r,n,i)},e.prototype.addVerticesMatrix=function(t,r,n,i,o,a){o===void 0&&(o=0),a===void 0&&(a=o);for(var s=t.a,l=t.b,u=t.c,c=t.d,f=t.tx,h=t.ty,d=this.minX,m=this.minY,g=this.maxX,p=this.maxY,v=n;v<i;v+=2){var y=r[v],_=r[v+1],x=s*y+u*_+f,b=c*_+l*y+h;d=Math.min(d,x-o),g=Math.max(g,x+o),m=Math.min(m,b-a),p=Math.max(p,b+a)}this.minX=d,this.minY=m,this.maxX=g,this.maxY=p},e.prototype.addBounds=function(t){var r=this.minX,n=this.minY,i=this.maxX,o=this.maxY;this.minX=t.minX<r?t.minX:r,this.minY=t.minY<n?t.minY:n,this.maxX=t.maxX>i?t.maxX:i,this.maxY=t.maxY>o?t.maxY:o},e.prototype.addBoundsMask=function(t,r){var n=t.minX>r.minX?t.minX:r.minX,i=t.minY>r.minY?t.minY:r.minY,o=t.maxX<r.maxX?t.maxX:r.maxX,a=t.maxY<r.maxY?t.maxY:r.maxY;if(n<=o&&i<=a){var s=this.minX,l=this.minY,u=this.maxX,c=this.maxY;this.minX=n<s?n:s,this.minY=i<l?i:l,this.maxX=o>u?o:u,this.maxY=a>c?a:c}},e.prototype.addBoundsMatrix=function(t,r){this.addFrameMatrix(r,t.minX,t.minY,t.maxX,t.maxY)},e.prototype.addBoundsArea=function(t,r){var n=t.minX>r.x?t.minX:r.x,i=t.minY>r.y?t.minY:r.y,o=t.maxX<r.x+r.width?t.maxX:r.x+r.width,a=t.maxY<r.y+r.height?t.maxY:r.y+r.height;if(n<=o&&i<=a){var s=this.minX,l=this.minY,u=this.maxX,c=this.maxY;this.minX=n<s?n:s,this.minY=i<l?i:l,this.maxX=o>u?o:u,this.maxY=a>c?a:c}},e.prototype.pad=function(t,r){t===void 0&&(t=0),r===void 0&&(r=t),this.isEmpty()||(this.minX-=t,this.maxX+=t,this.minY-=r,this.maxY+=r)},e.prototype.addFramePad=function(t,r,n,i,o,a){t-=o,r-=a,n+=o,i+=a,this.minX=this.minX<t?this.minX:t,this.maxX=this.maxX>n?this.maxX:n,this.minY=this.minY<r?this.minY:r,this.maxY=this.maxY>i?this.maxY:i},e}();/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var N_=function(e,t){return N_=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)n.hasOwnProperty(i)&&(r[i]=n[i])},N_(e,t)};function d1(e,t){N_(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}var At=function(e){d1(t,e);function t(){var r=e.call(this)||this;return r.tempDisplayObjectParent=null,r.transform=new Dp,r.alpha=1,r.visible=!0,r.renderable=!0,r.cullable=!1,r.cullArea=null,r.parent=null,r.worldAlpha=1,r._lastSortedIndex=0,r._zIndex=0,r.filterArea=null,r.filters=null,r._enabledFilters=null,r._bounds=new wc,r._localBounds=null,r._boundsID=0,r._boundsRect=null,r._localBoundsRect=null,r._mask=null,r._maskRefCount=0,r._destroyed=!1,r.isSprite=!1,r.isMask=!1,r}return t.mixin=function(r){for(var n=Object.keys(r),i=0;i<n.length;++i){var o=n[i];Object.defineProperty(t.prototype,o,Object.getOwnPropertyDescriptor(r,o))}},Object.defineProperty(t.prototype,"destroyed",{get:function(){return this._destroyed},enumerable:!1,configurable:!0}),t.prototype._recursivePostUpdateTransform=function(){this.parent?(this.parent._recursivePostUpdateTransform(),this.transform.updateTransform(this.parent.transform)):this.transform.updateTransform(this._tempDisplayObjectParent.transform)},t.prototype.updateTransform=function(){this._boundsID++,this.transform.updateTransform(this.parent.transform),this.worldAlpha=this.alpha*this.parent.worldAlpha},t.prototype.getBounds=function(r,n){return r||(this.parent?(this._recursivePostUpdateTransform(),this.updateTransform()):(this.parent=this._tempDisplayObjectParent,this.updateTransform(),this.parent=null)),this._bounds.updateID!==this._boundsID&&(this.calculateBounds(),this._bounds.updateID=this._boundsID),n||(this._boundsRect||(this._boundsRect=new Fe),n=this._boundsRect),this._bounds.getRectangle(n)},t.prototype.getLocalBounds=function(r){r||(this._localBoundsRect||(this._localBoundsRect=new Fe),r=this._localBoundsRect),this._localBounds||(this._localBounds=new wc);var n=this.transform,i=this.parent;this.parent=null,this.transform=this._tempDisplayObjectParent.transform;var o=this._bounds,a=this._boundsID;this._bounds=this._localBounds;var s=this.getBounds(!1,r);return this.parent=i,this.transform=n,this._bounds=o,this._bounds.updateID+=this._boundsID-a,s},t.prototype.toGlobal=function(r,n,i){return i===void 0&&(i=!1),i||(this._recursivePostUpdateTransform(),this.parent?this.displayObjectUpdateTransform():(this.parent=this._tempDisplayObjectParent,this.displayObjectUpdateTransform(),this.parent=null)),this.worldTransform.apply(r,n)},t.prototype.toLocal=function(r,n,i,o){return n&&(r=n.toGlobal(r,i,o)),o||(this._recursivePostUpdateTransform(),this.parent?this.displayObjectUpdateTransform():(this.parent=this._tempDisplayObjectParent,this.displayObjectUpdateTransform(),this.parent=null)),this.worldTransform.applyInverse(r,i)},t.prototype.setParent=function(r){if(!r||!r.addChild)throw new Error("setParent: Argument must be a Container");return r.addChild(this),r},t.prototype.setTransform=function(r,n,i,o,a,s,l,u,c){return r===void 0&&(r=0),n===void 0&&(n=0),i===void 0&&(i=1),o===void 0&&(o=1),a===void 0&&(a=0),s===void 0&&(s=0),l===void 0&&(l=0),u===void 0&&(u=0),c===void 0&&(c=0),this.position.x=r,this.position.y=n,this.scale.x=i||1,this.scale.y=o||1,this.rotation=a,this.skew.x=s,this.skew.y=l,this.pivot.x=u,this.pivot.y=c,this},t.prototype.destroy=function(r){this.parent&&this.parent.removeChild(this),this._destroyed=!0,this.transform=null,this.parent=null,this._bounds=null,this.mask=null,this.cullArea=null,this.filters=null,this.filterArea=null,this.hitArea=null,this.interactive=!1,this.interactiveChildren=!1,this.emit("destroyed"),this.removeAllListeners()},Object.defineProperty(t.prototype,"_tempDisplayObjectParent",{get:function(){return this.tempDisplayObjectParent===null&&(this.tempDisplayObjectParent=new p1),this.tempDisplayObjectParent},enumerable:!1,configurable:!0}),t.prototype.enableTempParent=function(){var r=this.parent;return this.parent=this._tempDisplayObjectParent,r},t.prototype.disableTempParent=function(r){this.parent=r},Object.defineProperty(t.prototype,"x",{get:function(){return this.position.x},set:function(r){this.transform.position.x=r},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"y",{get:function(){return this.position.y},set:function(r){this.transform.position.y=r},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"worldTransform",{get:function(){return this.transform.worldTransform},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"localTransform",{get:function(){return this.transform.localTransform},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"position",{get:function(){return this.transform.position},set:function(r){this.transform.position.copyFrom(r)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"scale",{get:function(){return this.transform.scale},set:function(r){this.transform.scale.copyFrom(r)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"pivot",{get:function(){return this.transform.pivot},set:function(r){this.transform.pivot.copyFrom(r)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"skew",{get:function(){return this.transform.skew},set:function(r){this.transform.skew.copyFrom(r)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"rotation",{get:function(){return this.transform.rotation},set:function(r){this.transform.rotation=r},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"angle",{get:function(){return this.transform.rotation*ak},set:function(r){this.transform.rotation=r*ko},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"zIndex",{get:function(){return this._zIndex},set:function(r){this._zIndex=r,this.parent&&(this.parent.sortDirty=!0)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"worldVisible",{get:function(){var r=this;do{if(!r.visible)return!1;r=r.parent}while(r);return!0},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"mask",{get:function(){return this._mask},set:function(r){if(this._mask!==r){if(this._mask){var n=this._mask.isMaskData?this._mask.maskObject:this._mask;n&&(n._maskRefCount--,n._maskRefCount===0&&(n.renderable=!0,n.isMask=!1))}if(this._mask=r,this._mask){var n=this._mask.isMaskData?this._mask.maskObject:this._mask;n&&(n._maskRefCount===0&&(n.renderable=!1,n.isMask=!0),n._maskRefCount++)}}},enumerable:!1,configurable:!0}),t}(Vi),p1=function(e){d1(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.sortDirty=null,r}return t}(At);At.prototype.displayObjectUpdateTransform=At.prototype.updateTransform;function Yoe(e,t){return e.zIndex===t.zIndex?e._lastSortedIndex-t._lastSortedIndex:e.zIndex-t.zIndex}var _r=function(e){d1(t,e);function t(){var r=e.call(this)||this;return r.children=[],r.sortableChildren=ne.SORTABLE_CHILDREN,r.sortDirty=!1,r}return t.prototype.onChildrenChange=function(r){},t.prototype.addChild=function(){for(var r=arguments,n=[],i=0;i<arguments.length;i++)n[i]=r[i];if(n.length>1)for(var o=0;o<n.length;o++)this.addChild(n[o]);else{var a=n[0];a.parent&&a.parent.removeChild(a),a.parent=this,this.sortDirty=!0,a.transform._parentID=-1,this.children.push(a),this._boundsID++,this.onChildrenChange(this.children.length-1),this.emit("childAdded",a,this,this.children.length-1),a.emit("added",this)}return n[0]},t.prototype.addChildAt=function(r,n){if(n<0||n>this.children.length)throw new Error(r+"addChildAt: The index "+n+" supplied is out of bounds "+this.children.length);return r.parent&&r.parent.removeChild(r),r.parent=this,this.sortDirty=!0,r.transform._parentID=-1,this.children.splice(n,0,r),this._boundsID++,this.onChildrenChange(n),r.emit("added",this),this.emit("childAdded",r,this,n),r},t.prototype.swapChildren=function(r,n){if(r!==n){var i=this.getChildIndex(r),o=this.getChildIndex(n);this.children[i]=n,this.children[o]=r,this.onChildrenChange(i<o?i:o)}},t.prototype.getChildIndex=function(r){var n=this.children.indexOf(r);if(n===-1)throw new Error("The supplied DisplayObject must be a child of the caller");return n},t.prototype.setChildIndex=function(r,n){if(n<0||n>=this.children.length)throw new Error("The index "+n+" supplied is out of bounds "+this.children.length);var i=this.getChildIndex(r);xa(this.children,i,1),this.children.splice(n,0,r),this.onChildrenChange(n)},t.prototype.getChildAt=function(r){if(r<0||r>=this.children.length)throw new Error("getChildAt: Index ("+r+") does not exist.");return this.children[r]},t.prototype.removeChild=function(){for(var r=arguments,n=[],i=0;i<arguments.length;i++)n[i]=r[i];if(n.length>1)for(var o=0;o<n.length;o++)this.removeChild(n[o]);else{var a=n[0],s=this.children.indexOf(a);if(s===-1)return null;a.parent=null,a.transform._parentID=-1,xa(this.children,s,1),this._boundsID++,this.onChildrenChange(s),a.emit("removed",this),this.emit("childRemoved",a,this,s)}return n[0]},t.prototype.removeChildAt=function(r){var n=this.getChildAt(r);return n.parent=null,n.transform._parentID=-1,xa(this.children,r,1),this._boundsID++,this.onChildrenChange(r),n.emit("removed",this),this.emit("childRemoved",n,this,r),n},t.prototype.removeChildren=function(r,n){r===void 0&&(r=0),n===void 0&&(n=this.children.length);var i=r,o=n,a=o-i,s;if(a>0&&a<=o){s=this.children.splice(i,a);for(var l=0;l<s.length;++l)s[l].parent=null,s[l].transform&&(s[l].transform._parentID=-1);this._boundsID++,this.onChildrenChange(r);for(var l=0;l<s.length;++l)s[l].emit("removed",this),this.emit("childRemoved",s[l],this,l);return s}else if(a===0&&this.children.length===0)return[];throw new RangeError("removeChildren: numeric values are outside the acceptable range.")},t.prototype.sortChildren=function(){for(var r=!1,n=0,i=this.children.length;n<i;++n){var o=this.children[n];o._lastSortedIndex=n,!r&&o.zIndex!==0&&(r=!0)}r&&this.children.length>1&&this.children.sort(Yoe),this.sortDirty=!1},t.prototype.updateTransform=function(){this.sortableChildren&&this.sortDirty&&this.sortChildren(),this._boundsID++,this.transform.updateTransform(this.parent.transform),this.worldAlpha=this.alpha*this.parent.worldAlpha;for(var r=0,n=this.children.length;r<n;++r){var i=this.children[r];i.visible&&i.updateTransform()}},t.prototype.calculateBounds=function(){this._bounds.clear(),this._calculateBounds();for(var r=0;r<this.children.length;r++){var n=this.children[r];if(!(!n.visible||!n.renderable))if(n.calculateBounds(),n._mask){var i=n._mask.isMaskData?n._mask.maskObject:n._mask;i?(i.calculateBounds(),this._bounds.addBoundsMask(n._bounds,i._bounds)):this._bounds.addBounds(n._bounds)}else n.filterArea?this._bounds.addBoundsArea(n._bounds,n.filterArea):this._bounds.addBounds(n._bounds)}this._bounds.updateID=this._boundsID},t.prototype.getLocalBounds=function(r,n){n===void 0&&(n=!1);var i=e.prototype.getLocalBounds.call(this,r);if(!n)for(var o=0,a=this.children.length;o<a;++o){var s=this.children[o];s.visible&&s.updateTransform()}return i},t.prototype._calculateBounds=function(){},t.prototype._renderWithCulling=function(r){var n=r.renderTexture.sourceFrame;if(n.width>0&&n.height>0){var i,o;if(this.cullArea?(i=this.cullArea,o=this.worldTransform):this._render!==t.prototype._render&&(i=this.getBounds(!0)),i&&n.intersects(i,o))this._render(r);else if(this.cullArea)return;for(var a=0,s=this.children.length;a<s;++a){var l=this.children[a],u=l.cullable;l.cullable=u||!this.cullArea,l.render(r),l.cullable=u}}},t.prototype.render=function(r){if(!(!this.visible||this.worldAlpha<=0||!this.renderable))if(this._mask||this.filters&&this.filters.length)this.renderAdvanced(r);else if(this.cullable)this._renderWithCulling(r);else{this._render(r);for(var n=0,i=this.children.length;n<i;++n)this.children[n].render(r)}},t.prototype.renderAdvanced=function(r){var n=this.filters,i=this._mask;if(n){this._enabledFilters||(this._enabledFilters=[]),this._enabledFilters.length=0;for(var o=0;o<n.length;o++)n[o].enabled&&this._enabledFilters.push(n[o])}var a=n&&this._enabledFilters&&this._enabledFilters.length||i&&(!i.isMaskData||i.enabled&&(i.autoDetect||i.type!==Mt.NONE));if(a&&r.batch.flush(),n&&this._enabledFilters&&this._enabledFilters.length&&r.filter.push(this,this._enabledFilters),i&&r.mask.push(this,this._mask),this.cullable)this._renderWithCulling(r);else{this._render(r);for(var o=0,s=this.children.length;o<s;++o)this.children[o].render(r)}a&&r.batch.flush(),i&&r.mask.pop(this),n&&this._enabledFilters&&this._enabledFilters.length&&r.filter.pop()},t.prototype._render=function(r){},t.prototype.destroy=function(r){e.prototype.destroy.call(this),this.sortDirty=!1;var n=typeof r=="boolean"?r:r&&r.children,i=this.removeChildren(0,this.children.length);if(n)for(var o=0;o<i.length;++o)i[o].destroy(r)},Object.defineProperty(t.prototype,"width",{get:function(){return this.scale.x*this.getLocalBounds().width},set:function(r){var n=this.getLocalBounds().width;n!==0?this.scale.x=r/n:this.scale.x=1,this._width=r},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"height",{get:function(){return this.scale.y*this.getLocalBounds().height},set:function(r){var n=this.getLocalBounds().height;n!==0?this.scale.y=r/n:this.scale.y=1,this._height=r},enumerable:!1,configurable:!0}),t}(At);_r.prototype.containerUpdateTransform=_r.prototype.updateTransform;/*!
 * @pixi/extensions - v6.5.10
 * Compiled Thu, 06 Jul 2023 15:25:11 UTC
 *
 * @pixi/extensions is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 *//*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var Vu=function(){return Vu=Object.assign||function(t){for(var r=arguments,n,i=1,o=arguments.length;i<o;i++){n=r[i];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(t[a]=n[a])}return t},Vu.apply(this,arguments)},Ye;(function(e){e.Application="application",e.RendererPlugin="renderer-webgl-plugin",e.CanvasRendererPlugin="renderer-canvas-plugin",e.Loader="loader",e.LoadParser="load-parser",e.ResolveParser="resolve-parser",e.CacheParser="cache-parser",e.DetectionParser="detection-parser"})(Ye||(Ye={}));var _P=function(e){if(typeof e=="function"||typeof e=="object"&&e.extension){if(!e.extension)throw new Error("Extension class must have an extension object");var t=typeof e.extension!="object"?{type:e.extension}:e.extension;e=Vu(Vu({},t),{ref:e})}if(typeof e=="object")e=Vu({},e);else throw new Error("Invalid extension type");return typeof e.type=="string"&&(e.type=[e.type]),e},Si={_addHandlers:null,_removeHandlers:null,_queue:{},remove:function(){for(var e=arguments,t=this,r=[],n=0;n<arguments.length;n++)r[n]=e[n];return r.map(_P).forEach(function(i){i.type.forEach(function(o){var a,s;return(s=(a=t._removeHandlers)[o])===null||s===void 0?void 0:s.call(a,i)})}),this},add:function(){for(var e=arguments,t=this,r=[],n=0;n<arguments.length;n++)r[n]=e[n];return r.map(_P).forEach(function(i){i.type.forEach(function(o){var a=t._addHandlers,s=t._queue;a[o]?a[o](i):(s[o]=s[o]||[],s[o].push(i))})}),this},handle:function(e,t,r){var n=this._addHandlers=this._addHandlers||{},i=this._removeHandlers=this._removeHandlers||{};if(n[e]||i[e])throw new Error("Extension type "+e+" already has a handler");n[e]=t,i[e]=r;var o=this._queue;return o[e]&&(o[e].forEach(function(a){return t(a)}),delete o[e]),this},handleByMap:function(e,t){return this.handle(e,function(r){t[r.name]=r.ref},function(r){delete t[r.name]})},handleByList:function(e,t){return this.handle(e,function(r){var n,i;t.includes(r.ref)||(t.push(r.ref),e===Ye.Loader&&((i=(n=r.ref).add)===null||i===void 0||i.call(n)))},function(r){var n=t.indexOf(r.ref);n!==-1&&t.splice(n,1)})}};/*!
 * @pixi/runner - v6.5.10
 * Compiled Thu, 06 Jul 2023 15:25:11 UTC
 *
 * @pixi/runner is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */var Yt=function(){function e(t){this.items=[],this._name=t,this._aliasCount=0}return e.prototype.emit=function(t,r,n,i,o,a,s,l){if(arguments.length>8)throw new Error("max arguments reached");var u=this,c=u.name,f=u.items;this._aliasCount++;for(var h=0,d=f.length;h<d;h++)f[h][c](t,r,n,i,o,a,s,l);return f===this.items&&this._aliasCount--,this},e.prototype.ensureNonAliasedItems=function(){this._aliasCount>0&&this.items.length>1&&(this._aliasCount=0,this.items=this.items.slice(0))},e.prototype.add=function(t){return t[this._name]&&(this.ensureNonAliasedItems(),this.remove(t),this.items.push(t)),this},e.prototype.remove=function(t){var r=this.items.indexOf(t);return r!==-1&&(this.ensureNonAliasedItems(),this.items.splice(r,1)),this},e.prototype.contains=function(t){return this.items.indexOf(t)!==-1},e.prototype.removeAll=function(){return this.ensureNonAliasedItems(),this.items.length=0,this},e.prototype.destroy=function(){this.removeAll(),this.items=null,this._name=null},Object.defineProperty(e.prototype,"empty",{get:function(){return this.items.length===0},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"name",{get:function(){return this._name},enumerable:!1,configurable:!0}),e}();Object.defineProperties(Yt.prototype,{dispatch:{value:Yt.prototype.emit},run:{value:Yt.prototype.emit}});/*!
 * @pixi/ticker - v6.5.10
 * Compiled Thu, 06 Jul 2023 15:25:11 UTC
 *
 * @pixi/ticker is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */ne.TARGET_FPMS=.06;var mi;(function(e){e[e.INTERACTION=50]="INTERACTION",e[e.HIGH=25]="HIGH",e[e.NORMAL=0]="NORMAL",e[e.LOW=-25]="LOW",e[e.UTILITY=-50]="UTILITY"})(mi||(mi={}));var vg=function(){function e(t,r,n,i){r===void 0&&(r=null),n===void 0&&(n=0),i===void 0&&(i=!1),this.next=null,this.previous=null,this._destroyed=!1,this.fn=t,this.context=r,this.priority=n,this.once=i}return e.prototype.match=function(t,r){return r===void 0&&(r=null),this.fn===t&&this.context===r},e.prototype.emit=function(t){this.fn&&(this.context?this.fn.call(this.context,t):this.fn(t));var r=this.next;return this.once&&this.destroy(!0),this._destroyed&&(this.next=null),r},e.prototype.connect=function(t){this.previous=t,t.next&&(t.next.previous=this),this.next=t.next,t.next=this},e.prototype.destroy=function(t){t===void 0&&(t=!1),this._destroyed=!0,this.fn=null,this.context=null,this.previous&&(this.previous.next=this.next),this.next&&(this.next.previous=this.previous);var r=this.next;return this.next=t?null:r,this.previous=null,r},e}(),Kt=function(){function e(){var t=this;this.autoStart=!1,this.deltaTime=1,this.lastTime=-1,this.speed=1,this.started=!1,this._requestId=null,this._maxElapsedMS=100,this._minElapsedMS=0,this._protected=!1,this._lastFrame=-1,this._head=new vg(null,null,1/0),this.deltaMS=1/ne.TARGET_FPMS,this.elapsedMS=1/ne.TARGET_FPMS,this._tick=function(r){t._requestId=null,t.started&&(t.update(r),t.started&&t._requestId===null&&t._head.next&&(t._requestId=requestAnimationFrame(t._tick)))}}return e.prototype._requestIfNeeded=function(){this._requestId===null&&this._head.next&&(this.lastTime=performance.now(),this._lastFrame=this.lastTime,this._requestId=requestAnimationFrame(this._tick))},e.prototype._cancelIfNeeded=function(){this._requestId!==null&&(cancelAnimationFrame(this._requestId),this._requestId=null)},e.prototype._startIfPossible=function(){this.started?this._requestIfNeeded():this.autoStart&&this.start()},e.prototype.add=function(t,r,n){return n===void 0&&(n=mi.NORMAL),this._addListener(new vg(t,r,n))},e.prototype.addOnce=function(t,r,n){return n===void 0&&(n=mi.NORMAL),this._addListener(new vg(t,r,n,!0))},e.prototype._addListener=function(t){var r=this._head.next,n=this._head;if(!r)t.connect(n);else{for(;r;){if(t.priority>r.priority){t.connect(n);break}n=r,r=r.next}t.previous||t.connect(n)}return this._startIfPossible(),this},e.prototype.remove=function(t,r){for(var n=this._head.next;n;)n.match(t,r)?n=n.destroy():n=n.next;return this._head.next||this._cancelIfNeeded(),this},Object.defineProperty(e.prototype,"count",{get:function(){if(!this._head)return 0;for(var t=0,r=this._head;r=r.next;)t++;return t},enumerable:!1,configurable:!0}),e.prototype.start=function(){this.started||(this.started=!0,this._requestIfNeeded())},e.prototype.stop=function(){this.started&&(this.started=!1,this._cancelIfNeeded())},e.prototype.destroy=function(){if(!this._protected){this.stop();for(var t=this._head.next;t;)t=t.destroy(!0);this._head.destroy(),this._head=null}},e.prototype.update=function(t){t===void 0&&(t=performance.now());var r;if(t>this.lastTime){if(r=this.elapsedMS=t-this.lastTime,r>this._maxElapsedMS&&(r=this._maxElapsedMS),r*=this.speed,this._minElapsedMS){var n=t-this._lastFrame|0;if(n<this._minElapsedMS)return;this._lastFrame=t-n%this._minElapsedMS}this.deltaMS=r,this.deltaTime=this.deltaMS*ne.TARGET_FPMS;for(var i=this._head,o=i.next;o;)o=o.emit(this.deltaTime);i.next||this._cancelIfNeeded()}else this.deltaTime=this.deltaMS=this.elapsedMS=0;this.lastTime=t},Object.defineProperty(e.prototype,"FPS",{get:function(){return 1e3/this.elapsedMS},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"minFPS",{get:function(){return 1e3/this._maxElapsedMS},set:function(t){var r=Math.min(this.maxFPS,t),n=Math.min(Math.max(0,r)/1e3,ne.TARGET_FPMS);this._maxElapsedMS=1/n},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"maxFPS",{get:function(){return this._minElapsedMS?Math.round(1e3/this._minElapsedMS):0},set:function(t){if(t===0)this._minElapsedMS=0;else{var r=Math.max(this.minFPS,t);this._minElapsedMS=1/(r/1e3)}},enumerable:!1,configurable:!0}),Object.defineProperty(e,"shared",{get:function(){if(!e._shared){var t=e._shared=new e;t.autoStart=!0,t._protected=!0}return e._shared},enumerable:!1,configurable:!0}),Object.defineProperty(e,"system",{get:function(){if(!e._system){var t=e._system=new e;t.autoStart=!0,t._protected=!0}return e._system},enumerable:!1,configurable:!0}),e}(),fk=function(){function e(){}return e.init=function(t){var r=this;t=Object.assign({autoStart:!0,sharedTicker:!1},t),Object.defineProperty(this,"ticker",{set:function(n){this._ticker&&this._ticker.remove(this.render,this),this._ticker=n,n&&n.add(this.render,this,mi.LOW)},get:function(){return this._ticker}}),this.stop=function(){r._ticker.stop()},this.start=function(){r._ticker.start()},this._ticker=null,this.ticker=t.sharedTicker?Kt.shared:new Kt,t.autoStart&&this.start()},e.destroy=function(){if(this._ticker){var t=this._ticker;this.ticker=null,t.destroy()}},e.extension=Ye.Application,e}();/*!
 * @pixi/core - v6.5.10
 * Compiled Thu, 06 Jul 2023 15:25:11 UTC
 *
 * @pixi/core is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */ne.PREFER_ENV=mn.any?pi.WEBGL:pi.WEBGL2;ne.STRICT_TEXTURE_CACHE=!1;var Ec=[];function Np(e,t){if(!e)return null;var r="";if(typeof e=="string"){var n=/\.(\w{3,4})(?:$|\?|#)/i.exec(e);n&&(r=n[1].toLowerCase())}for(var i=Ec.length-1;i>=0;--i){var o=Ec[i];if(o.test&&o.test(e,r))return new o(e,t)}throw new Error("Unrecognized source type to auto-detect Resource")}/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var B_=function(e,t){return B_=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)n.hasOwnProperty(i)&&(r[i]=n[i])},B_(e,t)};function st(e,t){B_(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}var j_=function(){return j_=Object.assign||function(t){for(var r=arguments,n,i=1,o=arguments.length;i<o;i++){n=r[i];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(t[a]=n[a])}return t},j_.apply(this,arguments)};function Koe(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(e);i<n.length;i++)t.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(e,n[i])&&(r[n[i]]=e[n[i]]);return r}var Ia=function(){function e(t,r){t===void 0&&(t=0),r===void 0&&(r=0),this._width=t,this._height=r,this.destroyed=!1,this.internal=!1,this.onResize=new Yt("setRealSize"),this.onUpdate=new Yt("update"),this.onError=new Yt("onError")}return e.prototype.bind=function(t){this.onResize.add(t),this.onUpdate.add(t),this.onError.add(t),(this._width||this._height)&&this.onResize.emit(this._width,this._height)},e.prototype.unbind=function(t){this.onResize.remove(t),this.onUpdate.remove(t),this.onError.remove(t)},e.prototype.resize=function(t,r){(t!==this._width||r!==this._height)&&(this._width=t,this._height=r,this.onResize.emit(t,r))},Object.defineProperty(e.prototype,"valid",{get:function(){return!!this._width&&!!this._height},enumerable:!1,configurable:!0}),e.prototype.update=function(){this.destroyed||this.onUpdate.emit()},e.prototype.load=function(){return Promise.resolve(this)},Object.defineProperty(e.prototype,"width",{get:function(){return this._width},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"height",{get:function(){return this._height},enumerable:!1,configurable:!0}),e.prototype.style=function(t,r,n){return!1},e.prototype.dispose=function(){},e.prototype.destroy=function(){this.destroyed||(this.destroyed=!0,this.dispose(),this.onError.removeAll(),this.onError=null,this.onResize.removeAll(),this.onResize=null,this.onUpdate.removeAll(),this.onUpdate=null)},e.test=function(t,r){return!1},e}(),za=function(e){st(t,e);function t(r,n){var i=this,o=n||{},a=o.width,s=o.height;if(!a||!s)throw new Error("BufferResource width or height invalid");return i=e.call(this,a,s)||this,i.data=r,i}return t.prototype.upload=function(r,n,i){var o=r.gl;o.pixelStorei(o.UNPACK_PREMULTIPLY_ALPHA_WEBGL,n.alphaMode===bn.UNPACK);var a=n.realWidth,s=n.realHeight;return i.width===a&&i.height===s?o.texSubImage2D(n.target,0,0,0,a,s,n.format,i.type,this.data):(i.width=a,i.height=s,o.texImage2D(n.target,0,i.internalFormat,a,s,0,n.format,i.type,this.data)),!0},t.prototype.dispose=function(){this.data=null},t.test=function(r){return r instanceof Float32Array||r instanceof Uint8Array||r instanceof Uint32Array},t}(Ia),Zoe={scaleMode:Br.NEAREST,format:Q.RGBA,alphaMode:bn.NPM},Le=function(e){st(t,e);function t(r,n){r===void 0&&(r=null),n===void 0&&(n=null);var i=e.call(this)||this;n=n||{};var o=n.alphaMode,a=n.mipmap,s=n.anisotropicLevel,l=n.scaleMode,u=n.width,c=n.height,f=n.wrapMode,h=n.format,d=n.type,m=n.target,g=n.resolution,p=n.resourceOptions;return r&&!(r instanceof Ia)&&(r=Np(r,p),r.internal=!0),i.resolution=g||ne.RESOLUTION,i.width=Math.round((u||0)*i.resolution)/i.resolution,i.height=Math.round((c||0)*i.resolution)/i.resolution,i._mipmap=a!==void 0?a:ne.MIPMAP_TEXTURES,i.anisotropicLevel=s!==void 0?s:ne.ANISOTROPIC_LEVEL,i._wrapMode=f||ne.WRAP_MODE,i._scaleMode=l!==void 0?l:ne.SCALE_MODE,i.format=h||Q.RGBA,i.type=d||fe.UNSIGNED_BYTE,i.target=m||So.TEXTURE_2D,i.alphaMode=o!==void 0?o:bn.UNPACK,i.uid=Ro(),i.touched=0,i.isPowerOfTwo=!1,i._refreshPOT(),i._glTextures={},i.dirtyId=0,i.dirtyStyleId=0,i.cacheId=null,i.valid=u>0&&c>0,i.textureCacheIds=[],i.destroyed=!1,i.resource=null,i._batchEnabled=0,i._batchLocation=0,i.parentTextureArray=null,i.setResource(r),i}return Object.defineProperty(t.prototype,"realWidth",{get:function(){return Math.round(this.width*this.resolution)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"realHeight",{get:function(){return Math.round(this.height*this.resolution)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"mipmap",{get:function(){return this._mipmap},set:function(r){this._mipmap!==r&&(this._mipmap=r,this.dirtyStyleId++)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"scaleMode",{get:function(){return this._scaleMode},set:function(r){this._scaleMode!==r&&(this._scaleMode=r,this.dirtyStyleId++)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"wrapMode",{get:function(){return this._wrapMode},set:function(r){this._wrapMode!==r&&(this._wrapMode=r,this.dirtyStyleId++)},enumerable:!1,configurable:!0}),t.prototype.setStyle=function(r,n){var i;return r!==void 0&&r!==this.scaleMode&&(this.scaleMode=r,i=!0),n!==void 0&&n!==this.mipmap&&(this.mipmap=n,i=!0),i&&this.dirtyStyleId++,this},t.prototype.setSize=function(r,n,i){return i=i||this.resolution,this.setRealSize(r*i,n*i,i)},t.prototype.setRealSize=function(r,n,i){return this.resolution=i||this.resolution,this.width=Math.round(r)/this.resolution,this.height=Math.round(n)/this.resolution,this._refreshPOT(),this.update(),this},t.prototype._refreshPOT=function(){this.isPowerOfTwo=R_(this.realWidth)&&R_(this.realHeight)},t.prototype.setResolution=function(r){var n=this.resolution;return n===r?this:(this.resolution=r,this.valid&&(this.width=Math.round(this.width*n)/r,this.height=Math.round(this.height*n)/r,this.emit("update",this)),this._refreshPOT(),this)},t.prototype.setResource=function(r){if(this.resource===r)return this;if(this.resource)throw new Error("Resource can be set only once");return r.bind(this),this.resource=r,this},t.prototype.update=function(){this.valid?(this.dirtyId++,this.dirtyStyleId++,this.emit("update",this)):this.width>0&&this.height>0&&(this.valid=!0,this.emit("loaded",this),this.emit("update",this))},t.prototype.onError=function(r){this.emit("error",this,r)},t.prototype.destroy=function(){this.resource&&(this.resource.unbind(this),this.resource.internal&&this.resource.destroy(),this.resource=null),this.cacheId&&(delete ln[this.cacheId],delete Nr[this.cacheId],this.cacheId=null),this.dispose(),t.removeFromCache(this),this.textureCacheIds=null,this.destroyed=!0},t.prototype.dispose=function(){this.emit("dispose",this)},t.prototype.castToBaseTexture=function(){return this},t.from=function(r,n,i){i===void 0&&(i=ne.STRICT_TEXTURE_CACHE);var o=typeof r=="string",a=null;if(o)a=r;else{if(!r._pixiId){var s=n&&n.pixiIdPrefix||"pixiid";r._pixiId=s+"_"+Ro()}a=r._pixiId}var l=ln[a];if(o&&i&&!l)throw new Error('The cacheId "'+a+'" does not exist in BaseTextureCache.');return l||(l=new t(r,n),l.cacheId=a,t.addToCache(l,a)),l},t.fromBuffer=function(r,n,i,o){r=r||new Float32Array(n*i*4);var a=new za(r,{width:n,height:i}),s=r instanceof Float32Array?fe.FLOAT:fe.UNSIGNED_BYTE;return new t(a,Object.assign({},Zoe,o||{width:n,height:i,type:s}))},t.addToCache=function(r,n){n&&(r.textureCacheIds.indexOf(n)===-1&&r.textureCacheIds.push(n),ln[n]&&console.warn("BaseTexture added to the cache with an id ["+n+"] that already had an entry"),ln[n]=r)},t.removeFromCache=function(r){if(typeof r=="string"){var n=ln[r];if(n){var i=n.textureCacheIds.indexOf(r);return i>-1&&n.textureCacheIds.splice(i,1),delete ln[r],n}}else if(r&&r.textureCacheIds){for(var o=0;o<r.textureCacheIds.length;++o)delete ln[r.textureCacheIds[o]];return r.textureCacheIds.length=0,r}return null},t._globalBatch=0,t}(Vi),Bp=function(e){st(t,e);function t(r,n){var i=this,o=n||{},a=o.width,s=o.height;i=e.call(this,a,s)||this,i.items=[],i.itemDirtyIds=[];for(var l=0;l<r;l++){var u=new Le;i.items.push(u),i.itemDirtyIds.push(-2)}return i.length=r,i._load=null,i.baseTexture=null,i}return t.prototype.initFromArray=function(r,n){for(var i=0;i<this.length;i++)r[i]&&(r[i].castToBaseTexture?this.addBaseTextureAt(r[i].castToBaseTexture(),i):r[i]instanceof Ia?this.addResourceAt(r[i],i):this.addResourceAt(Np(r[i],n),i))},t.prototype.dispose=function(){for(var r=0,n=this.length;r<n;r++)this.items[r].destroy();this.items=null,this.itemDirtyIds=null,this._load=null},t.prototype.addResourceAt=function(r,n){if(!this.items[n])throw new Error("Index "+n+" is out of bounds");return r.valid&&!this.valid&&this.resize(r.width,r.height),this.items[n].setResource(r),this},t.prototype.bind=function(r){if(this.baseTexture!==null)throw new Error("Only one base texture per TextureArray is allowed");e.prototype.bind.call(this,r);for(var n=0;n<this.length;n++)this.items[n].parentTextureArray=r,this.items[n].on("update",r.update,r)},t.prototype.unbind=function(r){e.prototype.unbind.call(this,r);for(var n=0;n<this.length;n++)this.items[n].parentTextureArray=null,this.items[n].off("update",r.update,r)},t.prototype.load=function(){var r=this;if(this._load)return this._load;var n=this.items.map(function(o){return o.resource}).filter(function(o){return o}),i=n.map(function(o){return o.load()});return this._load=Promise.all(i).then(function(){var o=r.items[0],a=o.realWidth,s=o.realHeight;return r.resize(a,s),Promise.resolve(r)}),this._load},t}(Ia),m1=function(e){st(t,e);function t(r,n){var i=this,o=n||{},a=o.width,s=o.height,l,u;return Array.isArray(r)?(l=r,u=r.length):u=r,i=e.call(this,u,{width:a,height:s})||this,l&&i.initFromArray(l,n),i}return t.prototype.addBaseTextureAt=function(r,n){if(r.resource)this.addResourceAt(r.resource,n);else throw new Error("ArrayResource does not support RenderTexture");return this},t.prototype.bind=function(r){e.prototype.bind.call(this,r),r.target=So.TEXTURE_2D_ARRAY},t.prototype.upload=function(r,n,i){var o=this,a=o.length,s=o.itemDirtyIds,l=o.items,u=r.gl;i.dirtyId<0&&u.texImage3D(u.TEXTURE_2D_ARRAY,0,i.internalFormat,this._width,this._height,a,0,n.format,i.type,null);for(var c=0;c<a;c++){var f=l[c];s[c]<f.dirtyId&&(s[c]=f.dirtyId,f.valid&&u.texSubImage3D(u.TEXTURE_2D_ARRAY,0,0,0,c,f.resource.width,f.resource.height,1,n.format,i.type,f.resource.source))}return!0},t}(Bp),vi=function(e){st(t,e);function t(r){var n=this,i=r,o=i.naturalWidth||i.videoWidth||i.width,a=i.naturalHeight||i.videoHeight||i.height;return n=e.call(this,o,a)||this,n.source=r,n.noSubImage=!1,n}return t.crossOrigin=function(r,n,i){i===void 0&&n.indexOf("data:")!==0?r.crossOrigin=ok(n):i!==!1&&(r.crossOrigin=typeof i=="string"?i:"anonymous")},t.prototype.upload=function(r,n,i,o){var a=r.gl,s=n.realWidth,l=n.realHeight;if(o=o||this.source,o instanceof HTMLImageElement){if(!o.complete||o.naturalWidth===0)return!1}else if(o instanceof HTMLVideoElement&&o.readyState<=1)return!1;return a.pixelStorei(a.UNPACK_PREMULTIPLY_ALPHA_WEBGL,n.alphaMode===bn.UNPACK),!this.noSubImage&&n.target===a.TEXTURE_2D&&i.width===s&&i.height===l?a.texSubImage2D(a.TEXTURE_2D,0,0,0,n.format,i.type,o):(i.width=s,i.height=l,a.texImage2D(n.target,0,i.internalFormat,n.format,i.type,o)),!0},t.prototype.update=function(){if(!this.destroyed){var r=this.source,n=r.naturalWidth||r.videoWidth||r.width,i=r.naturalHeight||r.videoHeight||r.height;this.resize(n,i),e.prototype.update.call(this)}},t.prototype.dispose=function(){this.source=null},t}(Ia),v1=function(e){st(t,e);function t(r){return e.call(this,r)||this}return t.test=function(r){var n=globalThis.OffscreenCanvas;return n&&r instanceof n?!0:globalThis.HTMLCanvasElement&&r instanceof HTMLCanvasElement},t}(vi),g1=function(e){st(t,e);function t(r,n){var i=this,o=n||{},a=o.width,s=o.height,l=o.autoLoad,u=o.linkBaseTexture;if(r&&r.length!==t.SIDES)throw new Error("Invalid length. Got "+r.length+", expected 6");i=e.call(this,6,{width:a,height:s})||this;for(var c=0;c<t.SIDES;c++)i.items[c].target=So.TEXTURE_CUBE_MAP_POSITIVE_X+c;return i.linkBaseTexture=u!==!1,r&&i.initFromArray(r,n),l!==!1&&i.load(),i}return t.prototype.bind=function(r){e.prototype.bind.call(this,r),r.target=So.TEXTURE_CUBE_MAP},t.prototype.addBaseTextureAt=function(r,n,i){if(!this.items[n])throw new Error("Index "+n+" is out of bounds");if(!this.linkBaseTexture||r.parentTextureArray||Object.keys(r._glTextures).length>0)if(r.resource)this.addResourceAt(r.resource,n);else throw new Error("CubeResource does not support copying of renderTexture.");else r.target=So.TEXTURE_CUBE_MAP_POSITIVE_X+n,r.parentTextureArray=this.baseTexture,this.items[n]=r;return r.valid&&!this.valid&&this.resize(r.realWidth,r.realHeight),this.items[n]=r,this},t.prototype.upload=function(r,n,i){for(var o=this.itemDirtyIds,a=0;a<t.SIDES;a++){var s=this.items[a];(o[a]<s.dirtyId||i.dirtyId<n.dirtyId)&&(s.valid&&s.resource?(s.resource.upload(r,s,i),o[a]=s.dirtyId):o[a]<-1&&(r.gl.texImage2D(s.target,0,i.internalFormat,n.realWidth,n.realHeight,0,n.format,i.type,null),o[a]=-1))}return!0},t.test=function(r){return Array.isArray(r)&&r.length===t.SIDES},t.SIDES=6,t}(Bp),jp=function(e){st(t,e);function t(r,n){var i=this;if(n=n||{},!(r instanceof HTMLImageElement)){var o=new Image;vi.crossOrigin(o,r,n.crossorigin),o.src=r,r=o}return i=e.call(this,r)||this,!r.complete&&i._width&&i._height&&(i._width=0,i._height=0),i.url=r.src,i._process=null,i.preserveBitmap=!1,i.createBitmap=(n.createBitmap!==void 0?n.createBitmap:ne.CREATE_IMAGE_BITMAP)&&!!globalThis.createImageBitmap,i.alphaMode=typeof n.alphaMode=="number"?n.alphaMode:null,i.bitmap=null,i._load=null,n.autoLoad!==!1&&i.load(),i}return t.prototype.load=function(r){var n=this;return this._load?this._load:(r!==void 0&&(this.createBitmap=r),this._load=new Promise(function(i,o){var a=n.source;n.url=a.src;var s=function(){n.destroyed||(a.onload=null,a.onerror=null,n.resize(a.width,a.height),n._load=null,n.createBitmap?i(n.process()):i(n))};a.complete&&a.src?s():(a.onload=s,a.onerror=function(l){o(l),n.onError.emit(l)})}),this._load)},t.prototype.process=function(){var r=this,n=this.source;if(this._process!==null)return this._process;if(this.bitmap!==null||!globalThis.createImageBitmap)return Promise.resolve(this);var i=globalThis.createImageBitmap,o=!n.crossOrigin||n.crossOrigin==="anonymous";return this._process=fetch(n.src,{mode:o?"cors":"no-cors"}).then(function(a){return a.blob()}).then(function(a){return i(a,0,0,n.width,n.height,{premultiplyAlpha:r.alphaMode===null||r.alphaMode===bn.UNPACK?"premultiply":"none"})}).then(function(a){return r.destroyed?Promise.reject():(r.bitmap=a,r.update(),r._process=null,Promise.resolve(r))}),this._process},t.prototype.upload=function(r,n,i){if(typeof this.alphaMode=="number"&&(n.alphaMode=this.alphaMode),!this.createBitmap)return e.prototype.upload.call(this,r,n,i);if(!this.bitmap&&(this.process(),!this.bitmap))return!1;if(e.prototype.upload.call(this,r,n,i,this.bitmap),!this.preserveBitmap){var o=!0,a=n._glTextures;for(var s in a){var l=a[s];if(l!==i&&l.dirtyId!==n.dirtyId){o=!1;break}}o&&(this.bitmap.close&&this.bitmap.close(),this.bitmap=null)}return!0},t.prototype.dispose=function(){this.source.onload=null,this.source.onerror=null,e.prototype.dispose.call(this),this.bitmap&&(this.bitmap.close(),this.bitmap=null),this._process=null,this._load=null},t.test=function(r){return typeof r=="string"||r instanceof HTMLImageElement},t}(vi),y1=function(e){st(t,e);function t(r,n){var i=this;return n=n||{},i=e.call(this,ne.ADAPTER.createCanvas())||this,i._width=0,i._height=0,i.svg=r,i.scale=n.scale||1,i._overrideWidth=n.width,i._overrideHeight=n.height,i._resolve=null,i._crossorigin=n.crossorigin,i._load=null,n.autoLoad!==!1&&i.load(),i}return t.prototype.load=function(){var r=this;return this._load?this._load:(this._load=new Promise(function(n){if(r._resolve=function(){r.resize(r.source.width,r.source.height),n(r)},t.SVG_XML.test(r.svg.trim())){if(!btoa)throw new Error("Your browser doesn't support base64 conversions.");r.svg="data:image/svg+xml;base64,"+btoa(unescape(encodeURIComponent(r.svg)))}r._loadSvg()}),this._load)},t.prototype._loadSvg=function(){var r=this,n=new Image;vi.crossOrigin(n,this.svg,this._crossorigin),n.src=this.svg,n.onerror=function(i){r._resolve&&(n.onerror=null,r.onError.emit(i))},n.onload=function(){if(r._resolve){var i=n.width,o=n.height;if(!i||!o)throw new Error("The SVG image must have width and height defined (in pixels), canvas API needs them.");var a=i*r.scale,s=o*r.scale;(r._overrideWidth||r._overrideHeight)&&(a=r._overrideWidth||r._overrideHeight/o*i,s=r._overrideHeight||r._overrideWidth/i*o),a=Math.round(a),s=Math.round(s);var l=r.source;l.width=a,l.height=s,l._pixiId="canvas_"+Ro(),l.getContext("2d").drawImage(n,0,0,i,o,0,0,a,s),r._resolve(),r._resolve=null}}},t.getSize=function(r){var n=t.SVG_SIZE.exec(r),i={};return n&&(i[n[1]]=Math.round(parseFloat(n[3])),i[n[5]]=Math.round(parseFloat(n[7]))),i},t.prototype.dispose=function(){e.prototype.dispose.call(this),this._resolve=null,this._crossorigin=null},t.test=function(r,n){return n==="svg"||typeof r=="string"&&r.startsWith("data:image/svg+xml")||typeof r=="string"&&t.SVG_XML.test(r)},t.SVG_XML=/^(<\?xml[^?]+\?>)?\s*(<!--[^(-->)]*-->)?\s*\<svg/m,t.SVG_SIZE=/<svg[^>]*(?:\s(width|height)=('|")(\d*(?:\.\d+)?)(?:px)?('|"))[^>]*(?:\s(width|height)=('|")(\d*(?:\.\d+)?)(?:px)?('|"))[^>]*>/i,t}(vi),Up=function(e){st(t,e);function t(r,n){var i=this;if(n=n||{},!(r instanceof HTMLVideoElement)){var o=document.createElement("video");o.setAttribute("preload","auto"),o.setAttribute("webkit-playsinline",""),o.setAttribute("playsinline",""),typeof r=="string"&&(r=[r]);var a=r[0].src||r[0];vi.crossOrigin(o,a,n.crossorigin);for(var s=0;s<r.length;++s){var l=document.createElement("source"),u=r[s],c=u.src,f=u.mime;c=c||r[s];var h=c.split("?").shift().toLowerCase(),d=h.slice(h.lastIndexOf(".")+1);f=f||t.MIME_TYPES[d]||"video/"+d,l.src=c,l.type=f,o.appendChild(l)}r=o}return i=e.call(this,r)||this,i.noSubImage=!0,i._autoUpdate=!0,i._isConnectedToTicker=!1,i._updateFPS=n.updateFPS||0,i._msToNextUpdate=0,i.autoPlay=n.autoPlay!==!1,i._load=null,i._resolve=null,i._onCanPlay=i._onCanPlay.bind(i),i._onError=i._onError.bind(i),n.autoLoad!==!1&&i.load(),i}return t.prototype.update=function(r){if(!this.destroyed){var n=Kt.shared.elapsedMS*this.source.playbackRate;this._msToNextUpdate=Math.floor(this._msToNextUpdate-n),(!this._updateFPS||this._msToNextUpdate<=0)&&(e.prototype.update.call(this),this._msToNextUpdate=this._updateFPS?Math.floor(1e3/this._updateFPS):0)}},t.prototype.load=function(){var r=this;if(this._load)return this._load;var n=this.source;return(n.readyState===n.HAVE_ENOUGH_DATA||n.readyState===n.HAVE_FUTURE_DATA)&&n.width&&n.height&&(n.complete=!0),n.addEventListener("play",this._onPlayStart.bind(this)),n.addEventListener("pause",this._onPlayStop.bind(this)),this._isSourceReady()?this._onCanPlay():(n.addEventListener("canplay",this._onCanPlay),n.addEventListener("canplaythrough",this._onCanPlay),n.addEventListener("error",this._onError,!0)),this._load=new Promise(function(i){r.valid?i(r):(r._resolve=i,n.load())}),this._load},t.prototype._onError=function(r){this.source.removeEventListener("error",this._onError,!0),this.onError.emit(r)},t.prototype._isSourcePlaying=function(){var r=this.source;return!r.paused&&!r.ended&&this._isSourceReady()},t.prototype._isSourceReady=function(){var r=this.source;return r.readyState>2},t.prototype._onPlayStart=function(){this.valid||this._onCanPlay(),this.autoUpdate&&!this._isConnectedToTicker&&(Kt.shared.add(this.update,this),this._isConnectedToTicker=!0)},t.prototype._onPlayStop=function(){this._isConnectedToTicker&&(Kt.shared.remove(this.update,this),this._isConnectedToTicker=!1)},t.prototype._onCanPlay=function(){var r=this.source;r.removeEventListener("canplay",this._onCanPlay),r.removeEventListener("canplaythrough",this._onCanPlay);var n=this.valid;this.resize(r.videoWidth,r.videoHeight),!n&&this._resolve&&(this._resolve(this),this._resolve=null),this._isSourcePlaying()?this._onPlayStart():this.autoPlay&&r.play()},t.prototype.dispose=function(){this._isConnectedToTicker&&(Kt.shared.remove(this.update,this),this._isConnectedToTicker=!1);var r=this.source;r&&(r.removeEventListener("error",this._onError,!0),r.pause(),r.src="",r.load()),e.prototype.dispose.call(this)},Object.defineProperty(t.prototype,"autoUpdate",{get:function(){return this._autoUpdate},set:function(r){r!==this._autoUpdate&&(this._autoUpdate=r,!this._autoUpdate&&this._isConnectedToTicker?(Kt.shared.remove(this.update,this),this._isConnectedToTicker=!1):this._autoUpdate&&!this._isConnectedToTicker&&this._isSourcePlaying()&&(Kt.shared.add(this.update,this),this._isConnectedToTicker=!0))},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"updateFPS",{get:function(){return this._updateFPS},set:function(r){r!==this._updateFPS&&(this._updateFPS=r)},enumerable:!1,configurable:!0}),t.test=function(r,n){return globalThis.HTMLVideoElement&&r instanceof HTMLVideoElement||t.TYPES.indexOf(n)>-1},t.TYPES=["mp4","m4v","webm","ogg","ogv","h264","avi","mov"],t.MIME_TYPES={ogv:"video/ogg",mov:"video/quicktime",m4v:"video/mp4"},t}(vi),_1=function(e){st(t,e);function t(r){return e.call(this,r)||this}return t.test=function(r){return!!globalThis.createImageBitmap&&typeof ImageBitmap<"u"&&r instanceof ImageBitmap},t}(vi);Ec.push(jp,_1,v1,Up,y1,za,g1,m1);var hk={__proto__:null,Resource:Ia,BaseImageResource:vi,INSTALLED:Ec,autoDetectResource:Np,AbstractMultiResource:Bp,ArrayResource:m1,BufferResource:za,CanvasResource:v1,CubeResource:g1,ImageResource:jp,SVGResource:y1,VideoResource:Up,ImageBitmapResource:_1},Joe=function(e){st(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.upload=function(r,n,i){var o=r.gl;o.pixelStorei(o.UNPACK_PREMULTIPLY_ALPHA_WEBGL,n.alphaMode===bn.UNPACK);var a=n.realWidth,s=n.realHeight;return i.width===a&&i.height===s?o.texSubImage2D(n.target,0,0,0,a,s,n.format,i.type,this.data):(i.width=a,i.height=s,o.texImage2D(n.target,0,i.internalFormat,a,s,0,n.format,i.type,this.data)),!0},t}(za),wd=function(){function e(t,r){this.width=Math.round(t||100),this.height=Math.round(r||100),this.stencil=!1,this.depth=!1,this.dirtyId=0,this.dirtyFormat=0,this.dirtySize=0,this.depthTexture=null,this.colorTextures=[],this.glFramebuffers={},this.disposeRunner=new Yt("disposeFramebuffer"),this.multisample=ft.NONE}return Object.defineProperty(e.prototype,"colorTexture",{get:function(){return this.colorTextures[0]},enumerable:!1,configurable:!0}),e.prototype.addColorTexture=function(t,r){return t===void 0&&(t=0),this.colorTextures[t]=r||new Le(null,{scaleMode:Br.NEAREST,resolution:1,mipmap:zr.OFF,width:this.width,height:this.height}),this.dirtyId++,this.dirtyFormat++,this},e.prototype.addDepthTexture=function(t){return this.depthTexture=t||new Le(new Joe(null,{width:this.width,height:this.height}),{scaleMode:Br.NEAREST,resolution:1,width:this.width,height:this.height,mipmap:zr.OFF,format:Q.DEPTH_COMPONENT,type:fe.UNSIGNED_SHORT}),this.dirtyId++,this.dirtyFormat++,this},e.prototype.enableDepth=function(){return this.depth=!0,this.dirtyId++,this.dirtyFormat++,this},e.prototype.enableStencil=function(){return this.stencil=!0,this.dirtyId++,this.dirtyFormat++,this},e.prototype.resize=function(t,r){if(t=Math.round(t),r=Math.round(r),!(t===this.width&&r===this.height)){this.width=t,this.height=r,this.dirtyId++,this.dirtySize++;for(var n=0;n<this.colorTextures.length;n++){var i=this.colorTextures[n],o=i.resolution;i.setSize(t/o,r/o)}if(this.depthTexture){var o=this.depthTexture.resolution;this.depthTexture.setSize(t/o,r/o)}}},e.prototype.dispose=function(){this.disposeRunner.emit(this,!1)},e.prototype.destroyDepthTexture=function(){this.depthTexture&&(this.depthTexture.destroy(),this.depthTexture=null,++this.dirtyId,++this.dirtyFormat)},e}(),x1=function(e){st(t,e);function t(r){r===void 0&&(r={});var n=this;if(typeof r=="number"){var i=arguments[0],o=arguments[1],a=arguments[2],s=arguments[3];r={width:i,height:o,scaleMode:a,resolution:s}}return r.width=r.width||100,r.height=r.height||100,r.multisample=r.multisample!==void 0?r.multisample:ft.NONE,n=e.call(this,null,r)||this,n.mipmap=zr.OFF,n.valid=!0,n.clearColor=[0,0,0,0],n.framebuffer=new wd(n.realWidth,n.realHeight).addColorTexture(0,n),n.framebuffer.multisample=r.multisample,n.maskStack=[],n.filterStack=[{}],n}return t.prototype.resize=function(r,n){this.framebuffer.resize(r*this.resolution,n*this.resolution),this.setRealSize(this.framebuffer.width,this.framebuffer.height)},t.prototype.dispose=function(){this.framebuffer.dispose(),e.prototype.dispose.call(this)},t.prototype.destroy=function(){e.prototype.destroy.call(this),this.framebuffer.destroyDepthTexture(),this.framebuffer=null},t}(Le),b1=function(){function e(){this.x0=0,this.y0=0,this.x1=1,this.y1=0,this.x2=1,this.y2=1,this.x3=0,this.y3=1,this.uvsFloat32=new Float32Array(8)}return e.prototype.set=function(t,r,n){var i=r.width,o=r.height;if(n){var a=t.width/2/i,s=t.height/2/o,l=t.x/i+a,u=t.y/o+s;n=pt.add(n,pt.NW),this.x0=l+a*pt.uX(n),this.y0=u+s*pt.uY(n),n=pt.add(n,2),this.x1=l+a*pt.uX(n),this.y1=u+s*pt.uY(n),n=pt.add(n,2),this.x2=l+a*pt.uX(n),this.y2=u+s*pt.uY(n),n=pt.add(n,2),this.x3=l+a*pt.uX(n),this.y3=u+s*pt.uY(n)}else this.x0=t.x/i,this.y0=t.y/o,this.x1=(t.x+t.width)/i,this.y1=t.y/o,this.x2=(t.x+t.width)/i,this.y2=(t.y+t.height)/o,this.x3=t.x/i,this.y3=(t.y+t.height)/o;this.uvsFloat32[0]=this.x0,this.uvsFloat32[1]=this.y0,this.uvsFloat32[2]=this.x1,this.uvsFloat32[3]=this.y1,this.uvsFloat32[4]=this.x2,this.uvsFloat32[5]=this.y2,this.uvsFloat32[6]=this.x3,this.uvsFloat32[7]=this.y3},e.prototype.toString=function(){return"[@pixi/core:TextureUvs "+("x0="+this.x0+" y0="+this.y0+" ")+("x1="+this.x1+" y1="+this.y1+" x2="+this.x2+" ")+("y2="+this.y2+" x3="+this.x3+" y3="+this.y3)+"]"},e}(),xP=new b1;function kf(e){e.destroy=function(){},e.on=function(){},e.once=function(){},e.emit=function(){}}var pe=function(e){st(t,e);function t(r,n,i,o,a,s){var l=e.call(this)||this;if(l.noFrame=!1,n||(l.noFrame=!0,n=new Fe(0,0,1,1)),r instanceof t&&(r=r.baseTexture),l.baseTexture=r,l._frame=n,l.trim=o,l.valid=!1,l._uvs=xP,l.uvMatrix=null,l.orig=i||n,l._rotate=Number(a||0),a===!0)l._rotate=2;else if(l._rotate%2!==0)throw new Error("attempt to use diamond-shaped UVs. If you are sure, set rotation manually");return l.defaultAnchor=s?new Pe(s.x,s.y):new Pe(0,0),l._updateID=0,l.textureCacheIds=[],r.valid?l.noFrame?r.valid&&l.onBaseTextureUpdated(r):l.frame=n:r.once("loaded",l.onBaseTextureUpdated,l),l.noFrame&&r.on("update",l.onBaseTextureUpdated,l),l}return t.prototype.update=function(){this.baseTexture.resource&&this.baseTexture.resource.update()},t.prototype.onBaseTextureUpdated=function(r){if(this.noFrame){if(!this.baseTexture.valid)return;this._frame.width=r.width,this._frame.height=r.height,this.valid=!0,this.updateUvs()}else this.frame=this._frame;this.emit("update",this)},t.prototype.destroy=function(r){if(this.baseTexture){if(r){var n=this.baseTexture.resource;n&&n.url&&Nr[n.url]&&t.removeFromCache(n.url),this.baseTexture.destroy()}this.baseTexture.off("loaded",this.onBaseTextureUpdated,this),this.baseTexture.off("update",this.onBaseTextureUpdated,this),this.baseTexture=null}this._frame=null,this._uvs=null,this.trim=null,this.orig=null,this.valid=!1,t.removeFromCache(this),this.textureCacheIds=null},t.prototype.clone=function(){var r=this._frame.clone(),n=this._frame===this.orig?r:this.orig.clone(),i=new t(this.baseTexture,!this.noFrame&&r,n,this.trim&&this.trim.clone(),this.rotate,this.defaultAnchor);return this.noFrame&&(i._frame=r),i},t.prototype.updateUvs=function(){this._uvs===xP&&(this._uvs=new b1),this._uvs.set(this._frame,this.baseTexture,this.rotate),this._updateID++},t.from=function(r,n,i){n===void 0&&(n={}),i===void 0&&(i=ne.STRICT_TEXTURE_CACHE);var o=typeof r=="string",a=null;if(o)a=r;else if(r instanceof Le){if(!r.cacheId){var s=n&&n.pixiIdPrefix||"pixiid";r.cacheId=s+"-"+Ro(),Le.addToCache(r,r.cacheId)}a=r.cacheId}else{if(!r._pixiId){var s=n&&n.pixiIdPrefix||"pixiid";r._pixiId=s+"_"+Ro()}a=r._pixiId}var l=Nr[a];if(o&&i&&!l)throw new Error('The cacheId "'+a+'" does not exist in TextureCache.');return!l&&!(r instanceof Le)?(n.resolution||(n.resolution=bc(r)),l=new t(new Le(r,n)),l.baseTexture.cacheId=a,Le.addToCache(l.baseTexture,a),t.addToCache(l,a)):!l&&r instanceof Le&&(l=new t(r),t.addToCache(l,a)),l},t.fromURL=function(r,n){var i=Object.assign({autoLoad:!1},n==null?void 0:n.resourceOptions),o=t.from(r,Object.assign({resourceOptions:i},n),!1),a=o.baseTexture.resource;return o.baseTexture.valid?Promise.resolve(o):a.load().then(function(){return Promise.resolve(o)})},t.fromBuffer=function(r,n,i,o){return new t(Le.fromBuffer(r,n,i,o))},t.fromLoader=function(r,n,i,o){var a=new Le(r,Object.assign({scaleMode:ne.SCALE_MODE,resolution:bc(n)},o)),s=a.resource;s instanceof jp&&(s.url=n);var l=new t(a);return i||(i=n),Le.addToCache(l.baseTexture,i),t.addToCache(l,i),i!==n&&(Le.addToCache(l.baseTexture,n),t.addToCache(l,n)),l.baseTexture.valid?Promise.resolve(l):new Promise(function(u){l.baseTexture.once("loaded",function(){return u(l)})})},t.addToCache=function(r,n){n&&(r.textureCacheIds.indexOf(n)===-1&&r.textureCacheIds.push(n),Nr[n]&&console.warn("Texture added to the cache with an id ["+n+"] that already had an entry"),Nr[n]=r)},t.removeFromCache=function(r){if(typeof r=="string"){var n=Nr[r];if(n){var i=n.textureCacheIds.indexOf(r);return i>-1&&n.textureCacheIds.splice(i,1),delete Nr[r],n}}else if(r&&r.textureCacheIds){for(var o=0;o<r.textureCacheIds.length;++o)Nr[r.textureCacheIds[o]]===r&&delete Nr[r.textureCacheIds[o]];return r.textureCacheIds.length=0,r}return null},Object.defineProperty(t.prototype,"resolution",{get:function(){return this.baseTexture.resolution},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"frame",{get:function(){return this._frame},set:function(r){this._frame=r,this.noFrame=!1;var n=r.x,i=r.y,o=r.width,a=r.height,s=n+o>this.baseTexture.width,l=i+a>this.baseTexture.height;if(s||l){var u=s&&l?"and":"or",c="X: "+n+" + "+o+" = "+(n+o)+" > "+this.baseTexture.width,f="Y: "+i+" + "+a+" = "+(i+a)+" > "+this.baseTexture.height;throw new Error("Texture Error: frame does not fit inside the base Texture dimensions: "+(c+" "+u+" "+f))}this.valid=o&&a&&this.baseTexture.valid,!this.trim&&!this.rotate&&(this.orig=r),this.valid&&this.updateUvs()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"rotate",{get:function(){return this._rotate},set:function(r){this._rotate=r,this.valid&&this.updateUvs()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"width",{get:function(){return this.orig.width},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"height",{get:function(){return this.orig.height},enumerable:!1,configurable:!0}),t.prototype.castToBaseTexture=function(){return this.baseTexture},Object.defineProperty(t,"EMPTY",{get:function(){return t._EMPTY||(t._EMPTY=new t(new Le),kf(t._EMPTY),kf(t._EMPTY.baseTexture)),t._EMPTY},enumerable:!1,configurable:!0}),Object.defineProperty(t,"WHITE",{get:function(){if(!t._WHITE){var r=ne.ADAPTER.createCanvas(16,16),n=r.getContext("2d");r.width=16,r.height=16,n.fillStyle="white",n.fillRect(0,0,16,16),t._WHITE=new t(Le.from(r)),kf(t._WHITE),kf(t._WHITE.baseTexture)}return t._WHITE},enumerable:!1,configurable:!0}),t}(Vi),Lo=function(e){st(t,e);function t(r,n){var i=e.call(this,r,n)||this;return i.valid=!0,i.filterFrame=null,i.filterPoolKey=null,i.updateUvs(),i}return Object.defineProperty(t.prototype,"framebuffer",{get:function(){return this.baseTexture.framebuffer},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"multisample",{get:function(){return this.framebuffer.multisample},set:function(r){this.framebuffer.multisample=r},enumerable:!1,configurable:!0}),t.prototype.resize=function(r,n,i){i===void 0&&(i=!0);var o=this.baseTexture.resolution,a=Math.round(r*o)/o,s=Math.round(n*o)/o;this.valid=a>0&&s>0,this._frame.width=this.orig.width=a,this._frame.height=this.orig.height=s,i&&this.baseTexture.resize(a,s),this.updateUvs()},t.prototype.setResolution=function(r){var n=this.baseTexture;n.resolution!==r&&(n.setResolution(r),this.resize(n.width,n.height,!1))},t.create=function(r){for(var n=arguments,i=[],o=1;o<arguments.length;o++)i[o-1]=n[o];return typeof r=="number"&&(Or("6.0.0","Arguments (width, height, scaleMode, resolution) have been deprecated."),r={width:r,height:i[0],scaleMode:i[1],resolution:i[2]}),new t(new x1(r))},t}(pe),dk=function(){function e(t){this.texturePool={},this.textureOptions=t||{},this.enableFullScreen=!1,this._pixelsWidth=0,this._pixelsHeight=0}return e.prototype.createTexture=function(t,r,n){n===void 0&&(n=ft.NONE);var i=new x1(Object.assign({width:t,height:r,resolution:1,multisample:n},this.textureOptions));return new Lo(i)},e.prototype.getOptimalTexture=function(t,r,n,i){n===void 0&&(n=1),i===void 0&&(i=ft.NONE);var o;t=Math.ceil(t*n-1e-6),r=Math.ceil(r*n-1e-6),!this.enableFullScreen||t!==this._pixelsWidth||r!==this._pixelsHeight?(t=xc(t),r=xc(r),o=((t&65535)<<16|r&65535)>>>0,i>1&&(o+=i*4294967296)):o=i>1?-i:-1,this.texturePool[o]||(this.texturePool[o]=[]);var a=this.texturePool[o].pop();return a||(a=this.createTexture(t,r,i)),a.filterPoolKey=o,a.setResolution(n),a},e.prototype.getFilterTexture=function(t,r,n){var i=this.getOptimalTexture(t.width,t.height,r||t.resolution,n||ft.NONE);return i.filterFrame=t.filterFrame,i},e.prototype.returnTexture=function(t){var r=t.filterPoolKey;t.filterFrame=null,this.texturePool[r].push(t)},e.prototype.returnFilterTexture=function(t){this.returnTexture(t)},e.prototype.clear=function(t){if(t=t!==!1,t)for(var r in this.texturePool){var n=this.texturePool[r];if(n)for(var i=0;i<n.length;i++)n[i].destroy(!0)}this.texturePool={}},e.prototype.setScreenSize=function(t){if(!(t.width===this._pixelsWidth&&t.height===this._pixelsHeight)){this.enableFullScreen=t.width>0&&t.height>0;for(var r in this.texturePool)if(Number(r)<0){var n=this.texturePool[r];if(n)for(var i=0;i<n.length;i++)n[i].destroy(!0);this.texturePool[r]=[]}this._pixelsWidth=t.width,this._pixelsHeight=t.height}},e.SCREEN_KEY=-1,e}(),U_=function(){function e(t,r,n,i,o,a,s){r===void 0&&(r=0),n===void 0&&(n=!1),i===void 0&&(i=fe.FLOAT),this.buffer=t,this.size=r,this.normalized=n,this.type=i,this.stride=o,this.start=a,this.instance=s}return e.prototype.destroy=function(){this.buffer=null},e.from=function(t,r,n,i,o){return new e(t,r,n,i,o)},e}(),Qoe=0,Dt=function(){function e(t,r,n){r===void 0&&(r=!0),n===void 0&&(n=!1),this.data=t||new Float32Array(1),this._glBuffers={},this._updateID=0,this.index=n,this.static=r,this.id=Qoe++,this.disposeRunner=new Yt("disposeBuffer")}return e.prototype.update=function(t){t instanceof Array&&(t=new Float32Array(t)),this.data=t||this.data,this._updateID++},e.prototype.dispose=function(){this.disposeRunner.emit(this,!1)},e.prototype.destroy=function(){this.dispose(),this.data=null},Object.defineProperty(e.prototype,"index",{get:function(){return this.type===Fn.ELEMENT_ARRAY_BUFFER},set:function(t){this.type=t?Fn.ELEMENT_ARRAY_BUFFER:Fn.ARRAY_BUFFER},enumerable:!1,configurable:!0}),e.from=function(t){return t instanceof Array&&(t=new Float32Array(t)),new e(t)},e}(),eae={Float32Array,Uint32Array,Int32Array,Uint8Array};function tae(e,t){for(var r=0,n=0,i={},o=0;o<e.length;o++)n+=t[o],r+=e[o].length;for(var a=new ArrayBuffer(r*4),s=null,l=0,o=0;o<e.length;o++){var u=t[o],c=e[o],f=Fp(c);i[f]||(i[f]=new eae[f](a)),s=i[f];for(var h=0;h<c.length;h++){var d=(h/u|0)*n+l,m=h%u;s[d+m]=c[h]}l+=u}return new Float32Array(a)}var bP={5126:4,5123:2,5121:1},rae=0,nae={Float32Array,Uint32Array,Int32Array,Uint8Array,Uint16Array},wl=function(){function e(t,r){t===void 0&&(t=[]),r===void 0&&(r={}),this.buffers=t,this.indexBuffer=null,this.attributes=r,this.glVertexArrayObjects={},this.id=rae++,this.instanced=!1,this.instanceCount=1,this.disposeRunner=new Yt("disposeGeometry"),this.refCount=0}return e.prototype.addAttribute=function(t,r,n,i,o,a,s,l){if(n===void 0&&(n=0),i===void 0&&(i=!1),l===void 0&&(l=!1),!r)throw new Error("You must pass a buffer when creating an attribute");r instanceof Dt||(r instanceof Array&&(r=new Float32Array(r)),r=new Dt(r));var u=t.split("|");if(u.length>1){for(var c=0;c<u.length;c++)this.addAttribute(u[c],r,n,i,o);return this}var f=this.buffers.indexOf(r);return f===-1&&(this.buffers.push(r),f=this.buffers.length-1),this.attributes[t]=new U_(f,n,i,o,a,s,l),this.instanced=this.instanced||l,this},e.prototype.getAttribute=function(t){return this.attributes[t]},e.prototype.getBuffer=function(t){return this.buffers[this.getAttribute(t).buffer]},e.prototype.addIndex=function(t){return t instanceof Dt||(t instanceof Array&&(t=new Uint16Array(t)),t=new Dt(t)),t.type=Fn.ELEMENT_ARRAY_BUFFER,this.indexBuffer=t,this.buffers.indexOf(t)===-1&&this.buffers.push(t),this},e.prototype.getIndex=function(){return this.indexBuffer},e.prototype.interleave=function(){if(this.buffers.length===1||this.buffers.length===2&&this.indexBuffer)return this;var t=[],r=[],n=new Dt,i;for(i in this.attributes){var o=this.attributes[i],a=this.buffers[o.buffer];t.push(a.data),r.push(o.size*bP[o.type]/4),o.buffer=0}for(n.data=tae(t,r),i=0;i<this.buffers.length;i++)this.buffers[i]!==this.indexBuffer&&this.buffers[i].destroy();return this.buffers=[n],this.indexBuffer&&this.buffers.push(this.indexBuffer),this},e.prototype.getSize=function(){for(var t in this.attributes){var r=this.attributes[t],n=this.buffers[r.buffer];return n.data.length/(r.stride/4||r.size)}return 0},e.prototype.dispose=function(){this.disposeRunner.emit(this,!1)},e.prototype.destroy=function(){this.dispose(),this.buffers=null,this.indexBuffer=null,this.attributes=null},e.prototype.clone=function(){for(var t=new e,r=0;r<this.buffers.length;r++)t.buffers[r]=new Dt(this.buffers[r].data.slice(0));for(var r in this.attributes){var n=this.attributes[r];t.attributes[r]=new U_(n.buffer,n.size,n.normalized,n.type,n.stride,n.start,n.instance)}return this.indexBuffer&&(t.indexBuffer=t.buffers[this.buffers.indexOf(this.indexBuffer)],t.indexBuffer.type=Fn.ELEMENT_ARRAY_BUFFER),t},e.merge=function(t){for(var r=new e,n=[],i=[],o=[],a,s=0;s<t.length;s++){a=t[s];for(var l=0;l<a.buffers.length;l++)i[l]=i[l]||0,i[l]+=a.buffers[l].data.length,o[l]=0}for(var s=0;s<a.buffers.length;s++)n[s]=new nae[Fp(a.buffers[s].data)](i[s]),r.buffers[s]=new Dt(n[s]);for(var s=0;s<t.length;s++){a=t[s];for(var l=0;l<a.buffers.length;l++)n[l].set(a.buffers[l].data,o[l]),o[l]+=a.buffers[l].data.length}if(r.attributes=a.attributes,a.indexBuffer){r.indexBuffer=r.buffers[a.buffers.indexOf(a.indexBuffer)],r.indexBuffer.type=Fn.ELEMENT_ARRAY_BUFFER;for(var u=0,c=0,f=0,h=0,s=0;s<a.buffers.length;s++)if(a.buffers[s]!==a.indexBuffer){h=s;break}for(var s in a.attributes){var d=a.attributes[s];(d.buffer|0)===h&&(c+=d.size*bP[d.type]/4)}for(var s=0;s<t.length;s++){for(var m=t[s].indexBuffer.data,l=0;l<m.length;l++)r.indexBuffer.data[l+f]+=u;u+=t[s].buffers[h].data.length/c,f+=m.length}}return r},e}(),pk=function(e){st(t,e);function t(){var r=e.call(this)||this;return r.addAttribute("aVertexPosition",new Float32Array([0,0,1,0,1,1,0,1])).addIndex([0,1,3,2]),r}return t}(wl),S1=function(e){st(t,e);function t(){var r=e.call(this)||this;return r.vertices=new Float32Array([-1,-1,1,-1,1,1,-1,1]),r.uvs=new Float32Array([0,0,1,0,1,1,0,1]),r.vertexBuffer=new Dt(r.vertices),r.uvBuffer=new Dt(r.uvs),r.addAttribute("aVertexPosition",r.vertexBuffer).addAttribute("aTextureCoord",r.uvBuffer).addIndex([0,1,2,0,2,3]),r}return t.prototype.map=function(r,n){var i=0,o=0;return this.uvs[0]=i,this.uvs[1]=o,this.uvs[2]=i+n.width/r.width,this.uvs[3]=o,this.uvs[4]=i+n.width/r.width,this.uvs[5]=o+n.height/r.height,this.uvs[6]=i,this.uvs[7]=o+n.height/r.height,i=n.x,o=n.y,this.vertices[0]=i,this.vertices[1]=o,this.vertices[2]=i+n.width,this.vertices[3]=o,this.vertices[4]=i+n.width,this.vertices[5]=o+n.height,this.vertices[6]=i,this.vertices[7]=o+n.height,this.invalidate(),this},t.prototype.invalidate=function(){return this.vertexBuffer._updateID++,this.uvBuffer._updateID++,this},t}(wl),iae=0,wo=function(){function e(t,r,n){this.group=!0,this.syncUniforms={},this.dirtyId=0,this.id=iae++,this.static=!!r,this.ubo=!!n,t instanceof Dt?(this.buffer=t,this.buffer.type=Fn.UNIFORM_BUFFER,this.autoManage=!1,this.ubo=!0):(this.uniforms=t,this.ubo&&(this.buffer=new Dt(new Float32Array(1)),this.buffer.type=Fn.UNIFORM_BUFFER,this.autoManage=!0))}return e.prototype.update=function(){this.dirtyId++,!this.autoManage&&this.buffer&&this.buffer.update()},e.prototype.add=function(t,r,n){if(!this.ubo)this.uniforms[t]=new e(r,n);else throw new Error("[UniformGroup] uniform groups in ubo mode cannot be modified, or have uniform groups nested in them")},e.from=function(t,r,n){return new e(t,r,n)},e.uboFrom=function(t,r){return new e(t,r??!0,!0)},e}(),mk=function(){function e(){this.renderTexture=null,this.target=null,this.legacy=!1,this.resolution=1,this.multisample=ft.NONE,this.sourceFrame=new Fe,this.destinationFrame=new Fe,this.bindingSourceFrame=new Fe,this.bindingDestinationFrame=new Fe,this.filters=[],this.transform=null}return e.prototype.clear=function(){this.target=null,this.filters=null,this.renderTexture=null},e}(),Lf=[new Pe,new Pe,new Pe,new Pe],gg=new gt,w1=function(){function e(t){this.renderer=t,this.defaultFilterStack=[{}],this.texturePool=new dk,this.texturePool.setScreenSize(t.view),this.statePool=[],this.quad=new pk,this.quadUv=new S1,this.tempRect=new Fe,this.activeState={},this.globalUniforms=new wo({outputFrame:new Fe,inputSize:new Float32Array(4),inputPixel:new Float32Array(4),inputClamp:new Float32Array(4),resolution:1,filterArea:new Float32Array(4),filterClamp:new Float32Array(4)},!0),this.forceClear=!1,this.useMaxPadding=!1}return e.prototype.push=function(t,r){for(var n,i,o=this.renderer,a=this.defaultFilterStack,s=this.statePool.pop()||new mk,l=this.renderer.renderTexture,u=r[0].resolution,c=r[0].multisample,f=r[0].padding,h=r[0].autoFit,d=(n=r[0].legacy)!==null&&n!==void 0?n:!0,m=1;m<r.length;m++){var g=r[m];u=Math.min(u,g.resolution),c=Math.min(c,g.multisample),f=this.useMaxPadding?Math.max(f,g.padding):f+g.padding,h=h&&g.autoFit,d=d||((i=g.legacy)!==null&&i!==void 0?i:!0)}a.length===1&&(this.defaultFilterStack[0].renderTexture=l.current),a.push(s),s.resolution=u,s.multisample=c,s.legacy=d,s.target=t,s.sourceFrame.copyFrom(t.filterArea||t.getBounds(!0)),s.sourceFrame.pad(f);var p=this.tempRect.copyFrom(l.sourceFrame);o.projection.transform&&this.transformAABB(gg.copyFrom(o.projection.transform).invert(),p),h?(s.sourceFrame.fit(p),(s.sourceFrame.width<=0||s.sourceFrame.height<=0)&&(s.sourceFrame.width=0,s.sourceFrame.height=0)):s.sourceFrame.intersects(p)||(s.sourceFrame.width=0,s.sourceFrame.height=0),this.roundFrame(s.sourceFrame,l.current?l.current.resolution:o.resolution,l.sourceFrame,l.destinationFrame,o.projection.transform),s.renderTexture=this.getOptimalFilterTexture(s.sourceFrame.width,s.sourceFrame.height,u,c),s.filters=r,s.destinationFrame.width=s.renderTexture.width,s.destinationFrame.height=s.renderTexture.height;var v=this.tempRect;v.x=0,v.y=0,v.width=s.sourceFrame.width,v.height=s.sourceFrame.height,s.renderTexture.filterFrame=s.sourceFrame,s.bindingSourceFrame.copyFrom(l.sourceFrame),s.bindingDestinationFrame.copyFrom(l.destinationFrame),s.transform=o.projection.transform,o.projection.transform=null,l.bind(s.renderTexture,s.sourceFrame,v),o.framebuffer.clear(0,0,0,0)},e.prototype.pop=function(){var t=this.defaultFilterStack,r=t.pop(),n=r.filters;this.activeState=r;var i=this.globalUniforms.uniforms;i.outputFrame=r.sourceFrame,i.resolution=r.resolution;var o=i.inputSize,a=i.inputPixel,s=i.inputClamp;if(o[0]=r.destinationFrame.width,o[1]=r.destinationFrame.height,o[2]=1/o[0],o[3]=1/o[1],a[0]=Math.round(o[0]*r.resolution),a[1]=Math.round(o[1]*r.resolution),a[2]=1/a[0],a[3]=1/a[1],s[0]=.5*a[2],s[1]=.5*a[3],s[2]=r.sourceFrame.width*o[2]-.5*a[2],s[3]=r.sourceFrame.height*o[3]-.5*a[3],r.legacy){var l=i.filterArea;l[0]=r.destinationFrame.width,l[1]=r.destinationFrame.height,l[2]=r.sourceFrame.x,l[3]=r.sourceFrame.y,i.filterClamp=i.inputClamp}this.globalUniforms.update();var u=t[t.length-1];if(this.renderer.framebuffer.blit(),n.length===1)n[0].apply(this,r.renderTexture,u.renderTexture,un.BLEND,r),this.returnFilterTexture(r.renderTexture);else{var c=r.renderTexture,f=this.getOptimalFilterTexture(c.width,c.height,r.resolution);f.filterFrame=c.filterFrame;var h=0;for(h=0;h<n.length-1;++h){h===1&&r.multisample>1&&(f=this.getOptimalFilterTexture(c.width,c.height,r.resolution),f.filterFrame=c.filterFrame),n[h].apply(this,c,f,un.CLEAR,r);var d=c;c=f,f=d}n[h].apply(this,c,u.renderTexture,un.BLEND,r),h>1&&r.multisample>1&&this.returnFilterTexture(r.renderTexture),this.returnFilterTexture(c),this.returnFilterTexture(f)}r.clear(),this.statePool.push(r)},e.prototype.bindAndClear=function(t,r){r===void 0&&(r=un.CLEAR);var n=this.renderer,i=n.renderTexture,o=n.state;if(t===this.defaultFilterStack[this.defaultFilterStack.length-1].renderTexture?this.renderer.projection.transform=this.activeState.transform:this.renderer.projection.transform=null,t&&t.filterFrame){var a=this.tempRect;a.x=0,a.y=0,a.width=t.filterFrame.width,a.height=t.filterFrame.height,i.bind(t,t.filterFrame,a)}else t!==this.defaultFilterStack[this.defaultFilterStack.length-1].renderTexture?i.bind(t):this.renderer.renderTexture.bind(t,this.activeState.bindingSourceFrame,this.activeState.bindingDestinationFrame);var s=o.stateId&1||this.forceClear;(r===un.CLEAR||r===un.BLIT&&s)&&this.renderer.framebuffer.clear(0,0,0,0)},e.prototype.applyFilter=function(t,r,n,i){var o=this.renderer;o.state.set(t.state),this.bindAndClear(n,i),t.uniforms.uSampler=r,t.uniforms.filterGlobals=this.globalUniforms,o.shader.bind(t),t.legacy=!!t.program.attributeData.aTextureCoord,t.legacy?(this.quadUv.map(r._frame,r.filterFrame),o.geometry.bind(this.quadUv),o.geometry.draw(pn.TRIANGLES)):(o.geometry.bind(this.quad),o.geometry.draw(pn.TRIANGLE_STRIP))},e.prototype.calculateSpriteMatrix=function(t,r){var n=this.activeState,i=n.sourceFrame,o=n.destinationFrame,a=r._texture.orig,s=t.set(o.width,0,0,o.height,i.x,i.y),l=r.worldTransform.copyTo(gt.TEMP_MATRIX);return l.invert(),s.prepend(l),s.scale(1/a.width,1/a.height),s.translate(r.anchor.x,r.anchor.y),s},e.prototype.destroy=function(){this.renderer=null,this.texturePool.clear(!1)},e.prototype.getOptimalFilterTexture=function(t,r,n,i){return n===void 0&&(n=1),i===void 0&&(i=ft.NONE),this.texturePool.getOptimalTexture(t,r,n,i)},e.prototype.getFilterTexture=function(t,r,n){if(typeof t=="number"){var i=t;t=r,r=i}t=t||this.activeState.renderTexture;var o=this.texturePool.getOptimalTexture(t.width,t.height,r||t.resolution,n||ft.NONE);return o.filterFrame=t.filterFrame,o},e.prototype.returnFilterTexture=function(t){this.texturePool.returnTexture(t)},e.prototype.emptyPool=function(){this.texturePool.clear(!0)},e.prototype.resize=function(){this.texturePool.setScreenSize(this.renderer.view)},e.prototype.transformAABB=function(t,r){var n=Lf[0],i=Lf[1],o=Lf[2],a=Lf[3];n.set(r.left,r.top),i.set(r.left,r.bottom),o.set(r.right,r.top),a.set(r.right,r.bottom),t.apply(n,n),t.apply(i,i),t.apply(o,o),t.apply(a,a);var s=Math.min(n.x,i.x,o.x,a.x),l=Math.min(n.y,i.y,o.y,a.y),u=Math.max(n.x,i.x,o.x,a.x),c=Math.max(n.y,i.y,o.y,a.y);r.x=s,r.y=l,r.width=u-s,r.height=c-l},e.prototype.roundFrame=function(t,r,n,i,o){if(!(t.width<=0||t.height<=0||n.width<=0||n.height<=0)){if(o){var a=o.a,s=o.b,l=o.c,u=o.d;if((Math.abs(s)>1e-4||Math.abs(l)>1e-4)&&(Math.abs(a)>1e-4||Math.abs(u)>1e-4))return}o=o?gg.copyFrom(o):gg.identity(),o.translate(-n.x,-n.y).scale(i.width/n.width,i.height/n.height).translate(i.x,i.y),this.transformAABB(o,t),t.ceil(r),this.transformAABB(o.invert(),t)}},e}(),ef=function(){function e(t){this.renderer=t}return e.prototype.flush=function(){},e.prototype.destroy=function(){this.renderer=null},e.prototype.start=function(){},e.prototype.stop=function(){this.flush()},e.prototype.render=function(t){},e}(),E1=function(){function e(t){this.renderer=t,this.emptyRenderer=new ef(t),this.currentRenderer=this.emptyRenderer}return e.prototype.setObjectRenderer=function(t){this.currentRenderer!==t&&(this.currentRenderer.stop(),this.currentRenderer=t,this.currentRenderer.start())},e.prototype.flush=function(){this.setObjectRenderer(this.emptyRenderer)},e.prototype.reset=function(){this.setObjectRenderer(this.emptyRenderer)},e.prototype.copyBoundTextures=function(t,r){for(var n=this.renderer.texture.boundTextures,i=r-1;i>=0;--i)t[i]=n[i]||null,t[i]&&(t[i]._batchLocation=i)},e.prototype.boundArray=function(t,r,n,i){for(var o=t.elements,a=t.ids,s=t.count,l=0,u=0;u<s;u++){var c=o[u],f=c._batchLocation;if(f>=0&&f<i&&r[f]===c){a[u]=f;continue}for(;l<i;){var h=r[l];if(h&&h._batchEnabled===n&&h._batchLocation===l){l++;continue}a[u]=l,c._batchLocation=l,r[l]=c;break}}},e.prototype.destroy=function(){this.renderer=null},e}(),SP=0,T1=function(){function e(t){this.renderer=t,this.webGLVersion=1,this.extensions={},this.supports={uint32Indices:!1},this.handleContextLost=this.handleContextLost.bind(this),this.handleContextRestored=this.handleContextRestored.bind(this),t.view.addEventListener("webglcontextlost",this.handleContextLost,!1),t.view.addEventListener("webglcontextrestored",this.handleContextRestored,!1)}return Object.defineProperty(e.prototype,"isLost",{get:function(){return!this.gl||this.gl.isContextLost()},enumerable:!1,configurable:!0}),e.prototype.contextChange=function(t){this.gl=t,this.renderer.gl=t,this.renderer.CONTEXT_UID=SP++},e.prototype.initFromContext=function(t){this.gl=t,this.validateContext(t),this.renderer.gl=t,this.renderer.CONTEXT_UID=SP++,this.renderer.runners.contextChange.emit(t)},e.prototype.initFromOptions=function(t){var r=this.createContext(this.renderer.view,t);this.initFromContext(r)},e.prototype.createContext=function(t,r){var n;if(ne.PREFER_ENV>=pi.WEBGL2&&(n=t.getContext("webgl2",r)),n)this.webGLVersion=2;else if(this.webGLVersion=1,n=t.getContext("webgl",r)||t.getContext("experimental-webgl",r),!n)throw new Error("This browser does not support WebGL. Try using the canvas renderer");return this.gl=n,this.getExtensions(),this.gl},e.prototype.getExtensions=function(){var t=this.gl,r={loseContext:t.getExtension("WEBGL_lose_context"),anisotropicFiltering:t.getExtension("EXT_texture_filter_anisotropic"),floatTextureLinear:t.getExtension("OES_texture_float_linear"),s3tc:t.getExtension("WEBGL_compressed_texture_s3tc"),s3tc_sRGB:t.getExtension("WEBGL_compressed_texture_s3tc_srgb"),etc:t.getExtension("WEBGL_compressed_texture_etc"),etc1:t.getExtension("WEBGL_compressed_texture_etc1"),pvrtc:t.getExtension("WEBGL_compressed_texture_pvrtc")||t.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc"),atc:t.getExtension("WEBGL_compressed_texture_atc"),astc:t.getExtension("WEBGL_compressed_texture_astc")};this.webGLVersion===1?Object.assign(this.extensions,r,{drawBuffers:t.getExtension("WEBGL_draw_buffers"),depthTexture:t.getExtension("WEBGL_depth_texture"),vertexArrayObject:t.getExtension("OES_vertex_array_object")||t.getExtension("MOZ_OES_vertex_array_object")||t.getExtension("WEBKIT_OES_vertex_array_object"),uint32ElementIndex:t.getExtension("OES_element_index_uint"),floatTexture:t.getExtension("OES_texture_float"),floatTextureLinear:t.getExtension("OES_texture_float_linear"),textureHalfFloat:t.getExtension("OES_texture_half_float"),textureHalfFloatLinear:t.getExtension("OES_texture_half_float_linear")}):this.webGLVersion===2&&Object.assign(this.extensions,r,{colorBufferFloat:t.getExtension("EXT_color_buffer_float")})},e.prototype.handleContextLost=function(t){var r=this;t.preventDefault(),setTimeout(function(){r.gl.isContextLost()&&r.extensions.loseContext&&r.extensions.loseContext.restoreContext()},0)},e.prototype.handleContextRestored=function(){this.renderer.runners.contextChange.emit(this.gl)},e.prototype.destroy=function(){var t=this.renderer.view;this.renderer=null,t.removeEventListener("webglcontextlost",this.handleContextLost),t.removeEventListener("webglcontextrestored",this.handleContextRestored),this.gl.useProgram(null),this.extensions.loseContext&&this.extensions.loseContext.loseContext()},e.prototype.postrender=function(){this.renderer.renderingToScreen&&this.gl.flush()},e.prototype.validateContext=function(t){var r=t.getContextAttributes(),n="WebGL2RenderingContext"in globalThis&&t instanceof globalThis.WebGL2RenderingContext;n&&(this.webGLVersion=2),r&&!r.stencil&&console.warn("Provided WebGL context does not have a stencil buffer, masks may not render correctly");var i=n||!!t.getExtension("OES_element_index_uint");this.supports.uint32Indices=i,i||console.warn("Provided WebGL context does not support 32 index buffer, complex graphics may not render correctly")},e}(),vk=function(){function e(t){this.framebuffer=t,this.stencil=null,this.dirtyId=-1,this.dirtyFormat=-1,this.dirtySize=-1,this.multisample=ft.NONE,this.msaaBuffer=null,this.blitFramebuffer=null,this.mipLevel=0}return e}(),oae=new Fe,C1=function(){function e(t){this.renderer=t,this.managedFramebuffers=[],this.unknownFramebuffer=new wd(10,10),this.msaaSamples=null}return e.prototype.contextChange=function(){this.disposeAll(!0);var t=this.gl=this.renderer.gl;if(this.CONTEXT_UID=this.renderer.CONTEXT_UID,this.current=this.unknownFramebuffer,this.viewport=new Fe,this.hasMRT=!0,this.writeDepthTexture=!0,this.renderer.context.webGLVersion===1){var r=this.renderer.context.extensions.drawBuffers,n=this.renderer.context.extensions.depthTexture;ne.PREFER_ENV===pi.WEBGL_LEGACY&&(r=null,n=null),r?t.drawBuffers=function(i){return r.drawBuffersWEBGL(i)}:(this.hasMRT=!1,t.drawBuffers=function(){}),n||(this.writeDepthTexture=!1)}else this.msaaSamples=t.getInternalformatParameter(t.RENDERBUFFER,t.RGBA8,t.SAMPLES)},e.prototype.bind=function(t,r,n){n===void 0&&(n=0);var i=this.gl;if(t){var o=t.glFramebuffers[this.CONTEXT_UID]||this.initFramebuffer(t);this.current!==t&&(this.current=t,i.bindFramebuffer(i.FRAMEBUFFER,o.framebuffer)),o.mipLevel!==n&&(t.dirtyId++,t.dirtyFormat++,o.mipLevel=n),o.dirtyId!==t.dirtyId&&(o.dirtyId=t.dirtyId,o.dirtyFormat!==t.dirtyFormat?(o.dirtyFormat=t.dirtyFormat,o.dirtySize=t.dirtySize,this.updateFramebuffer(t,n)):o.dirtySize!==t.dirtySize&&(o.dirtySize=t.dirtySize,this.resizeFramebuffer(t)));for(var a=0;a<t.colorTextures.length;a++){var s=t.colorTextures[a];this.renderer.texture.unbind(s.parentTextureArray||s)}if(t.depthTexture&&this.renderer.texture.unbind(t.depthTexture),r){var l=r.width>>n,u=r.height>>n,c=l/r.width;this.setViewport(r.x*c,r.y*c,l,u)}else{var l=t.width>>n,u=t.height>>n;this.setViewport(0,0,l,u)}}else this.current&&(this.current=null,i.bindFramebuffer(i.FRAMEBUFFER,null)),r?this.setViewport(r.x,r.y,r.width,r.height):this.setViewport(0,0,this.renderer.width,this.renderer.height)},e.prototype.setViewport=function(t,r,n,i){var o=this.viewport;t=Math.round(t),r=Math.round(r),n=Math.round(n),i=Math.round(i),(o.width!==n||o.height!==i||o.x!==t||o.y!==r)&&(o.x=t,o.y=r,o.width=n,o.height=i,this.gl.viewport(t,r,n,i))},Object.defineProperty(e.prototype,"size",{get:function(){return this.current?{x:0,y:0,width:this.current.width,height:this.current.height}:{x:0,y:0,width:this.renderer.width,height:this.renderer.height}},enumerable:!1,configurable:!0}),e.prototype.clear=function(t,r,n,i,o){o===void 0&&(o=pc.COLOR|pc.DEPTH);var a=this.gl;a.clearColor(t,r,n,i),a.clear(o)},e.prototype.initFramebuffer=function(t){var r=this.gl,n=new vk(r.createFramebuffer());return n.multisample=this.detectSamples(t.multisample),t.glFramebuffers[this.CONTEXT_UID]=n,this.managedFramebuffers.push(t),t.disposeRunner.add(this),n},e.prototype.resizeFramebuffer=function(t){var r=this.gl,n=t.glFramebuffers[this.CONTEXT_UID];n.msaaBuffer&&(r.bindRenderbuffer(r.RENDERBUFFER,n.msaaBuffer),r.renderbufferStorageMultisample(r.RENDERBUFFER,n.multisample,r.RGBA8,t.width,t.height)),n.stencil&&(r.bindRenderbuffer(r.RENDERBUFFER,n.stencil),n.msaaBuffer?r.renderbufferStorageMultisample(r.RENDERBUFFER,n.multisample,r.DEPTH24_STENCIL8,t.width,t.height):r.renderbufferStorage(r.RENDERBUFFER,r.DEPTH_STENCIL,t.width,t.height));var i=t.colorTextures,o=i.length;r.drawBuffers||(o=Math.min(o,1));for(var a=0;a<o;a++){var s=i[a],l=s.parentTextureArray||s;this.renderer.texture.bind(l,0)}t.depthTexture&&this.writeDepthTexture&&this.renderer.texture.bind(t.depthTexture,0)},e.prototype.updateFramebuffer=function(t,r){var n=this.gl,i=t.glFramebuffers[this.CONTEXT_UID],o=t.colorTextures,a=o.length;n.drawBuffers||(a=Math.min(a,1)),i.multisample>1&&this.canMultisampleFramebuffer(t)?(i.msaaBuffer=i.msaaBuffer||n.createRenderbuffer(),n.bindRenderbuffer(n.RENDERBUFFER,i.msaaBuffer),n.renderbufferStorageMultisample(n.RENDERBUFFER,i.multisample,n.RGBA8,t.width,t.height),n.framebufferRenderbuffer(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0,n.RENDERBUFFER,i.msaaBuffer)):i.msaaBuffer&&(n.deleteRenderbuffer(i.msaaBuffer),i.msaaBuffer=null,i.blitFramebuffer&&(i.blitFramebuffer.dispose(),i.blitFramebuffer=null));for(var s=[],l=0;l<a;l++){var u=o[l],c=u.parentTextureArray||u;this.renderer.texture.bind(c,0),!(l===0&&i.msaaBuffer)&&(n.framebufferTexture2D(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0+l,u.target,c._glTextures[this.CONTEXT_UID].texture,r),s.push(n.COLOR_ATTACHMENT0+l))}if(s.length>1&&n.drawBuffers(s),t.depthTexture){var f=this.writeDepthTexture;if(f){var h=t.depthTexture;this.renderer.texture.bind(h,0),n.framebufferTexture2D(n.FRAMEBUFFER,n.DEPTH_ATTACHMENT,n.TEXTURE_2D,h._glTextures[this.CONTEXT_UID].texture,r)}}(t.stencil||t.depth)&&!(t.depthTexture&&this.writeDepthTexture)?(i.stencil=i.stencil||n.createRenderbuffer(),n.bindRenderbuffer(n.RENDERBUFFER,i.stencil),i.msaaBuffer?n.renderbufferStorageMultisample(n.RENDERBUFFER,i.multisample,n.DEPTH24_STENCIL8,t.width,t.height):n.renderbufferStorage(n.RENDERBUFFER,n.DEPTH_STENCIL,t.width,t.height),n.framebufferRenderbuffer(n.FRAMEBUFFER,n.DEPTH_STENCIL_ATTACHMENT,n.RENDERBUFFER,i.stencil)):i.stencil&&(n.deleteRenderbuffer(i.stencil),i.stencil=null)},e.prototype.canMultisampleFramebuffer=function(t){return this.renderer.context.webGLVersion!==1&&t.colorTextures.length<=1&&!t.depthTexture},e.prototype.detectSamples=function(t){var r=this.msaaSamples,n=ft.NONE;if(t<=1||r===null)return n;for(var i=0;i<r.length;i++)if(r[i]<=t){n=r[i];break}return n===1&&(n=ft.NONE),n},e.prototype.blit=function(t,r,n){var i=this,o=i.current,a=i.renderer,s=i.gl,l=i.CONTEXT_UID;if(a.context.webGLVersion===2&&o){var u=o.glFramebuffers[l];if(u){if(!t){if(!u.msaaBuffer)return;var c=o.colorTextures[0];if(!c)return;u.blitFramebuffer||(u.blitFramebuffer=new wd(o.width,o.height),u.blitFramebuffer.addColorTexture(0,c)),t=u.blitFramebuffer,t.colorTextures[0]!==c&&(t.colorTextures[0]=c,t.dirtyId++,t.dirtyFormat++),(t.width!==o.width||t.height!==o.height)&&(t.width=o.width,t.height=o.height,t.dirtyId++,t.dirtySize++)}r||(r=oae,r.width=o.width,r.height=o.height),n||(n=r);var f=r.width===n.width&&r.height===n.height;this.bind(t),s.bindFramebuffer(s.READ_FRAMEBUFFER,u.framebuffer),s.blitFramebuffer(r.left,r.top,r.right,r.bottom,n.left,n.top,n.right,n.bottom,s.COLOR_BUFFER_BIT,f?s.NEAREST:s.LINEAR)}}},e.prototype.disposeFramebuffer=function(t,r){var n=t.glFramebuffers[this.CONTEXT_UID],i=this.gl;if(n){delete t.glFramebuffers[this.CONTEXT_UID];var o=this.managedFramebuffers.indexOf(t);o>=0&&this.managedFramebuffers.splice(o,1),t.disposeRunner.remove(this),r||(i.deleteFramebuffer(n.framebuffer),n.msaaBuffer&&i.deleteRenderbuffer(n.msaaBuffer),n.stencil&&i.deleteRenderbuffer(n.stencil)),n.blitFramebuffer&&n.blitFramebuffer.dispose()}},e.prototype.disposeAll=function(t){var r=this.managedFramebuffers;this.managedFramebuffers=[];for(var n=0;n<r.length;n++)this.disposeFramebuffer(r[n],t)},e.prototype.forceStencil=function(){var t=this.current;if(t){var r=t.glFramebuffers[this.CONTEXT_UID];if(!(!r||r.stencil)){t.stencil=!0;var n=t.width,i=t.height,o=this.gl,a=o.createRenderbuffer();o.bindRenderbuffer(o.RENDERBUFFER,a),r.msaaBuffer?o.renderbufferStorageMultisample(o.RENDERBUFFER,r.multisample,o.DEPTH24_STENCIL8,n,i):o.renderbufferStorage(o.RENDERBUFFER,o.DEPTH_STENCIL,n,i),r.stencil=a,o.framebufferRenderbuffer(o.FRAMEBUFFER,o.DEPTH_STENCIL_ATTACHMENT,o.RENDERBUFFER,a)}}},e.prototype.reset=function(){this.current=this.unknownFramebuffer,this.viewport=new Fe},e.prototype.destroy=function(){this.renderer=null},e}(),yg={5126:4,5123:2,5121:1},P1=function(){function e(t){this.renderer=t,this._activeGeometry=null,this._activeVao=null,this.hasVao=!0,this.hasInstance=!0,this.canUseUInt32ElementIndex=!1,this.managedGeometries={}}return e.prototype.contextChange=function(){this.disposeAll(!0);var t=this.gl=this.renderer.gl,r=this.renderer.context;if(this.CONTEXT_UID=this.renderer.CONTEXT_UID,r.webGLVersion!==2){var n=this.renderer.context.extensions.vertexArrayObject;ne.PREFER_ENV===pi.WEBGL_LEGACY&&(n=null),n?(t.createVertexArray=function(){return n.createVertexArrayOES()},t.bindVertexArray=function(o){return n.bindVertexArrayOES(o)},t.deleteVertexArray=function(o){return n.deleteVertexArrayOES(o)}):(this.hasVao=!1,t.createVertexArray=function(){return null},t.bindVertexArray=function(){return null},t.deleteVertexArray=function(){return null})}if(r.webGLVersion!==2){var i=t.getExtension("ANGLE_instanced_arrays");i?(t.vertexAttribDivisor=function(o,a){return i.vertexAttribDivisorANGLE(o,a)},t.drawElementsInstanced=function(o,a,s,l,u){return i.drawElementsInstancedANGLE(o,a,s,l,u)},t.drawArraysInstanced=function(o,a,s,l){return i.drawArraysInstancedANGLE(o,a,s,l)}):this.hasInstance=!1}this.canUseUInt32ElementIndex=r.webGLVersion===2||!!r.extensions.uint32ElementIndex},e.prototype.bind=function(t,r){r=r||this.renderer.shader.shader;var n=this.gl,i=t.glVertexArrayObjects[this.CONTEXT_UID],o=!1;i||(this.managedGeometries[t.id]=t,t.disposeRunner.add(this),t.glVertexArrayObjects[this.CONTEXT_UID]=i={},o=!0);var a=i[r.program.id]||this.initGeometryVao(t,r,o);this._activeGeometry=t,this._activeVao!==a&&(this._activeVao=a,this.hasVao?n.bindVertexArray(a):this.activateVao(t,r.program)),this.updateBuffers()},e.prototype.reset=function(){this.unbind()},e.prototype.updateBuffers=function(){for(var t=this._activeGeometry,r=this.renderer.buffer,n=0;n<t.buffers.length;n++){var i=t.buffers[n];r.update(i)}},e.prototype.checkCompatibility=function(t,r){var n=t.attributes,i=r.attributeData;for(var o in i)if(!n[o])throw new Error('shader and geometry incompatible, geometry missing the "'+o+'" attribute')},e.prototype.getSignature=function(t,r){var n=t.attributes,i=r.attributeData,o=["g",t.id];for(var a in n)i[a]&&o.push(a,i[a].location);return o.join("-")},e.prototype.initGeometryVao=function(t,r,n){n===void 0&&(n=!0);var i=this.gl,o=this.CONTEXT_UID,a=this.renderer.buffer,s=r.program;s.glPrograms[o]||this.renderer.shader.generateProgram(r),this.checkCompatibility(t,s);var l=this.getSignature(t,s),u=t.glVertexArrayObjects[this.CONTEXT_UID],c=u[l];if(c)return u[s.id]=c,c;var f=t.buffers,h=t.attributes,d={},m={};for(var g in f)d[g]=0,m[g]=0;for(var g in h)!h[g].size&&s.attributeData[g]?h[g].size=s.attributeData[g].size:h[g].size||console.warn("PIXI Geometry attribute '"+g+"' size cannot be determined (likely the bound shader does not have the attribute)"),d[h[g].buffer]+=h[g].size*yg[h[g].type];for(var g in h){var p=h[g],v=p.size;p.stride===void 0&&(d[p.buffer]===v*yg[p.type]?p.stride=0:p.stride=d[p.buffer]),p.start===void 0&&(p.start=m[p.buffer],m[p.buffer]+=v*yg[p.type])}c=i.createVertexArray(),i.bindVertexArray(c);for(var y=0;y<f.length;y++){var _=f[y];a.bind(_),n&&_._glBuffers[o].refCount++}return this.activateVao(t,s),this._activeVao=c,u[s.id]=c,u[l]=c,c},e.prototype.disposeGeometry=function(t,r){var n;if(this.managedGeometries[t.id]){delete this.managedGeometries[t.id];var i=t.glVertexArrayObjects[this.CONTEXT_UID],o=this.gl,a=t.buffers,s=(n=this.renderer)===null||n===void 0?void 0:n.buffer;if(t.disposeRunner.remove(this),!!i){if(s)for(var l=0;l<a.length;l++){var u=a[l]._glBuffers[this.CONTEXT_UID];u&&(u.refCount--,u.refCount===0&&!r&&s.dispose(a[l],r))}if(!r){for(var c in i)if(c[0]==="g"){var f=i[c];this._activeVao===f&&this.unbind(),o.deleteVertexArray(f)}}delete t.glVertexArrayObjects[this.CONTEXT_UID]}}},e.prototype.disposeAll=function(t){for(var r=Object.keys(this.managedGeometries),n=0;n<r.length;n++)this.disposeGeometry(this.managedGeometries[r[n]],t)},e.prototype.activateVao=function(t,r){var n=this.gl,i=this.CONTEXT_UID,o=this.renderer.buffer,a=t.buffers,s=t.attributes;t.indexBuffer&&o.bind(t.indexBuffer);var l=null;for(var u in s){var c=s[u],f=a[c.buffer],h=f._glBuffers[i];if(r.attributeData[u]){l!==h&&(o.bind(f),l=h);var d=r.attributeData[u].location;if(n.enableVertexAttribArray(d),n.vertexAttribPointer(d,c.size,c.type||n.FLOAT,c.normalized,c.stride,c.start),c.instance)if(this.hasInstance)n.vertexAttribDivisor(d,1);else throw new Error("geometry error, GPU Instancing is not supported on this device")}}},e.prototype.draw=function(t,r,n,i){var o=this.gl,a=this._activeGeometry;if(a.indexBuffer){var s=a.indexBuffer.data.BYTES_PER_ELEMENT,l=s===2?o.UNSIGNED_SHORT:o.UNSIGNED_INT;s===2||s===4&&this.canUseUInt32ElementIndex?a.instanced?o.drawElementsInstanced(t,r||a.indexBuffer.data.length,l,(n||0)*s,i||1):o.drawElements(t,r||a.indexBuffer.data.length,l,(n||0)*s):console.warn("unsupported index buffer type: uint32")}else a.instanced?o.drawArraysInstanced(t,n,r||a.getSize(),i||1):o.drawArrays(t,n,r||a.getSize());return this},e.prototype.unbind=function(){this.gl.bindVertexArray(null),this._activeVao=null,this._activeGeometry=null},e.prototype.destroy=function(){this.renderer=null},e}(),gk=function(){function e(t){t===void 0&&(t=null),this.type=Mt.NONE,this.autoDetect=!0,this.maskObject=t||null,this.pooled=!1,this.isMaskData=!0,this.resolution=null,this.multisample=ne.FILTER_MULTISAMPLE,this.enabled=!0,this.colorMask=15,this._filters=null,this._stencilCounter=0,this._scissorCounter=0,this._scissorRect=null,this._scissorRectLocal=null,this._colorMask=15,this._target=null}return Object.defineProperty(e.prototype,"filter",{get:function(){return this._filters?this._filters[0]:null},set:function(t){t?this._filters?this._filters[0]=t:this._filters=[t]:this._filters=null},enumerable:!1,configurable:!0}),e.prototype.reset=function(){this.pooled&&(this.maskObject=null,this.type=Mt.NONE,this.autoDetect=!0),this._target=null,this._scissorRectLocal=null},e.prototype.copyCountersOrReset=function(t){t?(this._stencilCounter=t._stencilCounter,this._scissorCounter=t._scissorCounter,this._scissorRect=t._scissorRect):(this._stencilCounter=0,this._scissorCounter=0,this._scissorRect=null)},e}();function wP(e,t,r){var n=e.createShader(t);return e.shaderSource(n,r),e.compileShader(n),n}function EP(e,t){var r=e.getShaderSource(t).split(`
`).map(function(u,c){return c+": "+u}),n=e.getShaderInfoLog(t),i=n.split(`
`),o={},a=i.map(function(u){return parseFloat(u.replace(/^ERROR\: 0\:([\d]+)\:.*$/,"$1"))}).filter(function(u){return u&&!o[u]?(o[u]=!0,!0):!1}),s=[""];a.forEach(function(u){r[u-1]="%c"+r[u-1]+"%c",s.push("background: #FF0000; color:#FFFFFF; font-size: 10px","font-size: 10px")});var l=r.join(`
`);s[0]=l,console.error(n),console.groupCollapsed("click to view full shader code"),console.warn.apply(console,s),console.groupEnd()}function aae(e,t,r,n){e.getProgramParameter(t,e.LINK_STATUS)||(e.getShaderParameter(r,e.COMPILE_STATUS)||EP(e,r),e.getShaderParameter(n,e.COMPILE_STATUS)||EP(e,n),console.error("PixiJS Error: Could not initialize shader."),e.getProgramInfoLog(t)!==""&&console.warn("PixiJS Warning: gl.getProgramInfoLog()",e.getProgramInfoLog(t)))}function _g(e){for(var t=new Array(e),r=0;r<t.length;r++)t[r]=!1;return t}function yk(e,t){switch(e){case"float":return 0;case"vec2":return new Float32Array(2*t);case"vec3":return new Float32Array(3*t);case"vec4":return new Float32Array(4*t);case"int":case"uint":case"sampler2D":case"sampler2DArray":return 0;case"ivec2":return new Int32Array(2*t);case"ivec3":return new Int32Array(3*t);case"ivec4":return new Int32Array(4*t);case"uvec2":return new Uint32Array(2*t);case"uvec3":return new Uint32Array(3*t);case"uvec4":return new Uint32Array(4*t);case"bool":return!1;case"bvec2":return _g(2*t);case"bvec3":return _g(3*t);case"bvec4":return _g(4*t);case"mat2":return new Float32Array([1,0,0,1]);case"mat3":return new Float32Array([1,0,0,0,1,0,0,0,1]);case"mat4":return new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1])}return null}var _k={},Kl=_k;function xk(){if(Kl===_k||Kl&&Kl.isContextLost()){var e=ne.ADAPTER.createCanvas(),t=void 0;ne.PREFER_ENV>=pi.WEBGL2&&(t=e.getContext("webgl2",{})),t||(t=e.getContext("webgl",{})||e.getContext("experimental-webgl",{}),t?t.getExtension("WEBGL_draw_buffers"):t=null),Kl=t}return Kl}var Ff;function sae(){if(!Ff){Ff=jr.MEDIUM;var e=xk();if(e&&e.getShaderPrecisionFormat){var t=e.getShaderPrecisionFormat(e.FRAGMENT_SHADER,e.HIGH_FLOAT);Ff=t.precision?jr.HIGH:jr.MEDIUM}}return Ff}function TP(e,t,r){if(e.substring(0,9)!=="precision"){var n=t;return t===jr.HIGH&&r!==jr.HIGH&&(n=jr.MEDIUM),"precision "+n+` float;
`+e}else if(r!==jr.HIGH&&e.substring(0,15)==="precision highp")return e.replace("precision highp","precision mediump");return e}var lae={float:1,vec2:2,vec3:3,vec4:4,int:1,ivec2:2,ivec3:3,ivec4:4,uint:1,uvec2:2,uvec3:3,uvec4:4,bool:1,bvec2:2,bvec3:3,bvec4:4,mat2:4,mat3:9,mat4:16,sampler2D:1};function bk(e){return lae[e]}var Df=null,CP={FLOAT:"float",FLOAT_VEC2:"vec2",FLOAT_VEC3:"vec3",FLOAT_VEC4:"vec4",INT:"int",INT_VEC2:"ivec2",INT_VEC3:"ivec3",INT_VEC4:"ivec4",UNSIGNED_INT:"uint",UNSIGNED_INT_VEC2:"uvec2",UNSIGNED_INT_VEC3:"uvec3",UNSIGNED_INT_VEC4:"uvec4",BOOL:"bool",BOOL_VEC2:"bvec2",BOOL_VEC3:"bvec3",BOOL_VEC4:"bvec4",FLOAT_MAT2:"mat2",FLOAT_MAT3:"mat3",FLOAT_MAT4:"mat4",SAMPLER_2D:"sampler2D",INT_SAMPLER_2D:"sampler2D",UNSIGNED_INT_SAMPLER_2D:"sampler2D",SAMPLER_CUBE:"samplerCube",INT_SAMPLER_CUBE:"samplerCube",UNSIGNED_INT_SAMPLER_CUBE:"samplerCube",SAMPLER_2D_ARRAY:"sampler2DArray",INT_SAMPLER_2D_ARRAY:"sampler2DArray",UNSIGNED_INT_SAMPLER_2D_ARRAY:"sampler2DArray"};function Sk(e,t){if(!Df){var r=Object.keys(CP);Df={};for(var n=0;n<r.length;++n){var i=r[n];Df[e[i]]=CP[i]}}return Df[t]}var ba=[{test:function(e){return e.type==="float"&&e.size===1&&!e.isArray},code:function(e){return`
            if(uv["`+e+'"] !== ud["'+e+`"].value)
            {
                ud["`+e+'"].value = uv["'+e+`"]
                gl.uniform1f(ud["`+e+'"].location, uv["'+e+`"])
            }
            `}},{test:function(e,t){return(e.type==="sampler2D"||e.type==="samplerCube"||e.type==="sampler2DArray")&&e.size===1&&!e.isArray&&(t==null||t.castToBaseTexture!==void 0)},code:function(e){return`t = syncData.textureCount++;

            renderer.texture.bind(uv["`+e+`"], t);

            if(ud["`+e+`"].value !== t)
            {
                ud["`+e+`"].value = t;
                gl.uniform1i(ud["`+e+`"].location, t);
; // eslint-disable-line max-len
            }`}},{test:function(e,t){return e.type==="mat3"&&e.size===1&&!e.isArray&&t.a!==void 0},code:function(e){return`
            gl.uniformMatrix3fv(ud["`+e+'"].location, false, uv["'+e+`"].toArray(true));
            `},codeUbo:function(e){return`
                var `+e+"_matrix = uv."+e+`.toArray(true);

                data[offset] = `+e+`_matrix[0];
                data[offset+1] = `+e+`_matrix[1];
                data[offset+2] = `+e+`_matrix[2];
        
                data[offset + 4] = `+e+`_matrix[3];
                data[offset + 5] = `+e+`_matrix[4];
                data[offset + 6] = `+e+`_matrix[5];
        
                data[offset + 8] = `+e+`_matrix[6];
                data[offset + 9] = `+e+`_matrix[7];
                data[offset + 10] = `+e+`_matrix[8];
            `}},{test:function(e,t){return e.type==="vec2"&&e.size===1&&!e.isArray&&t.x!==void 0},code:function(e){return`
                cv = ud["`+e+`"].value;
                v = uv["`+e+`"];

                if(cv[0] !== v.x || cv[1] !== v.y)
                {
                    cv[0] = v.x;
                    cv[1] = v.y;
                    gl.uniform2f(ud["`+e+`"].location, v.x, v.y);
                }`},codeUbo:function(e){return`
                v = uv.`+e+`;

                data[offset] = v.x;
                data[offset+1] = v.y;
            `}},{test:function(e){return e.type==="vec2"&&e.size===1&&!e.isArray},code:function(e){return`
                cv = ud["`+e+`"].value;
                v = uv["`+e+`"];

                if(cv[0] !== v[0] || cv[1] !== v[1])
                {
                    cv[0] = v[0];
                    cv[1] = v[1];
                    gl.uniform2f(ud["`+e+`"].location, v[0], v[1]);
                }
            `}},{test:function(e,t){return e.type==="vec4"&&e.size===1&&!e.isArray&&t.width!==void 0},code:function(e){return`
                cv = ud["`+e+`"].value;
                v = uv["`+e+`"];

                if(cv[0] !== v.x || cv[1] !== v.y || cv[2] !== v.width || cv[3] !== v.height)
                {
                    cv[0] = v.x;
                    cv[1] = v.y;
                    cv[2] = v.width;
                    cv[3] = v.height;
                    gl.uniform4f(ud["`+e+`"].location, v.x, v.y, v.width, v.height)
                }`},codeUbo:function(e){return`
                    v = uv.`+e+`;

                    data[offset] = v.x;
                    data[offset+1] = v.y;
                    data[offset+2] = v.width;
                    data[offset+3] = v.height;
                `}},{test:function(e){return e.type==="vec4"&&e.size===1&&!e.isArray},code:function(e){return`
                cv = ud["`+e+`"].value;
                v = uv["`+e+`"];

                if(cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2] || cv[3] !== v[3])
                {
                    cv[0] = v[0];
                    cv[1] = v[1];
                    cv[2] = v[2];
                    cv[3] = v[3];

                    gl.uniform4f(ud["`+e+`"].location, v[0], v[1], v[2], v[3])
                }`}}],uae={float:`
    if (cv !== v)
    {
        cu.value = v;
        gl.uniform1f(location, v);
    }`,vec2:`
    if (cv[0] !== v[0] || cv[1] !== v[1])
    {
        cv[0] = v[0];
        cv[1] = v[1];

        gl.uniform2f(location, v[0], v[1])
    }`,vec3:`
    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2])
    {
        cv[0] = v[0];
        cv[1] = v[1];
        cv[2] = v[2];

        gl.uniform3f(location, v[0], v[1], v[2])
    }`,vec4:`
    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2] || cv[3] !== v[3])
    {
        cv[0] = v[0];
        cv[1] = v[1];
        cv[2] = v[2];
        cv[3] = v[3];

        gl.uniform4f(location, v[0], v[1], v[2], v[3]);
    }`,int:`
    if (cv !== v)
    {
        cu.value = v;

        gl.uniform1i(location, v);
    }`,ivec2:`
    if (cv[0] !== v[0] || cv[1] !== v[1])
    {
        cv[0] = v[0];
        cv[1] = v[1];

        gl.uniform2i(location, v[0], v[1]);
    }`,ivec3:`
    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2])
    {
        cv[0] = v[0];
        cv[1] = v[1];
        cv[2] = v[2];

        gl.uniform3i(location, v[0], v[1], v[2]);
    }`,ivec4:`
    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2] || cv[3] !== v[3])
    {
        cv[0] = v[0];
        cv[1] = v[1];
        cv[2] = v[2];
        cv[3] = v[3];

        gl.uniform4i(location, v[0], v[1], v[2], v[3]);
    }`,uint:`
    if (cv !== v)
    {
        cu.value = v;

        gl.uniform1ui(location, v);
    }`,uvec2:`
    if (cv[0] !== v[0] || cv[1] !== v[1])
    {
        cv[0] = v[0];
        cv[1] = v[1];

        gl.uniform2ui(location, v[0], v[1]);
    }`,uvec3:`
    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2])
    {
        cv[0] = v[0];
        cv[1] = v[1];
        cv[2] = v[2];

        gl.uniform3ui(location, v[0], v[1], v[2]);
    }`,uvec4:`
    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2] || cv[3] !== v[3])
    {
        cv[0] = v[0];
        cv[1] = v[1];
        cv[2] = v[2];
        cv[3] = v[3];

        gl.uniform4ui(location, v[0], v[1], v[2], v[3]);
    }`,bool:`
    if (cv !== v)
    {
        cu.value = v;
        gl.uniform1i(location, v);
    }`,bvec2:`
    if (cv[0] != v[0] || cv[1] != v[1])
    {
        cv[0] = v[0];
        cv[1] = v[1];

        gl.uniform2i(location, v[0], v[1]);
    }`,bvec3:`
    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2])
    {
        cv[0] = v[0];
        cv[1] = v[1];
        cv[2] = v[2];

        gl.uniform3i(location, v[0], v[1], v[2]);
    }`,bvec4:`
    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2] || cv[3] !== v[3])
    {
        cv[0] = v[0];
        cv[1] = v[1];
        cv[2] = v[2];
        cv[3] = v[3];

        gl.uniform4i(location, v[0], v[1], v[2], v[3]);
    }`,mat2:"gl.uniformMatrix2fv(location, false, v)",mat3:"gl.uniformMatrix3fv(location, false, v)",mat4:"gl.uniformMatrix4fv(location, false, v)",sampler2D:`
    if (cv !== v)
    {
        cu.value = v;

        gl.uniform1i(location, v);
    }`,samplerCube:`
    if (cv !== v)
    {
        cu.value = v;

        gl.uniform1i(location, v);
    }`,sampler2DArray:`
    if (cv !== v)
    {
        cu.value = v;

        gl.uniform1i(location, v);
    }`},cae={float:"gl.uniform1fv(location, v)",vec2:"gl.uniform2fv(location, v)",vec3:"gl.uniform3fv(location, v)",vec4:"gl.uniform4fv(location, v)",mat4:"gl.uniformMatrix4fv(location, false, v)",mat3:"gl.uniformMatrix3fv(location, false, v)",mat2:"gl.uniformMatrix2fv(location, false, v)",int:"gl.uniform1iv(location, v)",ivec2:"gl.uniform2iv(location, v)",ivec3:"gl.uniform3iv(location, v)",ivec4:"gl.uniform4iv(location, v)",uint:"gl.uniform1uiv(location, v)",uvec2:"gl.uniform2uiv(location, v)",uvec3:"gl.uniform3uiv(location, v)",uvec4:"gl.uniform4uiv(location, v)",bool:"gl.uniform1iv(location, v)",bvec2:"gl.uniform2iv(location, v)",bvec3:"gl.uniform3iv(location, v)",bvec4:"gl.uniform4iv(location, v)",sampler2D:"gl.uniform1iv(location, v)",samplerCube:"gl.uniform1iv(location, v)",sampler2DArray:"gl.uniform1iv(location, v)"};function fae(e,t){var r,n=[`
        var v = null;
        var cv = null;
        var cu = null;
        var t = 0;
        var gl = renderer.gl;
    `];for(var i in e.uniforms){var o=t[i];if(!o){!((r=e.uniforms[i])===null||r===void 0)&&r.group&&(e.uniforms[i].ubo?n.push(`
                        renderer.shader.syncUniformBufferGroup(uv.`+i+", '"+i+`');
                    `):n.push(`
                        renderer.shader.syncUniformGroup(uv.`+i+`, syncData);
                    `));continue}for(var a=e.uniforms[i],s=!1,l=0;l<ba.length;l++)if(ba[l].test(o,a)){n.push(ba[l].code(i,a)),s=!0;break}if(!s){var u=o.size===1&&!o.isArray?uae:cae,c=u[o.type].replace("location",'ud["'+i+'"].location');n.push(`
            cu = ud["`+i+`"];
            cv = cu.value;
            v = uv["`+i+`"];
            `+c+";")}}return new Function("ud","uv","renderer","syncData",n.join(`
`))}var hae=["precision mediump float;","void main(void){","float test = 0.1;","%forloop%","gl_FragColor = vec4(0.0);","}"].join(`
`);function dae(e){for(var t="",r=0;r<e;++r)r>0&&(t+=`
else `),r<e-1&&(t+="if(test == "+r+".0){}");return t}function wk(e,t){if(e===0)throw new Error("Invalid value of `0` passed to `checkMaxIfStatementsInShader`");for(var r=t.createShader(t.FRAGMENT_SHADER);;){var n=hae.replace(/%forloop%/gi,dae(e));if(t.shaderSource(r,n),t.compileShader(r),!t.getShaderParameter(r,t.COMPILE_STATUS))e=e/2|0;else break}return e}var Zl;function pae(){if(typeof Zl=="boolean")return Zl;try{var e=new Function("param1","param2","param3","return param1[param2] === param3;");Zl=e({a:"b"},"a","b")===!0}catch{Zl=!1}return Zl}var mae=`varying vec2 vTextureCoord;

uniform sampler2D uSampler;

void main(void){
   gl_FragColor *= texture2D(uSampler, vTextureCoord);
}`,vae=`attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;

uniform mat3 projectionMatrix;

varying vec2 vTextureCoord;

void main(void){
   gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);
   vTextureCoord = aTextureCoord;
}
`,gae=0,Nf={},El=function(){function e(t,r,n){n===void 0&&(n="pixi-shader"),this.id=gae++,this.vertexSrc=t||e.defaultVertexSrc,this.fragmentSrc=r||e.defaultFragmentSrc,this.vertexSrc=this.vertexSrc.trim(),this.fragmentSrc=this.fragmentSrc.trim(),this.vertexSrc.substring(0,8)!=="#version"&&(n=n.replace(/\s+/g,"-"),Nf[n]?(Nf[n]++,n+="-"+Nf[n]):Nf[n]=1,this.vertexSrc="#define SHADER_NAME "+n+`
`+this.vertexSrc,this.fragmentSrc="#define SHADER_NAME "+n+`
`+this.fragmentSrc,this.vertexSrc=TP(this.vertexSrc,ne.PRECISION_VERTEX,jr.HIGH),this.fragmentSrc=TP(this.fragmentSrc,ne.PRECISION_FRAGMENT,sae())),this.glPrograms={},this.syncUniforms=null}return Object.defineProperty(e,"defaultVertexSrc",{get:function(){return vae},enumerable:!1,configurable:!0}),Object.defineProperty(e,"defaultFragmentSrc",{get:function(){return mae},enumerable:!1,configurable:!0}),e.from=function(t,r,n){var i=t+r,o=L_[i];return o||(L_[i]=o=new e(t,r,n)),o},e}(),Bi=function(){function e(t,r){this.uniformBindCount=0,this.program=t,r?r instanceof wo?this.uniformGroup=r:this.uniformGroup=new wo(r):this.uniformGroup=new wo({}),this.disposeRunner=new Yt("disposeShader")}return e.prototype.checkUniformExists=function(t,r){if(r.uniforms[t])return!0;for(var n in r.uniforms){var i=r.uniforms[n];if(i.group&&this.checkUniformExists(t,i))return!0}return!1},e.prototype.destroy=function(){this.uniformGroup=null,this.disposeRunner.emit(this),this.disposeRunner.destroy()},Object.defineProperty(e.prototype,"uniforms",{get:function(){return this.uniformGroup.uniforms},enumerable:!1,configurable:!0}),e.from=function(t,r,n){var i=El.from(t,r);return new e(i,n)},e}(),xg=0,bg=1,Sg=2,wg=3,Eg=4,Tg=5,Go=function(){function e(){this.data=0,this.blendMode=ce.NORMAL,this.polygonOffset=0,this.blend=!0,this.depthMask=!0}return Object.defineProperty(e.prototype,"blend",{get:function(){return!!(this.data&1<<xg)},set:function(t){!!(this.data&1<<xg)!==t&&(this.data^=1<<xg)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"offsets",{get:function(){return!!(this.data&1<<bg)},set:function(t){!!(this.data&1<<bg)!==t&&(this.data^=1<<bg)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"culling",{get:function(){return!!(this.data&1<<Sg)},set:function(t){!!(this.data&1<<Sg)!==t&&(this.data^=1<<Sg)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"depthTest",{get:function(){return!!(this.data&1<<wg)},set:function(t){!!(this.data&1<<wg)!==t&&(this.data^=1<<wg)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"depthMask",{get:function(){return!!(this.data&1<<Tg)},set:function(t){!!(this.data&1<<Tg)!==t&&(this.data^=1<<Tg)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"clockwiseFrontFace",{get:function(){return!!(this.data&1<<Eg)},set:function(t){!!(this.data&1<<Eg)!==t&&(this.data^=1<<Eg)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"blendMode",{get:function(){return this._blendMode},set:function(t){this.blend=t!==ce.NONE,this._blendMode=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"polygonOffset",{get:function(){return this._polygonOffset},set:function(t){this.offsets=!!t,this._polygonOffset=t},enumerable:!1,configurable:!0}),e.prototype.toString=function(){return"[@pixi/core:State "+("blendMode="+this.blendMode+" ")+("clockwiseFrontFace="+this.clockwiseFrontFace+" ")+("culling="+this.culling+" ")+("depthMask="+this.depthMask+" ")+("polygonOffset="+this.polygonOffset)+"]"},e.for2d=function(){var t=new e;return t.depthTest=!1,t.blend=!0,t},e}(),yae=`varying vec2 vTextureCoord;

uniform sampler2D uSampler;

void main(void){
   gl_FragColor = texture2D(uSampler, vTextureCoord);
}
`,_ae=`attribute vec2 aVertexPosition;

uniform mat3 projectionMatrix;

varying vec2 vTextureCoord;

uniform vec4 inputSize;
uniform vec4 outputFrame;

vec4 filterVertexPosition( void )
{
    vec2 position = aVertexPosition * max(outputFrame.zw, vec2(0.)) + outputFrame.xy;

    return vec4((projectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);
}

vec2 filterTextureCoord( void )
{
    return aVertexPosition * (outputFrame.zw * inputSize.zw);
}

void main(void)
{
    gl_Position = filterVertexPosition();
    vTextureCoord = filterTextureCoord();
}
`,ge=function(e){st(t,e);function t(r,n,i){var o=this,a=El.from(r||t.defaultVertexSrc,n||t.defaultFragmentSrc);return o=e.call(this,a,i)||this,o.padding=0,o.resolution=ne.FILTER_RESOLUTION,o.multisample=ne.FILTER_MULTISAMPLE,o.enabled=!0,o.autoFit=!0,o.state=new Go,o}return t.prototype.apply=function(r,n,i,o,a){r.applyFilter(this,n,i,o)},Object.defineProperty(t.prototype,"blendMode",{get:function(){return this.state.blendMode},set:function(r){this.state.blendMode=r},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"resolution",{get:function(){return this._resolution},set:function(r){this._resolution=r},enumerable:!1,configurable:!0}),Object.defineProperty(t,"defaultVertexSrc",{get:function(){return _ae},enumerable:!1,configurable:!0}),Object.defineProperty(t,"defaultFragmentSrc",{get:function(){return yae},enumerable:!1,configurable:!0}),t}(Bi),xae=`attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;

uniform mat3 projectionMatrix;
uniform mat3 otherMatrix;

varying vec2 vMaskCoord;
varying vec2 vTextureCoord;

void main(void)
{
    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);

    vTextureCoord = aTextureCoord;
    vMaskCoord = ( otherMatrix * vec3( aTextureCoord, 1.0)  ).xy;
}
`,bae=`varying vec2 vMaskCoord;
varying vec2 vTextureCoord;

uniform sampler2D uSampler;
uniform sampler2D mask;
uniform float alpha;
uniform float npmAlpha;
uniform vec4 maskClamp;

void main(void)
{
    float clip = step(3.5,
        step(maskClamp.x, vMaskCoord.x) +
        step(maskClamp.y, vMaskCoord.y) +
        step(vMaskCoord.x, maskClamp.z) +
        step(vMaskCoord.y, maskClamp.w));

    vec4 original = texture2D(uSampler, vTextureCoord);
    vec4 masky = texture2D(mask, vMaskCoord);
    float alphaMul = 1.0 - npmAlpha * (1.0 - masky.a);

    original *= (alphaMul * masky.r * alpha * clip);

    gl_FragColor = original;
}
`,PP=new gt,$p=function(){function e(t,r){this._texture=t,this.mapCoord=new gt,this.uClampFrame=new Float32Array(4),this.uClampOffset=new Float32Array(2),this._textureID=-1,this._updateID=0,this.clampOffset=0,this.clampMargin=typeof r>"u"?.5:r,this.isSimple=!1}return Object.defineProperty(e.prototype,"texture",{get:function(){return this._texture},set:function(t){this._texture=t,this._textureID=-1},enumerable:!1,configurable:!0}),e.prototype.multiplyUvs=function(t,r){r===void 0&&(r=t);for(var n=this.mapCoord,i=0;i<t.length;i+=2){var o=t[i],a=t[i+1];r[i]=o*n.a+a*n.c+n.tx,r[i+1]=o*n.b+a*n.d+n.ty}return r},e.prototype.update=function(t){var r=this._texture;if(!r||!r.valid||!t&&this._textureID===r._updateID)return!1;this._textureID=r._updateID,this._updateID++;var n=r._uvs;this.mapCoord.set(n.x1-n.x0,n.y1-n.y0,n.x3-n.x0,n.y3-n.y0,n.x0,n.y0);var i=r.orig,o=r.trim;o&&(PP.set(i.width/o.width,0,0,i.height/o.height,-o.x/o.width,-o.y/o.height),this.mapCoord.append(PP));var a=r.baseTexture,s=this.uClampFrame,l=this.clampMargin/a.resolution,u=this.clampOffset;return s[0]=(r._frame.x+l+u)/a.width,s[1]=(r._frame.y+l+u)/a.height,s[2]=(r._frame.x+r._frame.width-l+u)/a.width,s[3]=(r._frame.y+r._frame.height-l+u)/a.height,this.uClampOffset[0]=u/a.realWidth,this.uClampOffset[1]=u/a.realHeight,this.isSimple=r._frame.width===a.width&&r._frame.height===a.height&&r.rotate===0,!0},e}(),Ek=function(e){st(t,e);function t(r,n,i){var o=this,a=null;return typeof r!="string"&&n===void 0&&i===void 0&&(a=r,r=void 0,n=void 0,i=void 0),o=e.call(this,r||xae,n||bae,i)||this,o.maskSprite=a,o.maskMatrix=new gt,o}return Object.defineProperty(t.prototype,"maskSprite",{get:function(){return this._maskSprite},set:function(r){this._maskSprite=r,this._maskSprite&&(this._maskSprite.renderable=!1)},enumerable:!1,configurable:!0}),t.prototype.apply=function(r,n,i,o){var a=this._maskSprite,s=a._texture;s.valid&&(s.uvMatrix||(s.uvMatrix=new $p(s,0)),s.uvMatrix.update(),this.uniforms.npmAlpha=s.baseTexture.alphaMode?0:1,this.uniforms.mask=s,this.uniforms.otherMatrix=r.calculateSpriteMatrix(this.maskMatrix,a).prepend(s.uvMatrix.mapCoord),this.uniforms.alpha=a.worldAlpha,this.uniforms.maskClamp=s.uvMatrix.uClampFrame,r.applyFilter(this,n,i,o))},t}(ge),A1=function(){function e(t){this.renderer=t,this.enableScissor=!0,this.alphaMaskPool=[],this.maskDataPool=[],this.maskStack=[],this.alphaMaskIndex=0}return e.prototype.setMaskStack=function(t){this.maskStack=t,this.renderer.scissor.setMaskStack(t),this.renderer.stencil.setMaskStack(t)},e.prototype.push=function(t,r){var n=r;if(!n.isMaskData){var i=this.maskDataPool.pop()||new gk;i.pooled=!0,i.maskObject=r,n=i}var o=this.maskStack.length!==0?this.maskStack[this.maskStack.length-1]:null;if(n.copyCountersOrReset(o),n._colorMask=o?o._colorMask:15,n.autoDetect&&this.detect(n),n._target=t,n.type!==Mt.SPRITE&&this.maskStack.push(n),n.enabled)switch(n.type){case Mt.SCISSOR:this.renderer.scissor.push(n);break;case Mt.STENCIL:this.renderer.stencil.push(n);break;case Mt.SPRITE:n.copyCountersOrReset(null),this.pushSpriteMask(n);break;case Mt.COLOR:this.pushColorMask(n);break}n.type===Mt.SPRITE&&this.maskStack.push(n)},e.prototype.pop=function(t){var r=this.maskStack.pop();if(!(!r||r._target!==t)){if(r.enabled)switch(r.type){case Mt.SCISSOR:this.renderer.scissor.pop(r);break;case Mt.STENCIL:this.renderer.stencil.pop(r.maskObject);break;case Mt.SPRITE:this.popSpriteMask(r);break;case Mt.COLOR:this.popColorMask(r);break}if(r.reset(),r.pooled&&this.maskDataPool.push(r),this.maskStack.length!==0){var n=this.maskStack[this.maskStack.length-1];n.type===Mt.SPRITE&&n._filters&&(n._filters[0].maskSprite=n.maskObject)}}},e.prototype.detect=function(t){var r=t.maskObject;r?r.isSprite?t.type=Mt.SPRITE:this.enableScissor&&this.renderer.scissor.testScissor(t)?t.type=Mt.SCISSOR:t.type=Mt.STENCIL:t.type=Mt.COLOR},e.prototype.pushSpriteMask=function(t){var r,n,i=t.maskObject,o=t._target,a=t._filters;a||(a=this.alphaMaskPool[this.alphaMaskIndex],a||(a=this.alphaMaskPool[this.alphaMaskIndex]=[new Ek]));var s=this.renderer,l=s.renderTexture,u,c;if(l.current){var f=l.current;u=t.resolution||f.resolution,c=(r=t.multisample)!==null&&r!==void 0?r:f.multisample}else u=t.resolution||s.resolution,c=(n=t.multisample)!==null&&n!==void 0?n:s.multisample;a[0].resolution=u,a[0].multisample=c,a[0].maskSprite=i;var h=o.filterArea;o.filterArea=i.getBounds(!0),s.filter.push(o,a),o.filterArea=h,t._filters||this.alphaMaskIndex++},e.prototype.popSpriteMask=function(t){this.renderer.filter.pop(),t._filters?t._filters[0].maskSprite=null:(this.alphaMaskIndex--,this.alphaMaskPool[this.alphaMaskIndex][0].maskSprite=null)},e.prototype.pushColorMask=function(t){var r=t._colorMask,n=t._colorMask=r&t.colorMask;n!==r&&this.renderer.gl.colorMask((n&1)!==0,(n&2)!==0,(n&4)!==0,(n&8)!==0)},e.prototype.popColorMask=function(t){var r=t._colorMask,n=this.maskStack.length>0?this.maskStack[this.maskStack.length-1]._colorMask:15;n!==r&&this.renderer.gl.colorMask((n&1)!==0,(n&2)!==0,(n&4)!==0,(n&8)!==0)},e.prototype.destroy=function(){this.renderer=null},e}(),Tk=function(){function e(t){this.renderer=t,this.maskStack=[],this.glConst=0}return e.prototype.getStackLength=function(){return this.maskStack.length},e.prototype.setMaskStack=function(t){var r=this.renderer.gl,n=this.getStackLength();this.maskStack=t;var i=this.getStackLength();i!==n&&(i===0?r.disable(this.glConst):(r.enable(this.glConst),this._useCurrent()))},e.prototype._useCurrent=function(){},e.prototype.destroy=function(){this.renderer=null,this.maskStack=null},e}(),AP=new gt,OP=[],O1=function(e){st(t,e);function t(r){var n=e.call(this,r)||this;return n.glConst=ne.ADAPTER.getWebGLRenderingContext().SCISSOR_TEST,n}return t.prototype.getStackLength=function(){var r=this.maskStack[this.maskStack.length-1];return r?r._scissorCounter:0},t.prototype.calcScissorRect=function(r){var n;if(!r._scissorRectLocal){var i=r._scissorRect,o=r.maskObject,a=this.renderer,s=a.renderTexture,l=o.getBounds(!0,(n=OP.pop())!==null&&n!==void 0?n:new Fe);this.roundFrameToPixels(l,s.current?s.current.resolution:a.resolution,s.sourceFrame,s.destinationFrame,a.projection.transform),i&&l.fit(i),r._scissorRectLocal=l}},t.isMatrixRotated=function(r){if(!r)return!1;var n=r.a,i=r.b,o=r.c,a=r.d;return(Math.abs(i)>1e-4||Math.abs(o)>1e-4)&&(Math.abs(n)>1e-4||Math.abs(a)>1e-4)},t.prototype.testScissor=function(r){var n=r.maskObject;if(!n.isFastRect||!n.isFastRect()||t.isMatrixRotated(n.worldTransform)||t.isMatrixRotated(this.renderer.projection.transform))return!1;this.calcScissorRect(r);var i=r._scissorRectLocal;return i.width>0&&i.height>0},t.prototype.roundFrameToPixels=function(r,n,i,o,a){t.isMatrixRotated(a)||(a=a?AP.copyFrom(a):AP.identity(),a.translate(-i.x,-i.y).scale(o.width/i.width,o.height/i.height).translate(o.x,o.y),this.renderer.filter.transformAABB(a,r),r.fit(o),r.x=Math.round(r.x*n),r.y=Math.round(r.y*n),r.width=Math.round(r.width*n),r.height=Math.round(r.height*n))},t.prototype.push=function(r){r._scissorRectLocal||this.calcScissorRect(r);var n=this.renderer.gl;r._scissorRect||n.enable(n.SCISSOR_TEST),r._scissorCounter++,r._scissorRect=r._scissorRectLocal,this._useCurrent()},t.prototype.pop=function(r){var n=this.renderer.gl;r&&OP.push(r._scissorRectLocal),this.getStackLength()>0?this._useCurrent():n.disable(n.SCISSOR_TEST)},t.prototype._useCurrent=function(){var r=this.maskStack[this.maskStack.length-1]._scissorRect,n;this.renderer.renderTexture.current?n=r.y:n=this.renderer.height-r.height-r.y,this.renderer.gl.scissor(r.x,n,r.width,r.height)},t}(Tk),I1=function(e){st(t,e);function t(r){var n=e.call(this,r)||this;return n.glConst=ne.ADAPTER.getWebGLRenderingContext().STENCIL_TEST,n}return t.prototype.getStackLength=function(){var r=this.maskStack[this.maskStack.length-1];return r?r._stencilCounter:0},t.prototype.push=function(r){var n=r.maskObject,i=this.renderer.gl,o=r._stencilCounter;o===0&&(this.renderer.framebuffer.forceStencil(),i.clearStencil(0),i.clear(i.STENCIL_BUFFER_BIT),i.enable(i.STENCIL_TEST)),r._stencilCounter++;var a=r._colorMask;a!==0&&(r._colorMask=0,i.colorMask(!1,!1,!1,!1)),i.stencilFunc(i.EQUAL,o,4294967295),i.stencilOp(i.KEEP,i.KEEP,i.INCR),n.renderable=!0,n.render(this.renderer),this.renderer.batch.flush(),n.renderable=!1,a!==0&&(r._colorMask=a,i.colorMask((a&1)!==0,(a&2)!==0,(a&4)!==0,(a&8)!==0)),this._useCurrent()},t.prototype.pop=function(r){var n=this.renderer.gl;if(this.getStackLength()===0)n.disable(n.STENCIL_TEST);else{var i=this.maskStack.length!==0?this.maskStack[this.maskStack.length-1]:null,o=i?i._colorMask:15;o!==0&&(i._colorMask=0,n.colorMask(!1,!1,!1,!1)),n.stencilOp(n.KEEP,n.KEEP,n.DECR),r.renderable=!0,r.render(this.renderer),this.renderer.batch.flush(),r.renderable=!1,o!==0&&(i._colorMask=o,n.colorMask((o&1)!==0,(o&2)!==0,(o&4)!==0,(o&8)!==0)),this._useCurrent()}},t.prototype._useCurrent=function(){var r=this.renderer.gl;r.stencilFunc(r.EQUAL,this.getStackLength(),4294967295),r.stencilOp(r.KEEP,r.KEEP,r.KEEP)},t}(Tk),M1=function(){function e(t){this.renderer=t,this.destinationFrame=null,this.sourceFrame=null,this.defaultFrame=null,this.projectionMatrix=new gt,this.transform=null}return e.prototype.update=function(t,r,n,i){this.destinationFrame=t||this.destinationFrame||this.defaultFrame,this.sourceFrame=r||this.sourceFrame||t,this.calculateProjection(this.destinationFrame,this.sourceFrame,n,i),this.transform&&this.projectionMatrix.append(this.transform);var o=this.renderer;o.globalUniforms.uniforms.projectionMatrix=this.projectionMatrix,o.globalUniforms.update(),o.shader.shader&&o.shader.syncUniformGroup(o.shader.shader.uniforms.globals)},e.prototype.calculateProjection=function(t,r,n,i){var o=this.projectionMatrix,a=i?-1:1;o.identity(),o.a=1/r.width*2,o.d=a*(1/r.height*2),o.tx=-1-r.x*o.a,o.ty=-a-r.y*o.d},e.prototype.setTransform=function(t){},e.prototype.destroy=function(){this.renderer=null},e}(),zo=new Fe,Jl=new Fe,R1=function(){function e(t){this.renderer=t,this.clearColor=t._backgroundColorRgba,this.defaultMaskStack=[],this.current=null,this.sourceFrame=new Fe,this.destinationFrame=new Fe,this.viewportFrame=new Fe}return e.prototype.bind=function(t,r,n){t===void 0&&(t=null);var i=this.renderer;this.current=t;var o,a,s;t?(o=t.baseTexture,s=o.resolution,r||(zo.width=t.frame.width,zo.height=t.frame.height,r=zo),n||(Jl.x=t.frame.x,Jl.y=t.frame.y,Jl.width=r.width,Jl.height=r.height,n=Jl),a=o.framebuffer):(s=i.resolution,r||(zo.width=i.screen.width,zo.height=i.screen.height,r=zo),n||(n=zo,n.width=r.width,n.height=r.height));var l=this.viewportFrame;l.x=n.x*s,l.y=n.y*s,l.width=n.width*s,l.height=n.height*s,t||(l.y=i.view.height-(l.y+l.height)),l.ceil(),this.renderer.framebuffer.bind(a,l),this.renderer.projection.update(n,r,s,!a),t?this.renderer.mask.setMaskStack(o.maskStack):this.renderer.mask.setMaskStack(this.defaultMaskStack),this.sourceFrame.copyFrom(r),this.destinationFrame.copyFrom(n)},e.prototype.clear=function(t,r){this.current?t=t||this.current.baseTexture.clearColor:t=t||this.clearColor;var n=this.destinationFrame,i=this.current?this.current.baseTexture:this.renderer.screen,o=n.width!==i.width||n.height!==i.height;if(o){var a=this.viewportFrame,s=a.x,l=a.y,u=a.width,c=a.height;s=Math.round(s),l=Math.round(l),u=Math.round(u),c=Math.round(c),this.renderer.gl.enable(this.renderer.gl.SCISSOR_TEST),this.renderer.gl.scissor(s,l,u,c)}this.renderer.framebuffer.clear(t[0],t[1],t[2],t[3],r),o&&this.renderer.scissor.pop()},e.prototype.resize=function(){this.bind(null)},e.prototype.reset=function(){this.bind(null)},e.prototype.destroy=function(){this.renderer=null},e}();function Sae(e,t,r,n,i){r.buffer.update(i)}var wae={float:`
        data[offset] = v;
    `,vec2:`
        data[offset] = v[0];
        data[offset+1] = v[1];
    `,vec3:`
        data[offset] = v[0];
        data[offset+1] = v[1];
        data[offset+2] = v[2];

    `,vec4:`
        data[offset] = v[0];
        data[offset+1] = v[1];
        data[offset+2] = v[2];
        data[offset+3] = v[3];
    `,mat2:`
        data[offset] = v[0];
        data[offset+1] = v[1];

        data[offset+4] = v[2];
        data[offset+5] = v[3];
    `,mat3:`
        data[offset] = v[0];
        data[offset+1] = v[1];
        data[offset+2] = v[2];

        data[offset + 4] = v[3];
        data[offset + 5] = v[4];
        data[offset + 6] = v[5];

        data[offset + 8] = v[6];
        data[offset + 9] = v[7];
        data[offset + 10] = v[8];
    `,mat4:`
        for(var i = 0; i < 16; i++)
        {
            data[offset + i] = v[i];
        }
    `},Ck={float:4,vec2:8,vec3:12,vec4:16,int:4,ivec2:8,ivec3:12,ivec4:16,uint:4,uvec2:8,uvec3:12,uvec4:16,bool:4,bvec2:8,bvec3:12,bvec4:16,mat2:16*2,mat3:16*3,mat4:16*4};function Pk(e){for(var t=e.map(function(l){return{data:l,offset:0,dataLen:0,dirty:0}}),r=0,n=0,i=0,o=0;o<t.length;o++){var a=t[o];if(r=Ck[a.data.type],a.data.size>1&&(r=Math.max(r,16)*a.data.size),a.dataLen=r,n%r!==0&&n<16){var s=n%r%16;n+=s,i+=s}n+r>16?(i=Math.ceil(i/16)*16,a.offset=i,i+=r,n=r):(a.offset=i,n+=r,i+=r)}return i=Math.ceil(i/16)*16,{uboElements:t,size:i}}function Ak(e,t){var r=[];for(var n in e)t[n]&&r.push(t[n]);return r.sort(function(i,o){return i.index-o.index}),r}function Ok(e,t){if(!e.autoManage)return{size:0,syncFunc:Sae};for(var r=Ak(e.uniforms,t),n=Pk(r),i=n.uboElements,o=n.size,a=[`
    var v = null;
    var v2 = null;
    var cv = null;
    var t = 0;
    var gl = renderer.gl
    var index = 0;
    var data = buffer.data;
    `],s=0;s<i.length;s++){for(var l=i[s],u=e.uniforms[l.data.name],c=l.data.name,f=!1,h=0;h<ba.length;h++){var d=ba[h];if(d.codeUbo&&d.test(l.data,u)){a.push("offset = "+l.offset/4+";",ba[h].codeUbo(l.data.name,u)),f=!0;break}}if(!f)if(l.data.size>1){var m=bk(l.data.type),g=Math.max(Ck[l.data.type]/16,1),p=m/g,v=(4-p%4)%4;a.push(`
                cv = ud.`+c+`.value;
                v = uv.`+c+`;
                offset = `+l.offset/4+`;

                t = 0;

                for(var i=0; i < `+l.data.size*g+`; i++)
                {
                    for(var j = 0; j < `+p+`; j++)
                    {
                        data[offset++] = v[t++];
                    }
                    offset += `+v+`;
                }

                `)}else{var y=wae[l.data.type];a.push(`
                cv = ud.`+c+`.value;
                v = uv.`+c+`;
                offset = `+l.offset/4+`;
                `+y+`;
                `)}}return a.push(`
       renderer.buffer.update(buffer);
    `),{size:o,syncFunc:new Function("ud","uv","renderer","syncData","buffer",a.join(`
`))}}var Eae=function(){function e(){}return e}(),Ik=function(){function e(t,r){this.program=t,this.uniformData=r,this.uniformGroups={},this.uniformDirtyGroups={},this.uniformBufferBindings={}}return e.prototype.destroy=function(){this.uniformData=null,this.uniformGroups=null,this.uniformDirtyGroups=null,this.uniformBufferBindings=null,this.program=null},e}();function Tae(e,t){for(var r={},n=t.getProgramParameter(e,t.ACTIVE_ATTRIBUTES),i=0;i<n;i++){var o=t.getActiveAttrib(e,i);if(o.name.indexOf("gl_")!==0){var a=Sk(t,o.type),s={type:a,name:o.name,size:bk(a),location:t.getAttribLocation(e,o.name)};r[o.name]=s}}return r}function Cae(e,t){for(var r={},n=t.getProgramParameter(e,t.ACTIVE_UNIFORMS),i=0;i<n;i++){var o=t.getActiveUniform(e,i),a=o.name.replace(/\[.*?\]$/,""),s=!!o.name.match(/\[.*?\]$/),l=Sk(t,o.type);r[a]={name:a,index:i,type:l,size:o.size,isArray:s,value:yk(l,o.size)}}return r}function Mk(e,t){var r=wP(e,e.VERTEX_SHADER,t.vertexSrc),n=wP(e,e.FRAGMENT_SHADER,t.fragmentSrc),i=e.createProgram();if(e.attachShader(i,r),e.attachShader(i,n),e.linkProgram(i),e.getProgramParameter(i,e.LINK_STATUS)||aae(e,i,r,n),t.attributeData=Tae(i,e),t.uniformData=Cae(i,e),!/^[ \t]*#[ \t]*version[ \t]+300[ \t]+es[ \t]*$/m.test(t.vertexSrc)){var o=Object.keys(t.attributeData);o.sort(function(c,f){return c>f?1:-1});for(var a=0;a<o.length;a++)t.attributeData[o[a]].location=a,e.bindAttribLocation(i,a,o[a]);e.linkProgram(i)}e.deleteShader(r),e.deleteShader(n);var s={};for(var a in t.uniformData){var l=t.uniformData[a];s[a]={location:e.getUniformLocation(i,a),value:yk(l.type,l.size)}}var u=new Ik(i,s);return u}var Pae=0,Bf={textureCount:0,uboCount:0},k1=function(){function e(t){this.destroyed=!1,this.renderer=t,this.systemCheck(),this.gl=null,this.shader=null,this.program=null,this.cache={},this._uboCache={},this.id=Pae++}return e.prototype.systemCheck=function(){if(!pae())throw new Error("Current environment does not allow unsafe-eval, please use @pixi/unsafe-eval module to enable support.")},e.prototype.contextChange=function(t){this.gl=t,this.reset()},e.prototype.bind=function(t,r){t.disposeRunner.add(this),t.uniforms.globals=this.renderer.globalUniforms;var n=t.program,i=n.glPrograms[this.renderer.CONTEXT_UID]||this.generateProgram(t);return this.shader=t,this.program!==n&&(this.program=n,this.gl.useProgram(i.program)),r||(Bf.textureCount=0,Bf.uboCount=0,this.syncUniformGroup(t.uniformGroup,Bf)),i},e.prototype.setUniforms=function(t){var r=this.shader.program,n=r.glPrograms[this.renderer.CONTEXT_UID];r.syncUniforms(n.uniformData,t,this.renderer)},e.prototype.syncUniformGroup=function(t,r){var n=this.getGlProgram();(!t.static||t.dirtyId!==n.uniformDirtyGroups[t.id])&&(n.uniformDirtyGroups[t.id]=t.dirtyId,this.syncUniforms(t,n,r))},e.prototype.syncUniforms=function(t,r,n){var i=t.syncUniforms[this.shader.program.id]||this.createSyncGroups(t);i(r.uniformData,t.uniforms,this.renderer,n)},e.prototype.createSyncGroups=function(t){var r=this.getSignature(t,this.shader.program.uniformData,"u");return this.cache[r]||(this.cache[r]=fae(t,this.shader.program.uniformData)),t.syncUniforms[this.shader.program.id]=this.cache[r],t.syncUniforms[this.shader.program.id]},e.prototype.syncUniformBufferGroup=function(t,r){var n=this.getGlProgram();if(!t.static||t.dirtyId!==0||!n.uniformGroups[t.id]){t.dirtyId=0;var i=n.uniformGroups[t.id]||this.createSyncBufferGroup(t,n,r);t.buffer.update(),i(n.uniformData,t.uniforms,this.renderer,Bf,t.buffer)}this.renderer.buffer.bindBufferBase(t.buffer,n.uniformBufferBindings[r])},e.prototype.createSyncBufferGroup=function(t,r,n){var i=this.renderer.gl;this.renderer.buffer.bind(t.buffer);var o=this.gl.getUniformBlockIndex(r.program,n);r.uniformBufferBindings[n]=this.shader.uniformBindCount,i.uniformBlockBinding(r.program,o,this.shader.uniformBindCount),this.shader.uniformBindCount++;var a=this.getSignature(t,this.shader.program.uniformData,"ubo"),s=this._uboCache[a];if(s||(s=this._uboCache[a]=Ok(t,this.shader.program.uniformData)),t.autoManage){var l=new Float32Array(s.size/4);t.buffer.update(l)}return r.uniformGroups[t.id]=s.syncFunc,r.uniformGroups[t.id]},e.prototype.getSignature=function(t,r,n){var i=t.uniforms,o=[n+"-"];for(var a in i)o.push(a),r[a]&&o.push(r[a].type);return o.join("-")},e.prototype.getGlProgram=function(){return this.shader?this.shader.program.glPrograms[this.renderer.CONTEXT_UID]:null},e.prototype.generateProgram=function(t){var r=this.gl,n=t.program,i=Mk(r,n);return n.glPrograms[this.renderer.CONTEXT_UID]=i,i},e.prototype.reset=function(){this.program=null,this.shader=null},e.prototype.disposeShader=function(t){this.shader===t&&(this.shader=null)},e.prototype.destroy=function(){this.renderer=null,this.destroyed=!0},e}();function Aae(e,t){return t===void 0&&(t=[]),t[ce.NORMAL]=[e.ONE,e.ONE_MINUS_SRC_ALPHA],t[ce.ADD]=[e.ONE,e.ONE],t[ce.MULTIPLY]=[e.DST_COLOR,e.ONE_MINUS_SRC_ALPHA,e.ONE,e.ONE_MINUS_SRC_ALPHA],t[ce.SCREEN]=[e.ONE,e.ONE_MINUS_SRC_COLOR,e.ONE,e.ONE_MINUS_SRC_ALPHA],t[ce.OVERLAY]=[e.ONE,e.ONE_MINUS_SRC_ALPHA],t[ce.DARKEN]=[e.ONE,e.ONE_MINUS_SRC_ALPHA],t[ce.LIGHTEN]=[e.ONE,e.ONE_MINUS_SRC_ALPHA],t[ce.COLOR_DODGE]=[e.ONE,e.ONE_MINUS_SRC_ALPHA],t[ce.COLOR_BURN]=[e.ONE,e.ONE_MINUS_SRC_ALPHA],t[ce.HARD_LIGHT]=[e.ONE,e.ONE_MINUS_SRC_ALPHA],t[ce.SOFT_LIGHT]=[e.ONE,e.ONE_MINUS_SRC_ALPHA],t[ce.DIFFERENCE]=[e.ONE,e.ONE_MINUS_SRC_ALPHA],t[ce.EXCLUSION]=[e.ONE,e.ONE_MINUS_SRC_ALPHA],t[ce.HUE]=[e.ONE,e.ONE_MINUS_SRC_ALPHA],t[ce.SATURATION]=[e.ONE,e.ONE_MINUS_SRC_ALPHA],t[ce.COLOR]=[e.ONE,e.ONE_MINUS_SRC_ALPHA],t[ce.LUMINOSITY]=[e.ONE,e.ONE_MINUS_SRC_ALPHA],t[ce.NONE]=[0,0],t[ce.NORMAL_NPM]=[e.SRC_ALPHA,e.ONE_MINUS_SRC_ALPHA,e.ONE,e.ONE_MINUS_SRC_ALPHA],t[ce.ADD_NPM]=[e.SRC_ALPHA,e.ONE,e.ONE,e.ONE],t[ce.SCREEN_NPM]=[e.SRC_ALPHA,e.ONE_MINUS_SRC_COLOR,e.ONE,e.ONE_MINUS_SRC_ALPHA],t[ce.SRC_IN]=[e.DST_ALPHA,e.ZERO],t[ce.SRC_OUT]=[e.ONE_MINUS_DST_ALPHA,e.ZERO],t[ce.SRC_ATOP]=[e.DST_ALPHA,e.ONE_MINUS_SRC_ALPHA],t[ce.DST_OVER]=[e.ONE_MINUS_DST_ALPHA,e.ONE],t[ce.DST_IN]=[e.ZERO,e.SRC_ALPHA],t[ce.DST_OUT]=[e.ZERO,e.ONE_MINUS_SRC_ALPHA],t[ce.DST_ATOP]=[e.ONE_MINUS_DST_ALPHA,e.SRC_ALPHA],t[ce.XOR]=[e.ONE_MINUS_DST_ALPHA,e.ONE_MINUS_SRC_ALPHA],t[ce.SUBTRACT]=[e.ONE,e.ONE,e.ONE,e.ONE,e.FUNC_REVERSE_SUBTRACT,e.FUNC_ADD],t}var Oae=0,Iae=1,Mae=2,Rae=3,kae=4,Lae=5,L1=function(){function e(){this.gl=null,this.stateId=0,this.polygonOffset=0,this.blendMode=ce.NONE,this._blendEq=!1,this.map=[],this.map[Oae]=this.setBlend,this.map[Iae]=this.setOffset,this.map[Mae]=this.setCullFace,this.map[Rae]=this.setDepthTest,this.map[kae]=this.setFrontFace,this.map[Lae]=this.setDepthMask,this.checks=[],this.defaultState=new Go,this.defaultState.blend=!0}return e.prototype.contextChange=function(t){this.gl=t,this.blendModes=Aae(t),this.set(this.defaultState),this.reset()},e.prototype.set=function(t){if(t=t||this.defaultState,this.stateId!==t.data){for(var r=this.stateId^t.data,n=0;r;)r&1&&this.map[n].call(this,!!(t.data&1<<n)),r=r>>1,n++;this.stateId=t.data}for(var n=0;n<this.checks.length;n++)this.checks[n](this,t)},e.prototype.forceState=function(t){t=t||this.defaultState;for(var r=0;r<this.map.length;r++)this.map[r].call(this,!!(t.data&1<<r));for(var r=0;r<this.checks.length;r++)this.checks[r](this,t);this.stateId=t.data},e.prototype.setBlend=function(t){this.updateCheck(e.checkBlendMode,t),this.gl[t?"enable":"disable"](this.gl.BLEND)},e.prototype.setOffset=function(t){this.updateCheck(e.checkPolygonOffset,t),this.gl[t?"enable":"disable"](this.gl.POLYGON_OFFSET_FILL)},e.prototype.setDepthTest=function(t){this.gl[t?"enable":"disable"](this.gl.DEPTH_TEST)},e.prototype.setDepthMask=function(t){this.gl.depthMask(t)},e.prototype.setCullFace=function(t){this.gl[t?"enable":"disable"](this.gl.CULL_FACE)},e.prototype.setFrontFace=function(t){this.gl.frontFace(this.gl[t?"CW":"CCW"])},e.prototype.setBlendMode=function(t){if(t!==this.blendMode){this.blendMode=t;var r=this.blendModes[t],n=this.gl;r.length===2?n.blendFunc(r[0],r[1]):n.blendFuncSeparate(r[0],r[1],r[2],r[3]),r.length===6?(this._blendEq=!0,n.blendEquationSeparate(r[4],r[5])):this._blendEq&&(this._blendEq=!1,n.blendEquationSeparate(n.FUNC_ADD,n.FUNC_ADD))}},e.prototype.setPolygonOffset=function(t,r){this.gl.polygonOffset(t,r)},e.prototype.reset=function(){this.gl.pixelStorei(this.gl.UNPACK_FLIP_Y_WEBGL,!1),this.forceState(this.defaultState),this._blendEq=!0,this.blendMode=-1,this.setBlendMode(0)},e.prototype.updateCheck=function(t,r){var n=this.checks.indexOf(t);r&&n===-1?this.checks.push(t):!r&&n!==-1&&this.checks.splice(n,1)},e.checkBlendMode=function(t,r){t.setBlendMode(r.blendMode)},e.checkPolygonOffset=function(t,r){t.setPolygonOffset(1,r.polygonOffset)},e.prototype.destroy=function(){this.gl=null},e}(),F1=function(){function e(t){this.renderer=t,this.count=0,this.checkCount=0,this.maxIdle=ne.GC_MAX_IDLE,this.checkCountMax=ne.GC_MAX_CHECK_COUNT,this.mode=ne.GC_MODE}return e.prototype.postrender=function(){this.renderer.renderingToScreen&&(this.count++,this.mode!==vc.MANUAL&&(this.checkCount++,this.checkCount>this.checkCountMax&&(this.checkCount=0,this.run())))},e.prototype.run=function(){for(var t=this.renderer.texture,r=t.managedTextures,n=!1,i=0;i<r.length;i++){var o=r[i];!o.framebuffer&&this.count-o.touched>this.maxIdle&&(t.destroyTexture(o,!0),r[i]=null,n=!0)}if(n){for(var a=0,i=0;i<r.length;i++)r[i]!==null&&(r[a++]=r[i]);r.length=a}},e.prototype.unload=function(t){var r=this.renderer.texture,n=t._texture;n&&!n.framebuffer&&r.destroyTexture(n);for(var i=t.children.length-1;i>=0;i--)this.unload(t.children[i])},e.prototype.destroy=function(){this.renderer=null},e}();function Fae(e){var t,r,n,i,o,a,s,l,u,c,f,h,d,m,g,p,v,y,_,x,b,S,E;return"WebGL2RenderingContext"in globalThis&&e instanceof globalThis.WebGL2RenderingContext?E=(t={},t[fe.UNSIGNED_BYTE]=(r={},r[Q.RGBA]=e.RGBA8,r[Q.RGB]=e.RGB8,r[Q.RG]=e.RG8,r[Q.RED]=e.R8,r[Q.RGBA_INTEGER]=e.RGBA8UI,r[Q.RGB_INTEGER]=e.RGB8UI,r[Q.RG_INTEGER]=e.RG8UI,r[Q.RED_INTEGER]=e.R8UI,r[Q.ALPHA]=e.ALPHA,r[Q.LUMINANCE]=e.LUMINANCE,r[Q.LUMINANCE_ALPHA]=e.LUMINANCE_ALPHA,r),t[fe.BYTE]=(n={},n[Q.RGBA]=e.RGBA8_SNORM,n[Q.RGB]=e.RGB8_SNORM,n[Q.RG]=e.RG8_SNORM,n[Q.RED]=e.R8_SNORM,n[Q.RGBA_INTEGER]=e.RGBA8I,n[Q.RGB_INTEGER]=e.RGB8I,n[Q.RG_INTEGER]=e.RG8I,n[Q.RED_INTEGER]=e.R8I,n),t[fe.UNSIGNED_SHORT]=(i={},i[Q.RGBA_INTEGER]=e.RGBA16UI,i[Q.RGB_INTEGER]=e.RGB16UI,i[Q.RG_INTEGER]=e.RG16UI,i[Q.RED_INTEGER]=e.R16UI,i[Q.DEPTH_COMPONENT]=e.DEPTH_COMPONENT16,i),t[fe.SHORT]=(o={},o[Q.RGBA_INTEGER]=e.RGBA16I,o[Q.RGB_INTEGER]=e.RGB16I,o[Q.RG_INTEGER]=e.RG16I,o[Q.RED_INTEGER]=e.R16I,o),t[fe.UNSIGNED_INT]=(a={},a[Q.RGBA_INTEGER]=e.RGBA32UI,a[Q.RGB_INTEGER]=e.RGB32UI,a[Q.RG_INTEGER]=e.RG32UI,a[Q.RED_INTEGER]=e.R32UI,a[Q.DEPTH_COMPONENT]=e.DEPTH_COMPONENT24,a),t[fe.INT]=(s={},s[Q.RGBA_INTEGER]=e.RGBA32I,s[Q.RGB_INTEGER]=e.RGB32I,s[Q.RG_INTEGER]=e.RG32I,s[Q.RED_INTEGER]=e.R32I,s),t[fe.FLOAT]=(l={},l[Q.RGBA]=e.RGBA32F,l[Q.RGB]=e.RGB32F,l[Q.RG]=e.RG32F,l[Q.RED]=e.R32F,l[Q.DEPTH_COMPONENT]=e.DEPTH_COMPONENT32F,l),t[fe.HALF_FLOAT]=(u={},u[Q.RGBA]=e.RGBA16F,u[Q.RGB]=e.RGB16F,u[Q.RG]=e.RG16F,u[Q.RED]=e.R16F,u),t[fe.UNSIGNED_SHORT_5_6_5]=(c={},c[Q.RGB]=e.RGB565,c),t[fe.UNSIGNED_SHORT_4_4_4_4]=(f={},f[Q.RGBA]=e.RGBA4,f),t[fe.UNSIGNED_SHORT_5_5_5_1]=(h={},h[Q.RGBA]=e.RGB5_A1,h),t[fe.UNSIGNED_INT_2_10_10_10_REV]=(d={},d[Q.RGBA]=e.RGB10_A2,d[Q.RGBA_INTEGER]=e.RGB10_A2UI,d),t[fe.UNSIGNED_INT_10F_11F_11F_REV]=(m={},m[Q.RGB]=e.R11F_G11F_B10F,m),t[fe.UNSIGNED_INT_5_9_9_9_REV]=(g={},g[Q.RGB]=e.RGB9_E5,g),t[fe.UNSIGNED_INT_24_8]=(p={},p[Q.DEPTH_STENCIL]=e.DEPTH24_STENCIL8,p),t[fe.FLOAT_32_UNSIGNED_INT_24_8_REV]=(v={},v[Q.DEPTH_STENCIL]=e.DEPTH32F_STENCIL8,v),t):E=(y={},y[fe.UNSIGNED_BYTE]=(_={},_[Q.RGBA]=e.RGBA,_[Q.RGB]=e.RGB,_[Q.ALPHA]=e.ALPHA,_[Q.LUMINANCE]=e.LUMINANCE,_[Q.LUMINANCE_ALPHA]=e.LUMINANCE_ALPHA,_),y[fe.UNSIGNED_SHORT_5_6_5]=(x={},x[Q.RGB]=e.RGB,x),y[fe.UNSIGNED_SHORT_4_4_4_4]=(b={},b[Q.RGBA]=e.RGBA,b),y[fe.UNSIGNED_SHORT_5_5_5_1]=(S={},S[Q.RGBA]=e.RGBA,S),y),E}var Eh=function(){function e(t){this.texture=t,this.width=-1,this.height=-1,this.dirtyId=-1,this.dirtyStyleId=-1,this.mipmap=!1,this.wrapMode=33071,this.type=fe.UNSIGNED_BYTE,this.internalFormat=Q.RGBA,this.samplerType=0}return e}(),D1=function(){function e(t){this.renderer=t,this.boundTextures=[],this.currentLocation=-1,this.managedTextures=[],this._unknownBoundTextures=!1,this.unknownTexture=new Le,this.hasIntegerTextures=!1}return e.prototype.contextChange=function(){var t=this.gl=this.renderer.gl;this.CONTEXT_UID=this.renderer.CONTEXT_UID,this.webGLVersion=this.renderer.context.webGLVersion,this.internalFormats=Fae(t);var r=t.getParameter(t.MAX_TEXTURE_IMAGE_UNITS);this.boundTextures.length=r;for(var n=0;n<r;n++)this.boundTextures[n]=null;this.emptyTextures={};var i=new Eh(t.createTexture());t.bindTexture(t.TEXTURE_2D,i.texture),t.texImage2D(t.TEXTURE_2D,0,t.RGBA,1,1,0,t.RGBA,t.UNSIGNED_BYTE,new Uint8Array(4)),this.emptyTextures[t.TEXTURE_2D]=i,this.emptyTextures[t.TEXTURE_CUBE_MAP]=new Eh(t.createTexture()),t.bindTexture(t.TEXTURE_CUBE_MAP,this.emptyTextures[t.TEXTURE_CUBE_MAP].texture);for(var n=0;n<6;n++)t.texImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+n,0,t.RGBA,1,1,0,t.RGBA,t.UNSIGNED_BYTE,null);t.texParameteri(t.TEXTURE_CUBE_MAP,t.TEXTURE_MAG_FILTER,t.LINEAR),t.texParameteri(t.TEXTURE_CUBE_MAP,t.TEXTURE_MIN_FILTER,t.LINEAR);for(var n=0;n<this.boundTextures.length;n++)this.bind(null,n)},e.prototype.bind=function(t,r){r===void 0&&(r=0);var n=this.gl;if(t=t==null?void 0:t.castToBaseTexture(),t&&t.valid&&!t.parentTextureArray){t.touched=this.renderer.textureGC.count;var i=t._glTextures[this.CONTEXT_UID]||this.initTexture(t);this.boundTextures[r]!==t&&(this.currentLocation!==r&&(this.currentLocation=r,n.activeTexture(n.TEXTURE0+r)),n.bindTexture(t.target,i.texture)),i.dirtyId!==t.dirtyId?(this.currentLocation!==r&&(this.currentLocation=r,n.activeTexture(n.TEXTURE0+r)),this.updateTexture(t)):i.dirtyStyleId!==t.dirtyStyleId&&this.updateTextureStyle(t),this.boundTextures[r]=t}else this.currentLocation!==r&&(this.currentLocation=r,n.activeTexture(n.TEXTURE0+r)),n.bindTexture(n.TEXTURE_2D,this.emptyTextures[n.TEXTURE_2D].texture),this.boundTextures[r]=null},e.prototype.reset=function(){this._unknownBoundTextures=!0,this.hasIntegerTextures=!1,this.currentLocation=-1;for(var t=0;t<this.boundTextures.length;t++)this.boundTextures[t]=this.unknownTexture},e.prototype.unbind=function(t){var r=this,n=r.gl,i=r.boundTextures;if(this._unknownBoundTextures){this._unknownBoundTextures=!1;for(var o=0;o<i.length;o++)i[o]===this.unknownTexture&&this.bind(null,o)}for(var o=0;o<i.length;o++)i[o]===t&&(this.currentLocation!==o&&(n.activeTexture(n.TEXTURE0+o),this.currentLocation=o),n.bindTexture(t.target,this.emptyTextures[t.target].texture),i[o]=null)},e.prototype.ensureSamplerType=function(t){var r=this,n=r.boundTextures,i=r.hasIntegerTextures,o=r.CONTEXT_UID;if(i)for(var a=t-1;a>=0;--a){var s=n[a];if(s){var l=s._glTextures[o];l.samplerType!==mc.FLOAT&&this.renderer.texture.unbind(s)}}},e.prototype.initTexture=function(t){var r=new Eh(this.gl.createTexture());return r.dirtyId=-1,t._glTextures[this.CONTEXT_UID]=r,this.managedTextures.push(t),t.on("dispose",this.destroyTexture,this),r},e.prototype.initTextureType=function(t,r){var n,i;r.internalFormat=(i=(n=this.internalFormats[t.type])===null||n===void 0?void 0:n[t.format])!==null&&i!==void 0?i:t.format,this.webGLVersion===2&&t.type===fe.HALF_FLOAT?r.type=this.gl.HALF_FLOAT:r.type=t.type},e.prototype.updateTexture=function(t){var r=t._glTextures[this.CONTEXT_UID];if(r){var n=this.renderer;if(this.initTextureType(t,r),t.resource&&t.resource.upload(n,t,r))r.samplerType!==mc.FLOAT&&(this.hasIntegerTextures=!0);else{var i=t.realWidth,o=t.realHeight,a=n.gl;(r.width!==i||r.height!==o||r.dirtyId<0)&&(r.width=i,r.height=o,a.texImage2D(t.target,0,r.internalFormat,i,o,0,t.format,r.type,null))}t.dirtyStyleId!==r.dirtyStyleId&&this.updateTextureStyle(t),r.dirtyId=t.dirtyId}},e.prototype.destroyTexture=function(t,r){var n=this.gl;if(t=t.castToBaseTexture(),t._glTextures[this.CONTEXT_UID]&&(this.unbind(t),n.deleteTexture(t._glTextures[this.CONTEXT_UID].texture),t.off("dispose",this.destroyTexture,this),delete t._glTextures[this.CONTEXT_UID],!r)){var i=this.managedTextures.indexOf(t);i!==-1&&xa(this.managedTextures,i,1)}},e.prototype.updateTextureStyle=function(t){var r=t._glTextures[this.CONTEXT_UID];r&&((t.mipmap===zr.POW2||this.webGLVersion!==2)&&!t.isPowerOfTwo?r.mipmap=!1:r.mipmap=t.mipmap>=1,this.webGLVersion!==2&&!t.isPowerOfTwo?r.wrapMode=Ln.CLAMP:r.wrapMode=t.wrapMode,t.resource&&t.resource.style(this.renderer,t,r)||this.setStyle(t,r),r.dirtyStyleId=t.dirtyStyleId)},e.prototype.setStyle=function(t,r){var n=this.gl;if(r.mipmap&&t.mipmap!==zr.ON_MANUAL&&n.generateMipmap(t.target),n.texParameteri(t.target,n.TEXTURE_WRAP_S,r.wrapMode),n.texParameteri(t.target,n.TEXTURE_WRAP_T,r.wrapMode),r.mipmap){n.texParameteri(t.target,n.TEXTURE_MIN_FILTER,t.scaleMode===Br.LINEAR?n.LINEAR_MIPMAP_LINEAR:n.NEAREST_MIPMAP_NEAREST);var i=this.renderer.context.extensions.anisotropicFiltering;if(i&&t.anisotropicLevel>0&&t.scaleMode===Br.LINEAR){var o=Math.min(t.anisotropicLevel,n.getParameter(i.MAX_TEXTURE_MAX_ANISOTROPY_EXT));n.texParameterf(t.target,i.TEXTURE_MAX_ANISOTROPY_EXT,o)}}else n.texParameteri(t.target,n.TEXTURE_MIN_FILTER,t.scaleMode===Br.LINEAR?n.LINEAR:n.NEAREST);n.texParameteri(t.target,n.TEXTURE_MAG_FILTER,t.scaleMode===Br.LINEAR?n.LINEAR:n.NEAREST)},e.prototype.destroy=function(){this.renderer=null},e}(),Rk={__proto__:null,FilterSystem:w1,BatchSystem:E1,ContextSystem:T1,FramebufferSystem:C1,GeometrySystem:P1,MaskSystem:A1,ScissorSystem:O1,StencilSystem:I1,ProjectionSystem:M1,RenderTextureSystem:R1,ShaderSystem:k1,StateSystem:L1,TextureGCSystem:F1,TextureSystem:D1},Cg=new gt,kk=function(e){st(t,e);function t(r,n){r===void 0&&(r=qs.UNKNOWN);var i=e.call(this)||this;return n=Object.assign({},ne.RENDER_OPTIONS,n),i.options=n,i.type=r,i.screen=new Fe(0,0,n.width,n.height),i.view=n.view||ne.ADAPTER.createCanvas(),i.resolution=n.resolution||ne.RESOLUTION,i.useContextAlpha=n.useContextAlpha,i.autoDensity=!!n.autoDensity,i.preserveDrawingBuffer=n.preserveDrawingBuffer,i.clearBeforeRender=n.clearBeforeRender,i._backgroundColor=0,i._backgroundColorRgba=[0,0,0,1],i._backgroundColorString="#000000",i.backgroundColor=n.backgroundColor||i._backgroundColor,i.backgroundAlpha=n.backgroundAlpha,n.transparent!==void 0&&(Or("6.0.0","Option transparent is deprecated, please use backgroundAlpha instead."),i.useContextAlpha=n.transparent,i.backgroundAlpha=n.transparent?0:1),i._lastObjectRendered=null,i.plugins={},i}return t.prototype.initPlugins=function(r){for(var n in r)this.plugins[n]=new r[n](this)},Object.defineProperty(t.prototype,"width",{get:function(){return this.view.width},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"height",{get:function(){return this.view.height},enumerable:!1,configurable:!0}),t.prototype.resize=function(r,n){this.view.width=Math.round(r*this.resolution),this.view.height=Math.round(n*this.resolution);var i=this.view.width/this.resolution,o=this.view.height/this.resolution;this.screen.width=i,this.screen.height=o,this.autoDensity&&(this.view.style.width=i+"px",this.view.style.height=o+"px"),this.emit("resize",i,o)},t.prototype.generateTexture=function(r,n,i,o){n===void 0&&(n={}),typeof n=="number"&&(Or("6.1.0","generateTexture options (scaleMode, resolution, region) are now object options."),n={scaleMode:n,resolution:i,region:o});var a=n.region,s=Koe(n,["region"]);o=a||r.getLocalBounds(null,!0),o.width===0&&(o.width=1),o.height===0&&(o.height=1);var l=Lo.create(j_({width:o.width,height:o.height},s));return Cg.tx=-o.x,Cg.ty=-o.y,this.render(r,{renderTexture:l,clear:!1,transform:Cg,skipUpdateTransform:!!r.parent}),l},t.prototype.destroy=function(r){for(var n in this.plugins)this.plugins[n].destroy(),this.plugins[n]=null;r&&this.view.parentNode&&this.view.parentNode.removeChild(this.view);var i=this;i.plugins=null,i.type=qs.UNKNOWN,i.view=null,i.screen=null,i._tempDisplayObjectParent=null,i.options=null,this._backgroundColorRgba=null,this._backgroundColorString=null,this._lastObjectRendered=null},Object.defineProperty(t.prototype,"backgroundColor",{get:function(){return this._backgroundColor},set:function(r){this._backgroundColor=r,this._backgroundColorString=l1(r),Qt(r,this._backgroundColorRgba)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"backgroundAlpha",{get:function(){return this._backgroundColorRgba[3]},set:function(r){this._backgroundColorRgba[3]=r},enumerable:!1,configurable:!0}),t}(Vi),Dae=function(){function e(t){this.buffer=t||null,this.updateID=-1,this.byteLength=-1,this.refCount=0}return e}(),Nae=function(){function e(t){this.renderer=t,this.managedBuffers={},this.boundBufferBases={}}return e.prototype.destroy=function(){this.renderer=null},e.prototype.contextChange=function(){this.disposeAll(!0),this.gl=this.renderer.gl,this.CONTEXT_UID=this.renderer.CONTEXT_UID},e.prototype.bind=function(t){var r=this,n=r.gl,i=r.CONTEXT_UID,o=t._glBuffers[i]||this.createGLBuffer(t);n.bindBuffer(t.type,o.buffer)},e.prototype.bindBufferBase=function(t,r){var n=this,i=n.gl,o=n.CONTEXT_UID;if(this.boundBufferBases[r]!==t){var a=t._glBuffers[o]||this.createGLBuffer(t);this.boundBufferBases[r]=t,i.bindBufferBase(i.UNIFORM_BUFFER,r,a.buffer)}},e.prototype.bindBufferRange=function(t,r,n){var i=this,o=i.gl,a=i.CONTEXT_UID;n=n||0;var s=t._glBuffers[a]||this.createGLBuffer(t);o.bindBufferRange(o.UNIFORM_BUFFER,r||0,s.buffer,n*256,256)},e.prototype.update=function(t){var r=this,n=r.gl,i=r.CONTEXT_UID,o=t._glBuffers[i];if(t._updateID!==o.updateID)if(o.updateID=t._updateID,n.bindBuffer(t.type,o.buffer),o.byteLength>=t.data.byteLength)n.bufferSubData(t.type,0,t.data);else{var a=t.static?n.STATIC_DRAW:n.DYNAMIC_DRAW;o.byteLength=t.data.byteLength,n.bufferData(t.type,t.data,a)}},e.prototype.dispose=function(t,r){if(this.managedBuffers[t.id]){delete this.managedBuffers[t.id];var n=t._glBuffers[this.CONTEXT_UID],i=this.gl;t.disposeRunner.remove(this),n&&(r||i.deleteBuffer(n.buffer),delete t._glBuffers[this.CONTEXT_UID])}},e.prototype.disposeAll=function(t){for(var r=Object.keys(this.managedBuffers),n=0;n<r.length;n++)this.dispose(this.managedBuffers[r[n]],t)},e.prototype.createGLBuffer=function(t){var r=this,n=r.CONTEXT_UID,i=r.gl;return t._glBuffers[n]=new Dae(i.createBuffer()),this.managedBuffers[t.id]=t,t.disposeRunner.add(this),t._glBuffers[n]},e}(),N1=function(e){st(t,e);function t(r){var n=e.call(this,qs.WEBGL,r)||this;return r=n.options,n.gl=null,n.CONTEXT_UID=0,n.runners={destroy:new Yt("destroy"),contextChange:new Yt("contextChange"),reset:new Yt("reset"),update:new Yt("update"),postrender:new Yt("postrender"),prerender:new Yt("prerender"),resize:new Yt("resize")},n.runners.contextChange.add(n),n.globalUniforms=new wo({projectionMatrix:new gt},!0),n.addSystem(A1,"mask").addSystem(T1,"context").addSystem(L1,"state").addSystem(k1,"shader").addSystem(D1,"texture").addSystem(Nae,"buffer").addSystem(P1,"geometry").addSystem(C1,"framebuffer").addSystem(O1,"scissor").addSystem(I1,"stencil").addSystem(M1,"projection").addSystem(F1,"textureGC").addSystem(w1,"filter").addSystem(R1,"renderTexture").addSystem(E1,"batch"),n.initPlugins(t.__plugins),n.multisample=void 0,r.context?n.context.initFromContext(r.context):n.context.initFromOptions({alpha:!!n.useContextAlpha,antialias:r.antialias,premultipliedAlpha:n.useContextAlpha&&n.useContextAlpha!=="notMultiplied",stencil:!0,preserveDrawingBuffer:r.preserveDrawingBuffer,powerPreference:n.options.powerPreference}),n.renderingToScreen=!0,JR(n.context.webGLVersion===2?"WebGL 2":"WebGL 1"),n.resize(n.options.width,n.options.height),n}return t.create=function(r){if(QR())return new t(r);throw new Error('WebGL unsupported in this browser, use "pixi.js-legacy" for fallback canvas2d support.')},t.prototype.contextChange=function(){var r=this.gl,n;if(this.context.webGLVersion===1){var i=r.getParameter(r.FRAMEBUFFER_BINDING);r.bindFramebuffer(r.FRAMEBUFFER,null),n=r.getParameter(r.SAMPLES),r.bindFramebuffer(r.FRAMEBUFFER,i)}else{var i=r.getParameter(r.DRAW_FRAMEBUFFER_BINDING);r.bindFramebuffer(r.DRAW_FRAMEBUFFER,null),n=r.getParameter(r.SAMPLES),r.bindFramebuffer(r.DRAW_FRAMEBUFFER,i)}n>=ft.HIGH?this.multisample=ft.HIGH:n>=ft.MEDIUM?this.multisample=ft.MEDIUM:n>=ft.LOW?this.multisample=ft.LOW:this.multisample=ft.NONE},t.prototype.addSystem=function(r,n){var i=new r(this);if(this[n])throw new Error('Whoops! The name "'+n+'" is already in use');this[n]=i;for(var o in this.runners)this.runners[o].add(i);return this},t.prototype.render=function(r,n){var i,o,a,s;if(n&&(n instanceof Lo?(Or("6.0.0","Renderer#render arguments changed, use options instead."),i=n,o=arguments[2],a=arguments[3],s=arguments[4]):(i=n.renderTexture,o=n.clear,a=n.transform,s=n.skipUpdateTransform)),this.renderingToScreen=!i,this.runners.prerender.emit(),this.emit("prerender"),this.projection.transform=a,!this.context.isLost){if(i||(this._lastObjectRendered=r),!s){var l=r.enableTempParent();r.updateTransform(),r.disableTempParent(l)}this.renderTexture.bind(i),this.batch.currentRenderer.start(),(o!==void 0?o:this.clearBeforeRender)&&this.renderTexture.clear(),r.render(this),this.batch.currentRenderer.flush(),i&&i.baseTexture.update(),this.runners.postrender.emit(),this.projection.transform=null,this.emit("postrender")}},t.prototype.generateTexture=function(r,n,i,o){n===void 0&&(n={});var a=e.prototype.generateTexture.call(this,r,n,i,o);return this.framebuffer.blit(),a},t.prototype.resize=function(r,n){e.prototype.resize.call(this,r,n),this.runners.resize.emit(this.screen.height,this.screen.width)},t.prototype.reset=function(){return this.runners.reset.emit(),this},t.prototype.clear=function(){this.renderTexture.bind(),this.renderTexture.clear()},t.prototype.destroy=function(r){this.runners.destroy.emit();for(var n in this.runners)this.runners[n].destroy();e.prototype.destroy.call(this,r),this.gl=null},Object.defineProperty(t.prototype,"extract",{get:function(){return Or("6.0.0","Renderer#extract has been deprecated, please use Renderer#plugins.extract instead."),this.plugins.extract},enumerable:!1,configurable:!0}),t.registerPlugin=function(r,n){Or("6.5.0","Renderer.registerPlugin() has been deprecated, please use extensions.add() instead."),Si.add({name:r,type:Ye.RendererPlugin,ref:n})},t.__plugins={},t}(kk);Si.handleByMap(Ye.RendererPlugin,N1.__plugins);function Lk(e){return N1.create(e)}var Bae=`attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;

uniform mat3 projectionMatrix;

varying vec2 vTextureCoord;

void main(void)
{
    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);
    vTextureCoord = aTextureCoord;
}`,jae=`attribute vec2 aVertexPosition;

uniform mat3 projectionMatrix;

varying vec2 vTextureCoord;

uniform vec4 inputSize;
uniform vec4 outputFrame;

vec4 filterVertexPosition( void )
{
    vec2 position = aVertexPosition * max(outputFrame.zw, vec2(0.)) + outputFrame.xy;

    return vec4((projectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);
}

vec2 filterTextureCoord( void )
{
    return aVertexPosition * (outputFrame.zw * inputSize.zw);
}

void main(void)
{
    gl_Position = filterVertexPosition();
    vTextureCoord = filterTextureCoord();
}
`,Fk=Bae,B1=jae,Uae=function(){function e(t){Or("6.1.0","System class is deprecated, implemement ISystem interface instead."),this.renderer=t}return e.prototype.destroy=function(){this.renderer=null},e}(),Ed=function(){function e(){this.texArray=null,this.blend=0,this.type=pn.TRIANGLES,this.start=0,this.size=0,this.data=null}return e}(),Td=function(){function e(){this.elements=[],this.ids=[],this.count=0}return e.prototype.clear=function(){for(var t=0;t<this.count;t++)this.elements[t]=null;this.count=0},e}(),Cd=function(){function e(t){typeof t=="number"?this.rawBinaryData=new ArrayBuffer(t):t instanceof Uint8Array?this.rawBinaryData=t.buffer:this.rawBinaryData=t,this.uint32View=new Uint32Array(this.rawBinaryData),this.float32View=new Float32Array(this.rawBinaryData)}return Object.defineProperty(e.prototype,"int8View",{get:function(){return this._int8View||(this._int8View=new Int8Array(this.rawBinaryData)),this._int8View},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"uint8View",{get:function(){return this._uint8View||(this._uint8View=new Uint8Array(this.rawBinaryData)),this._uint8View},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"int16View",{get:function(){return this._int16View||(this._int16View=new Int16Array(this.rawBinaryData)),this._int16View},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"uint16View",{get:function(){return this._uint16View||(this._uint16View=new Uint16Array(this.rawBinaryData)),this._uint16View},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"int32View",{get:function(){return this._int32View||(this._int32View=new Int32Array(this.rawBinaryData)),this._int32View},enumerable:!1,configurable:!0}),e.prototype.view=function(t){return this[t+"View"]},e.prototype.destroy=function(){this.rawBinaryData=null,this._int8View=null,this._uint8View=null,this._int16View=null,this._uint16View=null,this._int32View=null,this.uint32View=null,this.float32View=null},e.sizeOf=function(t){switch(t){case"int8":case"uint8":return 1;case"int16":case"uint16":return 2;case"int32":case"uint32":case"float32":return 4;default:throw new Error(t+" isn't a valid view type")}},e}(),Dk=function(e){st(t,e);function t(r){var n=e.call(this,r)||this;return n.shaderGenerator=null,n.geometryClass=null,n.vertexSize=null,n.state=Go.for2d(),n.size=ne.SPRITE_BATCH_SIZE*4,n._vertexCount=0,n._indexCount=0,n._bufferedElements=[],n._bufferedTextures=[],n._bufferSize=0,n._shader=null,n._packedGeometries=[],n._packedGeometryPoolSize=2,n._flushId=0,n._aBuffers={},n._iBuffers={},n.MAX_TEXTURES=1,n.renderer.on("prerender",n.onPrerender,n),r.runners.contextChange.add(n),n._dcIndex=0,n._aIndex=0,n._iIndex=0,n._attributeBuffer=null,n._indexBuffer=null,n._tempBoundTextures=[],n}return t.prototype.contextChange=function(){var r=this.renderer.gl;ne.PREFER_ENV===pi.WEBGL_LEGACY?this.MAX_TEXTURES=1:(this.MAX_TEXTURES=Math.min(r.getParameter(r.MAX_TEXTURE_IMAGE_UNITS),ne.SPRITE_MAX_TEXTURES),this.MAX_TEXTURES=wk(this.MAX_TEXTURES,r)),this._shader=this.shaderGenerator.generateShader(this.MAX_TEXTURES);for(var n=0;n<this._packedGeometryPoolSize;n++)this._packedGeometries[n]=new this.geometryClass;this.initFlushBuffers()},t.prototype.initFlushBuffers=function(){for(var r=t._drawCallPool,n=t._textureArrayPool,i=this.size/4,o=Math.floor(i/this.MAX_TEXTURES)+1;r.length<i;)r.push(new Ed);for(;n.length<o;)n.push(new Td);for(var a=0;a<this.MAX_TEXTURES;a++)this._tempBoundTextures[a]=null},t.prototype.onPrerender=function(){this._flushId=0},t.prototype.render=function(r){r._texture.valid&&(this._vertexCount+r.vertexData.length/2>this.size&&this.flush(),this._vertexCount+=r.vertexData.length/2,this._indexCount+=r.indices.length,this._bufferedTextures[this._bufferSize]=r._texture.baseTexture,this._bufferedElements[this._bufferSize++]=r)},t.prototype.buildTexturesAndDrawCalls=function(){var r=this,n=r._bufferedTextures,i=r.MAX_TEXTURES,o=t._textureArrayPool,a=this.renderer.batch,s=this._tempBoundTextures,l=this.renderer.textureGC.count,u=++Le._globalBatch,c=0,f=o[0],h=0;a.copyBoundTextures(s,i);for(var d=0;d<this._bufferSize;++d){var m=n[d];n[d]=null,m._batchEnabled!==u&&(f.count>=i&&(a.boundArray(f,s,u,i),this.buildDrawCalls(f,h,d),h=d,f=o[++c],++u),m._batchEnabled=u,m.touched=l,f.elements[f.count++]=m)}f.count>0&&(a.boundArray(f,s,u,i),this.buildDrawCalls(f,h,this._bufferSize),++c,++u);for(var d=0;d<s.length;d++)s[d]=null;Le._globalBatch=u},t.prototype.buildDrawCalls=function(r,n,i){var o=this,a=o._bufferedElements,s=o._attributeBuffer,l=o._indexBuffer,u=o.vertexSize,c=t._drawCallPool,f=this._dcIndex,h=this._aIndex,d=this._iIndex,m=c[f];m.start=this._iIndex,m.texArray=r;for(var g=n;g<i;++g){var p=a[g],v=p._texture.baseTexture,y=c1[v.alphaMode?1:0][p.blendMode];a[g]=null,n<g&&m.blend!==y&&(m.size=d-m.start,n=g,m=c[++f],m.texArray=r,m.start=d),this.packInterleavedGeometry(p,s,l,h,d),h+=p.vertexData.length/2*u,d+=p.indices.length,m.blend=y}n<i&&(m.size=d-m.start,++f),this._dcIndex=f,this._aIndex=h,this._iIndex=d},t.prototype.bindAndClearTexArray=function(r){for(var n=this.renderer.texture,i=0;i<r.count;i++)n.bind(r.elements[i],r.ids[i]),r.elements[i]=null;r.count=0},t.prototype.updateGeometry=function(){var r=this,n=r._packedGeometries,i=r._attributeBuffer,o=r._indexBuffer;ne.CAN_UPLOAD_SAME_BUFFER?(n[this._flushId]._buffer.update(i.rawBinaryData),n[this._flushId]._indexBuffer.update(o),this.renderer.geometry.updateBuffers()):(this._packedGeometryPoolSize<=this._flushId&&(this._packedGeometryPoolSize++,n[this._flushId]=new this.geometryClass),n[this._flushId]._buffer.update(i.rawBinaryData),n[this._flushId]._indexBuffer.update(o),this.renderer.geometry.bind(n[this._flushId]),this.renderer.geometry.updateBuffers(),this._flushId++)},t.prototype.drawBatches=function(){for(var r=this._dcIndex,n=this.renderer,i=n.gl,o=n.state,a=t._drawCallPool,s=null,l=0;l<r;l++){var u=a[l],c=u.texArray,f=u.type,h=u.size,d=u.start,m=u.blend;s!==c&&(s=c,this.bindAndClearTexArray(c)),this.state.blendMode=m,o.set(this.state),i.drawElements(f,h,i.UNSIGNED_SHORT,d*2)}},t.prototype.flush=function(){this._vertexCount!==0&&(this._attributeBuffer=this.getAttributeBuffer(this._vertexCount),this._indexBuffer=this.getIndexBuffer(this._indexCount),this._aIndex=0,this._iIndex=0,this._dcIndex=0,this.buildTexturesAndDrawCalls(),this.updateGeometry(),this.drawBatches(),this._bufferSize=0,this._vertexCount=0,this._indexCount=0)},t.prototype.start=function(){this.renderer.state.set(this.state),this.renderer.texture.ensureSamplerType(this.MAX_TEXTURES),this.renderer.shader.bind(this._shader),ne.CAN_UPLOAD_SAME_BUFFER&&this.renderer.geometry.bind(this._packedGeometries[this._flushId])},t.prototype.stop=function(){this.flush()},t.prototype.destroy=function(){for(var r=0;r<this._packedGeometryPoolSize;r++)this._packedGeometries[r]&&this._packedGeometries[r].destroy();this.renderer.off("prerender",this.onPrerender,this),this._aBuffers=null,this._iBuffers=null,this._packedGeometries=null,this._attributeBuffer=null,this._indexBuffer=null,this._shader&&(this._shader.destroy(),this._shader=null),e.prototype.destroy.call(this)},t.prototype.getAttributeBuffer=function(r){var n=xc(Math.ceil(r/8)),i=k_(n),o=n*8;this._aBuffers.length<=i&&(this._iBuffers.length=i+1);var a=this._aBuffers[o];return a||(this._aBuffers[o]=a=new Cd(o*this.vertexSize*4)),a},t.prototype.getIndexBuffer=function(r){var n=xc(Math.ceil(r/12)),i=k_(n),o=n*12;this._iBuffers.length<=i&&(this._iBuffers.length=i+1);var a=this._iBuffers[i];return a||(this._iBuffers[i]=a=new Uint16Array(o)),a},t.prototype.packInterleavedGeometry=function(r,n,i,o,a){for(var s=n.uint32View,l=n.float32View,u=o/this.vertexSize,c=r.uvs,f=r.indices,h=r.vertexData,d=r._texture.baseTexture._batchLocation,m=Math.min(r.worldAlpha,1),g=m<1&&r._texture.baseTexture.alphaMode?Lp(r._tintRGB,m):r._tintRGB+(m*255<<24),p=0;p<h.length;p+=2)l[o++]=h[p],l[o++]=h[p+1],l[o++]=c[p],l[o++]=c[p+1],s[o++]=g,l[o++]=d;for(var p=0;p<f.length;p++)i[a++]=u+f[p]},t._drawCallPool=[],t._textureArrayPool=[],t}(ef),Nk=function(){function e(t,r){if(this.vertexSrc=t,this.fragTemplate=r,this.programCache={},this.defaultGroupCache={},r.indexOf("%count%")<0)throw new Error('Fragment template must contain "%count%".');if(r.indexOf("%forloop%")<0)throw new Error('Fragment template must contain "%forloop%".')}return e.prototype.generateShader=function(t){if(!this.programCache[t]){for(var r=new Int32Array(t),n=0;n<t;n++)r[n]=n;this.defaultGroupCache[t]=wo.from({uSamplers:r},!0);var i=this.fragTemplate;i=i.replace(/%count%/gi,""+t),i=i.replace(/%forloop%/gi,this.generateSampleSrc(t)),this.programCache[t]=new El(this.vertexSrc,i)}var o={tint:new Float32Array([1,1,1,1]),translationMatrix:new gt,default:this.defaultGroupCache[t]};return new Bi(this.programCache[t],o)},e.prototype.generateSampleSrc=function(t){var r="";r+=`
`,r+=`
`;for(var n=0;n<t;n++)n>0&&(r+=`
else `),n<t-1&&(r+="if(vTextureId < "+n+".5)"),r+=`
{`,r+=`
	color = texture2D(uSamplers[`+n+"], vTextureCoord);",r+=`
}`;return r+=`
`,r+=`
`,r},e}(),j1=function(e){st(t,e);function t(r){r===void 0&&(r=!1);var n=e.call(this)||this;return n._buffer=new Dt(null,r,!1),n._indexBuffer=new Dt(null,r,!0),n.addAttribute("aVertexPosition",n._buffer,2,!1,fe.FLOAT).addAttribute("aTextureCoord",n._buffer,2,!1,fe.FLOAT).addAttribute("aColor",n._buffer,4,!0,fe.UNSIGNED_BYTE).addAttribute("aTextureId",n._buffer,1,!0,fe.FLOAT).addIndex(n._indexBuffer),n}return t}(wl),IP=`precision highp float;
attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;
attribute vec4 aColor;
attribute float aTextureId;

uniform mat3 projectionMatrix;
uniform mat3 translationMatrix;
uniform vec4 tint;

varying vec2 vTextureCoord;
varying vec4 vColor;
varying float vTextureId;

void main(void){
    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);

    vTextureCoord = aTextureCoord;
    vTextureId = aTextureId;
    vColor = aColor * tint;
}
`,MP=`varying vec2 vTextureCoord;
varying vec4 vColor;
varying float vTextureId;
uniform sampler2D uSamplers[%count%];

void main(void){
    vec4 color;
    %forloop%
    gl_FragColor = color * vColor;
}
`,Bk=function(){function e(){}return e.create=function(t){var r=Object.assign({vertex:IP,fragment:MP,geometryClass:j1,vertexSize:6},t),n=r.vertex,i=r.fragment,o=r.vertexSize,a=r.geometryClass;return function(s){st(l,s);function l(u){var c=s.call(this,u)||this;return c.shaderGenerator=new Nk(n,i),c.geometryClass=a,c.vertexSize=o,c}return l}(Dk)},Object.defineProperty(e,"defaultVertexSrc",{get:function(){return IP},enumerable:!1,configurable:!0}),Object.defineProperty(e,"defaultFragmentTemplate",{get:function(){return MP},enumerable:!1,configurable:!0}),e}(),U1=Bk.create();Object.assign(U1,{extension:{name:"batch",type:Ye.RendererPlugin}});var jk={},$ae=function(e){Object.defineProperty(jk,e,{get:function(){return Or("6.0.0","PIXI.systems."+e+" has moved to PIXI."+e),hk[e]}})};for(var $1 in hk)$ae($1);var Uk={},Gae=function(e){Object.defineProperty(Uk,e,{get:function(){return Or("6.0.0","PIXI.resources."+e+" has moved to PIXI."+e),Rk[e]}})};for(var $1 in Rk)Gae($1);var zae="6.5.10";/*!
 * @pixi/accessibility - v6.5.10
 * Compiled Thu, 06 Jul 2023 15:25:11 UTC
 *
 * @pixi/accessibility is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */var $k={accessible:!1,accessibleTitle:null,accessibleHint:null,tabIndex:0,_accessibleActive:!1,_accessibleDiv:null,accessibleType:"button",accessiblePointerEvents:"auto",accessibleChildren:!0,renderId:-1};At.mixin($k);var Vae=9,jf=100,Hae=0,Wae=0,RP=2,kP=1,Xae=-1e3,qae=-1e3,Yae=2,Gk=function(){function e(t){this.debug=!1,this._isActive=!1,this._isMobileAccessibility=!1,this.pool=[],this.renderId=0,this.children=[],this.androidUpdateCount=0,this.androidUpdateFrequency=500,this._hookDiv=null,(mn.tablet||mn.phone)&&this.createTouchHook();var r=document.createElement("div");r.style.width=jf+"px",r.style.height=jf+"px",r.style.position="absolute",r.style.top=Hae+"px",r.style.left=Wae+"px",r.style.zIndex=RP.toString(),this.div=r,this.renderer=t,this._onKeyDown=this._onKeyDown.bind(this),this._onMouseMove=this._onMouseMove.bind(this),globalThis.addEventListener("keydown",this._onKeyDown,!1)}return Object.defineProperty(e.prototype,"isActive",{get:function(){return this._isActive},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"isMobileAccessibility",{get:function(){return this._isMobileAccessibility},enumerable:!1,configurable:!0}),e.prototype.createTouchHook=function(){var t=this,r=document.createElement("button");r.style.width=kP+"px",r.style.height=kP+"px",r.style.position="absolute",r.style.top=Xae+"px",r.style.left=qae+"px",r.style.zIndex=Yae.toString(),r.style.backgroundColor="#FF0000",r.title="select to enable accessibility for this content",r.addEventListener("focus",function(){t._isMobileAccessibility=!0,t.activate(),t.destroyTouchHook()}),document.body.appendChild(r),this._hookDiv=r},e.prototype.destroyTouchHook=function(){this._hookDiv&&(document.body.removeChild(this._hookDiv),this._hookDiv=null)},e.prototype.activate=function(){var t;this._isActive||(this._isActive=!0,globalThis.document.addEventListener("mousemove",this._onMouseMove,!0),globalThis.removeEventListener("keydown",this._onKeyDown,!1),this.renderer.on("postrender",this.update,this),(t=this.renderer.view.parentNode)===null||t===void 0||t.appendChild(this.div))},e.prototype.deactivate=function(){var t;!this._isActive||this._isMobileAccessibility||(this._isActive=!1,globalThis.document.removeEventListener("mousemove",this._onMouseMove,!0),globalThis.addEventListener("keydown",this._onKeyDown,!1),this.renderer.off("postrender",this.update),(t=this.div.parentNode)===null||t===void 0||t.removeChild(this.div))},e.prototype.updateAccessibleObjects=function(t){if(!(!t.visible||!t.accessibleChildren)){t.accessible&&t.interactive&&(t._accessibleActive||this.addChild(t),t.renderId=this.renderId);var r=t.children;if(r)for(var n=0;n<r.length;n++)this.updateAccessibleObjects(r[n])}},e.prototype.update=function(){var t=performance.now();if(!(mn.android.device&&t<this.androidUpdateCount)&&(this.androidUpdateCount=t+this.androidUpdateFrequency,!!this.renderer.renderingToScreen)){this.renderer._lastObjectRendered&&this.updateAccessibleObjects(this.renderer._lastObjectRendered);var r=this.renderer.view.getBoundingClientRect(),n=r.left,i=r.top,o=r.width,a=r.height,s=this.renderer,l=s.width,u=s.height,c=s.resolution,f=o/l*c,h=a/u*c,d=this.div;d.style.left=n+"px",d.style.top=i+"px",d.style.width=l+"px",d.style.height=u+"px";for(var m=0;m<this.children.length;m++){var g=this.children[m];if(g.renderId!==this.renderId)g._accessibleActive=!1,xa(this.children,m,1),this.div.removeChild(g._accessibleDiv),this.pool.push(g._accessibleDiv),g._accessibleDiv=null,m--;else{d=g._accessibleDiv;var p=g.hitArea,v=g.worldTransform;g.hitArea?(d.style.left=(v.tx+p.x*v.a)*f+"px",d.style.top=(v.ty+p.y*v.d)*h+"px",d.style.width=p.width*v.a*f+"px",d.style.height=p.height*v.d*h+"px"):(p=g.getBounds(),this.capHitArea(p),d.style.left=p.x*f+"px",d.style.top=p.y*h+"px",d.style.width=p.width*f+"px",d.style.height=p.height*h+"px",d.title!==g.accessibleTitle&&g.accessibleTitle!==null&&(d.title=g.accessibleTitle),d.getAttribute("aria-label")!==g.accessibleHint&&g.accessibleHint!==null&&d.setAttribute("aria-label",g.accessibleHint)),(g.accessibleTitle!==d.title||g.tabIndex!==d.tabIndex)&&(d.title=g.accessibleTitle,d.tabIndex=g.tabIndex,this.debug&&this.updateDebugHTML(d))}}this.renderId++}},e.prototype.updateDebugHTML=function(t){t.innerHTML="type: "+t.type+"</br> title : "+t.title+"</br> tabIndex: "+t.tabIndex},e.prototype.capHitArea=function(t){t.x<0&&(t.width+=t.x,t.x=0),t.y<0&&(t.height+=t.y,t.y=0);var r=this.renderer,n=r.width,i=r.height;t.x+t.width>n&&(t.width=n-t.x),t.y+t.height>i&&(t.height=i-t.y)},e.prototype.addChild=function(t){var r=this.pool.pop();r||(r=document.createElement("button"),r.style.width=jf+"px",r.style.height=jf+"px",r.style.backgroundColor=this.debug?"rgba(255,255,255,0.5)":"transparent",r.style.position="absolute",r.style.zIndex=RP.toString(),r.style.borderStyle="none",navigator.userAgent.toLowerCase().indexOf("chrome")>-1?r.setAttribute("aria-live","off"):r.setAttribute("aria-live","polite"),navigator.userAgent.match(/rv:.*Gecko\//)?r.setAttribute("aria-relevant","additions"):r.setAttribute("aria-relevant","text"),r.addEventListener("click",this._onClick.bind(this)),r.addEventListener("focus",this._onFocus.bind(this)),r.addEventListener("focusout",this._onFocusOut.bind(this))),r.style.pointerEvents=t.accessiblePointerEvents,r.type=t.accessibleType,t.accessibleTitle&&t.accessibleTitle!==null?r.title=t.accessibleTitle:(!t.accessibleHint||t.accessibleHint===null)&&(r.title="displayObject "+t.tabIndex),t.accessibleHint&&t.accessibleHint!==null&&r.setAttribute("aria-label",t.accessibleHint),this.debug&&this.updateDebugHTML(r),t._accessibleActive=!0,t._accessibleDiv=r,r.displayObject=t,this.children.push(t),this.div.appendChild(t._accessibleDiv),t._accessibleDiv.tabIndex=t.tabIndex},e.prototype._onClick=function(t){var r=this.renderer.plugins.interaction,n=t.target.displayObject,i=r.eventData;r.dispatchEvent(n,"click",i),r.dispatchEvent(n,"pointertap",i),r.dispatchEvent(n,"tap",i)},e.prototype._onFocus=function(t){t.target.getAttribute("aria-live")||t.target.setAttribute("aria-live","assertive");var r=this.renderer.plugins.interaction,n=t.target.displayObject,i=r.eventData;r.dispatchEvent(n,"mouseover",i)},e.prototype._onFocusOut=function(t){t.target.getAttribute("aria-live")||t.target.setAttribute("aria-live","polite");var r=this.renderer.plugins.interaction,n=t.target.displayObject,i=r.eventData;r.dispatchEvent(n,"mouseout",i)},e.prototype._onKeyDown=function(t){t.keyCode===Vae&&this.activate()},e.prototype._onMouseMove=function(t){t.movementX===0&&t.movementY===0||this.deactivate()},e.prototype.destroy=function(){this.destroyTouchHook(),this.div=null,globalThis.document.removeEventListener("mousemove",this._onMouseMove,!0),globalThis.removeEventListener("keydown",this._onKeyDown),this.pool=null,this.children=null,this.renderer=null},e.extension={name:"accessibility",type:[Ye.RendererPlugin,Ye.CanvasRendererPlugin]},e}();/*!
 * @pixi/interaction - v6.5.10
 * Compiled Thu, 06 Jul 2023 15:25:11 UTC
 *
 * @pixi/interaction is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */var $_=function(){function e(){this.pressure=0,this.rotationAngle=0,this.twist=0,this.tangentialPressure=0,this.global=new Pe,this.target=null,this.originalEvent=null,this.identifier=null,this.isPrimary=!1,this.button=0,this.buttons=0,this.width=0,this.height=0,this.tiltX=0,this.tiltY=0,this.pointerType=null,this.pressure=0,this.rotationAngle=0,this.twist=0,this.tangentialPressure=0}return Object.defineProperty(e.prototype,"pointerId",{get:function(){return this.identifier},enumerable:!1,configurable:!0}),e.prototype.getLocalPosition=function(t,r,n){return t.worldTransform.applyInverse(n||this.global,r)},e.prototype.copyEvent=function(t){"isPrimary"in t&&t.isPrimary&&(this.isPrimary=!0),this.button="button"in t&&t.button;var r="buttons"in t&&t.buttons;this.buttons=Number.isInteger(r)?r:"which"in t&&t.which,this.width="width"in t&&t.width,this.height="height"in t&&t.height,this.tiltX="tiltX"in t&&t.tiltX,this.tiltY="tiltY"in t&&t.tiltY,this.pointerType="pointerType"in t&&t.pointerType,this.pressure="pressure"in t&&t.pressure,this.rotationAngle="rotationAngle"in t&&t.rotationAngle,this.twist="twist"in t&&t.twist||0,this.tangentialPressure="tangentialPressure"in t&&t.tangentialPressure||0},e.prototype.reset=function(){this.isPrimary=!1},e}();/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var G_=function(e,t){return G_=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)n.hasOwnProperty(i)&&(r[i]=n[i])},G_(e,t)};function Kae(e,t){G_(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}var zk=function(){function e(){this.stopped=!1,this.stopsPropagatingAt=null,this.stopPropagationHint=!1,this.target=null,this.currentTarget=null,this.type=null,this.data=null}return e.prototype.stopPropagation=function(){this.stopped=!0,this.stopPropagationHint=!0,this.stopsPropagatingAt=this.currentTarget},e.prototype.reset=function(){this.stopped=!1,this.stopsPropagatingAt=null,this.stopPropagationHint=!1,this.currentTarget=null,this.target=null},e}(),Th=function(){function e(t){this._pointerId=t,this._flags=e.FLAGS.NONE}return e.prototype._doSet=function(t,r){r?this._flags=this._flags|t:this._flags=this._flags&~t},Object.defineProperty(e.prototype,"pointerId",{get:function(){return this._pointerId},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"flags",{get:function(){return this._flags},set:function(t){this._flags=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"none",{get:function(){return this._flags===e.FLAGS.NONE},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"over",{get:function(){return(this._flags&e.FLAGS.OVER)!==0},set:function(t){this._doSet(e.FLAGS.OVER,t)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"rightDown",{get:function(){return(this._flags&e.FLAGS.RIGHT_DOWN)!==0},set:function(t){this._doSet(e.FLAGS.RIGHT_DOWN,t)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"leftDown",{get:function(){return(this._flags&e.FLAGS.LEFT_DOWN)!==0},set:function(t){this._doSet(e.FLAGS.LEFT_DOWN,t)},enumerable:!1,configurable:!0}),e.FLAGS=Object.freeze({NONE:0,OVER:1,LEFT_DOWN:2,RIGHT_DOWN:4}),e}(),Zae=function(){function e(){this._tempPoint=new Pe}return e.prototype.recursiveFindHit=function(t,r,n,i,o){var a;if(!r||!r.visible)return!1;var s=t.data.global;o=r.interactive||o;var l=!1,u=o,c=!0;if(r.hitArea)i&&(r.worldTransform.applyInverse(s,this._tempPoint),r.hitArea.contains(this._tempPoint.x,this._tempPoint.y)?l=!0:(i=!1,c=!1)),u=!1;else if(r._mask&&i){var f=r._mask.isMaskData?r._mask.maskObject:r._mask;f&&!(!((a=f.containsPoint)===null||a===void 0)&&a.call(f,s))&&(i=!1)}if(c&&r.interactiveChildren&&r.children)for(var h=r.children,d=h.length-1;d>=0;d--){var m=h[d],g=this.recursiveFindHit(t,m,n,i,u);if(g){if(!m.parent)continue;u=!1,g&&(t.target&&(i=!1),l=!0)}}return o&&(i&&!t.target&&!r.hitArea&&r.containsPoint&&r.containsPoint(s)&&(l=!0),r.interactive&&(l&&!t.target&&(t.target=r),n&&n(t,r,!!l))),l},e.prototype.findHit=function(t,r,n,i){this.recursiveFindHit(t,r,n,i,!1)},e}(),Vk={interactive:!1,interactiveChildren:!0,hitArea:null,get buttonMode(){return this.cursor==="pointer"},set buttonMode(e){e?this.cursor="pointer":this.cursor==="pointer"&&(this.cursor=null)},cursor:null,get trackedPointers(){return this._trackedPointers===void 0&&(this._trackedPointers={}),this._trackedPointers},_trackedPointers:void 0};At.mixin(Vk);var Uf=1,$f={target:null,data:{global:null}},Hk=function(e){Kae(t,e);function t(r,n){var i=e.call(this)||this;return n=n||{},i.renderer=r,i.autoPreventDefault=n.autoPreventDefault!==void 0?n.autoPreventDefault:!0,i.interactionFrequency=n.interactionFrequency||10,i.mouse=new $_,i.mouse.identifier=Uf,i.mouse.global.set(-999999),i.activeInteractionData={},i.activeInteractionData[Uf]=i.mouse,i.interactionDataPool=[],i.eventData=new zk,i.interactionDOMElement=null,i.moveWhenInside=!1,i.eventsAdded=!1,i.tickerAdded=!1,i.mouseOverRenderer=!("PointerEvent"in globalThis),i.supportsTouchEvents="ontouchstart"in globalThis,i.supportsPointerEvents=!!globalThis.PointerEvent,i.onPointerUp=i.onPointerUp.bind(i),i.processPointerUp=i.processPointerUp.bind(i),i.onPointerCancel=i.onPointerCancel.bind(i),i.processPointerCancel=i.processPointerCancel.bind(i),i.onPointerDown=i.onPointerDown.bind(i),i.processPointerDown=i.processPointerDown.bind(i),i.onPointerMove=i.onPointerMove.bind(i),i.processPointerMove=i.processPointerMove.bind(i),i.onPointerOut=i.onPointerOut.bind(i),i.processPointerOverOut=i.processPointerOverOut.bind(i),i.onPointerOver=i.onPointerOver.bind(i),i.cursorStyles={default:"inherit",pointer:"pointer"},i.currentCursorMode=null,i.cursor=null,i.resolution=1,i.delayedEvents=[],i.search=new Zae,i._tempDisplayObject=new p1,i._eventListenerOptions={capture:!0,passive:!1},i._useSystemTicker=n.useSystemTicker!==void 0?n.useSystemTicker:!0,i.setTargetElement(i.renderer.view,i.renderer.resolution),i}return Object.defineProperty(t.prototype,"useSystemTicker",{get:function(){return this._useSystemTicker},set:function(r){this._useSystemTicker=r,r?this.addTickerListener():this.removeTickerListener()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"lastObjectRendered",{get:function(){return this.renderer._lastObjectRendered||this._tempDisplayObject},enumerable:!1,configurable:!0}),t.prototype.hitTest=function(r,n){return $f.target=null,$f.data.global=r,n||(n=this.lastObjectRendered),this.processInteractive($f,n,null,!0),$f.target},t.prototype.setTargetElement=function(r,n){n===void 0&&(n=1),this.removeTickerListener(),this.removeEvents(),this.interactionDOMElement=r,this.resolution=n,this.addEvents(),this.addTickerListener()},t.prototype.addTickerListener=function(){this.tickerAdded||!this.interactionDOMElement||!this._useSystemTicker||(Kt.system.add(this.tickerUpdate,this,mi.INTERACTION),this.tickerAdded=!0)},t.prototype.removeTickerListener=function(){this.tickerAdded&&(Kt.system.remove(this.tickerUpdate,this),this.tickerAdded=!1)},t.prototype.addEvents=function(){if(!(this.eventsAdded||!this.interactionDOMElement)){var r=this.interactionDOMElement.style;globalThis.navigator.msPointerEnabled?(r.msContentZooming="none",r.msTouchAction="none"):this.supportsPointerEvents&&(r.touchAction="none"),this.supportsPointerEvents?(globalThis.document.addEventListener("pointermove",this.onPointerMove,this._eventListenerOptions),this.interactionDOMElement.addEventListener("pointerdown",this.onPointerDown,this._eventListenerOptions),this.interactionDOMElement.addEventListener("pointerleave",this.onPointerOut,this._eventListenerOptions),this.interactionDOMElement.addEventListener("pointerover",this.onPointerOver,this._eventListenerOptions),globalThis.addEventListener("pointercancel",this.onPointerCancel,this._eventListenerOptions),globalThis.addEventListener("pointerup",this.onPointerUp,this._eventListenerOptions)):(globalThis.document.addEventListener("mousemove",this.onPointerMove,this._eventListenerOptions),this.interactionDOMElement.addEventListener("mousedown",this.onPointerDown,this._eventListenerOptions),this.interactionDOMElement.addEventListener("mouseout",this.onPointerOut,this._eventListenerOptions),this.interactionDOMElement.addEventListener("mouseover",this.onPointerOver,this._eventListenerOptions),globalThis.addEventListener("mouseup",this.onPointerUp,this._eventListenerOptions)),this.supportsTouchEvents&&(this.interactionDOMElement.addEventListener("touchstart",this.onPointerDown,this._eventListenerOptions),this.interactionDOMElement.addEventListener("touchcancel",this.onPointerCancel,this._eventListenerOptions),this.interactionDOMElement.addEventListener("touchend",this.onPointerUp,this._eventListenerOptions),this.interactionDOMElement.addEventListener("touchmove",this.onPointerMove,this._eventListenerOptions)),this.eventsAdded=!0}},t.prototype.removeEvents=function(){if(!(!this.eventsAdded||!this.interactionDOMElement)){var r=this.interactionDOMElement.style;globalThis.navigator.msPointerEnabled?(r.msContentZooming="",r.msTouchAction=""):this.supportsPointerEvents&&(r.touchAction=""),this.supportsPointerEvents?(globalThis.document.removeEventListener("pointermove",this.onPointerMove,this._eventListenerOptions),this.interactionDOMElement.removeEventListener("pointerdown",this.onPointerDown,this._eventListenerOptions),this.interactionDOMElement.removeEventListener("pointerleave",this.onPointerOut,this._eventListenerOptions),this.interactionDOMElement.removeEventListener("pointerover",this.onPointerOver,this._eventListenerOptions),globalThis.removeEventListener("pointercancel",this.onPointerCancel,this._eventListenerOptions),globalThis.removeEventListener("pointerup",this.onPointerUp,this._eventListenerOptions)):(globalThis.document.removeEventListener("mousemove",this.onPointerMove,this._eventListenerOptions),this.interactionDOMElement.removeEventListener("mousedown",this.onPointerDown,this._eventListenerOptions),this.interactionDOMElement.removeEventListener("mouseout",this.onPointerOut,this._eventListenerOptions),this.interactionDOMElement.removeEventListener("mouseover",this.onPointerOver,this._eventListenerOptions),globalThis.removeEventListener("mouseup",this.onPointerUp,this._eventListenerOptions)),this.supportsTouchEvents&&(this.interactionDOMElement.removeEventListener("touchstart",this.onPointerDown,this._eventListenerOptions),this.interactionDOMElement.removeEventListener("touchcancel",this.onPointerCancel,this._eventListenerOptions),this.interactionDOMElement.removeEventListener("touchend",this.onPointerUp,this._eventListenerOptions),this.interactionDOMElement.removeEventListener("touchmove",this.onPointerMove,this._eventListenerOptions)),this.interactionDOMElement=null,this.eventsAdded=!1}},t.prototype.tickerUpdate=function(r){this._deltaTime+=r,!(this._deltaTime<this.interactionFrequency)&&(this._deltaTime=0,this.update())},t.prototype.update=function(){if(this.interactionDOMElement){if(this._didMove){this._didMove=!1;return}this.cursor=null;for(var r in this.activeInteractionData)if(this.activeInteractionData.hasOwnProperty(r)){var n=this.activeInteractionData[r];if(n.originalEvent&&n.pointerType!=="touch"){var i=this.configureInteractionEventForDOMEvent(this.eventData,n.originalEvent,n);this.processInteractive(i,this.lastObjectRendered,this.processPointerOverOut,!0)}}this.setCursorMode(this.cursor)}},t.prototype.setCursorMode=function(r){r=r||"default";var n=!0;if(globalThis.OffscreenCanvas&&this.interactionDOMElement instanceof OffscreenCanvas&&(n=!1),this.currentCursorMode!==r){this.currentCursorMode=r;var i=this.cursorStyles[r];if(i)switch(typeof i){case"string":n&&(this.interactionDOMElement.style.cursor=i);break;case"function":i(r);break;case"object":n&&Object.assign(this.interactionDOMElement.style,i);break}else n&&typeof r=="string"&&!Object.prototype.hasOwnProperty.call(this.cursorStyles,r)&&(this.interactionDOMElement.style.cursor=r)}},t.prototype.dispatchEvent=function(r,n,i){(!i.stopPropagationHint||r===i.stopsPropagatingAt)&&(i.currentTarget=r,i.type=n,r.emit(n,i),r[n]&&r[n](i))},t.prototype.delayDispatchEvent=function(r,n,i){this.delayedEvents.push({displayObject:r,eventString:n,eventData:i})},t.prototype.mapPositionToPoint=function(r,n,i){var o;this.interactionDOMElement.parentElement?o=this.interactionDOMElement.getBoundingClientRect():o={x:0,y:0,width:this.interactionDOMElement.width,height:this.interactionDOMElement.height,left:0,top:0};var a=1/this.resolution;r.x=(n-o.left)*(this.interactionDOMElement.width/o.width)*a,r.y=(i-o.top)*(this.interactionDOMElement.height/o.height)*a},t.prototype.processInteractive=function(r,n,i,o){var a=this.search.findHit(r,n,i,o),s=this.delayedEvents;if(!s.length)return a;r.stopPropagationHint=!1;var l=s.length;this.delayedEvents=[];for(var u=0;u<l;u++){var c=s[u],f=c.displayObject,h=c.eventString,d=c.eventData;d.stopsPropagatingAt===f&&(d.stopPropagationHint=!0),this.dispatchEvent(f,h,d)}return a},t.prototype.onPointerDown=function(r){if(!(this.supportsTouchEvents&&r.pointerType==="touch")){var n=this.normalizeToPointerData(r);if(this.autoPreventDefault&&n[0].isNormalized){var i=r.cancelable||!("cancelable"in r);i&&r.preventDefault()}for(var o=n.length,a=0;a<o;a++){var s=n[a],l=this.getInteractionDataForPointerId(s),u=this.configureInteractionEventForDOMEvent(this.eventData,s,l);if(u.data.originalEvent=r,this.processInteractive(u,this.lastObjectRendered,this.processPointerDown,!0),this.emit("pointerdown",u),s.pointerType==="touch")this.emit("touchstart",u);else if(s.pointerType==="mouse"||s.pointerType==="pen"){var c=s.button===2;this.emit(c?"rightdown":"mousedown",this.eventData)}}}},t.prototype.processPointerDown=function(r,n,i){var o=r.data,a=r.data.identifier;if(i){if(n.trackedPointers[a]||(n.trackedPointers[a]=new Th(a)),this.dispatchEvent(n,"pointerdown",r),o.pointerType==="touch")this.dispatchEvent(n,"touchstart",r);else if(o.pointerType==="mouse"||o.pointerType==="pen"){var s=o.button===2;s?n.trackedPointers[a].rightDown=!0:n.trackedPointers[a].leftDown=!0,this.dispatchEvent(n,s?"rightdown":"mousedown",r)}}},t.prototype.onPointerComplete=function(r,n,i){var o=this.normalizeToPointerData(r),a=o.length,s=r.target;r.composedPath&&r.composedPath().length>0&&(s=r.composedPath()[0]);for(var l=s!==this.interactionDOMElement?"outside":"",u=0;u<a;u++){var c=o[u],f=this.getInteractionDataForPointerId(c),h=this.configureInteractionEventForDOMEvent(this.eventData,c,f);if(h.data.originalEvent=r,this.processInteractive(h,this.lastObjectRendered,i,n||!l),this.emit(n?"pointercancel":"pointerup"+l,h),c.pointerType==="mouse"||c.pointerType==="pen"){var d=c.button===2;this.emit(d?"rightup"+l:"mouseup"+l,h)}else c.pointerType==="touch"&&(this.emit(n?"touchcancel":"touchend"+l,h),this.releaseInteractionDataForPointerId(c.pointerId))}},t.prototype.onPointerCancel=function(r){this.supportsTouchEvents&&r.pointerType==="touch"||this.onPointerComplete(r,!0,this.processPointerCancel)},t.prototype.processPointerCancel=function(r,n){var i=r.data,o=r.data.identifier;n.trackedPointers[o]!==void 0&&(delete n.trackedPointers[o],this.dispatchEvent(n,"pointercancel",r),i.pointerType==="touch"&&this.dispatchEvent(n,"touchcancel",r))},t.prototype.onPointerUp=function(r){this.supportsTouchEvents&&r.pointerType==="touch"||this.onPointerComplete(r,!1,this.processPointerUp)},t.prototype.processPointerUp=function(r,n,i){var o=r.data,a=r.data.identifier,s=n.trackedPointers[a],l=o.pointerType==="touch",u=o.pointerType==="mouse"||o.pointerType==="pen",c=!1;if(u){var f=o.button===2,h=Th.FLAGS,d=f?h.RIGHT_DOWN:h.LEFT_DOWN,m=s!==void 0&&s.flags&d;i?(this.dispatchEvent(n,f?"rightup":"mouseup",r),m&&(this.dispatchEvent(n,f?"rightclick":"click",r),c=!0)):m&&this.dispatchEvent(n,f?"rightupoutside":"mouseupoutside",r),s&&(f?s.rightDown=!1:s.leftDown=!1)}i?(this.dispatchEvent(n,"pointerup",r),l&&this.dispatchEvent(n,"touchend",r),s&&((!u||c)&&this.dispatchEvent(n,"pointertap",r),l&&(this.dispatchEvent(n,"tap",r),s.over=!1))):s&&(this.dispatchEvent(n,"pointerupoutside",r),l&&this.dispatchEvent(n,"touchendoutside",r)),s&&s.none&&delete n.trackedPointers[a]},t.prototype.onPointerMove=function(r){if(!(this.supportsTouchEvents&&r.pointerType==="touch")){var n=this.normalizeToPointerData(r);(n[0].pointerType==="mouse"||n[0].pointerType==="pen")&&(this._didMove=!0,this.cursor=null);for(var i=n.length,o=0;o<i;o++){var a=n[o],s=this.getInteractionDataForPointerId(a),l=this.configureInteractionEventForDOMEvent(this.eventData,a,s);l.data.originalEvent=r,this.processInteractive(l,this.lastObjectRendered,this.processPointerMove,!0),this.emit("pointermove",l),a.pointerType==="touch"&&this.emit("touchmove",l),(a.pointerType==="mouse"||a.pointerType==="pen")&&this.emit("mousemove",l)}n[0].pointerType==="mouse"&&this.setCursorMode(this.cursor)}},t.prototype.processPointerMove=function(r,n,i){var o=r.data,a=o.pointerType==="touch",s=o.pointerType==="mouse"||o.pointerType==="pen";s&&this.processPointerOverOut(r,n,i),(!this.moveWhenInside||i)&&(this.dispatchEvent(n,"pointermove",r),a&&this.dispatchEvent(n,"touchmove",r),s&&this.dispatchEvent(n,"mousemove",r))},t.prototype.onPointerOut=function(r){if(!(this.supportsTouchEvents&&r.pointerType==="touch")){var n=this.normalizeToPointerData(r),i=n[0];i.pointerType==="mouse"&&(this.mouseOverRenderer=!1,this.setCursorMode(null));var o=this.getInteractionDataForPointerId(i),a=this.configureInteractionEventForDOMEvent(this.eventData,i,o);a.data.originalEvent=i,this.processInteractive(a,this.lastObjectRendered,this.processPointerOverOut,!1),this.emit("pointerout",a),i.pointerType==="mouse"||i.pointerType==="pen"?this.emit("mouseout",a):this.releaseInteractionDataForPointerId(o.identifier)}},t.prototype.processPointerOverOut=function(r,n,i){var o=r.data,a=r.data.identifier,s=o.pointerType==="mouse"||o.pointerType==="pen",l=n.trackedPointers[a];i&&!l&&(l=n.trackedPointers[a]=new Th(a)),l!==void 0&&(i&&this.mouseOverRenderer?(l.over||(l.over=!0,this.delayDispatchEvent(n,"pointerover",r),s&&this.delayDispatchEvent(n,"mouseover",r)),s&&this.cursor===null&&(this.cursor=n.cursor)):l.over&&(l.over=!1,this.dispatchEvent(n,"pointerout",this.eventData),s&&this.dispatchEvent(n,"mouseout",r),l.none&&delete n.trackedPointers[a]))},t.prototype.onPointerOver=function(r){if(!(this.supportsTouchEvents&&r.pointerType==="touch")){var n=this.normalizeToPointerData(r),i=n[0],o=this.getInteractionDataForPointerId(i),a=this.configureInteractionEventForDOMEvent(this.eventData,i,o);a.data.originalEvent=i,i.pointerType==="mouse"&&(this.mouseOverRenderer=!0),this.emit("pointerover",a),(i.pointerType==="mouse"||i.pointerType==="pen")&&this.emit("mouseover",a)}},t.prototype.getInteractionDataForPointerId=function(r){var n=r.pointerId,i;return n===Uf||r.pointerType==="mouse"?i=this.mouse:this.activeInteractionData[n]?i=this.activeInteractionData[n]:(i=this.interactionDataPool.pop()||new $_,i.identifier=n,this.activeInteractionData[n]=i),i.copyEvent(r),i},t.prototype.releaseInteractionDataForPointerId=function(r){var n=this.activeInteractionData[r];n&&(delete this.activeInteractionData[r],n.reset(),this.interactionDataPool.push(n))},t.prototype.configureInteractionEventForDOMEvent=function(r,n,i){return r.data=i,this.mapPositionToPoint(i.global,n.clientX,n.clientY),n.pointerType==="touch"&&(n.globalX=i.global.x,n.globalY=i.global.y),i.originalEvent=n,r.reset(),r},t.prototype.normalizeToPointerData=function(r){var n=[];if(this.supportsTouchEvents&&r instanceof TouchEvent)for(var i=0,o=r.changedTouches.length;i<o;i++){var a=r.changedTouches[i];typeof a.button>"u"&&(a.button=r.touches.length?1:0),typeof a.buttons>"u"&&(a.buttons=r.touches.length?1:0),typeof a.isPrimary>"u"&&(a.isPrimary=r.touches.length===1&&r.type==="touchstart"),typeof a.width>"u"&&(a.width=a.radiusX||1),typeof a.height>"u"&&(a.height=a.radiusY||1),typeof a.tiltX>"u"&&(a.tiltX=0),typeof a.tiltY>"u"&&(a.tiltY=0),typeof a.pointerType>"u"&&(a.pointerType="touch"),typeof a.pointerId>"u"&&(a.pointerId=a.identifier||0),typeof a.pressure>"u"&&(a.pressure=a.force||.5),typeof a.twist>"u"&&(a.twist=0),typeof a.tangentialPressure>"u"&&(a.tangentialPressure=0),typeof a.layerX>"u"&&(a.layerX=a.offsetX=a.clientX),typeof a.layerY>"u"&&(a.layerY=a.offsetY=a.clientY),a.isNormalized=!0,n.push(a)}else if(!globalThis.MouseEvent||r instanceof MouseEvent&&(!this.supportsPointerEvents||!(r instanceof globalThis.PointerEvent))){var s=r;typeof s.isPrimary>"u"&&(s.isPrimary=!0),typeof s.width>"u"&&(s.width=1),typeof s.height>"u"&&(s.height=1),typeof s.tiltX>"u"&&(s.tiltX=0),typeof s.tiltY>"u"&&(s.tiltY=0),typeof s.pointerType>"u"&&(s.pointerType="mouse"),typeof s.pointerId>"u"&&(s.pointerId=Uf),typeof s.pressure>"u"&&(s.pressure=.5),typeof s.twist>"u"&&(s.twist=0),typeof s.tangentialPressure>"u"&&(s.tangentialPressure=0),s.isNormalized=!0,n.push(s)}else n.push(r);return n},t.prototype.destroy=function(){this.removeEvents(),this.removeTickerListener(),this.removeAllListeners(),this.renderer=null,this.mouse=null,this.eventData=null,this.interactionDOMElement=null,this.onPointerDown=null,this.processPointerDown=null,this.onPointerUp=null,this.processPointerUp=null,this.onPointerCancel=null,this.processPointerCancel=null,this.onPointerMove=null,this.processPointerMove=null,this.onPointerOut=null,this.processPointerOverOut=null,this.onPointerOver=null,this.search=null},t.extension={name:"interaction",type:[Ye.RendererPlugin,Ye.CanvasRendererPlugin]},t}(Vi);/*!
 * @pixi/extract - v6.5.10
 * Compiled Thu, 06 Jul 2023 15:25:11 UTC
 *
 * @pixi/extract is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */var Jae=new Fe,Qae=4,Wk=function(){function e(t){this.renderer=t}return e.prototype.image=function(t,r,n){var i=new Image;return i.src=this.base64(t,r,n),i},e.prototype.base64=function(t,r,n){return this.canvas(t).toDataURL(r,n)},e.prototype.canvas=function(t,r){var n=this._rawPixels(t,r),i=n.pixels,o=n.width,a=n.height,s=n.flipY,l=new F_(o,a,1),u=l.context.getImageData(0,0,o,a);if(e.arrayPostDivide(i,u.data),l.context.putImageData(u,0,0),s){var c=new F_(l.width,l.height,1);c.context.scale(1,-1),c.context.drawImage(l.canvas,0,-a),l.destroy(),l=c}return l.canvas},e.prototype.pixels=function(t,r){var n=this._rawPixels(t,r).pixels;return e.arrayPostDivide(n,n),n},e.prototype._rawPixels=function(t,r){var n=this.renderer,i,o=!1,a,s=!1;if(t)if(t instanceof Lo)a=t;else{var l=n.context.webGLVersion>=2?n.multisample:ft.NONE;if(a=this.renderer.generateTexture(t,{multisample:l}),l!==ft.NONE){var u=Lo.create({width:a.width,height:a.height});n.framebuffer.bind(a.framebuffer),n.framebuffer.blit(u.framebuffer),n.framebuffer.bind(null),a.destroy(!0),a=u}s=!0}a?(i=a.baseTexture.resolution,r=r??a.frame,o=!1,n.renderTexture.bind(a)):(i=n.resolution,r||(r=Jae,r.width=n.width,r.height=n.height),o=!0,n.renderTexture.bind(null));var c=Math.round(r.width*i),f=Math.round(r.height*i),h=new Uint8Array(Qae*c*f),d=n.gl;return d.readPixels(Math.round(r.x*i),Math.round(r.y*i),c,f,d.RGBA,d.UNSIGNED_BYTE,h),s&&a.destroy(!0),{pixels:h,width:c,height:f,flipY:o}},e.prototype.destroy=function(){this.renderer=null},e.arrayPostDivide=function(t,r){for(var n=0;n<t.length;n+=4){var i=r[n+3]=t[n+3];i!==0?(r[n]=Math.round(Math.min(t[n]*255/i,255)),r[n+1]=Math.round(Math.min(t[n+1]*255/i,255)),r[n+2]=Math.round(Math.min(t[n+2]*255/i,255))):(r[n]=t[n],r[n+1]=t[n+1],r[n+2]=t[n+2])}},e.extension={name:"extract",type:Ye.RendererPlugin},e}();/*!
 * @pixi/loaders - v6.5.10
 * Compiled Thu, 06 Jul 2023 15:25:11 UTC
 *
 * @pixi/loaders is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */var Gf=function(){function e(t,r,n){r===void 0&&(r=!1),this._fn=t,this._once=r,this._thisArg=n,this._next=this._prev=this._owner=null}return e.prototype.detach=function(){return this._owner===null?!1:(this._owner.detach(this),!0)},e}();function LP(e,t){return e._head?(e._tail._next=t,t._prev=e._tail,e._tail=t):(e._head=t,e._tail=t),t._owner=e,t}var Mi=function(){function e(){this._head=this._tail=void 0}return e.prototype.handlers=function(t){t===void 0&&(t=!1);var r=this._head;if(t)return!!r;for(var n=[];r;)n.push(r),r=r._next;return n},e.prototype.has=function(t){if(!(t instanceof Gf))throw new Error("MiniSignal#has(): First arg must be a SignalBinding object.");return t._owner===this},e.prototype.dispatch=function(){for(var t=arguments,r=[],n=0;n<arguments.length;n++)r[n]=t[n];var i=this._head;if(!i)return!1;for(;i;)i._once&&this.detach(i),i._fn.apply(i._thisArg,r),i=i._next;return!0},e.prototype.add=function(t,r){if(r===void 0&&(r=null),typeof t!="function")throw new Error("MiniSignal#add(): First arg must be a Function.");return LP(this,new Gf(t,!1,r))},e.prototype.once=function(t,r){if(r===void 0&&(r=null),typeof t!="function")throw new Error("MiniSignal#once(): First arg must be a Function.");return LP(this,new Gf(t,!0,r))},e.prototype.detach=function(t){if(!(t instanceof Gf))throw new Error("MiniSignal#detach(): First arg must be a SignalBinding object.");return t._owner!==this?this:(t._prev&&(t._prev._next=t._next),t._next&&(t._next._prev=t._prev),t===this._head?(this._head=t._next,t._next===null&&(this._tail=null)):t===this._tail&&(this._tail=t._prev,this._tail._next=null),t._owner=null,this)},e.prototype.detachAll=function(){var t=this._head;if(!t)return this;for(this._head=this._tail=null;t;)t._owner=null,t=t._next;return this},e}();function Xk(e,t){t=t||{};for(var r={key:["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"],q:{name:"queryKey",parser:/(?:^|&)([^&=]*)=?([^&]*)/g},parser:{strict:/^(?:([^:\/?#]+):)?(?:\/\/((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\/?#]*)(?::(\d*))?))?((((?:[^?#\/]*\/)*)([^?#]*))(?:\?([^#]*))?(?:#(.*))?)/,loose:/^(?:(?![^:@]+:[^:@\/]*@)([^:\/?#.]+):)?(?:\/\/)?((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/}},n=r.parser[t.strictMode?"strict":"loose"].exec(e),i={},o=14;o--;)i[r.key[o]]=n[o]||"";return i[r.q.name]={},i[r.key[12]].replace(r.q.parser,function(a,s,l){s&&(i[r.q.name][s]=l)}),i}var Pg,zf=null,ese=0,FP=200,tse=204,rse=1223,nse=2;function DP(){}function NP(e,t,r){t&&t.indexOf(".")===0&&(t=t.substring(1)),t&&(e[t]=r)}function Ag(e){return e.toString().replace("object ","")}var wt=function(){function e(t,r,n){if(this._dequeue=DP,this._onLoadBinding=null,this._elementTimer=0,this._boundComplete=null,this._boundOnError=null,this._boundOnProgress=null,this._boundOnTimeout=null,this._boundXhrOnError=null,this._boundXhrOnTimeout=null,this._boundXhrOnAbort=null,this._boundXhrOnLoad=null,typeof t!="string"||typeof r!="string")throw new Error("Both name and url are required for constructing a resource.");n=n||{},this._flags=0,this._setFlag(e.STATUS_FLAGS.DATA_URL,r.indexOf("data:")===0),this.name=t,this.url=r,this.extension=this._getExtension(),this.data=null,this.crossOrigin=n.crossOrigin===!0?"anonymous":n.crossOrigin,this.timeout=n.timeout||0,this.loadType=n.loadType||this._determineLoadType(),this.xhrType=n.xhrType,this.metadata=n.metadata||{},this.error=null,this.xhr=null,this.children=[],this.type=e.TYPE.UNKNOWN,this.progressChunk=0,this._dequeue=DP,this._onLoadBinding=null,this._elementTimer=0,this._boundComplete=this.complete.bind(this),this._boundOnError=this._onError.bind(this),this._boundOnProgress=this._onProgress.bind(this),this._boundOnTimeout=this._onTimeout.bind(this),this._boundXhrOnError=this._xhrOnError.bind(this),this._boundXhrOnTimeout=this._xhrOnTimeout.bind(this),this._boundXhrOnAbort=this._xhrOnAbort.bind(this),this._boundXhrOnLoad=this._xhrOnLoad.bind(this),this.onStart=new Mi,this.onProgress=new Mi,this.onComplete=new Mi,this.onAfterMiddleware=new Mi}return e.setExtensionLoadType=function(t,r){NP(e._loadTypeMap,t,r)},e.setExtensionXhrType=function(t,r){NP(e._xhrTypeMap,t,r)},Object.defineProperty(e.prototype,"isDataUrl",{get:function(){return this._hasFlag(e.STATUS_FLAGS.DATA_URL)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"isComplete",{get:function(){return this._hasFlag(e.STATUS_FLAGS.COMPLETE)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"isLoading",{get:function(){return this._hasFlag(e.STATUS_FLAGS.LOADING)},enumerable:!1,configurable:!0}),e.prototype.complete=function(){this._clearEvents(),this._finish()},e.prototype.abort=function(t){if(!this.error){if(this.error=new Error(t),this._clearEvents(),this.xhr)this.xhr.abort();else if(this.xdr)this.xdr.abort();else if(this.data)if(this.data.src)this.data.src=e.EMPTY_GIF;else for(;this.data.firstChild;)this.data.removeChild(this.data.firstChild);this._finish()}},e.prototype.load=function(t){var r=this;if(!this.isLoading){if(this.isComplete){t&&setTimeout(function(){return t(r)},1);return}else t&&this.onComplete.once(t);switch(this._setFlag(e.STATUS_FLAGS.LOADING,!0),this.onStart.dispatch(this),(this.crossOrigin===!1||typeof this.crossOrigin!="string")&&(this.crossOrigin=this._determineCrossOrigin(this.url)),this.loadType){case e.LOAD_TYPE.IMAGE:this.type=e.TYPE.IMAGE,this._loadElement("image");break;case e.LOAD_TYPE.AUDIO:this.type=e.TYPE.AUDIO,this._loadSourceElement("audio");break;case e.LOAD_TYPE.VIDEO:this.type=e.TYPE.VIDEO,this._loadSourceElement("video");break;case e.LOAD_TYPE.XHR:default:typeof Pg>"u"&&(Pg=!!(globalThis.XDomainRequest&&!("withCredentials"in new XMLHttpRequest))),Pg&&this.crossOrigin?this._loadXdr():this._loadXhr();break}}},e.prototype._hasFlag=function(t){return(this._flags&t)!==0},e.prototype._setFlag=function(t,r){this._flags=r?this._flags|t:this._flags&~t},e.prototype._clearEvents=function(){clearTimeout(this._elementTimer),this.data&&this.data.removeEventListener&&(this.data.removeEventListener("error",this._boundOnError,!1),this.data.removeEventListener("load",this._boundComplete,!1),this.data.removeEventListener("progress",this._boundOnProgress,!1),this.data.removeEventListener("canplaythrough",this._boundComplete,!1)),this.xhr&&(this.xhr.removeEventListener?(this.xhr.removeEventListener("error",this._boundXhrOnError,!1),this.xhr.removeEventListener("timeout",this._boundXhrOnTimeout,!1),this.xhr.removeEventListener("abort",this._boundXhrOnAbort,!1),this.xhr.removeEventListener("progress",this._boundOnProgress,!1),this.xhr.removeEventListener("load",this._boundXhrOnLoad,!1)):(this.xhr.onerror=null,this.xhr.ontimeout=null,this.xhr.onprogress=null,this.xhr.onload=null))},e.prototype._finish=function(){if(this.isComplete)throw new Error("Complete called again for an already completed resource.");this._setFlag(e.STATUS_FLAGS.COMPLETE,!0),this._setFlag(e.STATUS_FLAGS.LOADING,!1),this.onComplete.dispatch(this)},e.prototype._loadElement=function(t){this.metadata.loadElement?this.data=this.metadata.loadElement:t==="image"&&typeof globalThis.Image<"u"?this.data=new Image:this.data=document.createElement(t),this.crossOrigin&&(this.data.crossOrigin=this.crossOrigin),this.metadata.skipSource||(this.data.src=this.url),this.data.addEventListener("error",this._boundOnError,!1),this.data.addEventListener("load",this._boundComplete,!1),this.data.addEventListener("progress",this._boundOnProgress,!1),this.timeout&&(this._elementTimer=setTimeout(this._boundOnTimeout,this.timeout))},e.prototype._loadSourceElement=function(t){if(this.metadata.loadElement?this.data=this.metadata.loadElement:t==="audio"&&typeof globalThis.Audio<"u"?this.data=new Audio:this.data=document.createElement(t),this.data===null){this.abort("Unsupported element: "+t);return}if(this.crossOrigin&&(this.data.crossOrigin=this.crossOrigin),!this.metadata.skipSource)if(navigator.isCocoonJS)this.data.src=Array.isArray(this.url)?this.url[0]:this.url;else if(Array.isArray(this.url))for(var r=this.metadata.mimeType,n=0;n<this.url.length;++n)this.data.appendChild(this._createSource(t,this.url[n],Array.isArray(r)?r[n]:r));else{var r=this.metadata.mimeType;this.data.appendChild(this._createSource(t,this.url,Array.isArray(r)?r[0]:r))}this.data.addEventListener("error",this._boundOnError,!1),this.data.addEventListener("load",this._boundComplete,!1),this.data.addEventListener("progress",this._boundOnProgress,!1),this.data.addEventListener("canplaythrough",this._boundComplete,!1),this.data.load(),this.timeout&&(this._elementTimer=setTimeout(this._boundOnTimeout,this.timeout))},e.prototype._loadXhr=function(){typeof this.xhrType!="string"&&(this.xhrType=this._determineXhrType());var t=this.xhr=new XMLHttpRequest;this.crossOrigin==="use-credentials"&&(t.withCredentials=!0),t.open("GET",this.url,!0),t.timeout=this.timeout,this.xhrType===e.XHR_RESPONSE_TYPE.JSON||this.xhrType===e.XHR_RESPONSE_TYPE.DOCUMENT?t.responseType=e.XHR_RESPONSE_TYPE.TEXT:t.responseType=this.xhrType,t.addEventListener("error",this._boundXhrOnError,!1),t.addEventListener("timeout",this._boundXhrOnTimeout,!1),t.addEventListener("abort",this._boundXhrOnAbort,!1),t.addEventListener("progress",this._boundOnProgress,!1),t.addEventListener("load",this._boundXhrOnLoad,!1),t.send()},e.prototype._loadXdr=function(){typeof this.xhrType!="string"&&(this.xhrType=this._determineXhrType());var t=this.xhr=new globalThis.XDomainRequest;t.timeout=this.timeout||5e3,t.onerror=this._boundXhrOnError,t.ontimeout=this._boundXhrOnTimeout,t.onprogress=this._boundOnProgress,t.onload=this._boundXhrOnLoad,t.open("GET",this.url,!0),setTimeout(function(){return t.send()},1)},e.prototype._createSource=function(t,r,n){n||(n=t+"/"+this._getExtension(r));var i=document.createElement("source");return i.src=r,i.type=n,i},e.prototype._onError=function(t){this.abort("Failed to load element using: "+t.target.nodeName)},e.prototype._onProgress=function(t){t&&t.lengthComputable&&this.onProgress.dispatch(this,t.loaded/t.total)},e.prototype._onTimeout=function(){this.abort("Load timed out.")},e.prototype._xhrOnError=function(){var t=this.xhr;this.abort(Ag(t)+" Request failed. Status: "+t.status+', text: "'+t.statusText+'"')},e.prototype._xhrOnTimeout=function(){var t=this.xhr;this.abort(Ag(t)+" Request timed out.")},e.prototype._xhrOnAbort=function(){var t=this.xhr;this.abort(Ag(t)+" Request was aborted by the user.")},e.prototype._xhrOnLoad=function(){var t=this.xhr,r="",n=typeof t.status>"u"?FP:t.status;(t.responseType===""||t.responseType==="text"||typeof t.responseType>"u")&&(r=t.responseText),n===ese&&(r.length>0||t.responseType===e.XHR_RESPONSE_TYPE.BUFFER)?n=FP:n===rse&&(n=tse);var i=n/100|0;if(i===nse)if(this.xhrType===e.XHR_RESPONSE_TYPE.TEXT)this.data=r,this.type=e.TYPE.TEXT;else if(this.xhrType===e.XHR_RESPONSE_TYPE.JSON)try{this.data=JSON.parse(r),this.type=e.TYPE.JSON}catch(s){this.abort("Error trying to parse loaded json: "+s);return}else if(this.xhrType===e.XHR_RESPONSE_TYPE.DOCUMENT)try{if(globalThis.DOMParser){var o=new DOMParser;this.data=o.parseFromString(r,"text/xml")}else{var a=document.createElement("div");a.innerHTML=r,this.data=a}this.type=e.TYPE.XML}catch(s){this.abort("Error trying to parse loaded xml: "+s);return}else this.data=t.response||r;else{this.abort("["+t.status+"] "+t.statusText+": "+t.responseURL);return}this.complete()},e.prototype._determineCrossOrigin=function(t,r){if(t.indexOf("data:")===0)return"";if(globalThis.origin!==globalThis.location.origin)return"anonymous";r=r||globalThis.location,zf||(zf=document.createElement("a")),zf.href=t;var n=Xk(zf.href,{strictMode:!0}),i=!n.port&&r.port===""||n.port===r.port,o=n.protocol?n.protocol+":":"";return n.host!==r.hostname||!i||o!==r.protocol?"anonymous":""},e.prototype._determineXhrType=function(){return e._xhrTypeMap[this.extension]||e.XHR_RESPONSE_TYPE.TEXT},e.prototype._determineLoadType=function(){return e._loadTypeMap[this.extension]||e.LOAD_TYPE.XHR},e.prototype._getExtension=function(t){t===void 0&&(t=this.url);var r="";if(this.isDataUrl){var n=t.indexOf("/");r=t.substring(n+1,t.indexOf(";",n))}else{var i=t.indexOf("?"),o=t.indexOf("#"),a=Math.min(i>-1?i:t.length,o>-1?o:t.length);t=t.substring(0,a),r=t.substring(t.lastIndexOf(".")+1)}return r.toLowerCase()},e.prototype._getMimeFromXhrType=function(t){switch(t){case e.XHR_RESPONSE_TYPE.BUFFER:return"application/octet-binary";case e.XHR_RESPONSE_TYPE.BLOB:return"application/blob";case e.XHR_RESPONSE_TYPE.DOCUMENT:return"application/xml";case e.XHR_RESPONSE_TYPE.JSON:return"application/json";case e.XHR_RESPONSE_TYPE.DEFAULT:case e.XHR_RESPONSE_TYPE.TEXT:default:return"text/plain"}},e}();(function(e){(function(t){t[t.NONE=0]="NONE",t[t.DATA_URL=1]="DATA_URL",t[t.COMPLETE=2]="COMPLETE",t[t.LOADING=4]="LOADING"})(e.STATUS_FLAGS||(e.STATUS_FLAGS={})),function(t){t[t.UNKNOWN=0]="UNKNOWN",t[t.JSON=1]="JSON",t[t.XML=2]="XML",t[t.IMAGE=3]="IMAGE",t[t.AUDIO=4]="AUDIO",t[t.VIDEO=5]="VIDEO",t[t.TEXT=6]="TEXT"}(e.TYPE||(e.TYPE={})),function(t){t[t.XHR=1]="XHR",t[t.IMAGE=2]="IMAGE",t[t.AUDIO=3]="AUDIO",t[t.VIDEO=4]="VIDEO"}(e.LOAD_TYPE||(e.LOAD_TYPE={})),function(t){t.DEFAULT="text",t.BUFFER="arraybuffer",t.BLOB="blob",t.DOCUMENT="document",t.JSON="json",t.TEXT="text"}(e.XHR_RESPONSE_TYPE||(e.XHR_RESPONSE_TYPE={})),e._loadTypeMap={gif:e.LOAD_TYPE.IMAGE,png:e.LOAD_TYPE.IMAGE,bmp:e.LOAD_TYPE.IMAGE,jpg:e.LOAD_TYPE.IMAGE,jpeg:e.LOAD_TYPE.IMAGE,tif:e.LOAD_TYPE.IMAGE,tiff:e.LOAD_TYPE.IMAGE,webp:e.LOAD_TYPE.IMAGE,tga:e.LOAD_TYPE.IMAGE,avif:e.LOAD_TYPE.IMAGE,svg:e.LOAD_TYPE.IMAGE,"svg+xml":e.LOAD_TYPE.IMAGE,mp3:e.LOAD_TYPE.AUDIO,ogg:e.LOAD_TYPE.AUDIO,wav:e.LOAD_TYPE.AUDIO,mp4:e.LOAD_TYPE.VIDEO,webm:e.LOAD_TYPE.VIDEO},e._xhrTypeMap={xhtml:e.XHR_RESPONSE_TYPE.DOCUMENT,html:e.XHR_RESPONSE_TYPE.DOCUMENT,htm:e.XHR_RESPONSE_TYPE.DOCUMENT,xml:e.XHR_RESPONSE_TYPE.DOCUMENT,tmx:e.XHR_RESPONSE_TYPE.DOCUMENT,svg:e.XHR_RESPONSE_TYPE.DOCUMENT,tsx:e.XHR_RESPONSE_TYPE.DOCUMENT,gif:e.XHR_RESPONSE_TYPE.BLOB,png:e.XHR_RESPONSE_TYPE.BLOB,bmp:e.XHR_RESPONSE_TYPE.BLOB,jpg:e.XHR_RESPONSE_TYPE.BLOB,jpeg:e.XHR_RESPONSE_TYPE.BLOB,tif:e.XHR_RESPONSE_TYPE.BLOB,tiff:e.XHR_RESPONSE_TYPE.BLOB,webp:e.XHR_RESPONSE_TYPE.BLOB,tga:e.XHR_RESPONSE_TYPE.BLOB,avif:e.XHR_RESPONSE_TYPE.BLOB,json:e.XHR_RESPONSE_TYPE.JSON,text:e.XHR_RESPONSE_TYPE.TEXT,txt:e.XHR_RESPONSE_TYPE.TEXT,ttf:e.XHR_RESPONSE_TYPE.BUFFER,otf:e.XHR_RESPONSE_TYPE.BUFFER},e.EMPTY_GIF="data:image/gif;base64,R0lGODlhAQABAIAAAP///wAAACH5BAEAAAAALAAAAAABAAEAAAICRAEAOw=="})(wt||(wt={}));function Vo(){}function ise(e){return function(){for(var r=arguments,n=[],i=0;i<arguments.length;i++)n[i]=r[i];if(e===null)throw new Error("Callback was already called.");var o=e;e=null,o.apply(this,n)}}var ose=function(){function e(t,r){this.data=t,this.callback=r}return e}(),Og=function(){function e(t,r){var n=this;if(r===void 0&&(r=1),this.workers=0,this.saturated=Vo,this.unsaturated=Vo,this.empty=Vo,this.drain=Vo,this.error=Vo,this.started=!1,this.paused=!1,this._tasks=[],this._insert=function(i,o,a){if(a&&typeof a!="function")throw new Error("task callback must be a function");if(n.started=!0,i==null&&n.idle()){setTimeout(function(){return n.drain()},1);return}var s=new ose(i,typeof a=="function"?a:Vo);o?n._tasks.unshift(s):n._tasks.push(s),setTimeout(n.process,1)},this.process=function(){for(;!n.paused&&n.workers<n.concurrency&&n._tasks.length;){var i=n._tasks.shift();n._tasks.length===0&&n.empty(),n.workers+=1,n.workers===n.concurrency&&n.saturated(),n._worker(i.data,ise(n._next(i)))}},this._worker=t,r===0)throw new Error("Concurrency must not be zero");this.concurrency=r,this.buffer=r/4}return e.prototype._next=function(t){var r=this;return function(){for(var n=arguments,i=[],o=0;o<arguments.length;o++)i[o]=n[o];r.workers-=1,t.callback.apply(t,i),i[0]!=null&&r.error(i[0],t.data),r.workers<=r.concurrency-r.buffer&&r.unsaturated(),r.idle()&&r.drain(),r.process()}},e.prototype.push=function(t,r){this._insert(t,!1,r)},e.prototype.kill=function(){this.workers=0,this.drain=Vo,this.started=!1,this._tasks=[]},e.prototype.unshift=function(t,r){this._insert(t,!0,r)},e.prototype.length=function(){return this._tasks.length},e.prototype.running=function(){return this.workers},e.prototype.idle=function(){return this._tasks.length+this.workers===0},e.prototype.pause=function(){this.paused!==!0&&(this.paused=!0)},e.prototype.resume=function(){if(this.paused!==!1){this.paused=!1;for(var t=1;t<=this.concurrency;t++)this.process()}},e.eachSeries=function(t,r,n,i){var o=0,a=t.length;function s(l){if(l||o===a){n&&n(l);return}i?setTimeout(function(){r(t[o++],s)},1):r(t[o++],s)}s()},e.queue=function(t,r){return new e(t,r)},e}(),Ig=100,ase=/(#[\w-]+)?$/,Js=function(){function e(t,r){var n=this;t===void 0&&(t=""),r===void 0&&(r=10),this.progress=0,this.loading=!1,this.defaultQueryString="",this._beforeMiddleware=[],this._afterMiddleware=[],this._resourcesParsing=[],this._boundLoadResource=function(l,u){return n._loadResource(l,u)},this.resources={},this.baseUrl=t,this._beforeMiddleware=[],this._afterMiddleware=[],this._resourcesParsing=[],this._boundLoadResource=function(l,u){return n._loadResource(l,u)},this._queue=Og.queue(this._boundLoadResource,r),this._queue.pause(),this.resources={},this.onProgress=new Mi,this.onError=new Mi,this.onLoad=new Mi,this.onStart=new Mi,this.onComplete=new Mi;for(var i=0;i<e._plugins.length;++i){var o=e._plugins[i],a=o.pre,s=o.use;a&&this.pre(a),s&&this.use(s)}this._protected=!1}return e.prototype._add=function(t,r,n,i){if(this.loading&&(!n||!n.parentResource))throw new Error("Cannot add resources while the loader is running.");if(this.resources[t])throw new Error('Resource named "'+t+'" already exists.');if(r=this._prepareUrl(r),this.resources[t]=new wt(t,r,n),typeof i=="function"&&this.resources[t].onAfterMiddleware.once(i),this.loading){for(var o=n.parentResource,a=[],s=0;s<o.children.length;++s)o.children[s].isComplete||a.push(o.children[s]);var l=o.progressChunk*(a.length+1),u=l/(a.length+2);o.children.push(this.resources[t]),o.progressChunk=u;for(var s=0;s<a.length;++s)a[s].progressChunk=u;this.resources[t].progressChunk=u}return this._queue.push(this.resources[t]),this},e.prototype.pre=function(t){return this._beforeMiddleware.push(t),this},e.prototype.use=function(t){return this._afterMiddleware.push(t),this},e.prototype.reset=function(){this.progress=0,this.loading=!1,this._queue.kill(),this._queue.pause();for(var t in this.resources){var r=this.resources[t];r._onLoadBinding&&r._onLoadBinding.detach(),r.isLoading&&r.abort("loader reset")}return this.resources={},this},e.prototype.load=function(t){if(Or("6.5.0","@pixi/loaders is being replaced with @pixi/assets in the next major release."),typeof t=="function"&&this.onComplete.once(t),this.loading)return this;if(this._queue.idle())this._onStart(),this._onComplete();else{for(var r=this._queue._tasks.length,n=Ig/r,i=0;i<this._queue._tasks.length;++i)this._queue._tasks[i].data.progressChunk=n;this._onStart(),this._queue.resume()}return this},Object.defineProperty(e.prototype,"concurrency",{get:function(){return this._queue.concurrency},set:function(t){this._queue.concurrency=t},enumerable:!1,configurable:!0}),e.prototype._prepareUrl=function(t){var r=Xk(t,{strictMode:!0}),n;if(r.protocol||!r.path||t.indexOf("//")===0?n=t:this.baseUrl.length&&this.baseUrl.lastIndexOf("/")!==this.baseUrl.length-1&&t.charAt(0)!=="/"?n=this.baseUrl+"/"+t:n=this.baseUrl+t,this.defaultQueryString){var i=ase.exec(n)[0];n=n.slice(0,n.length-i.length),n.indexOf("?")!==-1?n+="&"+this.defaultQueryString:n+="?"+this.defaultQueryString,n+=i}return n},e.prototype._loadResource=function(t,r){var n=this;t._dequeue=r,Og.eachSeries(this._beforeMiddleware,function(i,o){i.call(n,t,function(){o(t.isComplete?{}:null)})},function(){t.isComplete?n._onLoad(t):(t._onLoadBinding=t.onComplete.once(n._onLoad,n),t.load())},!0)},e.prototype._onStart=function(){this.progress=0,this.loading=!0,this.onStart.dispatch(this)},e.prototype._onComplete=function(){this.progress=Ig,this.loading=!1,this.onComplete.dispatch(this,this.resources)},e.prototype._onLoad=function(t){var r=this;t._onLoadBinding=null,this._resourcesParsing.push(t),t._dequeue(),Og.eachSeries(this._afterMiddleware,function(n,i){n.call(r,t,i)},function(){t.onAfterMiddleware.dispatch(t),r.progress=Math.min(Ig,r.progress+t.progressChunk),r.onProgress.dispatch(r,t),t.error?r.onError.dispatch(t.error,r,t):r.onLoad.dispatch(r,t),r._resourcesParsing.splice(r._resourcesParsing.indexOf(t),1),r._queue.idle()&&r._resourcesParsing.length===0&&r._onComplete()},!0)},e.prototype.destroy=function(){this._protected||this.reset()},Object.defineProperty(e,"shared",{get:function(){var t=e._shared;return t||(t=new e,t._protected=!0,e._shared=t),t},enumerable:!1,configurable:!0}),e.registerPlugin=function(t){return Or("6.5.0","Loader.registerPlugin() is deprecated, use extensions.add() instead."),Si.add({type:Ye.Loader,ref:t}),e},e._plugins=[],e}();Si.handleByList(Ye.Loader,Js._plugins);Js.prototype.add=function(t,r,n,i){if(Array.isArray(t)){for(var o=0;o<t.length;++o)this.add(t[o]);return this}if(typeof t=="object"&&(n=t,i=r||n.callback||n.onComplete,r=n.url,t=n.name||n.key||n.url),typeof r!="string"&&(i=n,n=r,r=t),typeof r!="string")throw new Error("No url passed to add resource to loader.");return typeof n=="function"&&(i=n,n=null),this._add(t,r,n,i)};var qk=function(){function e(){}return e.init=function(t){t=Object.assign({sharedLoader:!1},t),this.loader=t.sharedLoader?Js.shared:new Js},e.destroy=function(){this.loader&&(this.loader.destroy(),this.loader=null)},e.extension=Ye.Application,e}(),Yk=function(){function e(){}return e.add=function(){wt.setExtensionLoadType("svg",wt.LOAD_TYPE.XHR),wt.setExtensionXhrType("svg",wt.XHR_RESPONSE_TYPE.TEXT)},e.use=function(t,r){if(t.data&&(t.type===wt.TYPE.IMAGE||t.extension==="svg")){var n=t.data,i=t.url,o=t.name,a=t.metadata;pe.fromLoader(n,i,o,a).then(function(s){t.texture=s,r()}).catch(r)}else r()},e.extension=Ye.Loader,e}(),sse="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";function lse(e){for(var t="",r=0;r<e.length;){for(var n=[0,0,0],i=[0,0,0,0],o=0;o<n.length;++o)r<e.length?n[o]=e.charCodeAt(r++)&255:n[o]=0;i[0]=n[0]>>2,i[1]=(n[0]&3)<<4|n[1]>>4,i[2]=(n[1]&15)<<2|n[2]>>6,i[3]=n[2]&63;var a=r-(e.length-1);switch(a){case 2:i[3]=64,i[2]=64;break;case 1:i[3]=64;break}for(var o=0;o<i.length;++o)t+=sse.charAt(i[o])}return t}function use(e,t){if(!e.data){t();return}if(e.xhr&&e.xhrType===wt.XHR_RESPONSE_TYPE.BLOB){if(!self.Blob||typeof e.data=="string"){var r=e.xhr.getResponseHeader("content-type");if(r&&r.indexOf("image")===0){e.data=new Image,e.data.src="data:"+r+";base64,"+lse(e.xhr.responseText),e.type=wt.TYPE.IMAGE,e.data.onload=function(){e.data.onload=null,t()};return}}else if(e.data.type.indexOf("image")===0){var n=globalThis.URL||globalThis.webkitURL,i=n.createObjectURL(e.data);e.blob=e.data,e.data=new Image,e.data.src=i,e.type=wt.TYPE.IMAGE,e.data.onload=function(){n.revokeObjectURL(i),e.data.onload=null,t()};return}}t()}var cse=function(){function e(){}return e.extension=Ye.Loader,e.use=use,e}();Si.add(Yk,cse);/*!
 * @pixi/compressed-textures - v6.5.10
 * Compiled Thu, 06 Jul 2023 15:25:11 UTC
 *
 * @pixi/compressed-textures is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */var qe,xe;(function(e){e[e.COMPRESSED_RGB_S3TC_DXT1_EXT=33776]="COMPRESSED_RGB_S3TC_DXT1_EXT",e[e.COMPRESSED_RGBA_S3TC_DXT1_EXT=33777]="COMPRESSED_RGBA_S3TC_DXT1_EXT",e[e.COMPRESSED_RGBA_S3TC_DXT3_EXT=33778]="COMPRESSED_RGBA_S3TC_DXT3_EXT",e[e.COMPRESSED_RGBA_S3TC_DXT5_EXT=33779]="COMPRESSED_RGBA_S3TC_DXT5_EXT",e[e.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT=35917]="COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT",e[e.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT=35918]="COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT",e[e.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT=35919]="COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT",e[e.COMPRESSED_SRGB_S3TC_DXT1_EXT=35916]="COMPRESSED_SRGB_S3TC_DXT1_EXT",e[e.COMPRESSED_R11_EAC=37488]="COMPRESSED_R11_EAC",e[e.COMPRESSED_SIGNED_R11_EAC=37489]="COMPRESSED_SIGNED_R11_EAC",e[e.COMPRESSED_RG11_EAC=37490]="COMPRESSED_RG11_EAC",e[e.COMPRESSED_SIGNED_RG11_EAC=37491]="COMPRESSED_SIGNED_RG11_EAC",e[e.COMPRESSED_RGB8_ETC2=37492]="COMPRESSED_RGB8_ETC2",e[e.COMPRESSED_RGBA8_ETC2_EAC=37496]="COMPRESSED_RGBA8_ETC2_EAC",e[e.COMPRESSED_SRGB8_ETC2=37493]="COMPRESSED_SRGB8_ETC2",e[e.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC=37497]="COMPRESSED_SRGB8_ALPHA8_ETC2_EAC",e[e.COMPRESSED_RGB8_PUNCHTHROUGH_ALPHA1_ETC2=37494]="COMPRESSED_RGB8_PUNCHTHROUGH_ALPHA1_ETC2",e[e.COMPRESSED_SRGB8_PUNCHTHROUGH_ALPHA1_ETC2=37495]="COMPRESSED_SRGB8_PUNCHTHROUGH_ALPHA1_ETC2",e[e.COMPRESSED_RGB_PVRTC_4BPPV1_IMG=35840]="COMPRESSED_RGB_PVRTC_4BPPV1_IMG",e[e.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG=35842]="COMPRESSED_RGBA_PVRTC_4BPPV1_IMG",e[e.COMPRESSED_RGB_PVRTC_2BPPV1_IMG=35841]="COMPRESSED_RGB_PVRTC_2BPPV1_IMG",e[e.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG=35843]="COMPRESSED_RGBA_PVRTC_2BPPV1_IMG",e[e.COMPRESSED_RGB_ETC1_WEBGL=36196]="COMPRESSED_RGB_ETC1_WEBGL",e[e.COMPRESSED_RGB_ATC_WEBGL=35986]="COMPRESSED_RGB_ATC_WEBGL",e[e.COMPRESSED_RGBA_ATC_EXPLICIT_ALPHA_WEBGL=35986]="COMPRESSED_RGBA_ATC_EXPLICIT_ALPHA_WEBGL",e[e.COMPRESSED_RGBA_ATC_INTERPOLATED_ALPHA_WEBGL=34798]="COMPRESSED_RGBA_ATC_INTERPOLATED_ALPHA_WEBGL",e[e.COMPRESSED_RGBA_ASTC_4x4_KHR=37808]="COMPRESSED_RGBA_ASTC_4x4_KHR"})(xe||(xe={}));var Tc=(qe={},qe[xe.COMPRESSED_RGB_S3TC_DXT1_EXT]=.5,qe[xe.COMPRESSED_RGBA_S3TC_DXT1_EXT]=.5,qe[xe.COMPRESSED_RGBA_S3TC_DXT3_EXT]=1,qe[xe.COMPRESSED_RGBA_S3TC_DXT5_EXT]=1,qe[xe.COMPRESSED_SRGB_S3TC_DXT1_EXT]=.5,qe[xe.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT]=.5,qe[xe.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT]=1,qe[xe.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT]=1,qe[xe.COMPRESSED_R11_EAC]=.5,qe[xe.COMPRESSED_SIGNED_R11_EAC]=.5,qe[xe.COMPRESSED_RG11_EAC]=1,qe[xe.COMPRESSED_SIGNED_RG11_EAC]=1,qe[xe.COMPRESSED_RGB8_ETC2]=.5,qe[xe.COMPRESSED_RGBA8_ETC2_EAC]=1,qe[xe.COMPRESSED_SRGB8_ETC2]=.5,qe[xe.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC]=1,qe[xe.COMPRESSED_RGB8_PUNCHTHROUGH_ALPHA1_ETC2]=.5,qe[xe.COMPRESSED_SRGB8_PUNCHTHROUGH_ALPHA1_ETC2]=.5,qe[xe.COMPRESSED_RGB_PVRTC_4BPPV1_IMG]=.5,qe[xe.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG]=.5,qe[xe.COMPRESSED_RGB_PVRTC_2BPPV1_IMG]=.25,qe[xe.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG]=.25,qe[xe.COMPRESSED_RGB_ETC1_WEBGL]=.5,qe[xe.COMPRESSED_RGB_ATC_WEBGL]=.5,qe[xe.COMPRESSED_RGBA_ATC_EXPLICIT_ALPHA_WEBGL]=1,qe[xe.COMPRESSED_RGBA_ATC_INTERPOLATED_ALPHA_WEBGL]=1,qe[xe.COMPRESSED_RGBA_ASTC_4x4_KHR]=1,qe);/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var z_=function(e,t){return z_=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)n.hasOwnProperty(i)&&(r[i]=n[i])},z_(e,t)};function Kk(e,t){z_(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}function fse(e,t,r,n){function i(o){return o instanceof r?o:new r(function(a){a(o)})}return new(r||(r=Promise))(function(o,a){function s(c){try{u(n.next(c))}catch(f){a(f)}}function l(c){try{u(n.throw(c))}catch(f){a(f)}}function u(c){c.done?o(c.value):i(c.value).then(s,l)}u((n=n.apply(e,t||[])).next())})}function hse(e,t){var r={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},n,i,o,a;return a={next:s(0),throw:s(1),return:s(2)},typeof Symbol=="function"&&(a[Symbol.iterator]=function(){return this}),a;function s(u){return function(c){return l([u,c])}}function l(u){if(n)throw new TypeError("Generator is already executing.");for(;r;)try{if(n=1,i&&(o=u[0]&2?i.return:u[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,u[1])).done)return o;switch(i=0,o&&(u=[u[0]&2,o.value]),u[0]){case 0:case 1:o=u;break;case 4:return r.label++,{value:u[1],done:!1};case 5:r.label++,i=u[1],u=[0];continue;case 7:u=r.ops.pop(),r.trys.pop();continue;default:if(o=r.trys,!(o=o.length>0&&o[o.length-1])&&(u[0]===6||u[0]===2)){r=0;continue}if(u[0]===3&&(!o||u[1]>o[0]&&u[1]<o[3])){r.label=u[1];break}if(u[0]===6&&r.label<o[1]){r.label=o[1],o=u;break}if(o&&r.label<o[2]){r.label=o[2],r.ops.push(u);break}o[2]&&r.ops.pop(),r.trys.pop();continue}u=t.call(e,r)}catch(c){u=[6,c],i=0}finally{n=o=0}if(u[0]&5)throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}}var Zk=function(e){Kk(t,e);function t(r,n){n===void 0&&(n={width:1,height:1,autoLoad:!0});var i=this,o,a;return typeof r=="string"?(o=r,a=new Uint8Array):(o=null,a=r),i=e.call(this,a,n)||this,i.origin=o,i.buffer=a?new Cd(a):null,i.origin&&n.autoLoad!==!1&&i.load(),a&&a.length&&(i.loaded=!0,i.onBlobLoaded(i.buffer.rawBinaryData)),i}return t.prototype.onBlobLoaded=function(r){},t.prototype.load=function(){return fse(this,void 0,Promise,function(){var r,n,i;return hse(this,function(o){switch(o.label){case 0:return[4,fetch(this.origin)];case 1:return r=o.sent(),[4,r.blob()];case 2:return n=o.sent(),[4,n.arrayBuffer()];case 3:return i=o.sent(),this.data=new Uint32Array(i),this.buffer=new Cd(i),this.loaded=!0,this.onBlobLoaded(i),this.update(),[2,this]}})})},t}(za),Pd=function(e){Kk(t,e);function t(r,n){var i=e.call(this,r,n)||this;return i.format=n.format,i.levels=n.levels||1,i._width=n.width,i._height=n.height,i._extension=t._formatToExtension(i.format),(n.levelBuffers||i.buffer)&&(i._levelBuffers=n.levelBuffers||t._createLevelBuffers(r instanceof Uint8Array?r:i.buffer.uint8View,i.format,i.levels,4,4,i.width,i.height)),i}return t.prototype.upload=function(r,n,i){var o=r.gl,a=r.context.extensions[this._extension];if(!a)throw new Error(this._extension+" textures are not supported on the current machine");if(!this._levelBuffers)return!1;for(var s=0,l=this.levels;s<l;s++){var u=this._levelBuffers[s],c=u.levelID,f=u.levelWidth,h=u.levelHeight,d=u.levelBuffer;o.compressedTexImage2D(o.TEXTURE_2D,c,this.format,f,h,0,d)}return!0},t.prototype.onBlobLoaded=function(){this._levelBuffers=t._createLevelBuffers(this.buffer.uint8View,this.format,this.levels,4,4,this.width,this.height)},t._formatToExtension=function(r){if(r>=33776&&r<=33779)return"s3tc";if(r>=37488&&r<=37497)return"etc";if(r>=35840&&r<=35843)return"pvrtc";if(r>=36196)return"etc1";if(r>=35986&&r<=34798)return"atc";throw new Error("Invalid (compressed) texture format given!")},t._createLevelBuffers=function(r,n,i,o,a,s,l){for(var u=new Array(i),c=r.byteOffset,f=s,h=l,d=f+o-1&~(o-1),m=h+a-1&~(a-1),g=d*m*Tc[n],p=0;p<i;p++)u[p]={levelID:p,levelWidth:i>1?f:d,levelHeight:i>1?h:m,levelBuffer:new Uint8Array(r.buffer,c,g)},c+=g,f=f>>1||1,h=h>>1||1,d=f+o-1&~(o-1),m=h+a-1&~(a-1),g=d*m*Tc[n];return u},t}(Zk),Jk=function(){function e(){}return e.use=function(t,r){var n=t.data,i=this;if(t.type===wt.TYPE.JSON&&n&&n.cacheID&&n.textures){for(var o=n.textures,a=void 0,s=void 0,l=0,u=o.length;l<u;l++){var c=o[l],f=c.src,h=c.format;if(h||(s=f),e.textureFormats[h]){a=f;break}}if(a=a||s,!a){r(new Error("Cannot load compressed-textures in "+t.url+", make sure you provide a fallback"));return}if(a===t.url){r(new Error("URL of compressed texture cannot be the same as the manifest's URL"));return}var d={crossOrigin:t.crossOrigin,metadata:t.metadata.imageMetadata,parentResource:t},m=ii.resolve(t.url.replace(i.baseUrl,""),a),g=n.cacheID;i.add(g,m,d,function(p){if(p.error){r(p.error);return}var v=p.texture,y=v===void 0?null:v,_=p.textures,x=_===void 0?{}:_;Object.assign(t,{texture:y,textures:x}),r()})}else r()},Object.defineProperty(e,"textureExtensions",{get:function(){if(!e._textureExtensions){var t=ne.ADAPTER.createCanvas(),r=t.getContext("webgl");if(!r)return console.warn("WebGL not available for compressed textures. Silently failing."),{};var n={s3tc:r.getExtension("WEBGL_compressed_texture_s3tc"),s3tc_sRGB:r.getExtension("WEBGL_compressed_texture_s3tc_srgb"),etc:r.getExtension("WEBGL_compressed_texture_etc"),etc1:r.getExtension("WEBGL_compressed_texture_etc1"),pvrtc:r.getExtension("WEBGL_compressed_texture_pvrtc")||r.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc"),atc:r.getExtension("WEBGL_compressed_texture_atc"),astc:r.getExtension("WEBGL_compressed_texture_astc")};e._textureExtensions=n}return e._textureExtensions},enumerable:!1,configurable:!0}),Object.defineProperty(e,"textureFormats",{get:function(){if(!e._textureFormats){var t=e.textureExtensions;e._textureFormats={};for(var r in t){var n=t[r];n&&Object.assign(e._textureFormats,Object.getPrototypeOf(n))}}return e._textureFormats},enumerable:!1,configurable:!0}),e.extension=Ye.Loader,e}();function Qk(e,t,r){var n={textures:{},texture:null};if(!t)return n;var i=t.map(function(o){return new pe(new Le(o,Object.assign({mipmap:zr.OFF,alphaMode:bn.NO_PREMULTIPLIED_ALPHA},r)))});return i.forEach(function(o,a){var s=o.baseTexture,l=e+"-"+(a+1);Le.addToCache(s,l),pe.addToCache(o,l),a===0&&(Le.addToCache(s,e),pe.addToCache(o,e),n.texture=o),n.textures[l]=o}),n}var Ql,Pn,Mg=4,Vf=124,dse=32,BP=20,pse=542327876,Hf={SIZE:1,FLAGS:2,HEIGHT:3,WIDTH:4,MIPMAP_COUNT:7,PIXEL_FORMAT:19},mse={SIZE:0,FLAGS:1,FOURCC:2,RGB_BITCOUNT:3,R_BIT_MASK:4,G_BIT_MASK:5,B_BIT_MASK:6,A_BIT_MASK:7},Wf={DXGI_FORMAT:0,RESOURCE_DIMENSION:1,MISC_FLAG:2,ARRAY_SIZE:3,MISC_FLAGS2:4},In;(function(e){e[e.DXGI_FORMAT_UNKNOWN=0]="DXGI_FORMAT_UNKNOWN",e[e.DXGI_FORMAT_R32G32B32A32_TYPELESS=1]="DXGI_FORMAT_R32G32B32A32_TYPELESS",e[e.DXGI_FORMAT_R32G32B32A32_FLOAT=2]="DXGI_FORMAT_R32G32B32A32_FLOAT",e[e.DXGI_FORMAT_R32G32B32A32_UINT=3]="DXGI_FORMAT_R32G32B32A32_UINT",e[e.DXGI_FORMAT_R32G32B32A32_SINT=4]="DXGI_FORMAT_R32G32B32A32_SINT",e[e.DXGI_FORMAT_R32G32B32_TYPELESS=5]="DXGI_FORMAT_R32G32B32_TYPELESS",e[e.DXGI_FORMAT_R32G32B32_FLOAT=6]="DXGI_FORMAT_R32G32B32_FLOAT",e[e.DXGI_FORMAT_R32G32B32_UINT=7]="DXGI_FORMAT_R32G32B32_UINT",e[e.DXGI_FORMAT_R32G32B32_SINT=8]="DXGI_FORMAT_R32G32B32_SINT",e[e.DXGI_FORMAT_R16G16B16A16_TYPELESS=9]="DXGI_FORMAT_R16G16B16A16_TYPELESS",e[e.DXGI_FORMAT_R16G16B16A16_FLOAT=10]="DXGI_FORMAT_R16G16B16A16_FLOAT",e[e.DXGI_FORMAT_R16G16B16A16_UNORM=11]="DXGI_FORMAT_R16G16B16A16_UNORM",e[e.DXGI_FORMAT_R16G16B16A16_UINT=12]="DXGI_FORMAT_R16G16B16A16_UINT",e[e.DXGI_FORMAT_R16G16B16A16_SNORM=13]="DXGI_FORMAT_R16G16B16A16_SNORM",e[e.DXGI_FORMAT_R16G16B16A16_SINT=14]="DXGI_FORMAT_R16G16B16A16_SINT",e[e.DXGI_FORMAT_R32G32_TYPELESS=15]="DXGI_FORMAT_R32G32_TYPELESS",e[e.DXGI_FORMAT_R32G32_FLOAT=16]="DXGI_FORMAT_R32G32_FLOAT",e[e.DXGI_FORMAT_R32G32_UINT=17]="DXGI_FORMAT_R32G32_UINT",e[e.DXGI_FORMAT_R32G32_SINT=18]="DXGI_FORMAT_R32G32_SINT",e[e.DXGI_FORMAT_R32G8X24_TYPELESS=19]="DXGI_FORMAT_R32G8X24_TYPELESS",e[e.DXGI_FORMAT_D32_FLOAT_S8X24_UINT=20]="DXGI_FORMAT_D32_FLOAT_S8X24_UINT",e[e.DXGI_FORMAT_R32_FLOAT_X8X24_TYPELESS=21]="DXGI_FORMAT_R32_FLOAT_X8X24_TYPELESS",e[e.DXGI_FORMAT_X32_TYPELESS_G8X24_UINT=22]="DXGI_FORMAT_X32_TYPELESS_G8X24_UINT",e[e.DXGI_FORMAT_R10G10B10A2_TYPELESS=23]="DXGI_FORMAT_R10G10B10A2_TYPELESS",e[e.DXGI_FORMAT_R10G10B10A2_UNORM=24]="DXGI_FORMAT_R10G10B10A2_UNORM",e[e.DXGI_FORMAT_R10G10B10A2_UINT=25]="DXGI_FORMAT_R10G10B10A2_UINT",e[e.DXGI_FORMAT_R11G11B10_FLOAT=26]="DXGI_FORMAT_R11G11B10_FLOAT",e[e.DXGI_FORMAT_R8G8B8A8_TYPELESS=27]="DXGI_FORMAT_R8G8B8A8_TYPELESS",e[e.DXGI_FORMAT_R8G8B8A8_UNORM=28]="DXGI_FORMAT_R8G8B8A8_UNORM",e[e.DXGI_FORMAT_R8G8B8A8_UNORM_SRGB=29]="DXGI_FORMAT_R8G8B8A8_UNORM_SRGB",e[e.DXGI_FORMAT_R8G8B8A8_UINT=30]="DXGI_FORMAT_R8G8B8A8_UINT",e[e.DXGI_FORMAT_R8G8B8A8_SNORM=31]="DXGI_FORMAT_R8G8B8A8_SNORM",e[e.DXGI_FORMAT_R8G8B8A8_SINT=32]="DXGI_FORMAT_R8G8B8A8_SINT",e[e.DXGI_FORMAT_R16G16_TYPELESS=33]="DXGI_FORMAT_R16G16_TYPELESS",e[e.DXGI_FORMAT_R16G16_FLOAT=34]="DXGI_FORMAT_R16G16_FLOAT",e[e.DXGI_FORMAT_R16G16_UNORM=35]="DXGI_FORMAT_R16G16_UNORM",e[e.DXGI_FORMAT_R16G16_UINT=36]="DXGI_FORMAT_R16G16_UINT",e[e.DXGI_FORMAT_R16G16_SNORM=37]="DXGI_FORMAT_R16G16_SNORM",e[e.DXGI_FORMAT_R16G16_SINT=38]="DXGI_FORMAT_R16G16_SINT",e[e.DXGI_FORMAT_R32_TYPELESS=39]="DXGI_FORMAT_R32_TYPELESS",e[e.DXGI_FORMAT_D32_FLOAT=40]="DXGI_FORMAT_D32_FLOAT",e[e.DXGI_FORMAT_R32_FLOAT=41]="DXGI_FORMAT_R32_FLOAT",e[e.DXGI_FORMAT_R32_UINT=42]="DXGI_FORMAT_R32_UINT",e[e.DXGI_FORMAT_R32_SINT=43]="DXGI_FORMAT_R32_SINT",e[e.DXGI_FORMAT_R24G8_TYPELESS=44]="DXGI_FORMAT_R24G8_TYPELESS",e[e.DXGI_FORMAT_D24_UNORM_S8_UINT=45]="DXGI_FORMAT_D24_UNORM_S8_UINT",e[e.DXGI_FORMAT_R24_UNORM_X8_TYPELESS=46]="DXGI_FORMAT_R24_UNORM_X8_TYPELESS",e[e.DXGI_FORMAT_X24_TYPELESS_G8_UINT=47]="DXGI_FORMAT_X24_TYPELESS_G8_UINT",e[e.DXGI_FORMAT_R8G8_TYPELESS=48]="DXGI_FORMAT_R8G8_TYPELESS",e[e.DXGI_FORMAT_R8G8_UNORM=49]="DXGI_FORMAT_R8G8_UNORM",e[e.DXGI_FORMAT_R8G8_UINT=50]="DXGI_FORMAT_R8G8_UINT",e[e.DXGI_FORMAT_R8G8_SNORM=51]="DXGI_FORMAT_R8G8_SNORM",e[e.DXGI_FORMAT_R8G8_SINT=52]="DXGI_FORMAT_R8G8_SINT",e[e.DXGI_FORMAT_R16_TYPELESS=53]="DXGI_FORMAT_R16_TYPELESS",e[e.DXGI_FORMAT_R16_FLOAT=54]="DXGI_FORMAT_R16_FLOAT",e[e.DXGI_FORMAT_D16_UNORM=55]="DXGI_FORMAT_D16_UNORM",e[e.DXGI_FORMAT_R16_UNORM=56]="DXGI_FORMAT_R16_UNORM",e[e.DXGI_FORMAT_R16_UINT=57]="DXGI_FORMAT_R16_UINT",e[e.DXGI_FORMAT_R16_SNORM=58]="DXGI_FORMAT_R16_SNORM",e[e.DXGI_FORMAT_R16_SINT=59]="DXGI_FORMAT_R16_SINT",e[e.DXGI_FORMAT_R8_TYPELESS=60]="DXGI_FORMAT_R8_TYPELESS",e[e.DXGI_FORMAT_R8_UNORM=61]="DXGI_FORMAT_R8_UNORM",e[e.DXGI_FORMAT_R8_UINT=62]="DXGI_FORMAT_R8_UINT",e[e.DXGI_FORMAT_R8_SNORM=63]="DXGI_FORMAT_R8_SNORM",e[e.DXGI_FORMAT_R8_SINT=64]="DXGI_FORMAT_R8_SINT",e[e.DXGI_FORMAT_A8_UNORM=65]="DXGI_FORMAT_A8_UNORM",e[e.DXGI_FORMAT_R1_UNORM=66]="DXGI_FORMAT_R1_UNORM",e[e.DXGI_FORMAT_R9G9B9E5_SHAREDEXP=67]="DXGI_FORMAT_R9G9B9E5_SHAREDEXP",e[e.DXGI_FORMAT_R8G8_B8G8_UNORM=68]="DXGI_FORMAT_R8G8_B8G8_UNORM",e[e.DXGI_FORMAT_G8R8_G8B8_UNORM=69]="DXGI_FORMAT_G8R8_G8B8_UNORM",e[e.DXGI_FORMAT_BC1_TYPELESS=70]="DXGI_FORMAT_BC1_TYPELESS",e[e.DXGI_FORMAT_BC1_UNORM=71]="DXGI_FORMAT_BC1_UNORM",e[e.DXGI_FORMAT_BC1_UNORM_SRGB=72]="DXGI_FORMAT_BC1_UNORM_SRGB",e[e.DXGI_FORMAT_BC2_TYPELESS=73]="DXGI_FORMAT_BC2_TYPELESS",e[e.DXGI_FORMAT_BC2_UNORM=74]="DXGI_FORMAT_BC2_UNORM",e[e.DXGI_FORMAT_BC2_UNORM_SRGB=75]="DXGI_FORMAT_BC2_UNORM_SRGB",e[e.DXGI_FORMAT_BC3_TYPELESS=76]="DXGI_FORMAT_BC3_TYPELESS",e[e.DXGI_FORMAT_BC3_UNORM=77]="DXGI_FORMAT_BC3_UNORM",e[e.DXGI_FORMAT_BC3_UNORM_SRGB=78]="DXGI_FORMAT_BC3_UNORM_SRGB",e[e.DXGI_FORMAT_BC4_TYPELESS=79]="DXGI_FORMAT_BC4_TYPELESS",e[e.DXGI_FORMAT_BC4_UNORM=80]="DXGI_FORMAT_BC4_UNORM",e[e.DXGI_FORMAT_BC4_SNORM=81]="DXGI_FORMAT_BC4_SNORM",e[e.DXGI_FORMAT_BC5_TYPELESS=82]="DXGI_FORMAT_BC5_TYPELESS",e[e.DXGI_FORMAT_BC5_UNORM=83]="DXGI_FORMAT_BC5_UNORM",e[e.DXGI_FORMAT_BC5_SNORM=84]="DXGI_FORMAT_BC5_SNORM",e[e.DXGI_FORMAT_B5G6R5_UNORM=85]="DXGI_FORMAT_B5G6R5_UNORM",e[e.DXGI_FORMAT_B5G5R5A1_UNORM=86]="DXGI_FORMAT_B5G5R5A1_UNORM",e[e.DXGI_FORMAT_B8G8R8A8_UNORM=87]="DXGI_FORMAT_B8G8R8A8_UNORM",e[e.DXGI_FORMAT_B8G8R8X8_UNORM=88]="DXGI_FORMAT_B8G8R8X8_UNORM",e[e.DXGI_FORMAT_R10G10B10_XR_BIAS_A2_UNORM=89]="DXGI_FORMAT_R10G10B10_XR_BIAS_A2_UNORM",e[e.DXGI_FORMAT_B8G8R8A8_TYPELESS=90]="DXGI_FORMAT_B8G8R8A8_TYPELESS",e[e.DXGI_FORMAT_B8G8R8A8_UNORM_SRGB=91]="DXGI_FORMAT_B8G8R8A8_UNORM_SRGB",e[e.DXGI_FORMAT_B8G8R8X8_TYPELESS=92]="DXGI_FORMAT_B8G8R8X8_TYPELESS",e[e.DXGI_FORMAT_B8G8R8X8_UNORM_SRGB=93]="DXGI_FORMAT_B8G8R8X8_UNORM_SRGB",e[e.DXGI_FORMAT_BC6H_TYPELESS=94]="DXGI_FORMAT_BC6H_TYPELESS",e[e.DXGI_FORMAT_BC6H_UF16=95]="DXGI_FORMAT_BC6H_UF16",e[e.DXGI_FORMAT_BC6H_SF16=96]="DXGI_FORMAT_BC6H_SF16",e[e.DXGI_FORMAT_BC7_TYPELESS=97]="DXGI_FORMAT_BC7_TYPELESS",e[e.DXGI_FORMAT_BC7_UNORM=98]="DXGI_FORMAT_BC7_UNORM",e[e.DXGI_FORMAT_BC7_UNORM_SRGB=99]="DXGI_FORMAT_BC7_UNORM_SRGB",e[e.DXGI_FORMAT_AYUV=100]="DXGI_FORMAT_AYUV",e[e.DXGI_FORMAT_Y410=101]="DXGI_FORMAT_Y410",e[e.DXGI_FORMAT_Y416=102]="DXGI_FORMAT_Y416",e[e.DXGI_FORMAT_NV12=103]="DXGI_FORMAT_NV12",e[e.DXGI_FORMAT_P010=104]="DXGI_FORMAT_P010",e[e.DXGI_FORMAT_P016=105]="DXGI_FORMAT_P016",e[e.DXGI_FORMAT_420_OPAQUE=106]="DXGI_FORMAT_420_OPAQUE",e[e.DXGI_FORMAT_YUY2=107]="DXGI_FORMAT_YUY2",e[e.DXGI_FORMAT_Y210=108]="DXGI_FORMAT_Y210",e[e.DXGI_FORMAT_Y216=109]="DXGI_FORMAT_Y216",e[e.DXGI_FORMAT_NV11=110]="DXGI_FORMAT_NV11",e[e.DXGI_FORMAT_AI44=111]="DXGI_FORMAT_AI44",e[e.DXGI_FORMAT_IA44=112]="DXGI_FORMAT_IA44",e[e.DXGI_FORMAT_P8=113]="DXGI_FORMAT_P8",e[e.DXGI_FORMAT_A8P8=114]="DXGI_FORMAT_A8P8",e[e.DXGI_FORMAT_B4G4R4A4_UNORM=115]="DXGI_FORMAT_B4G4R4A4_UNORM",e[e.DXGI_FORMAT_P208=116]="DXGI_FORMAT_P208",e[e.DXGI_FORMAT_V208=117]="DXGI_FORMAT_V208",e[e.DXGI_FORMAT_V408=118]="DXGI_FORMAT_V408",e[e.DXGI_FORMAT_SAMPLER_FEEDBACK_MIN_MIP_OPAQUE=119]="DXGI_FORMAT_SAMPLER_FEEDBACK_MIN_MIP_OPAQUE",e[e.DXGI_FORMAT_SAMPLER_FEEDBACK_MIP_REGION_USED_OPAQUE=120]="DXGI_FORMAT_SAMPLER_FEEDBACK_MIP_REGION_USED_OPAQUE",e[e.DXGI_FORMAT_FORCE_UINT=121]="DXGI_FORMAT_FORCE_UINT"})(In||(In={}));var V_;(function(e){e[e.DDS_DIMENSION_TEXTURE1D=2]="DDS_DIMENSION_TEXTURE1D",e[e.DDS_DIMENSION_TEXTURE2D=3]="DDS_DIMENSION_TEXTURE2D",e[e.DDS_DIMENSION_TEXTURE3D=6]="DDS_DIMENSION_TEXTURE3D"})(V_||(V_={}));var vse=1,gse=2,yse=4,_se=64,xse=512,bse=131072,Sse=827611204,wse=861165636,Ese=894720068,Tse=808540228,Cse=4,Pse=(Ql={},Ql[Sse]=xe.COMPRESSED_RGBA_S3TC_DXT1_EXT,Ql[wse]=xe.COMPRESSED_RGBA_S3TC_DXT3_EXT,Ql[Ese]=xe.COMPRESSED_RGBA_S3TC_DXT5_EXT,Ql),Ase=(Pn={},Pn[In.DXGI_FORMAT_BC1_TYPELESS]=xe.COMPRESSED_RGBA_S3TC_DXT1_EXT,Pn[In.DXGI_FORMAT_BC1_UNORM]=xe.COMPRESSED_RGBA_S3TC_DXT1_EXT,Pn[In.DXGI_FORMAT_BC2_TYPELESS]=xe.COMPRESSED_RGBA_S3TC_DXT3_EXT,Pn[In.DXGI_FORMAT_BC2_UNORM]=xe.COMPRESSED_RGBA_S3TC_DXT3_EXT,Pn[In.DXGI_FORMAT_BC3_TYPELESS]=xe.COMPRESSED_RGBA_S3TC_DXT5_EXT,Pn[In.DXGI_FORMAT_BC3_UNORM]=xe.COMPRESSED_RGBA_S3TC_DXT5_EXT,Pn[In.DXGI_FORMAT_BC1_UNORM_SRGB]=xe.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT,Pn[In.DXGI_FORMAT_BC2_UNORM_SRGB]=xe.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT,Pn[In.DXGI_FORMAT_BC3_UNORM_SRGB]=xe.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT,Pn);function eL(e){var t=new Uint32Array(e),r=t[0];if(r!==pse)throw new Error("Invalid DDS file magic word");var n=new Uint32Array(e,0,Vf/Uint32Array.BYTES_PER_ELEMENT),i=n[Hf.HEIGHT],o=n[Hf.WIDTH],a=n[Hf.MIPMAP_COUNT],s=new Uint32Array(e,Hf.PIXEL_FORMAT*Uint32Array.BYTES_PER_ELEMENT,dse/Uint32Array.BYTES_PER_ELEMENT),l=s[vse];if(l&yse){var u=s[mse.FOURCC];if(u!==Tse){var c=Pse[u],f=Mg+Vf,h=new Uint8Array(e,f),d=new Pd(h,{format:c,width:o,height:i,levels:a});return[d]}var m=Mg+Vf,g=new Uint32Array(t.buffer,m,BP/Uint32Array.BYTES_PER_ELEMENT),p=g[Wf.DXGI_FORMAT],v=g[Wf.RESOURCE_DIMENSION],y=g[Wf.MISC_FLAG],_=g[Wf.ARRAY_SIZE],x=Ase[p];if(x===void 0)throw new Error("DDSParser cannot parse texture data with DXGI format "+p);if(y===Cse)throw new Error("DDSParser does not support cubemap textures");if(v===V_.DDS_DIMENSION_TEXTURE3D)throw new Error("DDSParser does not supported 3D texture data");var b=new Array,S=Mg+Vf+BP;if(_===1)b.push(new Uint8Array(e,S));else{for(var E=Tc[x],I=0,A=o,O=i,D=0;D<a;D++){var B=Math.max(1,A+3&-4),j=Math.max(1,O+3&-4),W=B*j*E;I+=W,A=A>>>1,O=O>>>1}for(var $=S,D=0;D<_;D++)b.push(new Uint8Array(e,$,I)),$+=I}return b.map(function(z){return new Pd(z,{format:x,width:o,height:i,levels:a})})}throw l&_se?new Error("DDSParser does not support uncompressed texture data."):l&xse?new Error("DDSParser does not supported YUV uncompressed texture data."):l&bse?new Error("DDSParser does not support single-channel (lumninance) texture data!"):l&gse?new Error("DDSParser does not support single-channel (alpha) texture data!"):new Error("DDSParser failed to load a texture file due to an unknown reason!")}var Xi,Ti,eu,jP=[171,75,84,88,32,49,49,187,13,10,26,10],Ose=67305985,An={FILE_IDENTIFIER:0,ENDIANNESS:12,GL_TYPE:16,GL_TYPE_SIZE:20,GL_FORMAT:24,GL_INTERNAL_FORMAT:28,GL_BASE_INTERNAL_FORMAT:32,PIXEL_WIDTH:36,PIXEL_HEIGHT:40,PIXEL_DEPTH:44,NUMBER_OF_ARRAY_ELEMENTS:48,NUMBER_OF_FACES:52,NUMBER_OF_MIPMAP_LEVELS:56,BYTES_OF_KEY_VALUE_DATA:60},H_=64,W_=(Xi={},Xi[fe.UNSIGNED_BYTE]=1,Xi[fe.UNSIGNED_SHORT]=2,Xi[fe.INT]=4,Xi[fe.UNSIGNED_INT]=4,Xi[fe.FLOAT]=4,Xi[fe.HALF_FLOAT]=8,Xi),tL=(Ti={},Ti[Q.RGBA]=4,Ti[Q.RGB]=3,Ti[Q.RG]=2,Ti[Q.RED]=1,Ti[Q.LUMINANCE]=1,Ti[Q.LUMINANCE_ALPHA]=2,Ti[Q.ALPHA]=1,Ti),rL=(eu={},eu[fe.UNSIGNED_SHORT_4_4_4_4]=2,eu[fe.UNSIGNED_SHORT_5_5_5_1]=2,eu[fe.UNSIGNED_SHORT_5_6_5]=2,eu);function nL(e,t,r){r===void 0&&(r=!1);var n=new DataView(t);if(!Ise(e,n))return null;var i=n.getUint32(An.ENDIANNESS,!0)===Ose,o=n.getUint32(An.GL_TYPE,i),a=n.getUint32(An.GL_FORMAT,i),s=n.getUint32(An.GL_INTERNAL_FORMAT,i),l=n.getUint32(An.PIXEL_WIDTH,i),u=n.getUint32(An.PIXEL_HEIGHT,i)||1,c=n.getUint32(An.PIXEL_DEPTH,i)||1,f=n.getUint32(An.NUMBER_OF_ARRAY_ELEMENTS,i)||1,h=n.getUint32(An.NUMBER_OF_FACES,i),d=n.getUint32(An.NUMBER_OF_MIPMAP_LEVELS,i),m=n.getUint32(An.BYTES_OF_KEY_VALUE_DATA,i);if(u===0||c!==1)throw new Error("Only 2D textures are supported");if(h!==1)throw new Error("CubeTextures are not supported by KTXLoader yet!");if(f!==1)throw new Error("WebGL does not support array textures");var g=4,p=4,v=l+3&-4,y=u+3&-4,_=new Array(f),x=l*u;o===0&&(x=v*y);var b;if(o!==0?W_[o]?b=W_[o]*tL[a]:b=rL[o]:b=Tc[s],b===void 0)throw new Error("Unable to resolve the pixel format stored in the *.ktx file!");for(var S=r?Rse(n,m,i):null,E=x*b,I=E,A=l,O=u,D=v,B=y,j=H_+m,W=0;W<d;W++){for(var $=n.getUint32(j,i),z=j+4,ie=0;ie<f;ie++){var Se=_[ie];Se||(Se=_[ie]=new Array(d)),Se[W]={levelID:W,levelWidth:d>1||o!==0?A:D,levelHeight:d>1||o!==0?O:B,levelBuffer:new Uint8Array(t,z,I)},z+=I}j+=$+4,j=j%4!==0?j+4-j%4:j,A=A>>1||1,O=O>>1||1,D=A+g-1&~(g-1),B=O+p-1&~(p-1),I=D*B*b}return o!==0?{uncompressed:_.map(function(de){var X=de[0].levelBuffer,L=!1;return o===fe.FLOAT?X=new Float32Array(de[0].levelBuffer.buffer,de[0].levelBuffer.byteOffset,de[0].levelBuffer.byteLength/4):o===fe.UNSIGNED_INT?(L=!0,X=new Uint32Array(de[0].levelBuffer.buffer,de[0].levelBuffer.byteOffset,de[0].levelBuffer.byteLength/4)):o===fe.INT&&(L=!0,X=new Int32Array(de[0].levelBuffer.buffer,de[0].levelBuffer.byteOffset,de[0].levelBuffer.byteLength/4)),{resource:new za(X,{width:de[0].levelWidth,height:de[0].levelHeight}),type:o,format:L?Mse(a):a}}),kvData:S}:{compressed:_.map(function(de){return new Pd(null,{format:s,width:l,height:u,levels:d,levelBuffers:de})}),kvData:S}}function Ise(e,t){for(var r=0;r<jP.length;r++)if(t.getUint8(r)!==jP[r])return console.error(e+" is not a valid *.ktx file!"),!1;return!0}function Mse(e){switch(e){case Q.RGBA:return Q.RGBA_INTEGER;case Q.RGB:return Q.RGB_INTEGER;case Q.RG:return Q.RG_INTEGER;case Q.RED:return Q.RED_INTEGER;default:return e}}function Rse(e,t,r){for(var n=new Map,i=0;i<t;){var o=e.getUint32(H_+i,r),a=H_+i+4,s=3-(o+3)%4;if(o===0||o>t-i){console.error("KTXLoader: keyAndValueByteSize out of bounds");break}for(var l=0;l<o&&e.getUint8(a+l)!==0;l++);if(l===-1){console.error("KTXLoader: Failed to find null byte terminating kvData key");break}var u=new TextDecoder().decode(new Uint8Array(e.buffer,a,l)),c=new DataView(e.buffer,a+l+1,o-l-1);n.set(u,c),i+=4+o+s}return n}wt.setExtensionXhrType("dds",wt.XHR_RESPONSE_TYPE.BUFFER);var iL=function(){function e(){}return e.use=function(t,r){if(t.extension==="dds"&&t.data)try{Object.assign(t,Qk(t.name||t.url,eL(t.data),t.metadata))}catch(n){r(n);return}r()},e.extension=Ye.Loader,e}();wt.setExtensionXhrType("ktx",wt.XHR_RESPONSE_TYPE.BUFFER);var oL=function(){function e(){}return e.use=function(t,r){if(t.extension==="ktx"&&t.data)try{var n=t.name||t.url,i=nL(n,t.data,this.loadKeyValueData),o=i.compressed,a=i.uncompressed,s=i.kvData;if(o){var l=Qk(n,o,t.metadata);if(s&&l.textures)for(var u in l.textures)l.textures[u].baseTexture.ktxKeyValueData=s;Object.assign(t,l)}else if(a){var c={};a.forEach(function(f,h){var d=new pe(new Le(f.resource,{mipmap:zr.OFF,alphaMode:bn.NO_PREMULTIPLIED_ALPHA,type:f.type,format:f.format})),m=n+"-"+(h+1);s&&(d.baseTexture.ktxKeyValueData=s),Le.addToCache(d.baseTexture,m),pe.addToCache(d,m),h===0&&(c[n]=d,Le.addToCache(d.baseTexture,n),pe.addToCache(d,n)),c[m]=d}),Object.assign(t,{textures:c})}}catch(f){r(f);return}r()},e.extension=Ye.Loader,e.loadKeyValueData=!1,e}();/*!
 * @pixi/particle-container - v6.5.10
 * Compiled Thu, 06 Jul 2023 15:25:11 UTC
 *
 * @pixi/particle-container is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 *//*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var X_=function(e,t){return X_=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)n.hasOwnProperty(i)&&(r[i]=n[i])},X_(e,t)};function aL(e,t){X_(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}var kse=function(e){aL(t,e);function t(r,n,i,o){r===void 0&&(r=1500),i===void 0&&(i=16384),o===void 0&&(o=!1);var a=e.call(this)||this,s=16384;return i>s&&(i=s),a._properties=[!1,!0,!1,!1,!1],a._maxSize=r,a._batchSize=i,a._buffers=null,a._bufferUpdateIDs=[],a._updateID=0,a.interactiveChildren=!1,a.blendMode=ce.NORMAL,a.autoResize=o,a.roundPixels=!0,a.baseTexture=null,a.setProperties(n),a._tint=0,a.tintRgb=new Float32Array(4),a.tint=16777215,a}return t.prototype.setProperties=function(r){r&&(this._properties[0]="vertices"in r||"scale"in r?!!r.vertices||!!r.scale:this._properties[0],this._properties[1]="position"in r?!!r.position:this._properties[1],this._properties[2]="rotation"in r?!!r.rotation:this._properties[2],this._properties[3]="uvs"in r?!!r.uvs:this._properties[3],this._properties[4]="tint"in r||"alpha"in r?!!r.tint||!!r.alpha:this._properties[4])},t.prototype.updateTransform=function(){this.displayObjectUpdateTransform()},Object.defineProperty(t.prototype,"tint",{get:function(){return this._tint},set:function(r){this._tint=r,Qt(r,this.tintRgb)},enumerable:!1,configurable:!0}),t.prototype.render=function(r){var n=this;!this.visible||this.worldAlpha<=0||!this.children.length||!this.renderable||(this.baseTexture||(this.baseTexture=this.children[0]._texture.baseTexture,this.baseTexture.valid||this.baseTexture.once("update",function(){return n.onChildrenChange(0)})),r.batch.setObjectRenderer(r.plugins.particle),r.plugins.particle.render(this))},t.prototype.onChildrenChange=function(r){for(var n=Math.floor(r/this._batchSize);this._bufferUpdateIDs.length<n;)this._bufferUpdateIDs.push(0);this._bufferUpdateIDs[n]=++this._updateID},t.prototype.dispose=function(){if(this._buffers){for(var r=0;r<this._buffers.length;++r)this._buffers[r].destroy();this._buffers=null}},t.prototype.destroy=function(r){e.prototype.destroy.call(this,r),this.dispose(),this._properties=null,this._buffers=null,this._bufferUpdateIDs=null},t}(_r),UP=function(){function e(t,r,n){this.geometry=new wl,this.indexBuffer=null,this.size=n,this.dynamicProperties=[],this.staticProperties=[];for(var i=0;i<t.length;++i){var o=t[i];o={attributeName:o.attributeName,size:o.size,uploadFunction:o.uploadFunction,type:o.type||fe.FLOAT,offset:o.offset},r[i]?this.dynamicProperties.push(o):this.staticProperties.push(o)}this.staticStride=0,this.staticBuffer=null,this.staticData=null,this.staticDataUint32=null,this.dynamicStride=0,this.dynamicBuffer=null,this.dynamicData=null,this.dynamicDataUint32=null,this._updateID=0,this.initBuffers()}return e.prototype.initBuffers=function(){var t=this.geometry,r=0;this.indexBuffer=new Dt(tk(this.size),!0,!0),t.addIndex(this.indexBuffer),this.dynamicStride=0;for(var n=0;n<this.dynamicProperties.length;++n){var i=this.dynamicProperties[n];i.offset=r,r+=i.size,this.dynamicStride+=i.size}var o=new ArrayBuffer(this.size*this.dynamicStride*4*4);this.dynamicData=new Float32Array(o),this.dynamicDataUint32=new Uint32Array(o),this.dynamicBuffer=new Dt(this.dynamicData,!1,!1);var a=0;this.staticStride=0;for(var n=0;n<this.staticProperties.length;++n){var i=this.staticProperties[n];i.offset=a,a+=i.size,this.staticStride+=i.size}var s=new ArrayBuffer(this.size*this.staticStride*4*4);this.staticData=new Float32Array(s),this.staticDataUint32=new Uint32Array(s),this.staticBuffer=new Dt(this.staticData,!0,!1);for(var n=0;n<this.dynamicProperties.length;++n){var i=this.dynamicProperties[n];t.addAttribute(i.attributeName,this.dynamicBuffer,0,i.type===fe.UNSIGNED_BYTE,i.type,this.dynamicStride*4,i.offset*4)}for(var n=0;n<this.staticProperties.length;++n){var i=this.staticProperties[n];t.addAttribute(i.attributeName,this.staticBuffer,0,i.type===fe.UNSIGNED_BYTE,i.type,this.staticStride*4,i.offset*4)}},e.prototype.uploadDynamic=function(t,r,n){for(var i=0;i<this.dynamicProperties.length;i++){var o=this.dynamicProperties[i];o.uploadFunction(t,r,n,o.type===fe.UNSIGNED_BYTE?this.dynamicDataUint32:this.dynamicData,this.dynamicStride,o.offset)}this.dynamicBuffer._updateID++},e.prototype.uploadStatic=function(t,r,n){for(var i=0;i<this.staticProperties.length;i++){var o=this.staticProperties[i];o.uploadFunction(t,r,n,o.type===fe.UNSIGNED_BYTE?this.staticDataUint32:this.staticData,this.staticStride,o.offset)}this.staticBuffer._updateID++},e.prototype.destroy=function(){this.indexBuffer=null,this.dynamicProperties=null,this.dynamicBuffer=null,this.dynamicData=null,this.dynamicDataUint32=null,this.staticProperties=null,this.staticBuffer=null,this.staticData=null,this.staticDataUint32=null,this.geometry.destroy()},e}(),Lse=`varying vec2 vTextureCoord;
varying vec4 vColor;

uniform sampler2D uSampler;

void main(void){
    vec4 color = texture2D(uSampler, vTextureCoord) * vColor;
    gl_FragColor = color;
}`,Fse=`attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;
attribute vec4 aColor;

attribute vec2 aPositionCoord;
attribute float aRotation;

uniform mat3 translationMatrix;
uniform vec4 uColor;

varying vec2 vTextureCoord;
varying vec4 vColor;

void main(void){
    float x = (aVertexPosition.x) * cos(aRotation) - (aVertexPosition.y) * sin(aRotation);
    float y = (aVertexPosition.x) * sin(aRotation) + (aVertexPosition.y) * cos(aRotation);

    vec2 v = vec2(x, y);
    v = v + aPositionCoord;

    gl_Position = vec4((translationMatrix * vec3(v, 1.0)).xy, 0.0, 1.0);

    vTextureCoord = aTextureCoord;
    vColor = aColor * uColor;
}
`,sL=function(e){aL(t,e);function t(r){var n=e.call(this,r)||this;return n.shader=null,n.properties=null,n.tempMatrix=new gt,n.properties=[{attributeName:"aVertexPosition",size:2,uploadFunction:n.uploadVertices,offset:0},{attributeName:"aPositionCoord",size:2,uploadFunction:n.uploadPosition,offset:0},{attributeName:"aRotation",size:1,uploadFunction:n.uploadRotation,offset:0},{attributeName:"aTextureCoord",size:2,uploadFunction:n.uploadUvs,offset:0},{attributeName:"aColor",size:1,type:fe.UNSIGNED_BYTE,uploadFunction:n.uploadTint,offset:0}],n.shader=Bi.from(Fse,Lse,{}),n.state=Go.for2d(),n}return t.prototype.render=function(r){var n=r.children,i=r._maxSize,o=r._batchSize,a=this.renderer,s=n.length;if(s!==0){s>i&&!r.autoResize&&(s=i);var l=r._buffers;l||(l=r._buffers=this.generateBuffers(r));var u=n[0]._texture.baseTexture,c=u.alphaMode>0;this.state.blendMode=f1(r.blendMode,c),a.state.set(this.state);var f=a.gl,h=r.worldTransform.copyTo(this.tempMatrix);h.prepend(a.globalUniforms.uniforms.projectionMatrix),this.shader.uniforms.translationMatrix=h.toArray(!0),this.shader.uniforms.uColor=ek(r.tintRgb,r.worldAlpha,this.shader.uniforms.uColor,c),this.shader.uniforms.uSampler=u,this.renderer.shader.bind(this.shader);for(var d=!1,m=0,g=0;m<s;m+=o,g+=1){var p=s-m;p>o&&(p=o),g>=l.length&&l.push(this._generateOneMoreBuffer(r));var v=l[g];v.uploadDynamic(n,m,p);var y=r._bufferUpdateIDs[g]||0;d=d||v._updateID<y,d&&(v._updateID=r._updateID,v.uploadStatic(n,m,p)),a.geometry.bind(v.geometry),f.drawElements(f.TRIANGLES,p*6,f.UNSIGNED_SHORT,0)}}},t.prototype.generateBuffers=function(r){for(var n=[],i=r._maxSize,o=r._batchSize,a=r._properties,s=0;s<i;s+=o)n.push(new UP(this.properties,a,o));return n},t.prototype._generateOneMoreBuffer=function(r){var n=r._batchSize,i=r._properties;return new UP(this.properties,i,n)},t.prototype.uploadVertices=function(r,n,i,o,a,s){for(var l=0,u=0,c=0,f=0,h=0;h<i;++h){var d=r[n+h],m=d._texture,g=d.scale.x,p=d.scale.y,v=m.trim,y=m.orig;v?(u=v.x-d.anchor.x*y.width,l=u+v.width,f=v.y-d.anchor.y*y.height,c=f+v.height):(l=y.width*(1-d.anchor.x),u=y.width*-d.anchor.x,c=y.height*(1-d.anchor.y),f=y.height*-d.anchor.y),o[s]=u*g,o[s+1]=f*p,o[s+a]=l*g,o[s+a+1]=f*p,o[s+a*2]=l*g,o[s+a*2+1]=c*p,o[s+a*3]=u*g,o[s+a*3+1]=c*p,s+=a*4}},t.prototype.uploadPosition=function(r,n,i,o,a,s){for(var l=0;l<i;l++){var u=r[n+l].position;o[s]=u.x,o[s+1]=u.y,o[s+a]=u.x,o[s+a+1]=u.y,o[s+a*2]=u.x,o[s+a*2+1]=u.y,o[s+a*3]=u.x,o[s+a*3+1]=u.y,s+=a*4}},t.prototype.uploadRotation=function(r,n,i,o,a,s){for(var l=0;l<i;l++){var u=r[n+l].rotation;o[s]=u,o[s+a]=u,o[s+a*2]=u,o[s+a*3]=u,s+=a*4}},t.prototype.uploadUvs=function(r,n,i,o,a,s){for(var l=0;l<i;++l){var u=r[n+l]._texture._uvs;u?(o[s]=u.x0,o[s+1]=u.y0,o[s+a]=u.x1,o[s+a+1]=u.y1,o[s+a*2]=u.x2,o[s+a*2+1]=u.y2,o[s+a*3]=u.x3,o[s+a*3+1]=u.y3,s+=a*4):(o[s]=0,o[s+1]=0,o[s+a]=0,o[s+a+1]=0,o[s+a*2]=0,o[s+a*2+1]=0,o[s+a*3]=0,o[s+a*3+1]=0,s+=a*4)}},t.prototype.uploadTint=function(r,n,i,o,a,s){for(var l=0;l<i;++l){var u=r[n+l],c=u._texture.baseTexture.alphaMode>0,f=u.alpha,h=f<1&&c?Lp(u._tintRGB,f):u._tintRGB+(f*255<<24);o[s]=h,o[s+a]=h,o[s+a*2]=h,o[s+a*3]=h,s+=a*4}},t.prototype.destroy=function(){e.prototype.destroy.call(this),this.shader&&(this.shader.destroy(),this.shader=null),this.tempMatrix=null},t.extension={name:"particle",type:Ye.RendererPlugin},t}(ef);/*!
 * @pixi/graphics - v6.5.10
 * Compiled Thu, 06 Jul 2023 15:25:11 UTC
 *
 * @pixi/graphics is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */var ei;(function(e){e.MITER="miter",e.BEVEL="bevel",e.ROUND="round"})(ei||(ei={}));var Fi;(function(e){e.BUTT="butt",e.ROUND="round",e.SQUARE="square"})(Fi||(Fi={}));var Qs={adaptive:!0,maxLength:10,minSegments:8,maxSegments:2048,epsilon:1e-4,_segmentsCount:function(e,t){if(t===void 0&&(t=20),!this.adaptive||!e||isNaN(e))return t;var r=Math.ceil(e/this.maxLength);return r<this.minSegments?r=this.minSegments:r>this.maxSegments&&(r=this.maxSegments),r}},G1=function(){function e(){this.color=16777215,this.alpha=1,this.texture=pe.WHITE,this.matrix=null,this.visible=!1,this.reset()}return e.prototype.clone=function(){var t=new e;return t.color=this.color,t.alpha=this.alpha,t.texture=this.texture,t.matrix=this.matrix,t.visible=this.visible,t},e.prototype.reset=function(){this.color=16777215,this.alpha=1,this.texture=pe.WHITE,this.matrix=null,this.visible=!1},e.prototype.destroy=function(){this.texture=null,this.matrix=null},e}();/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var q_=function(e,t){return q_=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)n.hasOwnProperty(i)&&(r[i]=n[i])},q_(e,t)};function z1(e,t){q_(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}function $P(e,t){var r,n;t===void 0&&(t=!1);var i=e.length;if(!(i<6)){for(var o=0,a=0,s=e[i-2],l=e[i-1];a<i;a+=2){var u=e[a],c=e[a+1];o+=(u-s)*(c+l),s=u,l=c}if(!t&&o>0||t&&o<=0)for(var f=i/2,a=f+f%2;a<i;a+=2){var h=i-a-2,d=i-a-1,m=a,g=a+1;r=[e[m],e[h]],e[h]=r[0],e[m]=r[1],n=[e[g],e[d]],e[d]=n[0],e[g]=n[1]}}}var V1={build:function(e){e.points=e.shape.points.slice()},triangulate:function(e,t){var r=e.points,n=e.holes,i=t.points,o=t.indices;if(r.length>=6){$P(r,!1);for(var a=[],s=0;s<n.length;s++){var l=n[s];$P(l.points,!0),a.push(r.length/2),r=r.concat(l.points)}var u=e1(r,a,2);if(!u)return;for(var c=i.length/2,s=0;s<u.length;s+=3)o.push(u[s]+c),o.push(u[s+1]+c),o.push(u[s+2]+c);for(var s=0;s<r.length;s++)i.push(r[s])}}},Cc={build:function(e){var t=e.points,r,n,i,o,a,s;if(e.type===Gt.CIRC){var l=e.shape;r=l.x,n=l.y,a=s=l.radius,i=o=0}else if(e.type===Gt.ELIP){var u=e.shape;r=u.x,n=u.y,a=u.width,s=u.height,i=o=0}else{var c=e.shape,f=c.width/2,h=c.height/2;r=c.x+f,n=c.y+h,a=s=Math.max(0,Math.min(c.radius,Math.min(f,h))),i=f-a,o=h-s}if(!(a>=0&&s>=0&&i>=0&&o>=0)){t.length=0;return}var d=Math.ceil(2.3*Math.sqrt(a+s)),m=d*8+(i?4:0)+(o?4:0);if(t.length=m,m!==0){if(d===0){t.length=8,t[0]=t[6]=r+i,t[1]=t[3]=n+o,t[2]=t[4]=r-i,t[5]=t[7]=n-o;return}var g=0,p=d*4+(i?2:0)+2,v=p,y=m;{var _=i+a,x=o,b=r+_,S=r-_,E=n+x;if(t[g++]=b,t[g++]=E,t[--p]=E,t[--p]=S,o){var I=n-x;t[v++]=S,t[v++]=I,t[--y]=I,t[--y]=b}}for(var A=1;A<d;A++){var O=Math.PI/2*(A/d),_=i+Math.cos(O)*a,x=o+Math.sin(O)*s,b=r+_,S=r-_,E=n+x,I=n-x;t[g++]=b,t[g++]=E,t[--p]=E,t[--p]=S,t[v++]=S,t[v++]=I,t[--y]=I,t[--y]=b}{var _=i,x=o+s,b=r+_,S=r-_,E=n+x,I=n-x;t[g++]=b,t[g++]=E,t[--y]=I,t[--y]=b,i&&(t[g++]=S,t[g++]=E,t[--y]=I,t[--y]=S)}}},triangulate:function(e,t){var r=e.points,n=t.points,i=t.indices;if(r.length!==0){var o=n.length/2,a=o,s,l;if(e.type!==Gt.RREC){var u=e.shape;s=u.x,l=u.y}else{var c=e.shape;s=c.x+c.width/2,l=c.y+c.height/2}var f=e.matrix;n.push(e.matrix?f.a*s+f.c*l+f.tx:s,e.matrix?f.b*s+f.d*l+f.ty:l),o++,n.push(r[0],r[1]);for(var h=2;h<r.length;h+=2)n.push(r[h],r[h+1]),i.push(o++,a,o);i.push(a+1,a,o)}}},lL={build:function(e){var t=e.shape,r=t.x,n=t.y,i=t.width,o=t.height,a=e.points;a.length=0,a.push(r,n,r+i,n,r+i,n+o,r,n+o)},triangulate:function(e,t){var r=e.points,n=t.points,i=n.length/2;n.push(r[0],r[1],r[2],r[3],r[6],r[7],r[4],r[5]),t.indices.push(i,i+1,i+2,i+1,i+2,i+3)}};function es(e,t,r){var n=t-e;return e+n*r}function Xf(e,t,r,n,i,o,a){a===void 0&&(a=[]);for(var s=20,l=a,u=0,c=0,f=0,h=0,d=0,m=0,g=0,p=0;g<=s;++g)p=g/s,u=es(e,r,p),c=es(t,n,p),f=es(r,i,p),h=es(n,o,p),d=es(u,f,p),m=es(c,h,p),!(g===0&&l[l.length-2]===d&&l[l.length-1]===m)&&l.push(d,m);return l}var uL={build:function(e){if(Pc.nextRoundedRectBehavior){Cc.build(e);return}var t=e.shape,r=e.points,n=t.x,i=t.y,o=t.width,a=t.height,s=Math.max(0,Math.min(t.radius,Math.min(o,a)/2));r.length=0,s?(Xf(n,i+s,n,i,n+s,i,r),Xf(n+o-s,i,n+o,i,n+o,i+s,r),Xf(n+o,i+a-s,n+o,i+a,n+o-s,i+a,r),Xf(n+s,i+a,n,i+a,n,i+a-s,r)):r.push(n,i,n+o,i,n+o,i+a,n,i+a)},triangulate:function(e,t){if(Pc.nextRoundedRectBehavior){Cc.triangulate(e,t);return}for(var r=e.points,n=t.points,i=t.indices,o=n.length/2,a=e1(r,null,2),s=0,l=a.length;s<l;s+=3)i.push(a[s]+o),i.push(a[s+1]+o),i.push(a[s+2]+o);for(var s=0,l=r.length;s<l;s++)n.push(r[s],r[++s])}};function GP(e,t,r,n,i,o,a,s){var l=e-r*i,u=t-n*i,c=e+r*o,f=t+n*o,h,d;a?(h=n,d=-r):(h=-n,d=r);var m=l+h,g=u+d,p=c+h,v=f+d;return s.push(m,g),s.push(p,v),2}function Ho(e,t,r,n,i,o,a,s){var l=r-e,u=n-t,c=Math.atan2(l,u),f=Math.atan2(i-e,o-t);s&&c<f?c+=Math.PI*2:!s&&c>f&&(f+=Math.PI*2);var h=c,d=f-c,m=Math.abs(d),g=Math.sqrt(l*l+u*u),p=(15*m*Math.sqrt(g)/Math.PI>>0)+1,v=d/p;if(h+=v,s){a.push(e,t),a.push(r,n);for(var y=1,_=h;y<p;y++,_+=v)a.push(e,t),a.push(e+Math.sin(_)*g,t+Math.cos(_)*g);a.push(e,t),a.push(i,o)}else{a.push(r,n),a.push(e,t);for(var y=1,_=h;y<p;y++,_+=v)a.push(e+Math.sin(_)*g,t+Math.cos(_)*g),a.push(e,t);a.push(i,o),a.push(e,t)}return p*2}function Dse(e,t){var r=e.shape,n=e.points||r.points.slice(),i=t.closePointEps;if(n.length!==0){var o=e.lineStyle,a=new Pe(n[0],n[1]),s=new Pe(n[n.length-2],n[n.length-1]),l=r.type!==Gt.POLY||r.closeStroke,u=Math.abs(a.x-s.x)<i&&Math.abs(a.y-s.y)<i;if(l){n=n.slice(),u&&(n.pop(),n.pop(),s.set(n[n.length-2],n[n.length-1]));var c=(a.x+s.x)*.5,f=(s.y+a.y)*.5;n.unshift(c,f),n.push(c,f)}var h=t.points,d=n.length/2,m=n.length,g=h.length/2,p=o.width/2,v=p*p,y=o.miterLimit*o.miterLimit,_=n[0],x=n[1],b=n[2],S=n[3],E=0,I=0,A=-(x-S),O=_-b,D=0,B=0,j=Math.sqrt(A*A+O*O);A/=j,O/=j,A*=p,O*=p;var W=o.alignment,$=(1-W)*2,z=W*2;l||(o.cap===Fi.ROUND?m+=Ho(_-A*($-z)*.5,x-O*($-z)*.5,_-A*$,x-O*$,_+A*z,x+O*z,h,!0)+2:o.cap===Fi.SQUARE&&(m+=GP(_,x,A,O,$,z,!0,h))),h.push(_-A*$,x-O*$),h.push(_+A*z,x+O*z);for(var ie=1;ie<d-1;++ie){_=n[(ie-1)*2],x=n[(ie-1)*2+1],b=n[ie*2],S=n[ie*2+1],E=n[(ie+1)*2],I=n[(ie+1)*2+1],A=-(x-S),O=_-b,j=Math.sqrt(A*A+O*O),A/=j,O/=j,A*=p,O*=p,D=-(S-I),B=b-E,j=Math.sqrt(D*D+B*B),D/=j,B/=j,D*=p,B*=p;var Se=b-_,de=x-S,X=b-E,L=I-S,q=Se*X+de*L,re=de*X-L*Se,le=re<0;if(Math.abs(re)<.001*Math.abs(q)){h.push(b-A*$,S-O*$),h.push(b+A*z,S+O*z),q>=0&&(o.join===ei.ROUND?m+=Ho(b,S,b-A*$,S-O*$,b-D*$,S-B*$,h,!1)+4:m+=2,h.push(b-D*z,S-B*z),h.push(b+D*$,S+B*$));continue}var ye=(-A+_)*(-O+S)-(-A+b)*(-O+x),we=(-D+E)*(-B+S)-(-D+b)*(-B+I),Ee=(Se*we-X*ye)/re,Ge=(L*ye-de*we)/re,He=(Ee-b)*(Ee-b)+(Ge-S)*(Ge-S),Qe=b+(Ee-b)*$,Oe=S+(Ge-S)*$,Be=b-(Ee-b)*z,We=S-(Ge-S)*z,Te=Math.min(Se*Se+de*de,X*X+L*L),dt=le?$:z,fr=Te+dt*dt*v,De=He<=fr;De?o.join===ei.BEVEL||He/v>y?(le?(h.push(Qe,Oe),h.push(b+A*z,S+O*z),h.push(Qe,Oe),h.push(b+D*z,S+B*z)):(h.push(b-A*$,S-O*$),h.push(Be,We),h.push(b-D*$,S-B*$),h.push(Be,We)),m+=2):o.join===ei.ROUND?le?(h.push(Qe,Oe),h.push(b+A*z,S+O*z),m+=Ho(b,S,b+A*z,S+O*z,b+D*z,S+B*z,h,!0)+4,h.push(Qe,Oe),h.push(b+D*z,S+B*z)):(h.push(b-A*$,S-O*$),h.push(Be,We),m+=Ho(b,S,b-A*$,S-O*$,b-D*$,S-B*$,h,!1)+4,h.push(b-D*$,S-B*$),h.push(Be,We)):(h.push(Qe,Oe),h.push(Be,We)):(h.push(b-A*$,S-O*$),h.push(b+A*z,S+O*z),o.join===ei.ROUND?le?m+=Ho(b,S,b+A*z,S+O*z,b+D*z,S+B*z,h,!0)+2:m+=Ho(b,S,b-A*$,S-O*$,b-D*$,S-B*$,h,!1)+2:o.join===ei.MITER&&He/v<=y&&(le?(h.push(Be,We),h.push(Be,We)):(h.push(Qe,Oe),h.push(Qe,Oe)),m+=2),h.push(b-D*$,S-B*$),h.push(b+D*z,S+B*z),m+=2)}_=n[(d-2)*2],x=n[(d-2)*2+1],b=n[(d-1)*2],S=n[(d-1)*2+1],A=-(x-S),O=_-b,j=Math.sqrt(A*A+O*O),A/=j,O/=j,A*=p,O*=p,h.push(b-A*$,S-O*$),h.push(b+A*z,S+O*z),l||(o.cap===Fi.ROUND?m+=Ho(b-A*($-z)*.5,S-O*($-z)*.5,b-A*$,S-O*$,b+A*z,S+O*z,h,!1)+2:o.cap===Fi.SQUARE&&(m+=GP(b,S,A,O,$,z,!1,h)));for(var Er=t.indices,zn=Qs.epsilon*Qs.epsilon,ie=g;ie<m+g-2;++ie)_=h[ie*2],x=h[ie*2+1],b=h[(ie+1)*2],S=h[(ie+1)*2+1],E=h[(ie+2)*2],I=h[(ie+2)*2+1],!(Math.abs(_*(S-I)+b*(I-x)+E*(x-S))<zn)&&Er.push(ie,ie+1,ie+2)}}function Nse(e,t){var r=0,n=e.shape,i=e.points||n.points,o=n.type!==Gt.POLY||n.closeStroke;if(i.length!==0){var a=t.points,s=t.indices,l=i.length/2,u=a.length/2,c=u;for(a.push(i[0],i[1]),r=1;r<l;r++)a.push(i[r*2],i[r*2+1]),s.push(c,c+1),c++;o&&s.push(c,u)}}function Y_(e,t){e.lineStyle.native?Nse(e,t):Dse(e,t)}var K_=function(){function e(){}return e.curveTo=function(t,r,n,i,o,a){var s=a[a.length-2],l=a[a.length-1],u=l-r,c=s-t,f=i-r,h=n-t,d=Math.abs(u*h-c*f);if(d<1e-8||o===0)return(a[a.length-2]!==t||a[a.length-1]!==r)&&a.push(t,r),null;var m=u*u+c*c,g=f*f+h*h,p=u*f+c*h,v=o*Math.sqrt(m)/d,y=o*Math.sqrt(g)/d,_=v*p/m,x=y*p/g,b=v*h+y*c,S=v*f+y*u,E=c*(y+_),I=u*(y+_),A=h*(v+x),O=f*(v+x),D=Math.atan2(I-S,E-b),B=Math.atan2(O-S,A-b);return{cx:b+t,cy:S+r,radius:o,startAngle:D,endAngle:B,anticlockwise:c*f>h*u}},e.arc=function(t,r,n,i,o,a,s,l,u){for(var c=s-a,f=Qs._segmentsCount(Math.abs(c)*o,Math.ceil(Math.abs(c)/Sc)*40),h=c/(f*2),d=h*2,m=Math.cos(h),g=Math.sin(h),p=f-1,v=p%1/p,y=0;y<=p;++y){var _=y+v*y,x=h+a+d*_,b=Math.cos(x),S=-Math.sin(x);u.push((m*b+g*S)*o+n,(m*-S+g*b)*o+i)}},e}(),cL=function(){function e(){}return e.curveLength=function(t,r,n,i,o,a,s,l){for(var u=10,c=0,f=0,h=0,d=0,m=0,g=0,p=0,v=0,y=0,_=0,x=0,b=t,S=r,E=1;E<=u;++E)f=E/u,h=f*f,d=h*f,m=1-f,g=m*m,p=g*m,v=p*t+3*g*f*n+3*m*h*o+d*s,y=p*r+3*g*f*i+3*m*h*a+d*l,_=b-v,x=S-y,b=v,S=y,c+=Math.sqrt(_*_+x*x);return c},e.curveTo=function(t,r,n,i,o,a,s){var l=s[s.length-2],u=s[s.length-1];s.length-=2;var c=Qs._segmentsCount(e.curveLength(l,u,t,r,n,i,o,a)),f=0,h=0,d=0,m=0,g=0;s.push(l,u);for(var p=1,v=0;p<=c;++p)v=p/c,f=1-v,h=f*f,d=h*f,m=v*v,g=m*v,s.push(d*l+3*h*v*t+3*f*m*n+g*o,d*u+3*h*v*r+3*f*m*i+g*a)},e}(),fL=function(){function e(){}return e.curveLength=function(t,r,n,i,o,a){var s=t-2*n+o,l=r-2*i+a,u=2*n-2*t,c=2*i-2*r,f=4*(s*s+l*l),h=4*(s*u+l*c),d=u*u+c*c,m=2*Math.sqrt(f+h+d),g=Math.sqrt(f),p=2*f*g,v=2*Math.sqrt(d),y=h/g;return(p*m+g*h*(m-v)+(4*d*f-h*h)*Math.log((2*g+y+m)/(y+v)))/(4*p)},e.curveTo=function(t,r,n,i,o){for(var a=o[o.length-2],s=o[o.length-1],l=Qs._segmentsCount(e.curveLength(a,s,t,r,n,i)),u=0,c=0,f=1;f<=l;++f){var h=f/l;u=a+(t-a)*h,c=s+(r-s)*h,o.push(u+(t+(n-t)*h-u)*h,c+(r+(i-r)*h-c)*h)}},e}(),hL=function(){function e(){this.reset()}return e.prototype.begin=function(t,r,n){this.reset(),this.style=t,this.start=r,this.attribStart=n},e.prototype.end=function(t,r){this.attribSize=r-this.attribStart,this.size=t-this.start},e.prototype.reset=function(){this.style=null,this.size=0,this.start=0,this.attribStart=0,this.attribSize=0},e}(),Wo,Ch=(Wo={},Wo[Gt.POLY]=V1,Wo[Gt.CIRC]=Cc,Wo[Gt.ELIP]=Cc,Wo[Gt.RECT]=lL,Wo[Gt.RREC]=uL,Wo),Z_=[],yu=[],J_=function(){function e(t,r,n,i){r===void 0&&(r=null),n===void 0&&(n=null),i===void 0&&(i=null),this.points=[],this.holes=[],this.shape=t,this.lineStyle=n,this.fillStyle=r,this.matrix=i,this.type=t.type}return e.prototype.clone=function(){return new e(this.shape,this.fillStyle,this.lineStyle,this.matrix)},e.prototype.destroy=function(){this.shape=null,this.holes.length=0,this.holes=null,this.points.length=0,this.points=null,this.lineStyle=null,this.fillStyle=null},e}(),ts=new Pe,dL=function(e){z1(t,e);function t(){var r=e.call(this)||this;return r.closePointEps=1e-4,r.boundsPadding=0,r.uvsFloat32=null,r.indicesUint16=null,r.batchable=!1,r.points=[],r.colors=[],r.uvs=[],r.indices=[],r.textureIds=[],r.graphicsData=[],r.drawCalls=[],r.batchDirty=-1,r.batches=[],r.dirty=0,r.cacheDirty=-1,r.clearDirty=0,r.shapeIndex=0,r._bounds=new wc,r.boundsDirty=-1,r}return Object.defineProperty(t.prototype,"bounds",{get:function(){return this.updateBatches(),this.boundsDirty!==this.dirty&&(this.boundsDirty=this.dirty,this.calculateBounds()),this._bounds},enumerable:!1,configurable:!0}),t.prototype.invalidate=function(){this.boundsDirty=-1,this.dirty++,this.batchDirty++,this.shapeIndex=0,this.points.length=0,this.colors.length=0,this.uvs.length=0,this.indices.length=0,this.textureIds.length=0;for(var r=0;r<this.drawCalls.length;r++)this.drawCalls[r].texArray.clear(),yu.push(this.drawCalls[r]);this.drawCalls.length=0;for(var r=0;r<this.batches.length;r++){var n=this.batches[r];n.reset(),Z_.push(n)}this.batches.length=0},t.prototype.clear=function(){return this.graphicsData.length>0&&(this.invalidate(),this.clearDirty++,this.graphicsData.length=0),this},t.prototype.drawShape=function(r,n,i,o){n===void 0&&(n=null),i===void 0&&(i=null),o===void 0&&(o=null);var a=new J_(r,n,i,o);return this.graphicsData.push(a),this.dirty++,this},t.prototype.drawHole=function(r,n){if(n===void 0&&(n=null),!this.graphicsData.length)return null;var i=new J_(r,null,null,n),o=this.graphicsData[this.graphicsData.length-1];return i.lineStyle=o.lineStyle,o.holes.push(i),this.dirty++,this},t.prototype.destroy=function(){e.prototype.destroy.call(this);for(var r=0;r<this.graphicsData.length;++r)this.graphicsData[r].destroy();this.points.length=0,this.points=null,this.colors.length=0,this.colors=null,this.uvs.length=0,this.uvs=null,this.indices.length=0,this.indices=null,this.indexBuffer.destroy(),this.indexBuffer=null,this.graphicsData.length=0,this.graphicsData=null,this.drawCalls.length=0,this.drawCalls=null,this.batches.length=0,this.batches=null,this._bounds=null},t.prototype.containsPoint=function(r){for(var n=this.graphicsData,i=0;i<n.length;++i){var o=n[i];if(o.fillStyle.visible&&o.shape&&(o.matrix?o.matrix.applyInverse(r,ts):ts.copyFrom(r),o.shape.contains(ts.x,ts.y))){var a=!1;if(o.holes)for(var s=0;s<o.holes.length;s++){var l=o.holes[s];if(l.shape.contains(ts.x,ts.y)){a=!0;break}}if(!a)return!0}}return!1},t.prototype.updateBatches=function(){if(!this.graphicsData.length){this.batchable=!0;return}if(this.validateBatching()){this.cacheDirty=this.dirty;var r=this.uvs,n=this.graphicsData,i=null,o=null;this.batches.length>0&&(i=this.batches[this.batches.length-1],o=i.style);for(var a=this.shapeIndex;a<n.length;a++){this.shapeIndex++;var s=n[a],l=s.fillStyle,u=s.lineStyle,c=Ch[s.type];c.build(s),s.matrix&&this.transformPoints(s.points,s.matrix),(l.visible||u.visible)&&this.processHoles(s.holes);for(var f=0;f<2;f++){var h=f===0?l:u;if(h.visible){var d=h.texture.baseTexture,m=this.indices.length,g=this.points.length/2;d.wrapMode=Ln.REPEAT,f===0?this.processFill(s):this.processLine(s);var p=this.points.length/2-g;p!==0&&(i&&!this._compareStyles(o,h)&&(i.end(m,g),i=null),i||(i=Z_.pop()||new hL,i.begin(h,m,g),this.batches.push(i),o=h),this.addUvs(this.points,r,h.texture,g,p,h.matrix))}}}var v=this.indices.length,y=this.points.length/2;if(i&&i.end(v,y),this.batches.length===0){this.batchable=!0;return}var _=y>65535;this.indicesUint16&&this.indices.length===this.indicesUint16.length&&_===this.indicesUint16.BYTES_PER_ELEMENT>2?this.indicesUint16.set(this.indices):this.indicesUint16=_?new Uint32Array(this.indices):new Uint16Array(this.indices),this.batchable=this.isBatchable(),this.batchable?this.packBatches():this.buildDrawCalls()}},t.prototype._compareStyles=function(r,n){return!(!r||!n||r.texture.baseTexture!==n.texture.baseTexture||r.color+r.alpha!==n.color+n.alpha||!!r.native!=!!n.native)},t.prototype.validateBatching=function(){if(this.dirty===this.cacheDirty||!this.graphicsData.length)return!1;for(var r=0,n=this.graphicsData.length;r<n;r++){var i=this.graphicsData[r],o=i.fillStyle,a=i.lineStyle;if(o&&!o.texture.baseTexture.valid||a&&!a.texture.baseTexture.valid)return!1}return!0},t.prototype.packBatches=function(){this.batchDirty++,this.uvsFloat32=new Float32Array(this.uvs);for(var r=this.batches,n=0,i=r.length;n<i;n++)for(var o=r[n],a=0;a<o.size;a++){var s=o.start+a;this.indicesUint16[s]=this.indicesUint16[s]-o.attribStart}},t.prototype.isBatchable=function(){if(this.points.length>65535*2)return!1;for(var r=this.batches,n=0;n<r.length;n++)if(r[n].style.native)return!1;return this.points.length<t.BATCHABLE_SIZE*2},t.prototype.buildDrawCalls=function(){for(var r=++Le._globalBatch,n=0;n<this.drawCalls.length;n++)this.drawCalls[n].texArray.clear(),yu.push(this.drawCalls[n]);this.drawCalls.length=0;var i=this.colors,o=this.textureIds,a=yu.pop();a||(a=new Ed,a.texArray=new Td),a.texArray.count=0,a.start=0,a.size=0,a.type=pn.TRIANGLES;var s=0,l=null,u=0,c=!1,f=pn.TRIANGLES,h=0;this.drawCalls.push(a);for(var n=0;n<this.batches.length;n++){var d=this.batches[n],m=8,g=d.style,p=g.texture.baseTexture;c!==!!g.native&&(c=!!g.native,f=c?pn.LINES:pn.TRIANGLES,l=null,s=m,r++),l!==p&&(l=p,p._batchEnabled!==r&&(s===m&&(r++,s=0,a.size>0&&(a=yu.pop(),a||(a=new Ed,a.texArray=new Td),this.drawCalls.push(a)),a.start=h,a.size=0,a.texArray.count=0,a.type=f),p.touched=1,p._batchEnabled=r,p._batchLocation=s,p.wrapMode=Ln.REPEAT,a.texArray.elements[a.texArray.count++]=p,s++)),a.size+=d.size,h+=d.size,u=p._batchLocation,this.addColors(i,g.color,g.alpha,d.attribSize,d.attribStart),this.addTextureIds(o,u,d.attribSize,d.attribStart)}Le._globalBatch=r,this.packAttributes()},t.prototype.packAttributes=function(){for(var r=this.points,n=this.uvs,i=this.colors,o=this.textureIds,a=new ArrayBuffer(r.length*3*4),s=new Float32Array(a),l=new Uint32Array(a),u=0,c=0;c<r.length/2;c++)s[u++]=r[c*2],s[u++]=r[c*2+1],s[u++]=n[c*2],s[u++]=n[c*2+1],l[u++]=i[c],s[u++]=o[c];this._buffer.update(a),this._indexBuffer.update(this.indicesUint16)},t.prototype.processFill=function(r){if(r.holes.length)V1.triangulate(r,this);else{var n=Ch[r.type];n.triangulate(r,this)}},t.prototype.processLine=function(r){Y_(r,this);for(var n=0;n<r.holes.length;n++)Y_(r.holes[n],this)},t.prototype.processHoles=function(r){for(var n=0;n<r.length;n++){var i=r[n],o=Ch[i.type];o.build(i),i.matrix&&this.transformPoints(i.points,i.matrix)}},t.prototype.calculateBounds=function(){var r=this._bounds;r.clear(),r.addVertexData(this.points,0,this.points.length),r.pad(this.boundsPadding,this.boundsPadding)},t.prototype.transformPoints=function(r,n){for(var i=0;i<r.length/2;i++){var o=r[i*2],a=r[i*2+1];r[i*2]=n.a*o+n.c*a+n.tx,r[i*2+1]=n.b*o+n.d*a+n.ty}},t.prototype.addColors=function(r,n,i,o,a){a===void 0&&(a=0);var s=(n>>16)+(n&65280)+((n&255)<<16),l=Lp(s,i);r.length=Math.max(r.length,a+o);for(var u=0;u<o;u++)r[a+u]=l},t.prototype.addTextureIds=function(r,n,i,o){o===void 0&&(o=0),r.length=Math.max(r.length,o+i);for(var a=0;a<i;a++)r[o+a]=n},t.prototype.addUvs=function(r,n,i,o,a,s){s===void 0&&(s=null);for(var l=0,u=n.length,c=i.frame;l<a;){var f=r[(o+l)*2],h=r[(o+l)*2+1];if(s){var d=s.a*f+s.c*h+s.tx;h=s.b*f+s.d*h+s.ty,f=d}l++,n.push(f/c.width,h/c.height)}var m=i.baseTexture;(c.width<m.width||c.height<m.height)&&this.adjustUvs(n,i,u,a)},t.prototype.adjustUvs=function(r,n,i,o){for(var a=n.baseTexture,s=1e-6,l=i+o*2,u=n.frame,c=u.width/a.width,f=u.height/a.height,h=u.x/u.width,d=u.y/u.height,m=Math.floor(r[i]+s),g=Math.floor(r[i+1]+s),p=i+2;p<l;p+=2)m=Math.min(m,Math.floor(r[p]+s)),g=Math.min(g,Math.floor(r[p+1]+s));h-=m,d-=g;for(var p=i;p<l;p+=2)r[p]=(r[p]+h)*c,r[p+1]=(r[p+1]+d)*f},t.BATCHABLE_SIZE=100,t}(j1),pL=function(e){z1(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.width=0,r.alignment=.5,r.native=!1,r.cap=Fi.BUTT,r.join=ei.MITER,r.miterLimit=10,r}return t.prototype.clone=function(){var r=new t;return r.color=this.color,r.alpha=this.alpha,r.texture=this.texture,r.matrix=this.matrix,r.visible=this.visible,r.width=this.width,r.alignment=this.alignment,r.native=this.native,r.cap=this.cap,r.join=this.join,r.miterLimit=this.miterLimit,r},t.prototype.reset=function(){e.prototype.reset.call(this),this.color=0,this.alignment=.5,this.width=0,this.native=!1},t}(G1),Bse=new Float32Array(3),Rg={},Pc=function(e){z1(t,e);function t(r){r===void 0&&(r=null);var n=e.call(this)||this;return n.shader=null,n.pluginName="batch",n.currentPath=null,n.batches=[],n.batchTint=-1,n.batchDirty=-1,n.vertexData=null,n._fillStyle=new G1,n._lineStyle=new pL,n._matrix=null,n._holeMode=!1,n.state=Go.for2d(),n._geometry=r||new dL,n._geometry.refCount++,n._transformID=-1,n.tint=16777215,n.blendMode=ce.NORMAL,n}return Object.defineProperty(t.prototype,"geometry",{get:function(){return this._geometry},enumerable:!1,configurable:!0}),t.prototype.clone=function(){return this.finishPoly(),new t(this._geometry)},Object.defineProperty(t.prototype,"blendMode",{get:function(){return this.state.blendMode},set:function(r){this.state.blendMode=r},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"tint",{get:function(){return this._tint},set:function(r){this._tint=r},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"fill",{get:function(){return this._fillStyle},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"line",{get:function(){return this._lineStyle},enumerable:!1,configurable:!0}),t.prototype.lineStyle=function(r,n,i,o,a){return r===void 0&&(r=null),n===void 0&&(n=0),i===void 0&&(i=1),o===void 0&&(o=.5),a===void 0&&(a=!1),typeof r=="number"&&(r={width:r,color:n,alpha:i,alignment:o,native:a}),this.lineTextureStyle(r)},t.prototype.lineTextureStyle=function(r){r=Object.assign({width:0,texture:pe.WHITE,color:r&&r.texture?16777215:0,alpha:1,matrix:null,alignment:.5,native:!1,cap:Fi.BUTT,join:ei.MITER,miterLimit:10},r),this.currentPath&&this.startPoly();var n=r.width>0&&r.alpha>0;return n?(r.matrix&&(r.matrix=r.matrix.clone(),r.matrix.invert()),Object.assign(this._lineStyle,{visible:n},r)):this._lineStyle.reset(),this},t.prototype.startPoly=function(){if(this.currentPath){var r=this.currentPath.points,n=this.currentPath.points.length;n>2&&(this.drawShape(this.currentPath),this.currentPath=new zu,this.currentPath.closeStroke=!1,this.currentPath.points.push(r[n-2],r[n-1]))}else this.currentPath=new zu,this.currentPath.closeStroke=!1},t.prototype.finishPoly=function(){this.currentPath&&(this.currentPath.points.length>2?(this.drawShape(this.currentPath),this.currentPath=null):this.currentPath.points.length=0)},t.prototype.moveTo=function(r,n){return this.startPoly(),this.currentPath.points[0]=r,this.currentPath.points[1]=n,this},t.prototype.lineTo=function(r,n){this.currentPath||this.moveTo(0,0);var i=this.currentPath.points,o=i[i.length-2],a=i[i.length-1];return(o!==r||a!==n)&&i.push(r,n),this},t.prototype._initCurve=function(r,n){r===void 0&&(r=0),n===void 0&&(n=0),this.currentPath?this.currentPath.points.length===0&&(this.currentPath.points=[r,n]):this.moveTo(r,n)},t.prototype.quadraticCurveTo=function(r,n,i,o){this._initCurve();var a=this.currentPath.points;return a.length===0&&this.moveTo(0,0),fL.curveTo(r,n,i,o,a),this},t.prototype.bezierCurveTo=function(r,n,i,o,a,s){return this._initCurve(),cL.curveTo(r,n,i,o,a,s,this.currentPath.points),this},t.prototype.arcTo=function(r,n,i,o,a){this._initCurve(r,n);var s=this.currentPath.points,l=K_.curveTo(r,n,i,o,a,s);if(l){var u=l.cx,c=l.cy,f=l.radius,h=l.startAngle,d=l.endAngle,m=l.anticlockwise;this.arc(u,c,f,h,d,m)}return this},t.prototype.arc=function(r,n,i,o,a,s){if(s===void 0&&(s=!1),o===a)return this;!s&&a<=o?a+=Sc:s&&o<=a&&(o+=Sc);var l=a-o;if(l===0)return this;var u=r+Math.cos(o)*i,c=n+Math.sin(o)*i,f=this._geometry.closePointEps,h=this.currentPath?this.currentPath.points:null;if(h){var d=Math.abs(h[h.length-2]-u),m=Math.abs(h[h.length-1]-c);d<f&&m<f||h.push(u,c)}else this.moveTo(u,c),h=this.currentPath.points;return K_.arc(u,c,r,n,i,o,a,s,h),this},t.prototype.beginFill=function(r,n){return r===void 0&&(r=0),n===void 0&&(n=1),this.beginTextureFill({texture:pe.WHITE,color:r,alpha:n})},t.prototype.beginTextureFill=function(r){r=Object.assign({texture:pe.WHITE,color:16777215,alpha:1,matrix:null},r),this.currentPath&&this.startPoly();var n=r.alpha>0;return n?(r.matrix&&(r.matrix=r.matrix.clone(),r.matrix.invert()),Object.assign(this._fillStyle,{visible:n},r)):this._fillStyle.reset(),this},t.prototype.endFill=function(){return this.finishPoly(),this._fillStyle.reset(),this},t.prototype.drawRect=function(r,n,i,o){return this.drawShape(new Fe(r,n,i,o))},t.prototype.drawRoundedRect=function(r,n,i,o,a){return this.drawShape(new uk(r,n,i,o,a))},t.prototype.drawCircle=function(r,n,i){return this.drawShape(new sk(r,n,i))},t.prototype.drawEllipse=function(r,n,i,o){return this.drawShape(new lk(r,n,i,o))},t.prototype.drawPolygon=function(){for(var r=arguments,n=[],i=0;i<arguments.length;i++)n[i]=r[i];var o,a=!0,s=n[0];s.points?(a=s.closeStroke,o=s.points):Array.isArray(n[0])?o=n[0]:o=n;var l=new zu(o);return l.closeStroke=a,this.drawShape(l),this},t.prototype.drawShape=function(r){return this._holeMode?this._geometry.drawHole(r,this._matrix):this._geometry.drawShape(r,this._fillStyle.clone(),this._lineStyle.clone(),this._matrix),this},t.prototype.clear=function(){return this._geometry.clear(),this._lineStyle.reset(),this._fillStyle.reset(),this._boundsID++,this._matrix=null,this._holeMode=!1,this.currentPath=null,this},t.prototype.isFastRect=function(){var r=this._geometry.graphicsData;return r.length===1&&r[0].shape.type===Gt.RECT&&!r[0].matrix&&!r[0].holes.length&&!(r[0].lineStyle.visible&&r[0].lineStyle.width)},t.prototype._render=function(r){this.finishPoly();var n=this._geometry;n.updateBatches(),n.batchable?(this.batchDirty!==n.batchDirty&&this._populateBatches(),this._renderBatched(r)):(r.batch.flush(),this._renderDirect(r))},t.prototype._populateBatches=function(){var r=this._geometry,n=this.blendMode,i=r.batches.length;this.batchTint=-1,this._transformID=-1,this.batchDirty=r.batchDirty,this.batches.length=i,this.vertexData=new Float32Array(r.points);for(var o=0;o<i;o++){var a=r.batches[o],s=a.style.color,l=new Float32Array(this.vertexData.buffer,a.attribStart*4*2,a.attribSize*2),u=new Float32Array(r.uvsFloat32.buffer,a.attribStart*4*2,a.attribSize*2),c=new Uint16Array(r.indicesUint16.buffer,a.start*2,a.size),f={vertexData:l,blendMode:n,indices:c,uvs:u,_batchRGB:Qt(s),_tintRGB:s,_texture:a.style.texture,alpha:a.style.alpha,worldAlpha:1};this.batches[o]=f}},t.prototype._renderBatched=function(r){if(this.batches.length){r.batch.setObjectRenderer(r.plugins[this.pluginName]),this.calculateVertices(),this.calculateTints();for(var n=0,i=this.batches.length;n<i;n++){var o=this.batches[n];o.worldAlpha=this.worldAlpha*o.alpha,r.plugins[this.pluginName].render(o)}}},t.prototype._renderDirect=function(r){var n=this._resolveDirectShader(r),i=this._geometry,o=this.tint,a=this.worldAlpha,s=n.uniforms,l=i.drawCalls;s.translationMatrix=this.transform.worldTransform,s.tint[0]=(o>>16&255)/255*a,s.tint[1]=(o>>8&255)/255*a,s.tint[2]=(o&255)/255*a,s.tint[3]=a,r.shader.bind(n),r.geometry.bind(i,n),r.state.set(this.state);for(var u=0,c=l.length;u<c;u++)this._renderDrawCallDirect(r,i.drawCalls[u])},t.prototype._renderDrawCallDirect=function(r,n){for(var i=n.texArray,o=n.type,a=n.size,s=n.start,l=i.count,u=0;u<l;u++)r.texture.bind(i.elements[u],u);r.geometry.draw(o,a,s)},t.prototype._resolveDirectShader=function(r){var n=this.shader,i=this.pluginName;if(!n){if(!Rg[i]){for(var o=r.plugins[i].MAX_TEXTURES,a=new Int32Array(o),s=0;s<o;s++)a[s]=s;var l={tint:new Float32Array([1,1,1,1]),translationMatrix:new gt,default:wo.from({uSamplers:a},!0)},u=r.plugins[i]._shader.program;Rg[i]=new Bi(u,l)}n=Rg[i]}return n},t.prototype._calculateBounds=function(){this.finishPoly();var r=this._geometry;if(r.graphicsData.length){var n=r.bounds,i=n.minX,o=n.minY,a=n.maxX,s=n.maxY;this._bounds.addFrame(this.transform,i,o,a,s)}},t.prototype.containsPoint=function(r){return this.worldTransform.applyInverse(r,t._TEMP_POINT),this._geometry.containsPoint(t._TEMP_POINT)},t.prototype.calculateTints=function(){if(this.batchTint!==this.tint){this.batchTint=this.tint;for(var r=Qt(this.tint,Bse),n=0;n<this.batches.length;n++){var i=this.batches[n],o=i._batchRGB,a=r[0]*o[0]*255,s=r[1]*o[1]*255,l=r[2]*o[2]*255,u=(a<<16)+(s<<8)+(l|0);i._tintRGB=(u>>16)+(u&65280)+((u&255)<<16)}}},t.prototype.calculateVertices=function(){var r=this.transform._worldID;if(this._transformID!==r){this._transformID=r;for(var n=this.transform.worldTransform,i=n.a,o=n.b,a=n.c,s=n.d,l=n.tx,u=n.ty,c=this._geometry.points,f=this.vertexData,h=0,d=0;d<c.length;d+=2){var m=c[d],g=c[d+1];f[h++]=i*m+a*g+l,f[h++]=s*g+o*m+u}}},t.prototype.closePath=function(){var r=this.currentPath;return r&&(r.closeStroke=!0,this.finishPoly()),this},t.prototype.setMatrix=function(r){return this._matrix=r,this},t.prototype.beginHole=function(){return this.finishPoly(),this._holeMode=!0,this},t.prototype.endHole=function(){return this.finishPoly(),this._holeMode=!1,this},t.prototype.destroy=function(r){this._geometry.refCount--,this._geometry.refCount===0&&this._geometry.dispose(),this._matrix=null,this.currentPath=null,this._lineStyle.destroy(),this._lineStyle=null,this._fillStyle.destroy(),this._fillStyle=null,this._geometry=null,this.shader=null,this.vertexData=null,this.batches.length=0,this.batches=null,e.prototype.destroy.call(this,r)},t.nextRoundedRectBehavior=!1,t._TEMP_POINT=new Pe,t}(_r),jse={buildPoly:V1,buildCircle:Cc,buildRectangle:lL,buildRoundedRectangle:uL,buildLine:Y_,ArcUtils:K_,BezierUtils:cL,QuadraticUtils:fL,BatchPart:hL,FILL_COMMANDS:Ch,BATCH_POOL:Z_,DRAW_CALL_POOL:yu};/*!
 * @pixi/sprite - v6.5.10
 * Compiled Thu, 06 Jul 2023 15:25:11 UTC
 *
 * @pixi/sprite is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 *//*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var Q_=function(e,t){return Q_=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)n.hasOwnProperty(i)&&(r[i]=n[i])},Q_(e,t)};function Use(e,t){Q_(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}var tu=new Pe,$se=new Uint16Array([0,1,2,0,2,3]),ji=function(e){Use(t,e);function t(r){var n=e.call(this)||this;return n._anchor=new Li(n._onAnchorUpdate,n,r?r.defaultAnchor.x:0,r?r.defaultAnchor.y:0),n._texture=null,n._width=0,n._height=0,n._tint=null,n._tintRGB=null,n.tint=16777215,n.blendMode=ce.NORMAL,n._cachedTint=16777215,n.uvs=null,n.texture=r||pe.EMPTY,n.vertexData=new Float32Array(8),n.vertexTrimmedData=null,n._transformID=-1,n._textureID=-1,n._transformTrimmedID=-1,n._textureTrimmedID=-1,n.indices=$se,n.pluginName="batch",n.isSprite=!0,n._roundPixels=ne.ROUND_PIXELS,n}return t.prototype._onTextureUpdate=function(){this._textureID=-1,this._textureTrimmedID=-1,this._cachedTint=16777215,this._width&&(this.scale.x=ma(this.scale.x)*this._width/this._texture.orig.width),this._height&&(this.scale.y=ma(this.scale.y)*this._height/this._texture.orig.height)},t.prototype._onAnchorUpdate=function(){this._transformID=-1,this._transformTrimmedID=-1},t.prototype.calculateVertices=function(){var r=this._texture;if(!(this._transformID===this.transform._worldID&&this._textureID===r._updateID)){this._textureID!==r._updateID&&(this.uvs=this._texture._uvs.uvsFloat32),this._transformID=this.transform._worldID,this._textureID=r._updateID;var n=this.transform.worldTransform,i=n.a,o=n.b,a=n.c,s=n.d,l=n.tx,u=n.ty,c=this.vertexData,f=r.trim,h=r.orig,d=this._anchor,m=0,g=0,p=0,v=0;if(f?(g=f.x-d._x*h.width,m=g+f.width,v=f.y-d._y*h.height,p=v+f.height):(g=-d._x*h.width,m=g+h.width,v=-d._y*h.height,p=v+h.height),c[0]=i*g+a*v+l,c[1]=s*v+o*g+u,c[2]=i*m+a*v+l,c[3]=s*v+o*m+u,c[4]=i*m+a*p+l,c[5]=s*p+o*m+u,c[6]=i*g+a*p+l,c[7]=s*p+o*g+u,this._roundPixels)for(var y=ne.RESOLUTION,_=0;_<c.length;++_)c[_]=Math.round((c[_]*y|0)/y)}},t.prototype.calculateTrimmedVertices=function(){if(!this.vertexTrimmedData)this.vertexTrimmedData=new Float32Array(8);else if(this._transformTrimmedID===this.transform._worldID&&this._textureTrimmedID===this._texture._updateID)return;this._transformTrimmedID=this.transform._worldID,this._textureTrimmedID=this._texture._updateID;var r=this._texture,n=this.vertexTrimmedData,i=r.orig,o=this._anchor,a=this.transform.worldTransform,s=a.a,l=a.b,u=a.c,c=a.d,f=a.tx,h=a.ty,d=-o._x*i.width,m=d+i.width,g=-o._y*i.height,p=g+i.height;n[0]=s*d+u*g+f,n[1]=c*g+l*d+h,n[2]=s*m+u*g+f,n[3]=c*g+l*m+h,n[4]=s*m+u*p+f,n[5]=c*p+l*m+h,n[6]=s*d+u*p+f,n[7]=c*p+l*d+h},t.prototype._render=function(r){this.calculateVertices(),r.batch.setObjectRenderer(r.plugins[this.pluginName]),r.plugins[this.pluginName].render(this)},t.prototype._calculateBounds=function(){var r=this._texture.trim,n=this._texture.orig;!r||r.width===n.width&&r.height===n.height?(this.calculateVertices(),this._bounds.addQuad(this.vertexData)):(this.calculateTrimmedVertices(),this._bounds.addQuad(this.vertexTrimmedData))},t.prototype.getLocalBounds=function(r){return this.children.length===0?(this._localBounds||(this._localBounds=new wc),this._localBounds.minX=this._texture.orig.width*-this._anchor._x,this._localBounds.minY=this._texture.orig.height*-this._anchor._y,this._localBounds.maxX=this._texture.orig.width*(1-this._anchor._x),this._localBounds.maxY=this._texture.orig.height*(1-this._anchor._y),r||(this._localBoundsRect||(this._localBoundsRect=new Fe),r=this._localBoundsRect),this._localBounds.getRectangle(r)):e.prototype.getLocalBounds.call(this,r)},t.prototype.containsPoint=function(r){this.worldTransform.applyInverse(r,tu);var n=this._texture.orig.width,i=this._texture.orig.height,o=-n*this.anchor.x,a=0;return tu.x>=o&&tu.x<o+n&&(a=-i*this.anchor.y,tu.y>=a&&tu.y<a+i)},t.prototype.destroy=function(r){e.prototype.destroy.call(this,r),this._texture.off("update",this._onTextureUpdate,this),this._anchor=null;var n=typeof r=="boolean"?r:r&&r.texture;if(n){var i=typeof r=="boolean"?r:r&&r.baseTexture;this._texture.destroy(!!i)}this._texture=null},t.from=function(r,n){var i=r instanceof pe?r:pe.from(r,n);return new t(i)},Object.defineProperty(t.prototype,"roundPixels",{get:function(){return this._roundPixels},set:function(r){this._roundPixels!==r&&(this._transformID=-1),this._roundPixels=r},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"width",{get:function(){return Math.abs(this.scale.x)*this._texture.orig.width},set:function(r){var n=ma(this.scale.x)||1;this.scale.x=n*r/this._texture.orig.width,this._width=r},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"height",{get:function(){return Math.abs(this.scale.y)*this._texture.orig.height},set:function(r){var n=ma(this.scale.y)||1;this.scale.y=n*r/this._texture.orig.height,this._height=r},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"anchor",{get:function(){return this._anchor},set:function(r){this._anchor.copyFrom(r)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"tint",{get:function(){return this._tint},set:function(r){this._tint=r,this._tintRGB=(r>>16)+(r&65280)+((r&255)<<16)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"texture",{get:function(){return this._texture},set:function(r){this._texture!==r&&(this._texture&&this._texture.off("update",this._onTextureUpdate,this),this._texture=r||pe.EMPTY,this._cachedTint=16777215,this._textureID=-1,this._textureTrimmedID=-1,r&&(r.baseTexture.valid?this._onTextureUpdate():r.once("update",this._onTextureUpdate,this)))},enumerable:!1,configurable:!0}),t}(_r);/*!
 * @pixi/text - v6.5.10
 * Compiled Thu, 06 Jul 2023 15:25:11 UTC
 *
 * @pixi/text is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 *//*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var e0=function(e,t){return e0=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)n.hasOwnProperty(i)&&(r[i]=n[i])},e0(e,t)};function Gse(e,t){e0(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}var el;(function(e){e[e.LINEAR_VERTICAL=0]="LINEAR_VERTICAL",e[e.LINEAR_HORIZONTAL=1]="LINEAR_HORIZONTAL"})(el||(el={}));var kg={align:"left",breakWords:!1,dropShadow:!1,dropShadowAlpha:1,dropShadowAngle:Math.PI/6,dropShadowBlur:0,dropShadowColor:"black",dropShadowDistance:5,fill:"black",fillGradientType:el.LINEAR_VERTICAL,fillGradientStops:[],fontFamily:"Arial",fontSize:26,fontStyle:"normal",fontVariant:"normal",fontWeight:"normal",letterSpacing:0,lineHeight:0,lineJoin:"miter",miterLimit:10,padding:0,stroke:"black",strokeThickness:0,textBaseline:"alphabetic",trim:!1,whiteSpace:"pre",wordWrap:!1,wordWrapWidth:100,leading:0},zse=["serif","sans-serif","monospace","cursive","fantasy","system-ui"],Ma=function(){function e(t){this.styleID=0,this.reset(),Fg(this,t,t)}return e.prototype.clone=function(){var t={};return Fg(t,this,kg),new e(t)},e.prototype.reset=function(){Fg(this,kg,kg)},Object.defineProperty(e.prototype,"align",{get:function(){return this._align},set:function(t){this._align!==t&&(this._align=t,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"breakWords",{get:function(){return this._breakWords},set:function(t){this._breakWords!==t&&(this._breakWords=t,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"dropShadow",{get:function(){return this._dropShadow},set:function(t){this._dropShadow!==t&&(this._dropShadow=t,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"dropShadowAlpha",{get:function(){return this._dropShadowAlpha},set:function(t){this._dropShadowAlpha!==t&&(this._dropShadowAlpha=t,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"dropShadowAngle",{get:function(){return this._dropShadowAngle},set:function(t){this._dropShadowAngle!==t&&(this._dropShadowAngle=t,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"dropShadowBlur",{get:function(){return this._dropShadowBlur},set:function(t){this._dropShadowBlur!==t&&(this._dropShadowBlur=t,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"dropShadowColor",{get:function(){return this._dropShadowColor},set:function(t){var r=Lg(t);this._dropShadowColor!==r&&(this._dropShadowColor=r,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"dropShadowDistance",{get:function(){return this._dropShadowDistance},set:function(t){this._dropShadowDistance!==t&&(this._dropShadowDistance=t,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"fill",{get:function(){return this._fill},set:function(t){var r=Lg(t);this._fill!==r&&(this._fill=r,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"fillGradientType",{get:function(){return this._fillGradientType},set:function(t){this._fillGradientType!==t&&(this._fillGradientType=t,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"fillGradientStops",{get:function(){return this._fillGradientStops},set:function(t){Vse(this._fillGradientStops,t)||(this._fillGradientStops=t,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"fontFamily",{get:function(){return this._fontFamily},set:function(t){this.fontFamily!==t&&(this._fontFamily=t,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"fontSize",{get:function(){return this._fontSize},set:function(t){this._fontSize!==t&&(this._fontSize=t,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"fontStyle",{get:function(){return this._fontStyle},set:function(t){this._fontStyle!==t&&(this._fontStyle=t,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"fontVariant",{get:function(){return this._fontVariant},set:function(t){this._fontVariant!==t&&(this._fontVariant=t,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"fontWeight",{get:function(){return this._fontWeight},set:function(t){this._fontWeight!==t&&(this._fontWeight=t,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"letterSpacing",{get:function(){return this._letterSpacing},set:function(t){this._letterSpacing!==t&&(this._letterSpacing=t,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"lineHeight",{get:function(){return this._lineHeight},set:function(t){this._lineHeight!==t&&(this._lineHeight=t,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"leading",{get:function(){return this._leading},set:function(t){this._leading!==t&&(this._leading=t,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"lineJoin",{get:function(){return this._lineJoin},set:function(t){this._lineJoin!==t&&(this._lineJoin=t,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"miterLimit",{get:function(){return this._miterLimit},set:function(t){this._miterLimit!==t&&(this._miterLimit=t,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"padding",{get:function(){return this._padding},set:function(t){this._padding!==t&&(this._padding=t,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"stroke",{get:function(){return this._stroke},set:function(t){var r=Lg(t);this._stroke!==r&&(this._stroke=r,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"strokeThickness",{get:function(){return this._strokeThickness},set:function(t){this._strokeThickness!==t&&(this._strokeThickness=t,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"textBaseline",{get:function(){return this._textBaseline},set:function(t){this._textBaseline!==t&&(this._textBaseline=t,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"trim",{get:function(){return this._trim},set:function(t){this._trim!==t&&(this._trim=t,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"whiteSpace",{get:function(){return this._whiteSpace},set:function(t){this._whiteSpace!==t&&(this._whiteSpace=t,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"wordWrap",{get:function(){return this._wordWrap},set:function(t){this._wordWrap!==t&&(this._wordWrap=t,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"wordWrapWidth",{get:function(){return this._wordWrapWidth},set:function(t){this._wordWrapWidth!==t&&(this._wordWrapWidth=t,this.styleID++)},enumerable:!1,configurable:!0}),e.prototype.toFontString=function(){var t=typeof this.fontSize=="number"?this.fontSize+"px":this.fontSize,r=this.fontFamily;Array.isArray(this.fontFamily)||(r=this.fontFamily.split(","));for(var n=r.length-1;n>=0;n--){var i=r[n].trim();!/([\"\'])[^\'\"]+\1/.test(i)&&zse.indexOf(i)<0&&(i='"'+i+'"'),r[n]=i}return this.fontStyle+" "+this.fontVariant+" "+this.fontWeight+" "+t+" "+r.join(",")},e}();function zP(e){return typeof e=="number"?l1(e):(typeof e=="string"&&e.indexOf("0x")===0&&(e=e.replace("0x","#")),e)}function Lg(e){if(Array.isArray(e)){for(var t=0;t<e.length;++t)e[t]=zP(e[t]);return e}else return zP(e)}function Vse(e,t){if(!Array.isArray(e)||!Array.isArray(t)||e.length!==t.length)return!1;for(var r=0;r<e.length;++r)if(e[r]!==t[r])return!1;return!0}function Fg(e,t,r){for(var n in r)Array.isArray(t[n])?e[n]=t[n].slice():e[n]=t[n]}var qf={willReadFrequently:!0},jn=function(){function e(t,r,n,i,o,a,s,l,u){this.text=t,this.style=r,this.width=n,this.height=i,this.lines=o,this.lineWidths=a,this.lineHeight=s,this.maxLineWidth=l,this.fontProperties=u}return e.measureText=function(t,r,n,i){i===void 0&&(i=e._canvas),n=n??r.wordWrap;var o=r.toFontString(),a=e.measureFont(o);a.fontSize===0&&(a.fontSize=r.fontSize,a.ascent=r.fontSize);var s=i.getContext("2d",qf);s.font=o;for(var l=n?e.wordWrap(t,r,i):t,u=l.split(/(?:\r\n|\r|\n)/),c=new Array(u.length),f=0,h=0;h<u.length;h++){var d=s.measureText(u[h]).width+(u[h].length-1)*r.letterSpacing;c[h]=d,f=Math.max(f,d)}var m=f+r.strokeThickness;r.dropShadow&&(m+=r.dropShadowDistance);var g=r.lineHeight||a.fontSize+r.strokeThickness,p=Math.max(g,a.fontSize+r.strokeThickness)+(u.length-1)*(g+r.leading);return r.dropShadow&&(p+=r.dropShadowDistance),new e(t,r,m,p,u,c,g+r.leading,f,a)},e.wordWrap=function(t,r,n){n===void 0&&(n=e._canvas);for(var i=n.getContext("2d",qf),o=0,a="",s="",l=Object.create(null),u=r.letterSpacing,c=r.whiteSpace,f=e.collapseSpaces(c),h=e.collapseNewlines(c),d=!f,m=r.wordWrapWidth+u,g=e.tokenize(t),p=0;p<g.length;p++){var v=g[p];if(e.isNewline(v)){if(!h){s+=e.addLine(a),d=!f,a="",o=0;continue}v=" "}if(f){var y=e.isBreakingSpace(v),_=e.isBreakingSpace(a[a.length-1]);if(y&&_)continue}var x=e.getFromCache(v,u,l,i);if(x>m)if(a!==""&&(s+=e.addLine(a),a="",o=0),e.canBreakWords(v,r.breakWords))for(var b=e.wordWrapSplit(v),S=0;S<b.length;S++){for(var E=b[S],I=1;b[S+I];){var A=b[S+I],O=E[E.length-1];if(!e.canBreakChars(O,A,v,S,r.breakWords))E+=A;else break;I++}S+=E.length-1;var D=e.getFromCache(E,u,l,i);D+o>m&&(s+=e.addLine(a),d=!1,a="",o=0),a+=E,o+=D}else{a.length>0&&(s+=e.addLine(a),a="",o=0);var B=p===g.length-1;s+=e.addLine(v,!B),d=!1,a="",o=0}else x+o>m&&(d=!1,s+=e.addLine(a),a="",o=0),(a.length>0||!e.isBreakingSpace(v)||d)&&(a+=v,o+=x)}return s+=e.addLine(a,!1),s},e.addLine=function(t,r){return r===void 0&&(r=!0),t=e.trimRight(t),t=r?t+`
`:t,t},e.getFromCache=function(t,r,n,i){var o=n[t];if(typeof o!="number"){var a=t.length*r;o=i.measureText(t).width+a,n[t]=o}return o},e.collapseSpaces=function(t){return t==="normal"||t==="pre-line"},e.collapseNewlines=function(t){return t==="normal"},e.trimRight=function(t){if(typeof t!="string")return"";for(var r=t.length-1;r>=0;r--){var n=t[r];if(!e.isBreakingSpace(n))break;t=t.slice(0,-1)}return t},e.isNewline=function(t){return typeof t!="string"?!1:e._newlines.indexOf(t.charCodeAt(0))>=0},e.isBreakingSpace=function(t,r){return typeof t!="string"?!1:e._breakingSpaces.indexOf(t.charCodeAt(0))>=0},e.tokenize=function(t){var r=[],n="";if(typeof t!="string")return r;for(var i=0;i<t.length;i++){var o=t[i],a=t[i+1];if(e.isBreakingSpace(o,a)||e.isNewline(o)){n!==""&&(r.push(n),n=""),r.push(o);continue}n+=o}return n!==""&&r.push(n),r},e.canBreakWords=function(t,r){return r},e.canBreakChars=function(t,r,n,i,o){return!0},e.wordWrapSplit=function(t){return t.split("")},e.measureFont=function(t){if(e._fonts[t])return e._fonts[t];var r={ascent:0,descent:0,fontSize:0},n=e._canvas,i=e._context;i.font=t;var o=e.METRICS_STRING+e.BASELINE_SYMBOL,a=Math.ceil(i.measureText(o).width),s=Math.ceil(i.measureText(e.BASELINE_SYMBOL).width),l=Math.ceil(e.HEIGHT_MULTIPLIER*s);s=s*e.BASELINE_MULTIPLIER|0,n.width=a,n.height=l,i.fillStyle="#f00",i.fillRect(0,0,a,l),i.font=t,i.textBaseline="alphabetic",i.fillStyle="#000",i.fillText(o,0,s);var u=i.getImageData(0,0,a,l).data,c=u.length,f=a*4,h=0,d=0,m=!1;for(h=0;h<s;++h){for(var g=0;g<f;g+=4)if(u[d+g]!==255){m=!0;break}if(!m)d+=f;else break}for(r.ascent=s-h,d=c-f,m=!1,h=l;h>s;--h){for(var g=0;g<f;g+=4)if(u[d+g]!==255){m=!0;break}if(!m)d-=f;else break}return r.descent=h-s,r.fontSize=r.ascent+r.descent,e._fonts[t]=r,r},e.clearMetrics=function(t){t===void 0&&(t=""),t?delete e._fonts[t]:e._fonts={}},Object.defineProperty(e,"_canvas",{get:function(){if(!e.__canvas){var t=void 0;try{var r=new OffscreenCanvas(0,0),n=r.getContext("2d",qf);if(n&&n.measureText)return e.__canvas=r,r;t=ne.ADAPTER.createCanvas()}catch{t=ne.ADAPTER.createCanvas()}t.width=t.height=10,e.__canvas=t}return e.__canvas},enumerable:!1,configurable:!0}),Object.defineProperty(e,"_context",{get:function(){return e.__context||(e.__context=e._canvas.getContext("2d",qf)),e.__context},enumerable:!1,configurable:!0}),e}();jn._fonts={};jn.METRICS_STRING="|q";jn.BASELINE_SYMBOL="M";jn.BASELINE_MULTIPLIER=1.4;jn.HEIGHT_MULTIPLIER=2;jn._newlines=[10,13];jn._breakingSpaces=[9,32,8192,8193,8194,8195,8196,8197,8198,8200,8201,8202,8287,12288];var Hse={texture:!0,children:!1,baseTexture:!0},H1=function(e){Gse(t,e);function t(r,n,i){var o=this,a=!1;i||(i=ne.ADAPTER.createCanvas(),a=!0),i.width=3,i.height=3;var s=pe.from(i);return s.orig=new Fe,s.trim=new Fe,o=e.call(this,s)||this,o._ownCanvas=a,o.canvas=i,o.context=i.getContext("2d",{willReadFrequently:!0}),o._resolution=ne.RESOLUTION,o._autoResolution=!0,o._text=null,o._style=null,o._styleListener=null,o._font="",o.text=r,o.style=n,o.localStyleID=-1,o}return t.prototype.updateText=function(r){var n=this._style;if(this.localStyleID!==n.styleID&&(this.dirty=!0,this.localStyleID=n.styleID),!(!this.dirty&&r)){this._font=this._style.toFontString();var i=this.context,o=jn.measureText(this._text||" ",this._style,this._style.wordWrap,this.canvas),a=o.width,s=o.height,l=o.lines,u=o.lineHeight,c=o.lineWidths,f=o.maxLineWidth,h=o.fontProperties;this.canvas.width=Math.ceil(Math.ceil(Math.max(1,a)+n.padding*2)*this._resolution),this.canvas.height=Math.ceil(Math.ceil(Math.max(1,s)+n.padding*2)*this._resolution),i.scale(this._resolution,this._resolution),i.clearRect(0,0,this.canvas.width,this.canvas.height),i.font=this._font,i.lineWidth=n.strokeThickness,i.textBaseline=n.textBaseline,i.lineJoin=n.lineJoin,i.miterLimit=n.miterLimit;for(var d,m,g=n.dropShadow?2:1,p=0;p<g;++p){var v=n.dropShadow&&p===0,y=v?Math.ceil(Math.max(1,s)+n.padding*2):0,_=y*this._resolution;if(v){i.fillStyle="black",i.strokeStyle="black";var x=n.dropShadowColor,b=Qt(typeof x=="number"?x:u1(x)),S=n.dropShadowBlur*this._resolution,E=n.dropShadowDistance*this._resolution;i.shadowColor="rgba("+b[0]*255+","+b[1]*255+","+b[2]*255+","+n.dropShadowAlpha+")",i.shadowBlur=S,i.shadowOffsetX=Math.cos(n.dropShadowAngle)*E,i.shadowOffsetY=Math.sin(n.dropShadowAngle)*E+_}else i.fillStyle=this._generateFillStyle(n,l,o),i.strokeStyle=n.stroke,i.shadowColor="black",i.shadowBlur=0,i.shadowOffsetX=0,i.shadowOffsetY=0;var I=(u-h.fontSize)/2;(!t.nextLineHeightBehavior||u-h.fontSize<0)&&(I=0);for(var A=0;A<l.length;A++)d=n.strokeThickness/2,m=n.strokeThickness/2+A*u+h.ascent+I,n.align==="right"?d+=f-c[A]:n.align==="center"&&(d+=(f-c[A])/2),n.stroke&&n.strokeThickness&&this.drawLetterSpacing(l[A],d+n.padding,m+n.padding-y,!0),n.fill&&this.drawLetterSpacing(l[A],d+n.padding,m+n.padding-y)}this.updateTexture()}},t.prototype.drawLetterSpacing=function(r,n,i,o){o===void 0&&(o=!1);var a=this._style,s=a.letterSpacing,l=t.experimentalLetterSpacing&&("letterSpacing"in CanvasRenderingContext2D.prototype||"textLetterSpacing"in CanvasRenderingContext2D.prototype);if(s===0||l){l&&(this.context.letterSpacing=s,this.context.textLetterSpacing=s),o?this.context.strokeText(r,n,i):this.context.fillText(r,n,i);return}for(var u=n,c=Array.from?Array.from(r):r.split(""),f=this.context.measureText(r).width,h=0,d=0;d<c.length;++d){var m=c[d];o?this.context.strokeText(m,u,i):this.context.fillText(m,u,i);for(var g="",p=d+1;p<c.length;++p)g+=c[p];h=this.context.measureText(g).width,u+=f-h+s,f=h}},t.prototype.updateTexture=function(){var r=this.canvas;if(this._style.trim){var n=nk(r);n.data&&(r.width=n.width,r.height=n.height,this.context.putImageData(n.data,0,0))}var i=this._texture,o=this._style,a=o.trim?0:o.padding,s=i.baseTexture;i.trim.width=i._frame.width=r.width/this._resolution,i.trim.height=i._frame.height=r.height/this._resolution,i.trim.x=-a,i.trim.y=-a,i.orig.width=i._frame.width-a*2,i.orig.height=i._frame.height-a*2,this._onTextureUpdate(),s.setRealSize(r.width,r.height,this._resolution),i.updateUvs(),this.dirty=!1},t.prototype._render=function(r){this._autoResolution&&this._resolution!==r.resolution&&(this._resolution=r.resolution,this.dirty=!0),this.updateText(!0),e.prototype._render.call(this,r)},t.prototype.updateTransform=function(){this.updateText(!0),e.prototype.updateTransform.call(this)},t.prototype.getBounds=function(r,n){return this.updateText(!0),this._textureID===-1&&(r=!1),e.prototype.getBounds.call(this,r,n)},t.prototype.getLocalBounds=function(r){return this.updateText(!0),e.prototype.getLocalBounds.call(this,r)},t.prototype._calculateBounds=function(){this.calculateVertices(),this._bounds.addQuad(this.vertexData)},t.prototype._generateFillStyle=function(r,n,i){var o=r.fill;if(Array.isArray(o)){if(o.length===1)return o[0]}else return o;var a,s=r.dropShadow?r.dropShadowDistance:0,l=r.padding||0,u=this.canvas.width/this._resolution-s-l*2,c=this.canvas.height/this._resolution-s-l*2,f=o.slice(),h=r.fillGradientStops.slice();if(!h.length)for(var d=f.length+1,m=1;m<d;++m)h.push(m/d);if(f.unshift(o[0]),h.unshift(0),f.push(o[o.length-1]),h.push(1),r.fillGradientType===el.LINEAR_VERTICAL){a=this.context.createLinearGradient(u/2,l,u/2,c+l);for(var g=i.fontProperties.fontSize+r.strokeThickness,m=0;m<n.length;m++){var p=i.lineHeight*(m-1)+g,v=i.lineHeight*m,y=v;m>0&&p>v&&(y=(v+p)/2);var _=v+g,x=i.lineHeight*(m+1),b=_;m+1<n.length&&x<_&&(b=(_+x)/2);for(var S=(b-y)/c,E=0;E<f.length;E++){var I=0;typeof h[E]=="number"?I=h[E]:I=E/f.length;var A=Math.min(1,Math.max(0,y/c+I*S));A=Number(A.toFixed(5)),a.addColorStop(A,f[E])}}}else{a=this.context.createLinearGradient(l,c/2,u+l,c/2);for(var O=f.length+1,D=1,m=0;m<f.length;m++){var B=void 0;typeof h[m]=="number"?B=h[m]:B=D/O,a.addColorStop(B,f[m]),D++}}return a},t.prototype.destroy=function(r){typeof r=="boolean"&&(r={children:r}),r=Object.assign({},Hse,r),e.prototype.destroy.call(this,r),this._ownCanvas&&(this.canvas.height=this.canvas.width=0),this.context=null,this.canvas=null,this._style=null},Object.defineProperty(t.prototype,"width",{get:function(){return this.updateText(!0),Math.abs(this.scale.x)*this._texture.orig.width},set:function(r){this.updateText(!0);var n=ma(this.scale.x)||1;this.scale.x=n*r/this._texture.orig.width,this._width=r},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"height",{get:function(){return this.updateText(!0),Math.abs(this.scale.y)*this._texture.orig.height},set:function(r){this.updateText(!0);var n=ma(this.scale.y)||1;this.scale.y=n*r/this._texture.orig.height,this._height=r},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"style",{get:function(){return this._style},set:function(r){r=r||{},r instanceof Ma?this._style=r:this._style=new Ma(r),this.localStyleID=-1,this.dirty=!0},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"text",{get:function(){return this._text},set:function(r){r=String(r??""),this._text!==r&&(this._text=r,this.dirty=!0)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"resolution",{get:function(){return this._resolution},set:function(r){this._autoResolution=!1,this._resolution!==r&&(this._resolution=r,this.dirty=!0)},enumerable:!1,configurable:!0}),t.nextLineHeightBehavior=!1,t.experimentalLetterSpacing=!1,t}(ji);/*!
 * @pixi/prepare - v6.5.10
 * Compiled Thu, 06 Jul 2023 15:25:11 UTC
 *
 * @pixi/prepare is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */ne.UPLOADS_PER_FRAME=4;/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var t0=function(e,t){return t0=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)n.hasOwnProperty(i)&&(r[i]=n[i])},t0(e,t)};function Wse(e,t){t0(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}var mL=function(){function e(t){this.maxItemsPerFrame=t,this.itemsLeft=0}return e.prototype.beginFrame=function(){this.itemsLeft=this.maxItemsPerFrame},e.prototype.allowedToUpload=function(){return this.itemsLeft-- >0},e}();function Xse(e,t){var r=!1;if(e&&e._textures&&e._textures.length){for(var n=0;n<e._textures.length;n++)if(e._textures[n]instanceof pe){var i=e._textures[n].baseTexture;t.indexOf(i)===-1&&(t.push(i),r=!0)}}return r}function qse(e,t){if(e.baseTexture instanceof Le){var r=e.baseTexture;return t.indexOf(r)===-1&&t.push(r),!0}return!1}function Yse(e,t){if(e._texture&&e._texture instanceof pe){var r=e._texture.baseTexture;return t.indexOf(r)===-1&&t.push(r),!0}return!1}function Kse(e,t){return t instanceof H1?(t.updateText(!0),!0):!1}function Zse(e,t){if(t instanceof Ma){var r=t.toFontString();return jn.measureFont(r),!0}return!1}function Jse(e,t){if(e instanceof H1){t.indexOf(e.style)===-1&&t.push(e.style),t.indexOf(e)===-1&&t.push(e);var r=e._texture.baseTexture;return t.indexOf(r)===-1&&t.push(r),!0}return!1}function Qse(e,t){return e instanceof Ma?(t.indexOf(e)===-1&&t.push(e),!0):!1}var vL=function(){function e(t){var r=this;this.limiter=new mL(ne.UPLOADS_PER_FRAME),this.renderer=t,this.uploadHookHelper=null,this.queue=[],this.addHooks=[],this.uploadHooks=[],this.completes=[],this.ticking=!1,this.delayedTick=function(){r.queue&&r.prepareItems()},this.registerFindHook(Jse),this.registerFindHook(Qse),this.registerFindHook(Xse),this.registerFindHook(qse),this.registerFindHook(Yse),this.registerUploadHook(Kse),this.registerUploadHook(Zse)}return e.prototype.upload=function(t,r){var n=this;return typeof t=="function"&&(r=t,t=null),r&&Or("6.5.0","BasePrepare.upload callback is deprecated, use the return Promise instead."),new Promise(function(i){t&&n.add(t);var o=function(){r==null||r(),i()};n.queue.length?(n.completes.push(o),n.ticking||(n.ticking=!0,Kt.system.addOnce(n.tick,n,mi.UTILITY))):o()})},e.prototype.tick=function(){setTimeout(this.delayedTick,0)},e.prototype.prepareItems=function(){for(this.limiter.beginFrame();this.queue.length&&this.limiter.allowedToUpload();){var t=this.queue[0],r=!1;if(t&&!t._destroyed){for(var n=0,i=this.uploadHooks.length;n<i;n++)if(this.uploadHooks[n](this.uploadHookHelper,t)){this.queue.shift(),r=!0;break}}r||this.queue.shift()}if(this.queue.length)Kt.system.addOnce(this.tick,this,mi.UTILITY);else{this.ticking=!1;var o=this.completes.slice(0);this.completes.length=0;for(var n=0,i=o.length;n<i;n++)o[n]()}},e.prototype.registerFindHook=function(t){return t&&this.addHooks.push(t),this},e.prototype.registerUploadHook=function(t){return t&&this.uploadHooks.push(t),this},e.prototype.add=function(t){for(var r=0,n=this.addHooks.length;r<n&&!this.addHooks[r](t,this.queue);r++);if(t instanceof _r)for(var r=t.children.length-1;r>=0;r--)this.add(t.children[r]);return this},e.prototype.destroy=function(){this.ticking&&Kt.system.remove(this.tick,this),this.ticking=!1,this.addHooks=null,this.uploadHooks=null,this.renderer=null,this.completes=null,this.queue=null,this.limiter=null,this.uploadHookHelper=null},e}();function gL(e,t){return t instanceof Le?(t._glTextures[e.CONTEXT_UID]||e.texture.bind(t),!0):!1}function ele(e,t){if(!(t instanceof Pc))return!1;var r=t.geometry;t.finishPoly(),r.updateBatches();for(var n=r.batches,i=0;i<n.length;i++){var o=n[i].style.texture;o&&gL(e,o.baseTexture)}return r.batchable||e.geometry.bind(r,t._resolveDirectShader(e)),!0}function tle(e,t){return e instanceof Pc?(t.push(e),!0):!1}var yL=function(e){Wse(t,e);function t(r){var n=e.call(this,r)||this;return n.uploadHookHelper=n.renderer,n.registerFindHook(tle),n.registerUploadHook(gL),n.registerUploadHook(ele),n}return t.extension={name:"prepare",type:Ye.RendererPlugin},t}(vL),rle=function(){function e(t){this.maxMilliseconds=t,this.frameStart=0}return e.prototype.beginFrame=function(){this.frameStart=Date.now()},e.prototype.allowedToUpload=function(){return Date.now()-this.frameStart<this.maxMilliseconds},e}();/*!
 * @pixi/spritesheet - v6.5.10
 * Compiled Thu, 06 Jul 2023 15:25:11 UTC
 *
 * @pixi/spritesheet is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */var _L=function(){function e(t,r,n){n===void 0&&(n=null),this.linkedSheets=[],this._texture=t instanceof pe?t:null,this.baseTexture=t instanceof Le?t:this._texture.baseTexture,this.textures={},this.animations={},this.data=r;var i=this.baseTexture.resource;this.resolution=this._updateResolution(n||(i?i.url:null)),this._frames=this.data.frames,this._frameKeys=Object.keys(this._frames),this._batchIndex=0,this._callback=null}return e.prototype._updateResolution=function(t){t===void 0&&(t=null);var r=this.data.meta.scale,n=bc(t,null);return n===null&&(n=r!==void 0?parseFloat(r):1),n!==1&&this.baseTexture.setResolution(n),n},e.prototype.parse=function(t){var r=this;return t&&Or("6.5.0","Spritesheet.parse callback is deprecated, use the return Promise instead."),new Promise(function(n){r._callback=function(i){t==null||t(i),n(i)},r._batchIndex=0,r._frameKeys.length<=e.BATCH_SIZE?(r._processFrames(0),r._processAnimations(),r._parseComplete()):r._nextBatch()})},e.prototype._processFrames=function(t){for(var r=t,n=e.BATCH_SIZE;r-t<n&&r<this._frameKeys.length;){var i=this._frameKeys[r],o=this._frames[i],a=o.frame;if(a){var s=null,l=null,u=o.trimmed!==!1&&o.sourceSize?o.sourceSize:o.frame,c=new Fe(0,0,Math.floor(u.w)/this.resolution,Math.floor(u.h)/this.resolution);o.rotated?s=new Fe(Math.floor(a.x)/this.resolution,Math.floor(a.y)/this.resolution,Math.floor(a.h)/this.resolution,Math.floor(a.w)/this.resolution):s=new Fe(Math.floor(a.x)/this.resolution,Math.floor(a.y)/this.resolution,Math.floor(a.w)/this.resolution,Math.floor(a.h)/this.resolution),o.trimmed!==!1&&o.spriteSourceSize&&(l=new Fe(Math.floor(o.spriteSourceSize.x)/this.resolution,Math.floor(o.spriteSourceSize.y)/this.resolution,Math.floor(a.w)/this.resolution,Math.floor(a.h)/this.resolution)),this.textures[i]=new pe(this.baseTexture,s,c,l,o.rotated?2:0,o.anchor),pe.addToCache(this.textures[i],i)}r++}},e.prototype._processAnimations=function(){var t=this.data.animations||{};for(var r in t){this.animations[r]=[];for(var n=0;n<t[r].length;n++){var i=t[r][n];this.animations[r].push(this.textures[i])}}},e.prototype._parseComplete=function(){var t=this._callback;this._callback=null,this._batchIndex=0,t.call(this,this.textures)},e.prototype._nextBatch=function(){var t=this;this._processFrames(this._batchIndex*e.BATCH_SIZE),this._batchIndex++,setTimeout(function(){t._batchIndex*e.BATCH_SIZE<t._frameKeys.length?t._nextBatch():(t._processAnimations(),t._parseComplete())},0)},e.prototype.destroy=function(t){var r;t===void 0&&(t=!1);for(var n in this.textures)this.textures[n].destroy();this._frames=null,this._frameKeys=null,this.data=null,this.textures=null,t&&((r=this._texture)===null||r===void 0||r.destroy(),this.baseTexture.destroy()),this._texture=null,this.baseTexture=null,this.linkedSheets=[]},e.BATCH_SIZE=1e3,e}(),xL=function(){function e(){}return e.use=function(t,r){var n,i,o=this,a=t.name+"_image";if(!t.data||t.type!==wt.TYPE.JSON||!t.data.frames||o.resources[a]){r();return}var s=(i=(n=t.data)===null||n===void 0?void 0:n.meta)===null||i===void 0?void 0:i.related_multi_packs;if(Array.isArray(s))for(var l=function(m){if(typeof m!="string")return"continue";var g=m.replace(".json",""),p=ii.resolve(t.url.replace(o.baseUrl,""),m);if(o.resources[g]||Object.values(o.resources).some(function(y){return ii.format(ii.parse(y.url))===p}))return"continue";var v={crossOrigin:t.crossOrigin,loadType:wt.LOAD_TYPE.XHR,xhrType:wt.XHR_RESPONSE_TYPE.JSON,parentResource:t,metadata:t.metadata};o.add(g,p,v)},u=0,c=s;u<c.length;u++){var f=c[u];l(f)}var h={crossOrigin:t.crossOrigin,metadata:t.metadata.imageMetadata,parentResource:t},d=e.getResourcePath(t,o.baseUrl);o.add(a,d,h,function(g){if(g.error){r(g.error);return}var p=new _L(g.texture,t.data,t.url);p.parse().then(function(){t.spritesheet=p,t.textures=p.textures,r()})})},e.getResourcePath=function(t,r){return t.isDataUrl?t.data.meta.image:ii.resolve(t.url.replace(r,""),t.data.meta.image)},e.extension=Ye.Loader,e}();/*!
 * @pixi/sprite-tiling - v6.5.10
 * Compiled Thu, 06 Jul 2023 15:25:11 UTC
 *
 * @pixi/sprite-tiling is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 *//*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var r0=function(e,t){return r0=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)n.hasOwnProperty(i)&&(r[i]=n[i])},r0(e,t)};function bL(e,t){r0(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}var ru=new Pe,nle=function(e){bL(t,e);function t(r,n,i){n===void 0&&(n=100),i===void 0&&(i=100);var o=e.call(this,r)||this;return o.tileTransform=new Dp,o._width=n,o._height=i,o.uvMatrix=o.texture.uvMatrix||new $p(r),o.pluginName="tilingSprite",o.uvRespectAnchor=!1,o}return Object.defineProperty(t.prototype,"clampMargin",{get:function(){return this.uvMatrix.clampMargin},set:function(r){this.uvMatrix.clampMargin=r,this.uvMatrix.update(!0)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"tileScale",{get:function(){return this.tileTransform.scale},set:function(r){this.tileTransform.scale.copyFrom(r)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"tilePosition",{get:function(){return this.tileTransform.position},set:function(r){this.tileTransform.position.copyFrom(r)},enumerable:!1,configurable:!0}),t.prototype._onTextureUpdate=function(){this.uvMatrix&&(this.uvMatrix.texture=this._texture),this._cachedTint=16777215},t.prototype._render=function(r){var n=this._texture;!n||!n.valid||(this.tileTransform.updateLocalTransform(),this.uvMatrix.update(),r.batch.setObjectRenderer(r.plugins[this.pluginName]),r.plugins[this.pluginName].render(this))},t.prototype._calculateBounds=function(){var r=this._width*-this._anchor._x,n=this._height*-this._anchor._y,i=this._width*(1-this._anchor._x),o=this._height*(1-this._anchor._y);this._bounds.addFrame(this.transform,r,n,i,o)},t.prototype.getLocalBounds=function(r){return this.children.length===0?(this._bounds.minX=this._width*-this._anchor._x,this._bounds.minY=this._height*-this._anchor._y,this._bounds.maxX=this._width*(1-this._anchor._x),this._bounds.maxY=this._height*(1-this._anchor._y),r||(this._localBoundsRect||(this._localBoundsRect=new Fe),r=this._localBoundsRect),this._bounds.getRectangle(r)):e.prototype.getLocalBounds.call(this,r)},t.prototype.containsPoint=function(r){this.worldTransform.applyInverse(r,ru);var n=this._width,i=this._height,o=-n*this.anchor._x;if(ru.x>=o&&ru.x<o+n){var a=-i*this.anchor._y;if(ru.y>=a&&ru.y<a+i)return!0}return!1},t.prototype.destroy=function(r){e.prototype.destroy.call(this,r),this.tileTransform=null,this.uvMatrix=null},t.from=function(r,n){var i=r instanceof pe?r:pe.from(r,n);return new t(i,n.width,n.height)},Object.defineProperty(t.prototype,"width",{get:function(){return this._width},set:function(r){this._width=r},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"height",{get:function(){return this._height},set:function(r){this._height=r},enumerable:!1,configurable:!0}),t}(ji),ile=`#version 100
#define SHADER_NAME Tiling-Sprite-Simple-100

precision lowp float;

varying vec2 vTextureCoord;

uniform sampler2D uSampler;
uniform vec4 uColor;

void main(void)
{
    vec4 texSample = texture2D(uSampler, vTextureCoord);
    gl_FragColor = texSample * uColor;
}
`,VP=`#version 100
#define SHADER_NAME Tiling-Sprite-100

precision lowp float;

attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;

uniform mat3 projectionMatrix;
uniform mat3 translationMatrix;
uniform mat3 uTransform;

varying vec2 vTextureCoord;

void main(void)
{
    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);

    vTextureCoord = (uTransform * vec3(aTextureCoord, 1.0)).xy;
}
`,ole=`#version 100
#ifdef GL_EXT_shader_texture_lod
    #extension GL_EXT_shader_texture_lod : enable
#endif
#define SHADER_NAME Tiling-Sprite-100

precision lowp float;

varying vec2 vTextureCoord;

uniform sampler2D uSampler;
uniform vec4 uColor;
uniform mat3 uMapCoord;
uniform vec4 uClampFrame;
uniform vec2 uClampOffset;

void main(void)
{
    vec2 coord = vTextureCoord + ceil(uClampOffset - vTextureCoord);
    coord = (uMapCoord * vec3(coord, 1.0)).xy;
    vec2 unclamped = coord;
    coord = clamp(coord, uClampFrame.xy, uClampFrame.zw);

    #ifdef GL_EXT_shader_texture_lod
        vec4 texSample = unclamped == coord
            ? texture2D(uSampler, coord) 
            : texture2DLodEXT(uSampler, coord, 0);
    #else
        vec4 texSample = texture2D(uSampler, coord);
    #endif

    gl_FragColor = texSample * uColor;
}
`,ale=`#version 300 es
#define SHADER_NAME Tiling-Sprite-300

precision lowp float;

in vec2 aVertexPosition;
in vec2 aTextureCoord;

uniform mat3 projectionMatrix;
uniform mat3 translationMatrix;
uniform mat3 uTransform;

out vec2 vTextureCoord;

void main(void)
{
    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);

    vTextureCoord = (uTransform * vec3(aTextureCoord, 1.0)).xy;
}
`,sle=`#version 300 es
#define SHADER_NAME Tiling-Sprite-100

precision lowp float;

in vec2 vTextureCoord;

out vec4 fragmentColor;

uniform sampler2D uSampler;
uniform vec4 uColor;
uniform mat3 uMapCoord;
uniform vec4 uClampFrame;
uniform vec2 uClampOffset;

void main(void)
{
    vec2 coord = vTextureCoord + ceil(uClampOffset - vTextureCoord);
    coord = (uMapCoord * vec3(coord, 1.0)).xy;
    vec2 unclamped = coord;
    coord = clamp(coord, uClampFrame.xy, uClampFrame.zw);

    vec4 texSample = texture(uSampler, coord, unclamped == coord ? 0.0f : -32.0f);// lod-bias very negative to force lod 0

    fragmentColor = texSample * uColor;
}
`,Yf=new gt,SL=function(e){bL(t,e);function t(r){var n=e.call(this,r)||this;return r.runners.contextChange.add(n),n.quad=new S1,n.state=Go.for2d(),n}return t.prototype.contextChange=function(){var r=this.renderer,n={globals:r.globalUniforms};this.simpleShader=Bi.from(VP,ile,n),this.shader=r.context.webGLVersion>1?Bi.from(ale,sle,n):Bi.from(VP,ole,n)},t.prototype.render=function(r){var n=this.renderer,i=this.quad,o=i.vertices;o[0]=o[6]=r._width*-r.anchor.x,o[1]=o[3]=r._height*-r.anchor.y,o[2]=o[4]=r._width*(1-r.anchor.x),o[5]=o[7]=r._height*(1-r.anchor.y);var a=r.uvRespectAnchor?r.anchor.x:0,s=r.uvRespectAnchor?r.anchor.y:0;o=i.uvs,o[0]=o[6]=-a,o[1]=o[3]=-s,o[2]=o[4]=1-a,o[5]=o[7]=1-s,i.invalidate();var l=r._texture,u=l.baseTexture,c=u.alphaMode>0,f=r.tileTransform.localTransform,h=r.uvMatrix,d=u.isPowerOfTwo&&l.frame.width===u.width&&l.frame.height===u.height;d&&(u._glTextures[n.CONTEXT_UID]?d=u.wrapMode!==Ln.CLAMP:u.wrapMode===Ln.CLAMP&&(u.wrapMode=Ln.REPEAT));var m=d?this.simpleShader:this.shader,g=l.width,p=l.height,v=r._width,y=r._height;Yf.set(f.a*g/v,f.b*g/y,f.c*p/v,f.d*p/y,f.tx/v,f.ty/y),Yf.invert(),d?Yf.prepend(h.mapCoord):(m.uniforms.uMapCoord=h.mapCoord.toArray(!0),m.uniforms.uClampFrame=h.uClampFrame,m.uniforms.uClampOffset=h.uClampOffset),m.uniforms.uTransform=Yf.toArray(!0),m.uniforms.uColor=h1(r.tint,r.worldAlpha,m.uniforms.uColor,c),m.uniforms.translationMatrix=r.transform.worldTransform.toArray(!0),m.uniforms.uSampler=l,n.shader.bind(m),n.geometry.bind(i),this.state.blendMode=f1(r.blendMode,c),n.state.set(this.state),n.geometry.draw(this.renderer.gl.TRIANGLES,6,0)},t.extension={name:"tilingSprite",type:Ye.RendererPlugin},t}(ef);/*!
 * @pixi/mesh - v6.5.10
 * Compiled Thu, 06 Jul 2023 15:25:11 UTC
 *
 * @pixi/mesh is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 *//*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var n0=function(e,t){return n0=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)n.hasOwnProperty(i)&&(r[i]=n[i])},n0(e,t)};function W1(e,t){n0(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}var wL=function(){function e(t,r){this.uvBuffer=t,this.uvMatrix=r,this.data=null,this._bufferUpdateId=-1,this._textureUpdateId=-1,this._updateID=0}return e.prototype.update=function(t){if(!(!t&&this._bufferUpdateId===this.uvBuffer._updateID&&this._textureUpdateId===this.uvMatrix._updateID)){this._bufferUpdateId=this.uvBuffer._updateID,this._textureUpdateId=this.uvMatrix._updateID;var r=this.uvBuffer.data;(!this.data||this.data.length!==r.length)&&(this.data=new Float32Array(r.length)),this.uvMatrix.multiplyUvs(r,this.data),this._updateID++}},e}(),Dg=new Pe,HP=new zu,tl=function(e){W1(t,e);function t(r,n,i,o){o===void 0&&(o=pn.TRIANGLES);var a=e.call(this)||this;return a.geometry=r,a.shader=n,a.state=i||Go.for2d(),a.drawMode=o,a.start=0,a.size=0,a.uvs=null,a.indices=null,a.vertexData=new Float32Array(1),a.vertexDirty=-1,a._transformID=-1,a._roundPixels=ne.ROUND_PIXELS,a.batchUvs=null,a}return Object.defineProperty(t.prototype,"geometry",{get:function(){return this._geometry},set:function(r){this._geometry!==r&&(this._geometry&&(this._geometry.refCount--,this._geometry.refCount===0&&this._geometry.dispose()),this._geometry=r,this._geometry&&this._geometry.refCount++,this.vertexDirty=-1)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"uvBuffer",{get:function(){return this.geometry.buffers[1]},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"verticesBuffer",{get:function(){return this.geometry.buffers[0]},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"material",{get:function(){return this.shader},set:function(r){this.shader=r},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"blendMode",{get:function(){return this.state.blendMode},set:function(r){this.state.blendMode=r},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"roundPixels",{get:function(){return this._roundPixels},set:function(r){this._roundPixels!==r&&(this._transformID=-1),this._roundPixels=r},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"tint",{get:function(){return"tint"in this.shader?this.shader.tint:null},set:function(r){this.shader.tint=r},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"texture",{get:function(){return"texture"in this.shader?this.shader.texture:null},set:function(r){this.shader.texture=r},enumerable:!1,configurable:!0}),t.prototype._render=function(r){var n=this.geometry.buffers[0].data,i=this.shader;i.batchable&&this.drawMode===pn.TRIANGLES&&n.length<t.BATCHABLE_SIZE*2?this._renderToBatch(r):this._renderDefault(r)},t.prototype._renderDefault=function(r){var n=this.shader;n.alpha=this.worldAlpha,n.update&&n.update(),r.batch.flush(),n.uniforms.translationMatrix=this.transform.worldTransform.toArray(!0),r.shader.bind(n),r.state.set(this.state),r.geometry.bind(this.geometry,n),r.geometry.draw(this.drawMode,this.size,this.start,this.geometry.instanceCount)},t.prototype._renderToBatch=function(r){var n=this.geometry,i=this.shader;i.uvMatrix&&(i.uvMatrix.update(),this.calculateUvs()),this.calculateVertices(),this.indices=n.indexBuffer.data,this._tintRGB=i._tintRGB,this._texture=i.texture;var o=this.material.pluginName;r.batch.setObjectRenderer(r.plugins[o]),r.plugins[o].render(this)},t.prototype.calculateVertices=function(){var r=this.geometry,n=r.buffers[0],i=n.data,o=n._updateID;if(!(o===this.vertexDirty&&this._transformID===this.transform._worldID)){this._transformID=this.transform._worldID,this.vertexData.length!==i.length&&(this.vertexData=new Float32Array(i.length));for(var a=this.transform.worldTransform,s=a.a,l=a.b,u=a.c,c=a.d,f=a.tx,h=a.ty,d=this.vertexData,m=0;m<d.length/2;m++){var g=i[m*2],p=i[m*2+1];d[m*2]=s*g+u*p+f,d[m*2+1]=l*g+c*p+h}if(this._roundPixels)for(var v=ne.RESOLUTION,m=0;m<d.length;++m)d[m]=Math.round((d[m]*v|0)/v);this.vertexDirty=o}},t.prototype.calculateUvs=function(){var r=this.geometry.buffers[1],n=this.shader;n.uvMatrix.isSimple?this.uvs=r.data:(this.batchUvs||(this.batchUvs=new wL(r,n.uvMatrix)),this.batchUvs.update(),this.uvs=this.batchUvs.data)},t.prototype._calculateBounds=function(){this.calculateVertices(),this._bounds.addVertexData(this.vertexData,0,this.vertexData.length)},t.prototype.containsPoint=function(r){if(!this.getBounds().contains(r.x,r.y))return!1;this.worldTransform.applyInverse(r,Dg);for(var n=this.geometry.getBuffer("aVertexPosition").data,i=HP.points,o=this.geometry.getIndex().data,a=o.length,s=this.drawMode===4?3:1,l=0;l+2<a;l+=s){var u=o[l]*2,c=o[l+1]*2,f=o[l+2]*2;if(i[0]=n[u],i[1]=n[u+1],i[2]=n[c],i[3]=n[c+1],i[4]=n[f],i[5]=n[f+1],HP.contains(Dg.x,Dg.y))return!0}return!1},t.prototype.destroy=function(r){e.prototype.destroy.call(this,r),this._cachedTexture&&(this._cachedTexture.destroy(),this._cachedTexture=null),this.geometry=null,this.shader=null,this.state=null,this.uvs=null,this.indices=null,this.vertexData=null},t.BATCHABLE_SIZE=100,t}(_r),lle=`varying vec2 vTextureCoord;
uniform vec4 uColor;

uniform sampler2D uSampler;

void main(void)
{
    gl_FragColor = texture2D(uSampler, vTextureCoord) * uColor;
}
`,ule=`attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;

uniform mat3 projectionMatrix;
uniform mat3 translationMatrix;
uniform mat3 uTextureMatrix;

varying vec2 vTextureCoord;

void main(void)
{
    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);

    vTextureCoord = (uTextureMatrix * vec3(aTextureCoord, 1.0)).xy;
}
`,rl=function(e){W1(t,e);function t(r,n){var i=this,o={uSampler:r,alpha:1,uTextureMatrix:gt.IDENTITY,uColor:new Float32Array([1,1,1,1])};return n=Object.assign({tint:16777215,alpha:1,pluginName:"batch"},n),n.uniforms&&Object.assign(o,n.uniforms),i=e.call(this,n.program||El.from(ule,lle),o)||this,i._colorDirty=!1,i.uvMatrix=new $p(r),i.batchable=n.program===void 0,i.pluginName=n.pluginName,i.tint=n.tint,i.alpha=n.alpha,i}return Object.defineProperty(t.prototype,"texture",{get:function(){return this.uniforms.uSampler},set:function(r){this.uniforms.uSampler!==r&&(!this.uniforms.uSampler.baseTexture.alphaMode!=!r.baseTexture.alphaMode&&(this._colorDirty=!0),this.uniforms.uSampler=r,this.uvMatrix.texture=r)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"alpha",{get:function(){return this._alpha},set:function(r){r!==this._alpha&&(this._alpha=r,this._colorDirty=!0)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"tint",{get:function(){return this._tint},set:function(r){r!==this._tint&&(this._tint=r,this._tintRGB=(r>>16)+(r&65280)+((r&255)<<16),this._colorDirty=!0)},enumerable:!1,configurable:!0}),t.prototype.update=function(){if(this._colorDirty){this._colorDirty=!1;var r=this.texture.baseTexture;h1(this._tint,this._alpha,this.uniforms.uColor,r.alphaMode)}this.uvMatrix.update()&&(this.uniforms.uTextureMatrix=this.uvMatrix.mapCoord)},t}(Bi),tf=function(e){W1(t,e);function t(r,n,i){var o=e.call(this)||this,a=new Dt(r),s=new Dt(n,!0),l=new Dt(i,!0,!0);return o.addAttribute("aVertexPosition",a,2,!1,fe.FLOAT).addAttribute("aTextureCoord",s,2,!1,fe.FLOAT).addIndex(l),o._updateId=-1,o}return Object.defineProperty(t.prototype,"vertexDirtyId",{get:function(){return this.buffers[0]._updateID},enumerable:!1,configurable:!0}),t}(wl);/*!
 * @pixi/text-bitmap - v6.5.10
 * Compiled Thu, 06 Jul 2023 15:25:11 UTC
 *
 * @pixi/text-bitmap is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 *//*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var i0=function(e,t){return i0=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)n.hasOwnProperty(i)&&(r[i]=n[i])},i0(e,t)};function cle(e,t){i0(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}var Ac=function(){function e(){this.info=[],this.common=[],this.page=[],this.char=[],this.kerning=[],this.distanceField=[]}return e}(),EL=function(){function e(){}return e.test=function(t){return typeof t=="string"&&t.indexOf("info face=")===0},e.parse=function(t){var r=t.match(/^[a-z]+\s+.+$/gm),n={info:[],common:[],page:[],char:[],chars:[],kerning:[],kernings:[],distanceField:[]};for(var i in r){var o=r[i].match(/^[a-z]+/gm)[0],a=r[i].match(/[a-zA-Z]+=([^\s"']+|"([^"]*)")/gm),s={};for(var l in a){var u=a[l].split("="),c=u[0],f=u[1].replace(/"/gm,""),h=parseFloat(f),d=isNaN(h)?f:h;s[c]=d}n[o].push(s)}var m=new Ac;return n.info.forEach(function(g){return m.info.push({face:g.face,size:parseInt(g.size,10)})}),n.common.forEach(function(g){return m.common.push({lineHeight:parseInt(g.lineHeight,10)})}),n.page.forEach(function(g){return m.page.push({id:parseInt(g.id,10),file:g.file})}),n.char.forEach(function(g){return m.char.push({id:parseInt(g.id,10),page:parseInt(g.page,10),x:parseInt(g.x,10),y:parseInt(g.y,10),width:parseInt(g.width,10),height:parseInt(g.height,10),xoffset:parseInt(g.xoffset,10),yoffset:parseInt(g.yoffset,10),xadvance:parseInt(g.xadvance,10)})}),n.kerning.forEach(function(g){return m.kerning.push({first:parseInt(g.first,10),second:parseInt(g.second,10),amount:parseInt(g.amount,10)})}),n.distanceField.forEach(function(g){return m.distanceField.push({distanceRange:parseInt(g.distanceRange,10),fieldType:g.fieldType})}),m},e}(),Ad=function(){function e(){}return e.test=function(t){return t instanceof XMLDocument&&t.getElementsByTagName("page").length&&t.getElementsByTagName("info")[0].getAttribute("face")!==null},e.parse=function(t){for(var r=new Ac,n=t.getElementsByTagName("info"),i=t.getElementsByTagName("common"),o=t.getElementsByTagName("page"),a=t.getElementsByTagName("char"),s=t.getElementsByTagName("kerning"),l=t.getElementsByTagName("distanceField"),u=0;u<n.length;u++)r.info.push({face:n[u].getAttribute("face"),size:parseInt(n[u].getAttribute("size"),10)});for(var u=0;u<i.length;u++)r.common.push({lineHeight:parseInt(i[u].getAttribute("lineHeight"),10)});for(var u=0;u<o.length;u++)r.page.push({id:parseInt(o[u].getAttribute("id"),10)||0,file:o[u].getAttribute("file")});for(var u=0;u<a.length;u++){var c=a[u];r.char.push({id:parseInt(c.getAttribute("id"),10),page:parseInt(c.getAttribute("page"),10)||0,x:parseInt(c.getAttribute("x"),10),y:parseInt(c.getAttribute("y"),10),width:parseInt(c.getAttribute("width"),10),height:parseInt(c.getAttribute("height"),10),xoffset:parseInt(c.getAttribute("xoffset"),10),yoffset:parseInt(c.getAttribute("yoffset"),10),xadvance:parseInt(c.getAttribute("xadvance"),10)})}for(var u=0;u<s.length;u++)r.kerning.push({first:parseInt(s[u].getAttribute("first"),10),second:parseInt(s[u].getAttribute("second"),10),amount:parseInt(s[u].getAttribute("amount"),10)});for(var u=0;u<l.length;u++)r.distanceField.push({fieldType:l[u].getAttribute("fieldType"),distanceRange:parseInt(l[u].getAttribute("distanceRange"),10)});return r},e}(),TL=function(){function e(){}return e.test=function(t){if(typeof t=="string"&&t.indexOf("<font>")>-1){var r=new globalThis.DOMParser().parseFromString(t,"text/xml");return Ad.test(r)}return!1},e.parse=function(t){var r=new globalThis.DOMParser().parseFromString(t,"text/xml");return Ad.parse(r)},e}(),Ng=[EL,Ad,TL];function X1(e){for(var t=0;t<Ng.length;t++)if(Ng[t].test(e))return Ng[t];return null}function fle(e,t,r,n,i,o){var a=r.fill;if(Array.isArray(a)){if(a.length===1)return a[0]}else return a;var s,l=r.dropShadow?r.dropShadowDistance:0,u=r.padding||0,c=e.width/n-l-u*2,f=e.height/n-l-u*2,h=a.slice(),d=r.fillGradientStops.slice();if(!d.length)for(var m=h.length+1,g=1;g<m;++g)d.push(g/m);if(h.unshift(a[0]),d.unshift(0),h.push(a[a.length-1]),d.push(1),r.fillGradientType===el.LINEAR_VERTICAL){s=t.createLinearGradient(c/2,u,c/2,f+u);for(var p=0,v=o.fontProperties.fontSize+r.strokeThickness,y=v/f,g=0;g<i.length;g++)for(var _=o.lineHeight*g,x=0;x<h.length;x++){var b=0;typeof d[x]=="number"?b=d[x]:b=x/h.length;var S=_/f+b*y,E=Math.max(p,S);E=Math.min(E,1),s.addColorStop(E,h[x]),p=E}}else{s=t.createLinearGradient(u,f/2,c+u,f/2);for(var I=h.length+1,A=1,g=0;g<h.length;g++){var O=void 0;typeof d[g]=="number"?O=d[g]:O=A/I,s.addColorStop(O,h[g]),A++}}return s}function hle(e,t,r,n,i,o,a){var s=r.text,l=r.fontProperties;t.translate(n,i),t.scale(o,o);var u=a.strokeThickness/2,c=-(a.strokeThickness/2);if(t.font=a.toFontString(),t.lineWidth=a.strokeThickness,t.textBaseline=a.textBaseline,t.lineJoin=a.lineJoin,t.miterLimit=a.miterLimit,t.fillStyle=fle(e,t,a,o,[s],r),t.strokeStyle=a.stroke,a.dropShadow){var f=a.dropShadowColor,h=Qt(typeof f=="number"?f:u1(f)),d=a.dropShadowBlur*o,m=a.dropShadowDistance*o;t.shadowColor="rgba("+h[0]*255+","+h[1]*255+","+h[2]*255+","+a.dropShadowAlpha+")",t.shadowBlur=d,t.shadowOffsetX=Math.cos(a.dropShadowAngle)*m,t.shadowOffsetY=Math.sin(a.dropShadowAngle)*m}else t.shadowColor="black",t.shadowBlur=0,t.shadowOffsetX=0,t.shadowOffsetY=0;a.stroke&&a.strokeThickness&&t.strokeText(s,u,c+r.lineHeight-l.descent),a.fill&&t.fillText(s,u,c+r.lineHeight-l.descent),t.setTransform(1,0,0,1,0,0),t.fillStyle="rgba(0, 0, 0, 0)"}function CL(e){return Array.from?Array.from(e):e.split("")}function dle(e){typeof e=="string"&&(e=[e]);for(var t=[],r=0,n=e.length;r<n;r++){var i=e[r];if(Array.isArray(i)){if(i.length!==2)throw new Error("[BitmapFont]: Invalid character range length, expecting 2 got "+i.length+".");var o=i[0].charCodeAt(0),a=i[1].charCodeAt(0);if(a<o)throw new Error("[BitmapFont]: Invalid character range.");for(var s=o,l=a;s<=l;s++)t.push(String.fromCharCode(s))}else t.push.apply(t,CL(i))}if(t.length===0)throw new Error("[BitmapFont]: Empty set when resolving characters.");return t}function Ph(e){return e.codePointAt?e.codePointAt(0):e.charCodeAt(0)}var Ai=function(){function e(t,r,n){var i,o,a=t.info[0],s=t.common[0],l=t.page[0],u=t.distanceField[0],c=bc(l.file),f={};this._ownsTextures=n,this.font=a.face,this.size=a.size,this.lineHeight=s.lineHeight/c,this.chars={},this.pageTextures=f;for(var h=0;h<t.page.length;h++){var d=t.page[h],m=d.id,g=d.file;f[m]=r instanceof Array?r[h]:r[g],u!=null&&u.fieldType&&u.fieldType!=="none"&&(f[m].baseTexture.alphaMode=bn.NO_PREMULTIPLIED_ALPHA,f[m].baseTexture.mipmap=zr.OFF)}for(var h=0;h<t.char.length;h++){var p=t.char[h],m=p.id,v=p.page,y=t.char[h],_=y.x,x=y.y,b=y.width,S=y.height,E=y.xoffset,I=y.yoffset,A=y.xadvance;_/=c,x/=c,b/=c,S/=c,E/=c,I/=c,A/=c;var O=new Fe(_+f[v].frame.x/c,x+f[v].frame.y/c,b,S);this.chars[m]={xOffset:E,yOffset:I,xAdvance:A,kerning:{},texture:new pe(f[v].baseTexture,O),page:v}}for(var h=0;h<t.kerning.length;h++){var D=t.kerning[h],B=D.first,j=D.second,W=D.amount;B/=c,j/=c,W/=c,this.chars[j]&&(this.chars[j].kerning[B]=W)}this.distanceFieldRange=u==null?void 0:u.distanceRange,this.distanceFieldType=(o=(i=u==null?void 0:u.fieldType)===null||i===void 0?void 0:i.toLowerCase())!==null&&o!==void 0?o:"none"}return e.prototype.destroy=function(){for(var t in this.chars)this.chars[t].texture.destroy(),this.chars[t].texture=null;for(var t in this.pageTextures)this._ownsTextures&&this.pageTextures[t].destroy(!0),this.pageTextures[t]=null;this.chars=null,this.pageTextures=null},e.install=function(t,r,n){var i;if(t instanceof Ac)i=t;else{var o=X1(t);if(!o)throw new Error("Unrecognized data format for font.");i=o.parse(t)}r instanceof pe&&(r=[r]);var a=new e(i,r,n);return e.available[a.font]=a,a},e.uninstall=function(t){var r=e.available[t];if(!r)throw new Error("No font found named '"+t+"'");r.destroy(),delete e.available[t]},e.from=function(t,r,n){if(!t)throw new Error("[BitmapFont] Property `name` is required.");var i=Object.assign({},e.defaultOptions,n),o=i.chars,a=i.padding,s=i.resolution,l=i.textureWidth,u=i.textureHeight,c=dle(o),f=r instanceof Ma?r:new Ma(r),h=l,d=new Ac;d.info[0]={face:f.fontFamily,size:f.fontSize},d.common[0]={lineHeight:f.fontSize};for(var m=0,g=0,p,v,y,_=0,x=[],b=0;b<c.length;b++){p||(p=ne.ADAPTER.createCanvas(),p.width=l,p.height=u,v=p.getContext("2d"),y=new Le(p,{resolution:s}),x.push(new pe(y)),d.page.push({id:x.length-1,file:""}));var S=c[b],E=jn.measureText(S,f,!1,p),I=E.width,A=Math.ceil(E.height),O=Math.ceil((f.fontStyle==="italic"?2:1)*I);if(g>=u-A*s){if(g===0)throw new Error("[BitmapFont] textureHeight "+u+"px is too small "+("(fontFamily: '"+f.fontFamily+"', fontSize: "+f.fontSize+"px, char: '"+S+"')"));--b,p=null,v=null,y=null,g=0,m=0,_=0;continue}if(_=Math.max(A+E.fontProperties.descent,_),O*s+m>=h){if(m===0)throw new Error("[BitmapFont] textureWidth "+l+"px is too small "+("(fontFamily: '"+f.fontFamily+"', fontSize: "+f.fontSize+"px, char: '"+S+"')"));--b,g+=_*s,g=Math.ceil(g),m=0,_=0;continue}hle(p,v,E,m,g,s,f);var D=Ph(E.text);d.char.push({id:D,page:x.length-1,x:m/s,y:g/s,width:O,height:A,xoffset:0,yoffset:0,xadvance:Math.ceil(I-(f.dropShadow?f.dropShadowDistance:0)-(f.stroke?f.strokeThickness:0))}),m+=(O+2*a)*s,m=Math.ceil(m)}if(!(n!=null&&n.skipKerning))for(var b=0,B=c.length;b<B;b++)for(var j=c[b],W=0;W<B;W++){var $=c[W],z=v.measureText(j).width,ie=v.measureText($).width,Se=v.measureText(j+$).width,de=Se-(z+ie);de&&d.kerning.push({first:Ph(j),second:Ph($),amount:de})}var X=new e(d,x,!0);return e.available[t]!==void 0&&e.uninstall(t),e.available[t]=X,X},e.ALPHA=[["a","z"],["A","Z"]," "],e.NUMERIC=[["0","9"]],e.ALPHANUMERIC=[["a","z"],["A","Z"],["0","9"]," "],e.ASCII=[[" ","~"]],e.defaultOptions={resolution:1,textureWidth:512,textureHeight:512,padding:4,chars:e.ALPHANUMERIC},e.available={},e}(),ple=`// Pixi texture info\r
varying vec2 vTextureCoord;\r
uniform sampler2D uSampler;\r
\r
// Tint\r
uniform vec4 uColor;\r
\r
// on 2D applications fwidth is screenScale / glyphAtlasScale * distanceFieldRange\r
uniform float uFWidth;\r
\r
void main(void) {\r
\r
  // To stack MSDF and SDF we need a non-pre-multiplied-alpha texture.\r
  vec4 texColor = texture2D(uSampler, vTextureCoord);\r
\r
  // MSDF\r
  float median = texColor.r + texColor.g + texColor.b -\r
                  min(texColor.r, min(texColor.g, texColor.b)) -\r
                  max(texColor.r, max(texColor.g, texColor.b));\r
  // SDF\r
  median = min(median, texColor.a);\r
\r
  float screenPxDistance = uFWidth * (median - 0.5);\r
  float alpha = clamp(screenPxDistance + 0.5, 0.0, 1.0);\r
  if (median < 0.01) {\r
    alpha = 0.0;\r
  } else if (median > 0.99) {\r
    alpha = 1.0;\r
  }\r
\r
  // NPM Textures, NPM outputs\r
  gl_FragColor = vec4(uColor.rgb, uColor.a * alpha);\r
\r
}\r
`,mle=`// Mesh material default fragment\r
attribute vec2 aVertexPosition;\r
attribute vec2 aTextureCoord;\r
\r
uniform mat3 projectionMatrix;\r
uniform mat3 translationMatrix;\r
uniform mat3 uTextureMatrix;\r
\r
varying vec2 vTextureCoord;\r
\r
void main(void)\r
{\r
    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\r
\r
    vTextureCoord = (uTextureMatrix * vec3(aTextureCoord, 1.0)).xy;\r
}\r
`,WP=[],XP=[],qP=[],vle=function(e){cle(t,e);function t(r,n){n===void 0&&(n={});var i=e.call(this)||this;i._tint=16777215;var o=Object.assign({},t.styleDefaults,n),a=o.align,s=o.tint,l=o.maxWidth,u=o.letterSpacing,c=o.fontName,f=o.fontSize;if(!Ai.available[c])throw new Error('Missing BitmapFont "'+c+'"');return i._activePagesMeshData=[],i._textWidth=0,i._textHeight=0,i._align=a,i._tint=s,i._font=void 0,i._fontName=c,i._fontSize=f,i.text=r,i._maxWidth=l,i._maxLineHeight=0,i._letterSpacing=u,i._anchor=new Li(function(){i.dirty=!0},i,0,0),i._roundPixels=ne.ROUND_PIXELS,i.dirty=!0,i._resolution=ne.RESOLUTION,i._autoResolution=!0,i._textureCache={},i}return t.prototype.updateText=function(){for(var r,n=Ai.available[this._fontName],i=this.fontSize,o=i/n.size,a=new Pe,s=[],l=[],u=[],c=this._text.replace(/(?:\r\n|\r)/g,`
`)||" ",f=CL(c),h=this._maxWidth*n.size/i,d=n.distanceFieldType==="none"?WP:XP,m=null,g=0,p=0,v=0,y=-1,_=0,x=0,b=0,S=0,E=0;E<f.length;E++){var I=f[E],A=Ph(I);if(/(?:\s)/.test(I)&&(y=E,_=g,S++),I==="\r"||I===`
`){l.push(g),u.push(-1),p=Math.max(p,g),++v,++x,a.x=0,a.y+=n.lineHeight,m=null,S=0;continue}var O=n.chars[A];if(O){m&&O.kerning[m]&&(a.x+=O.kerning[m]);var D=qP.pop()||{texture:pe.EMPTY,line:0,charCode:0,prevSpaces:0,position:new Pe};D.texture=O.texture,D.line=v,D.charCode=A,D.position.x=a.x+O.xOffset+this._letterSpacing/2,D.position.y=a.y+O.yOffset,D.prevSpaces=S,s.push(D),g=D.position.x+Math.max(O.xAdvance-O.xOffset,O.texture.orig.width),a.x+=O.xAdvance+this._letterSpacing,b=Math.max(b,O.yOffset+O.texture.height),m=A,y!==-1&&h>0&&a.x>h&&(++x,xa(s,1+y-x,1+E-y),E=y,y=-1,l.push(_),u.push(s.length>0?s[s.length-1].prevSpaces:0),p=Math.max(p,_),v++,a.x=0,a.y+=n.lineHeight,m=null,S=0)}}var B=f[f.length-1];B!=="\r"&&B!==`
`&&(/(?:\s)/.test(B)&&(g=_),l.push(g),p=Math.max(p,g),u.push(-1));for(var j=[],E=0;E<=v;E++){var W=0;this._align==="right"?W=p-l[E]:this._align==="center"?W=(p-l[E])/2:this._align==="justify"&&(W=u[E]<0?0:(p-l[E])/u[E]),j.push(W)}var $=s.length,z={},ie=[],Se=this._activePagesMeshData;d.push.apply(d,Se);for(var E=0;E<$;E++){var de=s[E].texture,X=de.baseTexture.uid;if(!z[X]){var L=d.pop();if(!L){var q=new tf,re=void 0,le=void 0;n.distanceFieldType==="none"?(re=new rl(pe.EMPTY),le=ce.NORMAL):(re=new rl(pe.EMPTY,{program:El.from(mle,ple),uniforms:{uFWidth:0}}),le=ce.NORMAL_NPM);var ye=new tl(q,re);ye.blendMode=le,L={index:0,indexCount:0,vertexCount:0,uvsCount:0,total:0,mesh:ye,vertices:null,uvs:null,indices:null}}L.index=0,L.indexCount=0,L.vertexCount=0,L.uvsCount=0,L.total=0;var we=this._textureCache;we[X]=we[X]||new pe(de.baseTexture),L.mesh.texture=we[X],L.mesh.tint=this._tint,ie.push(L),z[X]=L}z[X].total++}for(var E=0;E<Se.length;E++)ie.indexOf(Se[E])===-1&&this.removeChild(Se[E].mesh);for(var E=0;E<ie.length;E++)ie[E].mesh.parent!==this&&this.addChild(ie[E].mesh);this._activePagesMeshData=ie;for(var E in z){var L=z[E],Ee=L.total;if(!(((r=L.indices)===null||r===void 0?void 0:r.length)>6*Ee)||L.vertices.length<tl.BATCHABLE_SIZE*2)L.vertices=new Float32Array(4*2*Ee),L.uvs=new Float32Array(4*2*Ee),L.indices=new Uint16Array(6*Ee);else for(var Ge=L.total,He=L.vertices,Qe=Ge*4*2;Qe<He.length;Qe++)He[Qe]=0;L.mesh.size=6*Ee}for(var E=0;E<$;E++){var I=s[E],Oe=I.position.x+j[I.line]*(this._align==="justify"?I.prevSpaces:1);this._roundPixels&&(Oe=Math.round(Oe));var Be=Oe*o,We=I.position.y*o,de=I.texture,Te=z[de.baseTexture.uid],dt=de.frame,fr=de._uvs,De=Te.index++;Te.indices[De*6+0]=0+De*4,Te.indices[De*6+1]=1+De*4,Te.indices[De*6+2]=2+De*4,Te.indices[De*6+3]=0+De*4,Te.indices[De*6+4]=2+De*4,Te.indices[De*6+5]=3+De*4,Te.vertices[De*8+0]=Be,Te.vertices[De*8+1]=We,Te.vertices[De*8+2]=Be+dt.width*o,Te.vertices[De*8+3]=We,Te.vertices[De*8+4]=Be+dt.width*o,Te.vertices[De*8+5]=We+dt.height*o,Te.vertices[De*8+6]=Be,Te.vertices[De*8+7]=We+dt.height*o,Te.uvs[De*8+0]=fr.x0,Te.uvs[De*8+1]=fr.y0,Te.uvs[De*8+2]=fr.x1,Te.uvs[De*8+3]=fr.y1,Te.uvs[De*8+4]=fr.x2,Te.uvs[De*8+5]=fr.y2,Te.uvs[De*8+6]=fr.x3,Te.uvs[De*8+7]=fr.y3}this._textWidth=p*o,this._textHeight=(a.y+n.lineHeight)*o;for(var E in z){var L=z[E];if(this.anchor.x!==0||this.anchor.y!==0)for(var Er=0,zn=this._textWidth*this.anchor.x,Hi=this._textHeight*this.anchor.y,Ha=0;Ha<L.total;Ha++)L.vertices[Er++]-=zn,L.vertices[Er++]-=Hi,L.vertices[Er++]-=zn,L.vertices[Er++]-=Hi,L.vertices[Er++]-=zn,L.vertices[Er++]-=Hi,L.vertices[Er++]-=zn,L.vertices[Er++]-=Hi;this._maxLineHeight=b*o;var Il=L.mesh.geometry.getBuffer("aVertexPosition"),Ml=L.mesh.geometry.getBuffer("aTextureCoord"),Rl=L.mesh.geometry.getIndex();Il.data=L.vertices,Ml.data=L.uvs,Rl.data=L.indices,Il.update(),Ml.update(),Rl.update()}for(var E=0;E<s.length;E++)qP.push(s[E]);this._font=n,this.dirty=!1},t.prototype.updateTransform=function(){this.validate(),this.containerUpdateTransform()},t.prototype._render=function(r){this._autoResolution&&this._resolution!==r.resolution&&(this._resolution=r.resolution,this.dirty=!0);var n=Ai.available[this._fontName],i=n.distanceFieldRange,o=n.distanceFieldType,a=n.size;if(o!=="none")for(var s=this.worldTransform,l=s.a,u=s.b,c=s.c,f=s.d,h=Math.sqrt(l*l+u*u),d=Math.sqrt(c*c+f*f),m=(Math.abs(h)+Math.abs(d))/2,g=this.fontSize/a,p=0,v=this._activePagesMeshData;p<v.length;p++){var y=v[p];y.mesh.shader.uniforms.uFWidth=m*i*g*this._resolution}e.prototype._render.call(this,r)},t.prototype.getLocalBounds=function(){return this.validate(),e.prototype.getLocalBounds.call(this)},t.prototype.validate=function(){var r=Ai.available[this._fontName];if(!r)throw new Error('Missing BitmapFont "'+this._fontName+'"');this._font!==r&&(this.dirty=!0),this.dirty&&this.updateText()},Object.defineProperty(t.prototype,"tint",{get:function(){return this._tint},set:function(r){if(this._tint!==r){this._tint=r;for(var n=0;n<this._activePagesMeshData.length;n++)this._activePagesMeshData[n].mesh.tint=r}},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"align",{get:function(){return this._align},set:function(r){this._align!==r&&(this._align=r,this.dirty=!0)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"fontName",{get:function(){return this._fontName},set:function(r){if(!Ai.available[r])throw new Error('Missing BitmapFont "'+r+'"');this._fontName!==r&&(this._fontName=r,this.dirty=!0)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"fontSize",{get:function(){var r;return(r=this._fontSize)!==null&&r!==void 0?r:Ai.available[this._fontName].size},set:function(r){this._fontSize!==r&&(this._fontSize=r,this.dirty=!0)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"anchor",{get:function(){return this._anchor},set:function(r){typeof r=="number"?this._anchor.set(r):this._anchor.copyFrom(r)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"text",{get:function(){return this._text},set:function(r){r=String(r??""),this._text!==r&&(this._text=r,this.dirty=!0)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"maxWidth",{get:function(){return this._maxWidth},set:function(r){this._maxWidth!==r&&(this._maxWidth=r,this.dirty=!0)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"maxLineHeight",{get:function(){return this.validate(),this._maxLineHeight},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"textWidth",{get:function(){return this.validate(),this._textWidth},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"letterSpacing",{get:function(){return this._letterSpacing},set:function(r){this._letterSpacing!==r&&(this._letterSpacing=r,this.dirty=!0)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"roundPixels",{get:function(){return this._roundPixels},set:function(r){r!==this._roundPixels&&(this._roundPixels=r,this.dirty=!0)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"textHeight",{get:function(){return this.validate(),this._textHeight},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"resolution",{get:function(){return this._resolution},set:function(r){this._autoResolution=!1,this._resolution!==r&&(this._resolution=r,this.dirty=!0)},enumerable:!1,configurable:!0}),t.prototype.destroy=function(r){var n=this._textureCache,i=Ai.available[this._fontName],o=i.distanceFieldType==="none"?WP:XP;o.push.apply(o,this._activePagesMeshData);for(var a=0,s=this._activePagesMeshData;a<s.length;a++){var l=s[a];this.removeChild(l.mesh)}this._activePagesMeshData=[],o.filter(function(f){return n[f.mesh.texture.baseTexture.uid]}).forEach(function(f){f.mesh.texture=pe.EMPTY});for(var u in n){var c=n[u];c.destroy(),delete n[u]}this._font=null,this._textureCache=null,e.prototype.destroy.call(this,r)},t.styleDefaults={align:"left",tint:16777215,maxWidth:0,letterSpacing:0},t}(_r),PL=function(){function e(){}return e.add=function(){wt.setExtensionXhrType("fnt",wt.XHR_RESPONSE_TYPE.TEXT)},e.use=function(t,r){var n=X1(t.data);if(!n){r();return}for(var i=e.getBaseUrl(this,t),o=n.parse(t.data),a={},s=function(g){a[g.metadata.pageFile]=g.texture,Object.keys(a).length===o.page.length&&(t.bitmapFont=Ai.install(o,a,!0),r())},l=0;l<o.page.length;++l){var u=o.page[l].file,c=i+u,f=!1;for(var h in this.resources){var d=this.resources[h];if(d.url===c){d.metadata.pageFile=u,d.texture?s(d):d.onAfterMiddleware.add(s),f=!0;break}}if(!f){var m={crossOrigin:t.crossOrigin,loadType:wt.LOAD_TYPE.IMAGE,metadata:Object.assign({pageFile:u},t.metadata.imageMetadata),parentResource:t};this.add(c,m,s)}}},e.getBaseUrl=function(t,r){var n=r.isDataUrl?"":e.dirname(r.url);return r.isDataUrl&&(n==="."&&(n=""),t.baseUrl&&n&&t.baseUrl.charAt(t.baseUrl.length-1)==="/"&&(n+="/")),n=n.replace(t.baseUrl,""),n&&n.charAt(n.length-1)!=="/"&&(n+="/"),n},e.dirname=function(t){var r=t.replace(/\\/g,"/").replace(/\/$/,"").replace(/\/[^\/]*$/,"");return r===t?".":r===""?"/":r},e.extension=Ye.Loader,e}();/*!
 * @pixi/filter-alpha - v6.5.10
 * Compiled Thu, 06 Jul 2023 15:25:11 UTC
 *
 * @pixi/filter-alpha is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 *//*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var o0=function(e,t){return o0=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)n.hasOwnProperty(i)&&(r[i]=n[i])},o0(e,t)};function gle(e,t){o0(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}var yle=`varying vec2 vTextureCoord;

uniform sampler2D uSampler;
uniform float uAlpha;

void main(void)
{
   gl_FragColor = texture2D(uSampler, vTextureCoord) * uAlpha;
}
`,AL=function(e){gle(t,e);function t(r){r===void 0&&(r=1);var n=e.call(this,Fk,yle,{uAlpha:1})||this;return n.alpha=r,n}return Object.defineProperty(t.prototype,"alpha",{get:function(){return this.uniforms.uAlpha},set:function(r){this.uniforms.uAlpha=r},enumerable:!1,configurable:!0}),t}(ge);/*!
 * @pixi/filter-blur - v6.5.10
 * Compiled Thu, 06 Jul 2023 15:25:11 UTC
 *
 * @pixi/filter-blur is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 *//*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var a0=function(e,t){return a0=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)n.hasOwnProperty(i)&&(r[i]=n[i])},a0(e,t)};function OL(e,t){a0(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}var _le=`
    attribute vec2 aVertexPosition;

    uniform mat3 projectionMatrix;

    uniform float strength;

    varying vec2 vBlurTexCoords[%size%];

    uniform vec4 inputSize;
    uniform vec4 outputFrame;

    vec4 filterVertexPosition( void )
    {
        vec2 position = aVertexPosition * max(outputFrame.zw, vec2(0.)) + outputFrame.xy;

        return vec4((projectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);
    }

    vec2 filterTextureCoord( void )
    {
        return aVertexPosition * (outputFrame.zw * inputSize.zw);
    }

    void main(void)
    {
        gl_Position = filterVertexPosition();

        vec2 textureCoord = filterTextureCoord();
        %blur%
    }`;function xle(e,t){var r=Math.ceil(e/2),n=_le,i="",o;t?o="vBlurTexCoords[%index%] =  textureCoord + vec2(%sampleIndex% * strength, 0.0);":o="vBlurTexCoords[%index%] =  textureCoord + vec2(0.0, %sampleIndex% * strength);";for(var a=0;a<e;a++){var s=o.replace("%index%",a.toString());s=s.replace("%sampleIndex%",a-(r-1)+".0"),i+=s,i+=`
`}return n=n.replace("%blur%",i),n=n.replace("%size%",e.toString()),n}var ble={5:[.153388,.221461,.250301],7:[.071303,.131514,.189879,.214607],9:[.028532,.067234,.124009,.179044,.20236],11:[.0093,.028002,.065984,.121703,.175713,.198596],13:[.002406,.009255,.027867,.065666,.121117,.174868,.197641],15:[489e-6,.002403,.009246,.02784,.065602,.120999,.174697,.197448]},Sle=["varying vec2 vBlurTexCoords[%size%];","uniform sampler2D uSampler;","void main(void)","{","    gl_FragColor = vec4(0.0);","    %blur%","}"].join(`
`);function wle(e){for(var t=ble[e],r=t.length,n=Sle,i="",o="gl_FragColor += texture2D(uSampler, vBlurTexCoords[%index%]) * %value%;",a,s=0;s<e;s++){var l=o.replace("%index%",s.toString());a=s,s>=r&&(a=e-s-1),l=l.replace("%value%",t[a].toString()),i+=l,i+=`
`}return n=n.replace("%blur%",i),n=n.replace("%size%",e.toString()),n}var Oc=function(e){OL(t,e);function t(r,n,i,o,a){n===void 0&&(n=8),i===void 0&&(i=4),o===void 0&&(o=ne.FILTER_RESOLUTION),a===void 0&&(a=5);var s=this,l=xle(a,r),u=wle(a);return s=e.call(this,l,u)||this,s.horizontal=r,s.resolution=o,s._quality=0,s.quality=i,s.blur=n,s}return t.prototype.apply=function(r,n,i,o){if(i?this.horizontal?this.uniforms.strength=1/i.width*(i.width/n.width):this.uniforms.strength=1/i.height*(i.height/n.height):this.horizontal?this.uniforms.strength=1/r.renderer.width*(r.renderer.width/n.width):this.uniforms.strength=1/r.renderer.height*(r.renderer.height/n.height),this.uniforms.strength*=this.strength,this.uniforms.strength/=this.passes,this.passes===1)r.applyFilter(this,n,i,o);else{var a=r.getFilterTexture(),s=r.renderer,l=n,u=a;this.state.blend=!1,r.applyFilter(this,l,u,un.CLEAR);for(var c=1;c<this.passes-1;c++){r.bindAndClear(l,un.BLIT),this.uniforms.uSampler=u;var f=u;u=l,l=f,s.shader.bind(this),s.geometry.draw(5)}this.state.blend=!0,r.applyFilter(this,u,i,o),r.returnFilterTexture(a)}},Object.defineProperty(t.prototype,"blur",{get:function(){return this.strength},set:function(r){this.padding=1+Math.abs(r)*2,this.strength=r},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"quality",{get:function(){return this._quality},set:function(r){this._quality=r,this.passes=r},enumerable:!1,configurable:!0}),t}(ge),Ele=function(e){OL(t,e);function t(r,n,i,o){r===void 0&&(r=8),n===void 0&&(n=4),i===void 0&&(i=ne.FILTER_RESOLUTION),o===void 0&&(o=5);var a=e.call(this)||this;return a.blurXFilter=new Oc(!0,r,n,i,o),a.blurYFilter=new Oc(!1,r,n,i,o),a.resolution=i,a.quality=n,a.blur=r,a.repeatEdgePixels=!1,a}return t.prototype.apply=function(r,n,i,o){var a=Math.abs(this.blurXFilter.strength),s=Math.abs(this.blurYFilter.strength);if(a&&s){var l=r.getFilterTexture();this.blurXFilter.apply(r,n,l,un.CLEAR),this.blurYFilter.apply(r,l,i,o),r.returnFilterTexture(l)}else s?this.blurYFilter.apply(r,n,i,o):this.blurXFilter.apply(r,n,i,o)},t.prototype.updatePadding=function(){this._repeatEdgePixels?this.padding=0:this.padding=Math.max(Math.abs(this.blurXFilter.strength),Math.abs(this.blurYFilter.strength))*2},Object.defineProperty(t.prototype,"blur",{get:function(){return this.blurXFilter.blur},set:function(r){this.blurXFilter.blur=this.blurYFilter.blur=r,this.updatePadding()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"quality",{get:function(){return this.blurXFilter.quality},set:function(r){this.blurXFilter.quality=this.blurYFilter.quality=r},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"blurX",{get:function(){return this.blurXFilter.blur},set:function(r){this.blurXFilter.blur=r,this.updatePadding()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"blurY",{get:function(){return this.blurYFilter.blur},set:function(r){this.blurYFilter.blur=r,this.updatePadding()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"blendMode",{get:function(){return this.blurYFilter.blendMode},set:function(r){this.blurYFilter.blendMode=r},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"repeatEdgePixels",{get:function(){return this._repeatEdgePixels},set:function(r){this._repeatEdgePixels=r,this.updatePadding()},enumerable:!1,configurable:!0}),t}(ge);/*!
 * @pixi/filter-color-matrix - v6.5.10
 * Compiled Thu, 06 Jul 2023 15:25:11 UTC
 *
 * @pixi/filter-color-matrix is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 *//*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var s0=function(e,t){return s0=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)n.hasOwnProperty(i)&&(r[i]=n[i])},s0(e,t)};function Tle(e,t){s0(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}var Cle=`varying vec2 vTextureCoord;
uniform sampler2D uSampler;
uniform float m[20];
uniform float uAlpha;

void main(void)
{
    vec4 c = texture2D(uSampler, vTextureCoord);

    if (uAlpha == 0.0) {
        gl_FragColor = c;
        return;
    }

    // Un-premultiply alpha before applying the color matrix. See issue #3539.
    if (c.a > 0.0) {
      c.rgb /= c.a;
    }

    vec4 result;

    result.r = (m[0] * c.r);
        result.r += (m[1] * c.g);
        result.r += (m[2] * c.b);
        result.r += (m[3] * c.a);
        result.r += m[4];

    result.g = (m[5] * c.r);
        result.g += (m[6] * c.g);
        result.g += (m[7] * c.b);
        result.g += (m[8] * c.a);
        result.g += m[9];

    result.b = (m[10] * c.r);
       result.b += (m[11] * c.g);
       result.b += (m[12] * c.b);
       result.b += (m[13] * c.a);
       result.b += m[14];

    result.a = (m[15] * c.r);
       result.a += (m[16] * c.g);
       result.a += (m[17] * c.b);
       result.a += (m[18] * c.a);
       result.a += m[19];

    vec3 rgb = mix(c.rgb, result.rgb, uAlpha);

    // Premultiply alpha again.
    rgb *= result.a;

    gl_FragColor = vec4(rgb, result.a);
}
`,l0=function(e){Tle(t,e);function t(){var r=this,n={m:new Float32Array([1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0]),uAlpha:1};return r=e.call(this,B1,Cle,n)||this,r.alpha=1,r}return t.prototype._loadMatrix=function(r,n){n===void 0&&(n=!1);var i=r;n&&(this._multiply(i,this.uniforms.m,r),i=this._colorMatrix(i)),this.uniforms.m=i},t.prototype._multiply=function(r,n,i){return r[0]=n[0]*i[0]+n[1]*i[5]+n[2]*i[10]+n[3]*i[15],r[1]=n[0]*i[1]+n[1]*i[6]+n[2]*i[11]+n[3]*i[16],r[2]=n[0]*i[2]+n[1]*i[7]+n[2]*i[12]+n[3]*i[17],r[3]=n[0]*i[3]+n[1]*i[8]+n[2]*i[13]+n[3]*i[18],r[4]=n[0]*i[4]+n[1]*i[9]+n[2]*i[14]+n[3]*i[19]+n[4],r[5]=n[5]*i[0]+n[6]*i[5]+n[7]*i[10]+n[8]*i[15],r[6]=n[5]*i[1]+n[6]*i[6]+n[7]*i[11]+n[8]*i[16],r[7]=n[5]*i[2]+n[6]*i[7]+n[7]*i[12]+n[8]*i[17],r[8]=n[5]*i[3]+n[6]*i[8]+n[7]*i[13]+n[8]*i[18],r[9]=n[5]*i[4]+n[6]*i[9]+n[7]*i[14]+n[8]*i[19]+n[9],r[10]=n[10]*i[0]+n[11]*i[5]+n[12]*i[10]+n[13]*i[15],r[11]=n[10]*i[1]+n[11]*i[6]+n[12]*i[11]+n[13]*i[16],r[12]=n[10]*i[2]+n[11]*i[7]+n[12]*i[12]+n[13]*i[17],r[13]=n[10]*i[3]+n[11]*i[8]+n[12]*i[13]+n[13]*i[18],r[14]=n[10]*i[4]+n[11]*i[9]+n[12]*i[14]+n[13]*i[19]+n[14],r[15]=n[15]*i[0]+n[16]*i[5]+n[17]*i[10]+n[18]*i[15],r[16]=n[15]*i[1]+n[16]*i[6]+n[17]*i[11]+n[18]*i[16],r[17]=n[15]*i[2]+n[16]*i[7]+n[17]*i[12]+n[18]*i[17],r[18]=n[15]*i[3]+n[16]*i[8]+n[17]*i[13]+n[18]*i[18],r[19]=n[15]*i[4]+n[16]*i[9]+n[17]*i[14]+n[18]*i[19]+n[19],r},t.prototype._colorMatrix=function(r){var n=new Float32Array(r);return n[4]/=255,n[9]/=255,n[14]/=255,n[19]/=255,n},t.prototype.brightness=function(r,n){var i=[r,0,0,0,0,0,r,0,0,0,0,0,r,0,0,0,0,0,1,0];this._loadMatrix(i,n)},t.prototype.tint=function(r,n){var i=r>>16&255,o=r>>8&255,a=r&255,s=[i/255,0,0,0,0,0,o/255,0,0,0,0,0,a/255,0,0,0,0,0,1,0];this._loadMatrix(s,n)},t.prototype.greyscale=function(r,n){var i=[r,r,r,0,0,r,r,r,0,0,r,r,r,0,0,0,0,0,1,0];this._loadMatrix(i,n)},t.prototype.blackAndWhite=function(r){var n=[.3,.6,.1,0,0,.3,.6,.1,0,0,.3,.6,.1,0,0,0,0,0,1,0];this._loadMatrix(n,r)},t.prototype.hue=function(r,n){r=(r||0)/180*Math.PI;var i=Math.cos(r),o=Math.sin(r),a=Math.sqrt,s=1/3,l=a(s),u=i+(1-i)*s,c=s*(1-i)-l*o,f=s*(1-i)+l*o,h=s*(1-i)+l*o,d=i+s*(1-i),m=s*(1-i)-l*o,g=s*(1-i)-l*o,p=s*(1-i)+l*o,v=i+s*(1-i),y=[u,c,f,0,0,h,d,m,0,0,g,p,v,0,0,0,0,0,1,0];this._loadMatrix(y,n)},t.prototype.contrast=function(r,n){var i=(r||0)+1,o=-.5*(i-1),a=[i,0,0,0,o,0,i,0,0,o,0,0,i,0,o,0,0,0,1,0];this._loadMatrix(a,n)},t.prototype.saturate=function(r,n){r===void 0&&(r=0);var i=r*2/3+1,o=(i-1)*-.5,a=[i,o,o,0,0,o,i,o,0,0,o,o,i,0,0,0,0,0,1,0];this._loadMatrix(a,n)},t.prototype.desaturate=function(){this.saturate(-1)},t.prototype.negative=function(r){var n=[-1,0,0,1,0,0,-1,0,1,0,0,0,-1,1,0,0,0,0,1,0];this._loadMatrix(n,r)},t.prototype.sepia=function(r){var n=[.393,.7689999,.18899999,0,0,.349,.6859999,.16799999,0,0,.272,.5339999,.13099999,0,0,0,0,0,1,0];this._loadMatrix(n,r)},t.prototype.technicolor=function(r){var n=[1.9125277891456083,-.8545344976951645,-.09155508482755585,0,11.793603434377337,-.3087833385928097,1.7658908555458428,-.10601743074722245,0,-70.35205161461398,-.231103377548616,-.7501899197440212,1.847597816108189,0,30.950940869491138,0,0,0,1,0];this._loadMatrix(n,r)},t.prototype.polaroid=function(r){var n=[1.438,-.062,-.062,0,0,-.122,1.378,-.122,0,0,-.016,-.016,1.483,0,0,0,0,0,1,0];this._loadMatrix(n,r)},t.prototype.toBGR=function(r){var n=[0,0,1,0,0,0,1,0,0,0,1,0,0,0,0,0,0,0,1,0];this._loadMatrix(n,r)},t.prototype.kodachrome=function(r){var n=[1.1285582396593525,-.3967382283601348,-.03992559172921793,0,63.72958762196502,-.16404339962244616,1.0835251566291304,-.05498805115633132,0,24.732407896706203,-.16786010706155763,-.5603416277695248,1.6014850761964943,0,35.62982807460946,0,0,0,1,0];this._loadMatrix(n,r)},t.prototype.browni=function(r){var n=[.5997023498159715,.34553243048391263,-.2708298674538042,0,47.43192855600873,-.037703249837783157,.8609577587992641,.15059552388459913,0,-36.96841498319127,.24113635128153335,-.07441037908422492,.44972182064877153,0,-7.562075277591283,0,0,0,1,0];this._loadMatrix(n,r)},t.prototype.vintage=function(r){var n=[.6279345635605994,.3202183420819367,-.03965408211312453,0,9.651285835294123,.02578397704808868,.6441188644374771,.03259127616149294,0,7.462829176470591,.0466055556782719,-.0851232987247891,.5241648018700465,0,5.159190588235296,0,0,0,1,0];this._loadMatrix(n,r)},t.prototype.colorTone=function(r,n,i,o,a){r=r||.2,n=n||.15,i=i||16770432,o=o||3375104;var s=(i>>16&255)/255,l=(i>>8&255)/255,u=(i&255)/255,c=(o>>16&255)/255,f=(o>>8&255)/255,h=(o&255)/255,d=[.3,.59,.11,0,0,s,l,u,r,0,c,f,h,n,0,s-c,l-f,u-h,0,0];this._loadMatrix(d,a)},t.prototype.night=function(r,n){r=r||.1;var i=[r*-2,-r,0,0,0,-r,0,r,0,0,0,r,r*2,0,0,0,0,0,1,0];this._loadMatrix(i,n)},t.prototype.predator=function(r,n){var i=[11.224130630493164*r,-4.794486999511719*r,-2.8746118545532227*r,0*r,.40342438220977783*r,-3.6330697536468506*r,9.193157196044922*r,-2.951810836791992*r,0*r,-1.316135048866272*r,-3.2184197902679443*r,-4.2375030517578125*r,7.476448059082031*r,0*r,.8044459223747253*r,0,0,0,1,0];this._loadMatrix(i,n)},t.prototype.lsd=function(r){var n=[2,-.4,.5,0,0,-.5,2,-.4,0,0,-.4,-.5,3,0,0,0,0,0,1,0];this._loadMatrix(n,r)},t.prototype.reset=function(){var r=[1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0];this._loadMatrix(r,!1)},Object.defineProperty(t.prototype,"matrix",{get:function(){return this.uniforms.m},set:function(r){this.uniforms.m=r},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"alpha",{get:function(){return this.uniforms.uAlpha},set:function(r){this.uniforms.uAlpha=r},enumerable:!1,configurable:!0}),t}(ge);l0.prototype.grayscale=l0.prototype.greyscale;/*!
 * @pixi/filter-displacement - v6.5.10
 * Compiled Thu, 06 Jul 2023 15:25:11 UTC
 *
 * @pixi/filter-displacement is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 *//*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var u0=function(e,t){return u0=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)n.hasOwnProperty(i)&&(r[i]=n[i])},u0(e,t)};function Ple(e,t){u0(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}var Ale=`varying vec2 vFilterCoord;
varying vec2 vTextureCoord;

uniform vec2 scale;
uniform mat2 rotation;
uniform sampler2D uSampler;
uniform sampler2D mapSampler;

uniform highp vec4 inputSize;
uniform vec4 inputClamp;

void main(void)
{
  vec4 map =  texture2D(mapSampler, vFilterCoord);

  map -= 0.5;
  map.xy = scale * inputSize.zw * (rotation * map.xy);

  gl_FragColor = texture2D(uSampler, clamp(vec2(vTextureCoord.x + map.x, vTextureCoord.y + map.y), inputClamp.xy, inputClamp.zw));
}
`,Ole=`attribute vec2 aVertexPosition;

uniform mat3 projectionMatrix;
uniform mat3 filterMatrix;

varying vec2 vTextureCoord;
varying vec2 vFilterCoord;

uniform vec4 inputSize;
uniform vec4 outputFrame;

vec4 filterVertexPosition( void )
{
    vec2 position = aVertexPosition * max(outputFrame.zw, vec2(0.)) + outputFrame.xy;

    return vec4((projectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);
}

vec2 filterTextureCoord( void )
{
    return aVertexPosition * (outputFrame.zw * inputSize.zw);
}

void main(void)
{
	gl_Position = filterVertexPosition();
	vTextureCoord = filterTextureCoord();
	vFilterCoord = ( filterMatrix * vec3( vTextureCoord, 1.0)  ).xy;
}
`,Ile=function(e){Ple(t,e);function t(r,n){var i=this,o=new gt;return r.renderable=!1,i=e.call(this,Ole,Ale,{mapSampler:r._texture,filterMatrix:o,scale:{x:1,y:1},rotation:new Float32Array([1,0,0,1])})||this,i.maskSprite=r,i.maskMatrix=o,n==null&&(n=20),i.scale=new Pe(n,n),i}return t.prototype.apply=function(r,n,i,o){this.uniforms.filterMatrix=r.calculateSpriteMatrix(this.maskMatrix,this.maskSprite),this.uniforms.scale.x=this.scale.x,this.uniforms.scale.y=this.scale.y;var a=this.maskSprite.worldTransform,s=Math.sqrt(a.a*a.a+a.b*a.b),l=Math.sqrt(a.c*a.c+a.d*a.d);s!==0&&l!==0&&(this.uniforms.rotation[0]=a.a/s,this.uniforms.rotation[1]=a.b/s,this.uniforms.rotation[2]=a.c/l,this.uniforms.rotation[3]=a.d/l),r.applyFilter(this,n,i,o)},Object.defineProperty(t.prototype,"map",{get:function(){return this.uniforms.mapSampler},set:function(r){this.uniforms.mapSampler=r},enumerable:!1,configurable:!0}),t}(ge);/*!
 * @pixi/filter-fxaa - v6.5.10
 * Compiled Thu, 06 Jul 2023 15:25:11 UTC
 *
 * @pixi/filter-fxaa is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 *//*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var c0=function(e,t){return c0=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)n.hasOwnProperty(i)&&(r[i]=n[i])},c0(e,t)};function Mle(e,t){c0(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}var Rle=`
attribute vec2 aVertexPosition;

uniform mat3 projectionMatrix;

varying vec2 v_rgbNW;
varying vec2 v_rgbNE;
varying vec2 v_rgbSW;
varying vec2 v_rgbSE;
varying vec2 v_rgbM;

varying vec2 vFragCoord;

uniform vec4 inputSize;
uniform vec4 outputFrame;

vec4 filterVertexPosition( void )
{
    vec2 position = aVertexPosition * max(outputFrame.zw, vec2(0.)) + outputFrame.xy;

    return vec4((projectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);
}

void texcoords(vec2 fragCoord, vec2 inverseVP,
               out vec2 v_rgbNW, out vec2 v_rgbNE,
               out vec2 v_rgbSW, out vec2 v_rgbSE,
               out vec2 v_rgbM) {
    v_rgbNW = (fragCoord + vec2(-1.0, -1.0)) * inverseVP;
    v_rgbNE = (fragCoord + vec2(1.0, -1.0)) * inverseVP;
    v_rgbSW = (fragCoord + vec2(-1.0, 1.0)) * inverseVP;
    v_rgbSE = (fragCoord + vec2(1.0, 1.0)) * inverseVP;
    v_rgbM = vec2(fragCoord * inverseVP);
}

void main(void) {

   gl_Position = filterVertexPosition();

   vFragCoord = aVertexPosition * outputFrame.zw;

   texcoords(vFragCoord, inputSize.zw, v_rgbNW, v_rgbNE, v_rgbSW, v_rgbSE, v_rgbM);
}
`,kle=`varying vec2 v_rgbNW;
varying vec2 v_rgbNE;
varying vec2 v_rgbSW;
varying vec2 v_rgbSE;
varying vec2 v_rgbM;

varying vec2 vFragCoord;
uniform sampler2D uSampler;
uniform highp vec4 inputSize;


/**
 Basic FXAA implementation based on the code on geeks3d.com with the
 modification that the texture2DLod stuff was removed since it's
 unsupported by WebGL.

 --

 From:
 https://github.com/mitsuhiko/webgl-meincraft

 Copyright (c) 2011 by Armin Ronacher.

 Some rights reserved.

 Redistribution and use in source and binary forms, with or without
 modification, are permitted provided that the following conditions are
 met:

 * Redistributions of source code must retain the above copyright
 notice, this list of conditions and the following disclaimer.

 * Redistributions in binary form must reproduce the above
 copyright notice, this list of conditions and the following
 disclaimer in the documentation and/or other materials provided
 with the distribution.

 * The names of the contributors may not be used to endorse or
 promote products derived from this software without specific
 prior written permission.

 THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS
 "AS IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT
 LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR
 A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT
 OWNER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL,
 SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT
 LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE,
 DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY
 THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT
 (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE
 OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
 */

#ifndef FXAA_REDUCE_MIN
#define FXAA_REDUCE_MIN   (1.0/ 128.0)
#endif
#ifndef FXAA_REDUCE_MUL
#define FXAA_REDUCE_MUL   (1.0 / 8.0)
#endif
#ifndef FXAA_SPAN_MAX
#define FXAA_SPAN_MAX     8.0
#endif

//optimized version for mobile, where dependent
//texture reads can be a bottleneck
vec4 fxaa(sampler2D tex, vec2 fragCoord, vec2 inverseVP,
          vec2 v_rgbNW, vec2 v_rgbNE,
          vec2 v_rgbSW, vec2 v_rgbSE,
          vec2 v_rgbM) {
    vec4 color;
    vec3 rgbNW = texture2D(tex, v_rgbNW).xyz;
    vec3 rgbNE = texture2D(tex, v_rgbNE).xyz;
    vec3 rgbSW = texture2D(tex, v_rgbSW).xyz;
    vec3 rgbSE = texture2D(tex, v_rgbSE).xyz;
    vec4 texColor = texture2D(tex, v_rgbM);
    vec3 rgbM  = texColor.xyz;
    vec3 luma = vec3(0.299, 0.587, 0.114);
    float lumaNW = dot(rgbNW, luma);
    float lumaNE = dot(rgbNE, luma);
    float lumaSW = dot(rgbSW, luma);
    float lumaSE = dot(rgbSE, luma);
    float lumaM  = dot(rgbM,  luma);
    float lumaMin = min(lumaM, min(min(lumaNW, lumaNE), min(lumaSW, lumaSE)));
    float lumaMax = max(lumaM, max(max(lumaNW, lumaNE), max(lumaSW, lumaSE)));

    mediump vec2 dir;
    dir.x = -((lumaNW + lumaNE) - (lumaSW + lumaSE));
    dir.y =  ((lumaNW + lumaSW) - (lumaNE + lumaSE));

    float dirReduce = max((lumaNW + lumaNE + lumaSW + lumaSE) *
                          (0.25 * FXAA_REDUCE_MUL), FXAA_REDUCE_MIN);

    float rcpDirMin = 1.0 / (min(abs(dir.x), abs(dir.y)) + dirReduce);
    dir = min(vec2(FXAA_SPAN_MAX, FXAA_SPAN_MAX),
              max(vec2(-FXAA_SPAN_MAX, -FXAA_SPAN_MAX),
                  dir * rcpDirMin)) * inverseVP;

    vec3 rgbA = 0.5 * (
                       texture2D(tex, fragCoord * inverseVP + dir * (1.0 / 3.0 - 0.5)).xyz +
                       texture2D(tex, fragCoord * inverseVP + dir * (2.0 / 3.0 - 0.5)).xyz);
    vec3 rgbB = rgbA * 0.5 + 0.25 * (
                                     texture2D(tex, fragCoord * inverseVP + dir * -0.5).xyz +
                                     texture2D(tex, fragCoord * inverseVP + dir * 0.5).xyz);

    float lumaB = dot(rgbB, luma);
    if ((lumaB < lumaMin) || (lumaB > lumaMax))
        color = vec4(rgbA, texColor.a);
    else
        color = vec4(rgbB, texColor.a);
    return color;
}

void main() {

      vec4 color;

      color = fxaa(uSampler, vFragCoord, inputSize.zw, v_rgbNW, v_rgbNE, v_rgbSW, v_rgbSE, v_rgbM);

      gl_FragColor = color;
}
`,Lle=function(e){Mle(t,e);function t(){return e.call(this,Rle,kle)||this}return t}(ge);/*!
 * @pixi/filter-noise - v6.5.10
 * Compiled Thu, 06 Jul 2023 15:25:11 UTC
 *
 * @pixi/filter-noise is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 *//*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var f0=function(e,t){return f0=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)n.hasOwnProperty(i)&&(r[i]=n[i])},f0(e,t)};function Fle(e,t){f0(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}var Dle=`precision highp float;

varying vec2 vTextureCoord;
varying vec4 vColor;

uniform float uNoise;
uniform float uSeed;
uniform sampler2D uSampler;

float rand(vec2 co)
{
    return fract(sin(dot(co.xy, vec2(12.9898, 78.233))) * 43758.5453);
}

void main()
{
    vec4 color = texture2D(uSampler, vTextureCoord);
    float randomValue = rand(gl_FragCoord.xy * uSeed);
    float diff = (randomValue - 0.5) * uNoise;

    // Un-premultiply alpha before applying the color matrix. See issue #3539.
    if (color.a > 0.0) {
        color.rgb /= color.a;
    }

    color.r += diff;
    color.g += diff;
    color.b += diff;

    // Premultiply alpha again.
    color.rgb *= color.a;

    gl_FragColor = color;
}
`,Nle=function(e){Fle(t,e);function t(r,n){r===void 0&&(r=.5),n===void 0&&(n=Math.random());var i=e.call(this,B1,Dle,{uNoise:0,uSeed:0})||this;return i.noise=r,i.seed=n,i}return Object.defineProperty(t.prototype,"noise",{get:function(){return this.uniforms.uNoise},set:function(r){this.uniforms.uNoise=r},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"seed",{get:function(){return this.uniforms.uSeed},set:function(r){this.uniforms.uSeed=r},enumerable:!1,configurable:!0}),t}(ge);/*!
 * @pixi/mixin-cache-as-bitmap - v6.5.10
 * Compiled Thu, 06 Jul 2023 15:25:11 UTC
 *
 * @pixi/mixin-cache-as-bitmap is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */var IL=new gt;At.prototype._cacheAsBitmap=!1;At.prototype._cacheData=null;At.prototype._cacheAsBitmapResolution=null;At.prototype._cacheAsBitmapMultisample=ft.NONE;var Ble=function(){function e(){this.textureCacheId=null,this.originalRender=null,this.originalRenderCanvas=null,this.originalCalculateBounds=null,this.originalGetLocalBounds=null,this.originalUpdateTransform=null,this.originalDestroy=null,this.originalMask=null,this.originalFilterArea=null,this.originalContainsPoint=null,this.sprite=null}return e}();Object.defineProperties(At.prototype,{cacheAsBitmapResolution:{get:function(){return this._cacheAsBitmapResolution},set:function(e){e!==this._cacheAsBitmapResolution&&(this._cacheAsBitmapResolution=e,this.cacheAsBitmap&&(this.cacheAsBitmap=!1,this.cacheAsBitmap=!0))}},cacheAsBitmapMultisample:{get:function(){return this._cacheAsBitmapMultisample},set:function(e){e!==this._cacheAsBitmapMultisample&&(this._cacheAsBitmapMultisample=e,this.cacheAsBitmap&&(this.cacheAsBitmap=!1,this.cacheAsBitmap=!0))}},cacheAsBitmap:{get:function(){return this._cacheAsBitmap},set:function(e){if(this._cacheAsBitmap!==e){this._cacheAsBitmap=e;var t;e?(this._cacheData||(this._cacheData=new Ble),t=this._cacheData,t.originalRender=this.render,t.originalRenderCanvas=this.renderCanvas,t.originalUpdateTransform=this.updateTransform,t.originalCalculateBounds=this.calculateBounds,t.originalGetLocalBounds=this.getLocalBounds,t.originalDestroy=this.destroy,t.originalContainsPoint=this.containsPoint,t.originalMask=this._mask,t.originalFilterArea=this.filterArea,this.render=this._renderCached,this.renderCanvas=this._renderCachedCanvas,this.destroy=this._cacheAsBitmapDestroy):(t=this._cacheData,t.sprite&&this._destroyCachedDisplayObject(),this.render=t.originalRender,this.renderCanvas=t.originalRenderCanvas,this.calculateBounds=t.originalCalculateBounds,this.getLocalBounds=t.originalGetLocalBounds,this.destroy=t.originalDestroy,this.updateTransform=t.originalUpdateTransform,this.containsPoint=t.originalContainsPoint,this._mask=t.originalMask,this.filterArea=t.originalFilterArea)}}}});At.prototype._renderCached=function(t){!this.visible||this.worldAlpha<=0||!this.renderable||(this._initCachedDisplayObject(t),this._cacheData.sprite.transform._worldID=this.transform._worldID,this._cacheData.sprite.worldAlpha=this.worldAlpha,this._cacheData.sprite._render(t))};At.prototype._initCachedDisplayObject=function(t){var r;if(!(this._cacheData&&this._cacheData.sprite)){var n=this.alpha;this.alpha=1,t.batch.flush();var i=this.getLocalBounds(null,!0).clone();if(this.filters&&this.filters.length){var o=this.filters[0].padding;i.pad(o)}i.ceil(ne.RESOLUTION);var a=t.renderTexture.current,s=t.renderTexture.sourceFrame.clone(),l=t.renderTexture.destinationFrame.clone(),u=t.projection.transform,c=Lo.create({width:i.width,height:i.height,resolution:this.cacheAsBitmapResolution||t.resolution,multisample:(r=this.cacheAsBitmapMultisample)!==null&&r!==void 0?r:t.multisample}),f="cacheAsBitmap_"+Ro();this._cacheData.textureCacheId=f,Le.addToCache(c.baseTexture,f),pe.addToCache(c,f);var h=this.transform.localTransform.copyTo(IL).invert().translate(-i.x,-i.y);this.render=this._cacheData.originalRender,t.render(this,{renderTexture:c,clear:!0,transform:h,skipUpdateTransform:!1}),t.framebuffer.blit(),t.projection.transform=u,t.renderTexture.bind(a,s,l),this.render=this._renderCached,this.updateTransform=this.displayObjectUpdateTransform,this.calculateBounds=this._calculateCachedBounds,this.getLocalBounds=this._getCachedLocalBounds,this._mask=null,this.filterArea=null,this.alpha=n;var d=new ji(c);d.transform.worldTransform=this.transform.worldTransform,d.anchor.x=-(i.x/i.width),d.anchor.y=-(i.y/i.height),d.alpha=n,d._bounds=this._bounds,this._cacheData.sprite=d,this.transform._parentID=-1,this.parent?this.updateTransform():(this.enableTempParent(),this.updateTransform(),this.disableTempParent(null)),this.containsPoint=d.containsPoint.bind(d)}};At.prototype._renderCachedCanvas=function(t){!this.visible||this.worldAlpha<=0||!this.renderable||(this._initCachedDisplayObjectCanvas(t),this._cacheData.sprite.worldAlpha=this.worldAlpha,this._cacheData.sprite._renderCanvas(t))};At.prototype._initCachedDisplayObjectCanvas=function(t){if(!(this._cacheData&&this._cacheData.sprite)){var r=this.getLocalBounds(null,!0),n=this.alpha;this.alpha=1;var i=t.context,o=t._projTransform;r.ceil(ne.RESOLUTION);var a=Lo.create({width:r.width,height:r.height}),s="cacheAsBitmap_"+Ro();this._cacheData.textureCacheId=s,Le.addToCache(a.baseTexture,s),pe.addToCache(a,s);var l=IL;this.transform.localTransform.copyTo(l),l.invert(),l.tx-=r.x,l.ty-=r.y,this.renderCanvas=this._cacheData.originalRenderCanvas,t.render(this,{renderTexture:a,clear:!0,transform:l,skipUpdateTransform:!1}),t.context=i,t._projTransform=o,this.renderCanvas=this._renderCachedCanvas,this.updateTransform=this.displayObjectUpdateTransform,this.calculateBounds=this._calculateCachedBounds,this.getLocalBounds=this._getCachedLocalBounds,this._mask=null,this.filterArea=null,this.alpha=n;var u=new ji(a);u.transform.worldTransform=this.transform.worldTransform,u.anchor.x=-(r.x/r.width),u.anchor.y=-(r.y/r.height),u.alpha=n,u._bounds=this._bounds,this._cacheData.sprite=u,this.transform._parentID=-1,this.parent?this.updateTransform():(this.parent=t._tempDisplayObjectParent,this.updateTransform(),this.parent=null),this.containsPoint=u.containsPoint.bind(u)}};At.prototype._calculateCachedBounds=function(){this._bounds.clear(),this._cacheData.sprite.transform._worldID=this.transform._worldID,this._cacheData.sprite._calculateBounds(),this._bounds.updateID=this._boundsID};At.prototype._getCachedLocalBounds=function(){return this._cacheData.sprite.getLocalBounds(null)};At.prototype._destroyCachedDisplayObject=function(){this._cacheData.sprite._texture.destroy(!0),this._cacheData.sprite=null,Le.removeFromCache(this._cacheData.textureCacheId),pe.removeFromCache(this._cacheData.textureCacheId),this._cacheData.textureCacheId=null};At.prototype._cacheAsBitmapDestroy=function(t){this.cacheAsBitmap=!1,this.destroy(t)};/*!
 * @pixi/mixin-get-child-by-name - v6.5.10
 * Compiled Thu, 06 Jul 2023 15:25:11 UTC
 *
 * @pixi/mixin-get-child-by-name is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */At.prototype.name=null;_r.prototype.getChildByName=function(t,r){for(var n=0,i=this.children.length;n<i;n++)if(this.children[n].name===t)return this.children[n];if(r)for(var n=0,i=this.children.length;n<i;n++){var o=this.children[n];if(o.getChildByName){var a=o.getChildByName(t,!0);if(a)return a}}return null};/*!
 * @pixi/mixin-get-global-position - v6.5.10
 * Compiled Thu, 06 Jul 2023 15:25:11 UTC
 *
 * @pixi/mixin-get-global-position is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */At.prototype.getGlobalPosition=function(t,r){return t===void 0&&(t=new Pe),r===void 0&&(r=!1),this.parent?this.parent.toGlobal(this.position,t,r):(t.x=this.position.x,t.y=this.position.y),t};/*!
 * @pixi/app - v6.5.10
 * Compiled Thu, 06 Jul 2023 15:25:11 UTC
 *
 * @pixi/app is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */var ML=function(){function e(){}return e.init=function(t){var r=this;Object.defineProperty(this,"resizeTo",{set:function(n){globalThis.removeEventListener("resize",this.queueResize),this._resizeTo=n,n&&(globalThis.addEventListener("resize",this.queueResize),this.resize())},get:function(){return this._resizeTo}}),this.queueResize=function(){r._resizeTo&&(r.cancelResize(),r._resizeId=requestAnimationFrame(function(){return r.resize()}))},this.cancelResize=function(){r._resizeId&&(cancelAnimationFrame(r._resizeId),r._resizeId=null)},this.resize=function(){if(r._resizeTo){r.cancelResize();var n,i;if(r._resizeTo===globalThis.window)n=globalThis.innerWidth,i=globalThis.innerHeight;else{var o=r._resizeTo,a=o.clientWidth,s=o.clientHeight;n=a,i=s}r.renderer.resize(n,i)}},this._resizeId=null,this._resizeTo=null,this.resizeTo=t.resizeTo||null},e.destroy=function(){globalThis.removeEventListener("resize",this.queueResize),this.cancelResize(),this.cancelResize=null,this.queueResize=null,this.resizeTo=null,this.resize=null},e.extension=Ye.Application,e}(),q1=function(){function e(t){var r=this;this.stage=new _r,t=Object.assign({forceCanvas:!1},t),this.renderer=Lk(t),e._plugins.forEach(function(n){n.init.call(r,t)})}return e.registerPlugin=function(t){Or("6.5.0","Application.registerPlugin() is deprecated, use extensions.add()"),Si.add({type:Ye.Application,ref:t})},e.prototype.render=function(){this.renderer.render(this.stage)},Object.defineProperty(e.prototype,"view",{get:function(){return this.renderer.view},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"screen",{get:function(){return this.renderer.screen},enumerable:!1,configurable:!0}),e.prototype.destroy=function(t,r){var n=this,i=e._plugins.slice(0);i.reverse(),i.forEach(function(o){o.destroy.call(n)}),this.stage.destroy(r),this.stage=null,this.renderer.destroy(t),this.renderer=null},e._plugins=[],e}();Si.handleByList(Ye.Application,q1._plugins);Si.add(ML);/*!
 * @pixi/mesh-extras - v6.5.10
 * Compiled Thu, 06 Jul 2023 15:25:11 UTC
 *
 * @pixi/mesh-extras is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 *//*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var h0=function(e,t){return h0=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)n.hasOwnProperty(i)&&(r[i]=n[i])},h0(e,t)};function Tl(e,t){h0(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}var RL=function(e){Tl(t,e);function t(r,n,i,o){r===void 0&&(r=100),n===void 0&&(n=100),i===void 0&&(i=10),o===void 0&&(o=10);var a=e.call(this)||this;return a.segWidth=i,a.segHeight=o,a.width=r,a.height=n,a.build(),a}return t.prototype.build=function(){for(var r=this.segWidth*this.segHeight,n=[],i=[],o=[],a=this.segWidth-1,s=this.segHeight-1,l=this.width/a,u=this.height/s,c=0;c<r;c++){var f=c%this.segWidth,h=c/this.segWidth|0;n.push(f*l,h*u),i.push(f/a,h/s)}for(var d=a*s,c=0;c<d;c++){var m=c%a,g=c/a|0,p=g*this.segWidth+m,v=g*this.segWidth+m+1,y=(g+1)*this.segWidth+m,_=(g+1)*this.segWidth+m+1;o.push(p,v,y,v,_,y)}this.buffers[0].data=new Float32Array(n),this.buffers[1].data=new Float32Array(i),this.indexBuffer.data=new Uint16Array(o),this.buffers[0].update(),this.buffers[1].update(),this.indexBuffer.update()},t}(tf),kL=function(e){Tl(t,e);function t(r,n,i){r===void 0&&(r=200),i===void 0&&(i=0);var o=e.call(this,new Float32Array(n.length*4),new Float32Array(n.length*4),new Uint16Array((n.length-1)*6))||this;return o.points=n,o._width=r,o.textureScale=i,o.build(),o}return Object.defineProperty(t.prototype,"width",{get:function(){return this._width},enumerable:!1,configurable:!0}),t.prototype.build=function(){var r=this.points;if(r){var n=this.getBuffer("aVertexPosition"),i=this.getBuffer("aTextureCoord"),o=this.getIndex();if(!(r.length<1)){n.data.length/4!==r.length&&(n.data=new Float32Array(r.length*4),i.data=new Float32Array(r.length*4),o.data=new Uint16Array((r.length-1)*6));var a=i.data,s=o.data;a[0]=0,a[1]=0,a[2]=0,a[3]=1;for(var l=0,u=r[0],c=this._width*this.textureScale,f=r.length,h=0;h<f;h++){var d=h*4;if(this.textureScale>0){var m=u.x-r[h].x,g=u.y-r[h].y,p=Math.sqrt(m*m+g*g);u=r[h],l+=p/c}else l=h/(f-1);a[d]=l,a[d+1]=0,a[d+2]=l,a[d+3]=1}for(var v=0,h=0;h<f-1;h++){var d=h*2;s[v++]=d,s[v++]=d+1,s[v++]=d+2,s[v++]=d+2,s[v++]=d+1,s[v++]=d+3}i.update(),o.update(),this.updateVertices()}}},t.prototype.updateVertices=function(){var r=this.points;if(!(r.length<1)){for(var n=r[0],i,o=0,a=0,s=this.buffers[0].data,l=r.length,u=0;u<l;u++){var c=r[u],f=u*4;u<r.length-1?i=r[u+1]:i=c,a=-(i.x-n.x),o=i.y-n.y;var h=Math.sqrt(o*o+a*a),d=this.textureScale>0?this.textureScale*this._width/2:this._width/2;o/=h,a/=h,o*=d,a*=d,s[f]=c.x+o,s[f+1]=c.y+a,s[f+2]=c.x-o,s[f+3]=c.y-a,n=c}this.buffers[0].update()}},t.prototype.update=function(){this.textureScale>0?this.build():this.updateVertices()},t}(tf),jle=function(e){Tl(t,e);function t(r,n,i){i===void 0&&(i=0);var o=this,a=new kL(r.height,n,i),s=new rl(r);return i>0&&(r.baseTexture.wrapMode=Ln.REPEAT),o=e.call(this,a,s)||this,o.autoUpdate=!0,o}return t.prototype._render=function(r){var n=this.geometry;(this.autoUpdate||n._width!==this.shader.texture.height)&&(n._width=this.shader.texture.height,n.update()),e.prototype._render.call(this,r)},t}(tl),LL=function(e){Tl(t,e);function t(r,n,i){var o=this,a=new RL(r.width,r.height,n,i),s=new rl(pe.WHITE);return o=e.call(this,a,s)||this,o.texture=r,o.autoResize=!0,o}return t.prototype.textureUpdated=function(){this._textureID=this.shader.texture._updateID;var r=this.geometry,n=this.shader.texture,i=n.width,o=n.height;this.autoResize&&(r.width!==i||r.height!==o)&&(r.width=this.shader.texture.width,r.height=this.shader.texture.height,r.build())},Object.defineProperty(t.prototype,"texture",{get:function(){return this.shader.texture},set:function(r){this.shader.texture!==r&&(this.shader.texture=r,this._textureID=-1,r.baseTexture.valid?this.textureUpdated():r.once("update",this.textureUpdated,this))},enumerable:!1,configurable:!0}),t.prototype._render=function(r){this._textureID!==this.shader.texture._updateID&&this.textureUpdated(),e.prototype._render.call(this,r)},t.prototype.destroy=function(r){this.shader.texture.off("update",this.textureUpdated,this),e.prototype.destroy.call(this,r)},t}(tl),Ule=function(e){Tl(t,e);function t(r,n,i,o,a){r===void 0&&(r=pe.EMPTY);var s=this,l=new tf(n,i,o);l.getBuffer("aVertexPosition").static=!1;var u=new rl(r);return s=e.call(this,l,u,null,a)||this,s.autoUpdate=!0,s}return Object.defineProperty(t.prototype,"vertices",{get:function(){return this.geometry.getBuffer("aVertexPosition").data},set:function(r){this.geometry.getBuffer("aVertexPosition").data=r},enumerable:!1,configurable:!0}),t.prototype._render=function(r){this.autoUpdate&&this.geometry.getBuffer("aVertexPosition").update(),e.prototype._render.call(this,r)},t}(tl),Kf=10,$le=function(e){Tl(t,e);function t(r,n,i,o,a){n===void 0&&(n=Kf),i===void 0&&(i=Kf),o===void 0&&(o=Kf),a===void 0&&(a=Kf);var s=e.call(this,pe.WHITE,4,4)||this;return s._origWidth=r.orig.width,s._origHeight=r.orig.height,s._width=s._origWidth,s._height=s._origHeight,s._leftWidth=n,s._rightWidth=o,s._topHeight=i,s._bottomHeight=a,s.texture=r,s}return t.prototype.textureUpdated=function(){this._textureID=this.shader.texture._updateID,this._refresh()},Object.defineProperty(t.prototype,"vertices",{get:function(){return this.geometry.getBuffer("aVertexPosition").data},set:function(r){this.geometry.getBuffer("aVertexPosition").data=r},enumerable:!1,configurable:!0}),t.prototype.updateHorizontalVertices=function(){var r=this.vertices,n=this._getMinScale();r[9]=r[11]=r[13]=r[15]=this._topHeight*n,r[17]=r[19]=r[21]=r[23]=this._height-this._bottomHeight*n,r[25]=r[27]=r[29]=r[31]=this._height},t.prototype.updateVerticalVertices=function(){var r=this.vertices,n=this._getMinScale();r[2]=r[10]=r[18]=r[26]=this._leftWidth*n,r[4]=r[12]=r[20]=r[28]=this._width-this._rightWidth*n,r[6]=r[14]=r[22]=r[30]=this._width},t.prototype._getMinScale=function(){var r=this._leftWidth+this._rightWidth,n=this._width>r?1:this._width/r,i=this._topHeight+this._bottomHeight,o=this._height>i?1:this._height/i,a=Math.min(n,o);return a},Object.defineProperty(t.prototype,"width",{get:function(){return this._width},set:function(r){this._width=r,this._refresh()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"height",{get:function(){return this._height},set:function(r){this._height=r,this._refresh()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"leftWidth",{get:function(){return this._leftWidth},set:function(r){this._leftWidth=r,this._refresh()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"rightWidth",{get:function(){return this._rightWidth},set:function(r){this._rightWidth=r,this._refresh()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"topHeight",{get:function(){return this._topHeight},set:function(r){this._topHeight=r,this._refresh()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"bottomHeight",{get:function(){return this._bottomHeight},set:function(r){this._bottomHeight=r,this._refresh()},enumerable:!1,configurable:!0}),t.prototype._refresh=function(){var r=this.texture,n=this.geometry.buffers[1].data;this._origWidth=r.orig.width,this._origHeight=r.orig.height;var i=1/this._origWidth,o=1/this._origHeight;n[0]=n[8]=n[16]=n[24]=0,n[1]=n[3]=n[5]=n[7]=0,n[6]=n[14]=n[22]=n[30]=1,n[25]=n[27]=n[29]=n[31]=1,n[2]=n[10]=n[18]=n[26]=i*this._leftWidth,n[4]=n[12]=n[20]=n[28]=1-i*this._rightWidth,n[9]=n[11]=n[13]=n[15]=o*this._topHeight,n[17]=n[19]=n[21]=n[23]=1-o*this._bottomHeight,this.updateHorizontalVertices(),this.updateVerticalVertices(),this.geometry.buffers[0].update(),this.geometry.buffers[1].update()},t}(LL);/*!
 * @pixi/sprite-animated - v6.5.10
 * Compiled Thu, 06 Jul 2023 15:25:11 UTC
 *
 * @pixi/sprite-animated is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 *//*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var d0=function(e,t){return d0=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)n.hasOwnProperty(i)&&(r[i]=n[i])},d0(e,t)};function Gle(e,t){d0(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}var zle=function(e){Gle(t,e);function t(r,n){n===void 0&&(n=!0);var i=e.call(this,r[0]instanceof pe?r[0]:r[0].texture)||this;return i._textures=null,i._durations=null,i._autoUpdate=n,i._isConnectedToTicker=!1,i.animationSpeed=1,i.loop=!0,i.updateAnchor=!1,i.onComplete=null,i.onFrameChange=null,i.onLoop=null,i._currentTime=0,i._playing=!1,i._previousFrame=null,i.textures=r,i}return t.prototype.stop=function(){this._playing&&(this._playing=!1,this._autoUpdate&&this._isConnectedToTicker&&(Kt.shared.remove(this.update,this),this._isConnectedToTicker=!1))},t.prototype.play=function(){this._playing||(this._playing=!0,this._autoUpdate&&!this._isConnectedToTicker&&(Kt.shared.add(this.update,this,mi.HIGH),this._isConnectedToTicker=!0))},t.prototype.gotoAndStop=function(r){this.stop();var n=this.currentFrame;this._currentTime=r,n!==this.currentFrame&&this.updateTexture()},t.prototype.gotoAndPlay=function(r){var n=this.currentFrame;this._currentTime=r,n!==this.currentFrame&&this.updateTexture(),this.play()},t.prototype.update=function(r){if(this._playing){var n=this.animationSpeed*r,i=this.currentFrame;if(this._durations!==null){var o=this._currentTime%1*this._durations[this.currentFrame];for(o+=n/60*1e3;o<0;)this._currentTime--,o+=this._durations[this.currentFrame];var a=Math.sign(this.animationSpeed*r);for(this._currentTime=Math.floor(this._currentTime);o>=this._durations[this.currentFrame];)o-=this._durations[this.currentFrame]*a,this._currentTime+=a;this._currentTime+=o/this._durations[this.currentFrame]}else this._currentTime+=n;this._currentTime<0&&!this.loop?(this.gotoAndStop(0),this.onComplete&&this.onComplete()):this._currentTime>=this._textures.length&&!this.loop?(this.gotoAndStop(this._textures.length-1),this.onComplete&&this.onComplete()):i!==this.currentFrame&&(this.loop&&this.onLoop&&(this.animationSpeed>0&&this.currentFrame<i?this.onLoop():this.animationSpeed<0&&this.currentFrame>i&&this.onLoop()),this.updateTexture())}},t.prototype.updateTexture=function(){var r=this.currentFrame;this._previousFrame!==r&&(this._previousFrame=r,this._texture=this._textures[r],this._textureID=-1,this._textureTrimmedID=-1,this._cachedTint=16777215,this.uvs=this._texture._uvs.uvsFloat32,this.updateAnchor&&this._anchor.copyFrom(this._texture.defaultAnchor),this.onFrameChange&&this.onFrameChange(this.currentFrame))},t.prototype.destroy=function(r){this.stop(),e.prototype.destroy.call(this,r),this.onComplete=null,this.onFrameChange=null,this.onLoop=null},t.fromFrames=function(r){for(var n=[],i=0;i<r.length;++i)n.push(pe.from(r[i]));return new t(n)},t.fromImages=function(r){for(var n=[],i=0;i<r.length;++i)n.push(pe.from(r[i]));return new t(n)},Object.defineProperty(t.prototype,"totalFrames",{get:function(){return this._textures.length},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"textures",{get:function(){return this._textures},set:function(r){if(r[0]instanceof pe)this._textures=r,this._durations=null;else{this._textures=[],this._durations=[];for(var n=0;n<r.length;n++)this._textures.push(r[n].texture),this._durations.push(r[n].time)}this._previousFrame=null,this.gotoAndStop(0),this.updateTexture()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"currentFrame",{get:function(){var r=Math.floor(this._currentTime)%this._textures.length;return r<0&&(r+=this._textures.length),r},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"playing",{get:function(){return this._playing},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"autoUpdate",{get:function(){return this._autoUpdate},set:function(r){r!==this._autoUpdate&&(this._autoUpdate=r,!this._autoUpdate&&this._isConnectedToTicker?(Kt.shared.remove(this.update,this),this._isConnectedToTicker=!1):this._autoUpdate&&!this._isConnectedToTicker&&this._playing&&(Kt.shared.add(this.update,this),this._isConnectedToTicker=!0))},enumerable:!1,configurable:!0}),t}(ji);/*!
 * pixi.js - v6.5.10
 * Compiled Thu, 06 Jul 2023 15:25:11 UTC
 *
 * pixi.js is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */Si.add(Gk,Wk,Hk,sL,yL,U1,SL,PL,Jk,iL,oL,xL,fk,qk);var p0={AlphaFilter:AL,BlurFilter:Ele,BlurFilterPass:Oc,ColorMatrixFilter:l0,DisplacementFilter:Ile,FXAAFilter:Lle,NoiseFilter:Nle};const Vle=Object.freeze(Object.defineProperty({__proto__:null,get ALPHA_MODES(){return bn},AbstractBatchRenderer:Dk,AbstractMultiResource:Bp,AbstractRenderer:kk,AccessibilityManager:Gk,AnimatedSprite:zle,AppLoaderPlugin:qk,Application:q1,ArrayResource:m1,Attribute:U_,get BLEND_MODES(){return ce},get BUFFER_BITS(){return pc},get BUFFER_TYPE(){return Fn},BaseImageResource:vi,BasePrepare:vL,BaseRenderTexture:x1,BaseTexture:Le,BatchDrawCall:Ed,BatchGeometry:j1,BatchPluginFactory:Bk,BatchRenderer:U1,BatchShaderGenerator:Nk,BatchSystem:E1,BatchTextureArray:Td,BitmapFont:Ai,BitmapFontData:Ac,BitmapFontLoader:PL,BitmapText:vle,BlobResource:Zk,Bounds:wc,BrowserAdapter:CR,Buffer:Dt,BufferResource:za,get CLEAR_MODES(){return un},get COLOR_MASK_BITS(){return g_},CanvasResource:v1,Circle:sk,CompressedTextureLoader:Jk,CompressedTextureResource:Pd,Container:_r,ContextSystem:T1,CountLimiter:mL,CubeResource:g1,DDSLoader:iL,DEG_TO_RAD:ko,get DRAW_MODES(){return pn},DisplayObject:At,get ENV(){return pi},Ellipse:lk,get ExtensionType(){return Ye},Extract:Wk,get FORMATS(){return Q},FORMATS_TO_COMPONENTS:tL,FillStyle:G1,Filter:ge,FilterState:mk,FilterSystem:w1,Framebuffer:wd,FramebufferSystem:C1,get GC_MODES(){return vc},GLFramebuffer:vk,GLProgram:Ik,GLTexture:Eh,GRAPHICS_CURVES:Qs,Geometry:wl,GeometrySystem:P1,Graphics:Pc,GraphicsData:J_,GraphicsGeometry:dL,IGLUniformData:Eae,INSTALLED:Ec,get INTERNAL_FORMATS(){return xe},INTERNAL_FORMAT_TO_BYTES_PER_PIXEL:Tc,ImageBitmapResource:_1,ImageResource:jp,InteractionData:$_,InteractionEvent:zk,InteractionManager:Hk,InteractionTrackingData:Th,KTXLoader:oL,get LINE_CAP(){return Fi},get LINE_JOIN(){return ei},LineStyle:pL,Loader:Js,get LoaderResource(){return wt},get MASK_TYPES(){return Mt},get MIPMAP_MODES(){return zr},get MSAA_QUALITY(){return ft},MaskData:gk,MaskSystem:A1,Matrix:gt,Mesh:tl,MeshBatchUvs:wL,MeshGeometry:tf,MeshMaterial:rl,NineSlicePlane:$le,ObjectRenderer:ef,ObservablePoint:Li,PI_2:Sc,get PRECISION(){return jr},ParticleContainer:kse,ParticleRenderer:sL,PlaneGeometry:RL,Point:Pe,Polygon:zu,Prepare:yL,Program:El,ProjectionSystem:M1,Quad:pk,QuadUv:S1,RAD_TO_DEG:ak,get RENDERER_TYPE(){return qs},Rectangle:Fe,RenderTexture:Lo,RenderTexturePool:dk,RenderTextureSystem:R1,Renderer:N1,ResizePlugin:ML,Resource:Ia,RopeGeometry:kL,RoundedRectangle:uk,Runner:Yt,get SAMPLER_TYPES(){return mc},get SCALE_MODES(){return Br},get SHAPES(){return Gt},SVGResource:y1,ScissorSystem:O1,Shader:Bi,ShaderSystem:k1,SimpleMesh:Ule,SimplePlane:LL,SimpleRope:jle,Sprite:ji,SpriteMaskFilter:Ek,Spritesheet:_L,SpritesheetLoader:xL,State:Go,StateSystem:L1,StencilSystem:I1,System:Uae,get TARGETS(){return So},get TEXT_GRADIENT(){return el},get TYPES(){return fe},TYPES_TO_BYTES_PER_COMPONENT:W_,TYPES_TO_BYTES_PER_PIXEL:rL,TemporaryDisplayObject:p1,Text:H1,TextFormat:EL,TextMetrics:jn,TextStyle:Ma,Texture:pe,TextureGCSystem:F1,TextureLoader:Yk,TextureMatrix:$p,TextureSystem:D1,TextureUvs:b1,Ticker:Kt,TickerPlugin:fk,TilingSprite:nle,TilingSpriteRenderer:SL,TimeLimiter:rle,Transform:Dp,get UPDATE_PRIORITY(){return mi},UniformGroup:wo,VERSION:zae,VideoResource:Up,ViewableBuffer:Cd,get WRAP_MODES(){return Ln},XMLFormat:Ad,XMLStringFormat:TL,accessibleTarget:$k,autoDetectFormat:X1,autoDetectRenderer:Lk,autoDetectResource:Np,checkMaxIfStatementsInShader:wk,createUBOElements:Pk,defaultFilterVertex:B1,defaultVertex:Fk,extensions:Si,filters:p0,generateProgram:Mk,generateUniformBufferSync:Ok,getTestContext:xk,getUBOData:Ak,graphicsUtils:jse,groupD8:pt,interactiveTarget:Vk,isMobile:mn,parseDDS:eL,parseKTX:nL,resources:jk,settings:ne,systems:Uk,uniformParsers:ba,utils:Xoe},Symbol.toStringTag,{value:"Module"}));let Zf;const Hle=new Uint8Array(16);function Wle(){if(!Zf&&(Zf=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!Zf))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return Zf(Hle)}const rr=[];for(let e=0;e<256;++e)rr.push((e+256).toString(16).slice(1));function Xle(e,t=0){return rr[e[t+0]]+rr[e[t+1]]+rr[e[t+2]]+rr[e[t+3]]+"-"+rr[e[t+4]]+rr[e[t+5]]+"-"+rr[e[t+6]]+rr[e[t+7]]+"-"+rr[e[t+8]]+rr[e[t+9]]+"-"+rr[e[t+10]]+rr[e[t+11]]+rr[e[t+12]]+rr[e[t+13]]+rr[e[t+14]]+rr[e[t+15]]}const qle=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),YP={randomUUID:qle};function eo(e,t,r){if(YP.randomUUID&&!t&&!e)return YP.randomUUID();e=e||{};const n=e.random||(e.rng||Wle)();if(n[6]=n[6]&15|64,n[8]=n[8]&63|128,t){r=r||0;for(let i=0;i<16;++i)t[r+i]=n[i];return t}return Xle(n)}const Y1=()=>{te.warn("");for(let e=0;e<C.gameplay.performController.performList.length;e++){const t=C.gameplay.performController.performList[e];t.stopFunction(),clearTimeout(t.stopTimeout),C.gameplay.performController.performList.splice(e,1),e--}},K1=()=>{const e=N.getState().stage,t=Pt(e.PerformList);N.dispatch(Ut.removeAllPerform()),t.forEach(r=>{MS(r.script)})},FL=(e,t=!0)=>{const r=N.dispatch,n=C.backlogManager.getBacklog()[e];te.debug("backlog",n),t&&bi(n.saveScene.sceneUrl).then(o=>{C.sceneManager.sceneData.currentScene=Un(o,n.saveScene.sceneName,n.saveScene.sceneUrl);const a=C.sceneManager.sceneData.currentScene.subSceneList;C.sceneManager.settledScenes.push(C.sceneManager.sceneData.currentScene.sceneUrl);const s=Xc(a);qc(s)}),C.sceneManager.sceneData.currentSentenceId=n.saveScene.currentSentenceId,C.sceneManager.sceneData.sceneStack=Pt(n.saveScene.sceneStack),Y1();for(let o=C.backlogManager.getBacklog().length-1;o>e;o--)C.backlogManager.getBacklog().pop();C.backlogManager.isSaveBacklogNext=!0;const i=Pt(n.currentStageState);r(hp(i)),setTimeout(K1,0),r(Re({component:"showBacklog",visibility:!1})),r(Re({component:"showTextBox",visibility:!0}))};function rf(e){const t=document.getElementById("ebg");t&&(t.style.backgroundImage=`url("${e}")`)}const DL=e=>{const r=N.getState().saveData.saveData[e];te.debug("",r),NL(r)};function NL(e){if(!e){te.info("");return}const t=e;bi(t.sceneData.sceneUrl).then(o=>{C.sceneManager.sceneData.currentScene=Un(o,t.sceneData.sceneName,t.sceneData.sceneUrl);const a=C.sceneManager.sceneData.currentScene.subSceneList;C.sceneManager.settledScenes.push(C.sceneManager.sceneData.currentScene.sceneUrl);const s=Xc(a);qc(s)}),C.sceneManager.sceneData.currentSentenceId=t.sceneData.currentSentenceId,C.sceneManager.sceneData.sceneStack=Pt(t.sceneData.sceneStack),Y1();const r=t.backlog;C.backlogManager.getBacklog().splice(0,C.backlogManager.getBacklog().length);for(const o of r)C.backlogManager.getBacklog().push(o);const n=Pt(t.nowStageState),i=N.dispatch;i(hp(n)),setTimeout(K1,0),i(Re({component:"showTitle",visibility:!1})),i(Re({component:"showMenuPanel",visibility:!1})),rf(N.getState().stage.bgName)}const Yle={saveData:[],quickSaveData:null},BL=ip({name:"saveData",initialState:Pt(Yle),reducers:{setFastSave:(e,t)=>{e.quickSaveData=t.payload},resetFastSave:e=>{e.quickSaveData=null},resetSaves:e=>{e.quickSaveData=null,e.saveData=[]},saveGame:(e,t)=>{e.saveData[t.payload.index]=t.payload.saveData},replaceSaveGame:(e,t)=>{e.saveData=t.payload}}}),Di=BL.actions,Kle=BL.reducer;function Ah(e,t){for(let r=e;r<=t;r++){const n=N.getState().saveData.saveData[r];ja.setItem(`${C.gameKey}-saves${r}`,n).then(()=>{te.info(`${r}`)})}}function Gp(e,t){for(let r=e;r<=t;r++)ja.getItem(`${C.gameKey}-saves${r}`).then(n=>{N.dispatch(Di.saveGame({index:r,saveData:n})),te.info(`${r}`)})}async function Oh(){const e=N.getState().saveData.quickSaveData;await ja.setItem(`${C.gameKey}-saves-fast`,e),te.info("")}async function Z1(){const e=await ja.getItem(`${C.gameKey}-saves-fast`);N.dispatch(Di.setFastSave(e)),te.info("")}const m0=e=>{const t=jL(e);N.dispatch(Di.saveGame({index:e,saveData:t})),Ah(e,e)};function jL(e,t=!0){const r=N.getState().stage,n=Pt(C.backlogManager.getBacklog());let i="";if(t){const a=document.getElementById("pixiCanvas"),s=document.createElement("canvas"),l=s.getContext("2d");s.width=480,s.height=270,l.drawImage(a,0,0,480,270),i=s.toDataURL("image/webp",.5),s.remove()}return{nowStageState:Pt(r),backlog:n,index:e,saveTime:new Date().toLocaleDateString()+" "+new Date().toLocaleTimeString("chinese",{hour12:!1}),sceneData:{currentSentenceId:C.sceneManager.sceneData.currentSentenceId,sceneStack:Pt(C.sceneManager.sceneData.sceneStack),sceneName:C.sceneManager.sceneData.currentScene.sceneName,sceneUrl:C.sceneManager.sceneData.currentScene.sceneUrl},previewImage:i}}function Zle(){`${C.gameName}${C.gameKey}`,`${C.gameName}${C.gameKey}`}async function Jle(){const e=jL(-1,!1),t=Pt(e);N.dispatch(Di.setFastSave(t)),await Oh()}async function Qle(){return await pD(),N.getState().saveData.quickSaveData!==null}async function eue(){await Z1();const e=N.getState().saveData.quickSaveData;e&&NL(e)}const tue=e=>{const t=N.dispatch;cc.get(e).then(async r=>{var a,s;let n=r.data,i=Sm.parseConfig(n);te.info("",i);const o=i.find(l=>l.command==="Game_key");C.gameKey=((a=o==null?void 0:o.args)==null?void 0:a[0])??"",Zle(),await pD(),Z1(),Gp(0,0),i.forEach(l=>{const{command:u,args:c}=l;if(c.length>0)if(c.length>1)t(AT({key:u,value:c.join("|")}));else{let f=c[0].trim();/^(true|false)$/g.test(c[0])?f=f==="true":/^[0-9]+\.?[0-9]+$/g.test(c[0])&&(f=Number(f)),t(AT({key:u,value:f}))}}),(s=window==null?void 0:window.renderPromise)==null||s.call(window),delete window.renderPromise,tt()})},zp=(e,t=!0)=>{e&&C.backlogManager.makeBacklogEmpty(),t&&C.sceneManager.resetScene(),C.gameplay.performController.removeAllPerform(),C.gameplay.resetGamePlay();const r=Pt(qI),n=N.getState().stage.GameVar;N.dispatch(hp(r)),t||N.dispatch(Ce({key:"GameVar",value:n}))};let v0;const rue=(e,t,r=!1)=>{te.warn(""+e+":"+t);const n=N.dispatch;n(Re({component:"showTitle",visibility:!1})),n(Re({component:"showMenuPanel",visibility:!1})),n(Re({component:"isShowLogo",visibility:!1}));const i=document.getElementById("Title_enter_page");i&&(i.style.display="none");const o=Pt(C.sceneManager.sceneData.currentScene),a=Yr(e,qr.scene);bi(a).then(s=>{const l=nue(o,C.sceneManager.sceneData.currentScene,t),u=Math.min(t,l),c=iue(u,e),f=c>=0&&r;zp(!f),C.sceneManager.sceneData.currentScene=Un(s,e,a);const h=C.sceneManager.sceneData.currentScene.sceneName;C.gameplay.isFast=!0,f&&FL(c,!1),v0&&clearTimeout(v0),J1(t,h)})};function J1(e,t){C.sceneManager.sceneData.currentSentenceId<e&&C.sceneManager.sceneData.currentScene.sceneName===t?(cr(),v0=setTimeout(()=>J1(e,t),2)):C.gameplay.isFast=!1}function nue(e,t,r){let n=0;for(let i=0;i<r&&i<e.sentenceList.length;i++){const o=JSON.stringify(e.sentenceList[i]),a=JSON.stringify(t.sentenceList[i]);if(o!==a)break;n=i}return n}function iue(e,t){let r=-1;return C.backlogManager.getBacklog().forEach((n,i)=>{const o=n.saveScene.currentSentenceId,a=n.saveScene.sceneName;o<=e&&a===t&&(r=i)}),r}const oue=()=>{window.JMP=J1};var ia=(e=>(e[e.JUMP=0]="JUMP",e[e.SYNCFC=1]="SYNCFC",e[e.SYNCFE=2]="SYNCFE",e[e.EXE_COMMAND=3]="EXE_COMMAND",e[e.REFETCH_TEMPLATE_FILES=4]="REFETCH_TEMPLATE_FILES",e[e.SET_COMPONENT_VISIBILITY=5]="SET_COMPONENT_VISIBILITY",e[e.TEMP_SCENE=6]="TEMP_SCENE",e))(ia||{});const aue=()=>{const e=window.location.hostname,t=window.location.protocol,r=window.location.port;let n="";if(r&&r!=="80"&&r!=="443"&&(n=`:${r}`),t!=="http:"&&t!=="https:")return;let i=`ws://${e}${n}/api/webgalsync`;t==="https:"&&(i=`wss://${e}${n}/api/webgalsync`),te.info("socket"+i);const o=new WebSocket(i);o.onopen=()=>{te.info("socket");function a(){const s={event:"message",data:{command:ia.SYNCFC,sceneMsg:{scene:C.sceneManager.sceneData.currentScene.sceneName,sentence:C.sceneManager.sceneData.currentSentenceId},stageSyncMsg:N.getState().stage,message:"sync"}};o.send(JSON.stringify(s)),setTimeout(a,1e3)}a()},o.onmessage=a=>{const s=a.data,u=JSON.parse(s).data;if(u.command===ia.JUMP&&rue(u.sceneMsg.scene,u.sceneMsg.sentence,u.message==="exp"),u.command===ia.EXE_COMMAND){const c=u.message;Sm.parse(c,"temp.txt","temp.txt").sentenceList.forEach(h=>{MS(h)})}if(u.command===ia.REFETCH_TEMPLATE_FILES){const c=document.getElementById("Title_enter_page");c&&(c.style.display="none"),C.events.styleUpdate.emit()}if(u.command===ia.SET_COMPONENT_VISIBILITY){const c=u.message;JSON.parse(c).forEach(h=>{h&&N.dispatch(Re({component:h.component,visibility:h.visibility}))})}if(u.command===ia.TEMP_SCENE){const c=u.message;zp(!0),C.sceneManager.sceneData.currentScene=Un(c,"temp","./temp.txt"),N.dispatch(Re({component:"showTitle",visibility:!1})),N.dispatch(Re({component:"showMenuPanel",visibility:!1})),N.dispatch(Re({component:"showPanicOverlay",visibility:!1})),setTimeout(()=>{cr()},100)}},o.onerror=a=>{te.info(" Terre ")}},UL={version:"WebGAL 4.5.11",contributors:[]},sue=navigator.userAgent,Q1=!!sue.match(/\(i[^;]+;( U;)? CPU.+Mac OS X/),lue=()=>{te.info(UL.version),te.info("Github: https://github.com/OpenWebGAL/WebGAL "),te.info("Made with  by OpenWebGAL"),Q1&&alert(`iOS 
| Please use landscape mode on iOS for the best experience
| iOS `),uue("./game/userStyleSheet.css"),cue(),tue("./game/config.txt");const e=Yr("start.txt",qr.scene);bi(e).then(t=>{C.sceneManager.sceneData.currentScene=Un(t,"start.txt",e);const r=C.sceneManager.sceneData.currentScene.subSceneList;C.sceneManager.settledScenes.push(e);const n=Xc(r);qc(n)}),C.gameplay.pixiStage=new fi,oue(),aue()};function uue(e){const t=document.createElement("link");t.type="text/css",t.rel="stylesheet",t.href=e,document.getElementsByTagName("head")[0].appendChild(t)}function cue(){cc.get("./game/animation/animationTable.json").then(e=>{const t=e.data;for(const r of t)cc.get(`./game/animation/${r}.json`).then(n=>{if(n.data){const i={name:r,effects:n.data};C.animationManager.addAnimation(i)}})})}/*!
 * @pixi/filter-old-film - v4.2.0
 * Compiled Fri, 05 Aug 2022 19:53:35 UTC
 *
 * @pixi/filter-old-film is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 *//*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var g0=function(e,t){return g0=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(r[i]=n[i])},g0(e,t)};function fue(e,t){g0(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}var hue=`attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;

uniform mat3 projectionMatrix;

varying vec2 vTextureCoord;

void main(void)
{
    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);
    vTextureCoord = aTextureCoord;
}`,due=`varying vec2 vTextureCoord;
uniform sampler2D uSampler;
uniform vec4 filterArea;
uniform vec2 dimensions;

uniform float sepia;
uniform float noise;
uniform float noiseSize;
uniform float scratch;
uniform float scratchDensity;
uniform float scratchWidth;
uniform float vignetting;
uniform float vignettingAlpha;
uniform float vignettingBlur;
uniform float seed;

const float SQRT_2 = 1.414213;
const vec3 SEPIA_RGB = vec3(112.0 / 255.0, 66.0 / 255.0, 20.0 / 255.0);

float rand(vec2 co) {
    return fract(sin(dot(co.xy, vec2(12.9898, 78.233))) * 43758.5453);
}

vec3 Overlay(vec3 src, vec3 dst)
{
    // if (dst <= 0.5) then: 2 * src * dst
    // if (dst > 0.5) then: 1 - 2 * (1 - dst) * (1 - src)
    return vec3((dst.x <= 0.5) ? (2.0 * src.x * dst.x) : (1.0 - 2.0 * (1.0 - dst.x) * (1.0 - src.x)),
                (dst.y <= 0.5) ? (2.0 * src.y * dst.y) : (1.0 - 2.0 * (1.0 - dst.y) * (1.0 - src.y)),
                (dst.z <= 0.5) ? (2.0 * src.z * dst.z) : (1.0 - 2.0 * (1.0 - dst.z) * (1.0 - src.z)));
}


void main()
{
    gl_FragColor = texture2D(uSampler, vTextureCoord);
    vec3 color = gl_FragColor.rgb;

    if (sepia > 0.0)
    {
        float gray = (color.x + color.y + color.z) / 3.0;
        vec3 grayscale = vec3(gray);

        color = Overlay(SEPIA_RGB, grayscale);

        color = grayscale + sepia * (color - grayscale);
    }

    vec2 coord = vTextureCoord * filterArea.xy / dimensions.xy;

    if (vignetting > 0.0)
    {
        float outter = SQRT_2 - vignetting * SQRT_2;
        vec2 dir = vec2(vec2(0.5, 0.5) - coord);
        dir.y *= dimensions.y / dimensions.x;
        float darker = clamp((outter - length(dir) * SQRT_2) / ( 0.00001 + vignettingBlur * SQRT_2), 0.0, 1.0);
        color.rgb *= darker + (1.0 - darker) * (1.0 - vignettingAlpha);
    }

    if (scratchDensity > seed && scratch != 0.0)
    {
        float phase = seed * 256.0;
        float s = mod(floor(phase), 2.0);
        float dist = 1.0 / scratchDensity;
        float d = distance(coord, vec2(seed * dist, abs(s - seed * dist)));
        if (d < seed * 0.6 + 0.4)
        {
            highp float period = scratchDensity * 10.0;

            float xx = coord.x * period + phase;
            float aa = abs(mod(xx, 0.5) * 4.0);
            float bb = mod(floor(xx / 0.5), 2.0);
            float yy = (1.0 - bb) * aa + bb * (2.0 - aa);

            float kk = 2.0 * period;
            float dw = scratchWidth / dimensions.x * (0.75 + seed);
            float dh = dw * kk;

            float tine = (yy - (2.0 - dh));

            if (tine > 0.0) {
                float _sign = sign(scratch);

                tine = s * tine / period + scratch + 0.1;
                tine = clamp(tine + 1.0, 0.5 + _sign * 0.5, 1.5 + _sign * 0.5);

                color.rgb *= tine;
            }
        }
    }

    if (noise > 0.0 && noiseSize > 0.0)
    {
        vec2 pixelCoord = vTextureCoord.xy * filterArea.xy;
        pixelCoord.x = floor(pixelCoord.x / noiseSize);
        pixelCoord.y = floor(pixelCoord.y / noiseSize);
        // vec2 d = pixelCoord * noiseSize * vec2(1024.0 + seed * 512.0, 1024.0 - seed * 512.0);
        // float _noise = snoise(d) * 0.5;
        float _noise = rand(pixelCoord * noiseSize * seed) - 0.5;
        color += _noise * noise;
    }

    gl_FragColor.rgb = color;
}
`,pue=function(e){fue(t,e);function t(r,n){n===void 0&&(n=0);var i=e.call(this,hue,due)||this;return i.seed=0,i.uniforms.dimensions=new Float32Array(2),typeof r=="number"?(i.seed=r,r=void 0):i.seed=n,Object.assign(i,t.defaults,r),i}return t.prototype.apply=function(r,n,i,o){var a,s;this.uniforms.dimensions[0]=(a=n.filterFrame)===null||a===void 0?void 0:a.width,this.uniforms.dimensions[1]=(s=n.filterFrame)===null||s===void 0?void 0:s.height,this.uniforms.seed=this.seed,r.applyFilter(this,n,i,o)},Object.defineProperty(t.prototype,"sepia",{get:function(){return this.uniforms.sepia},set:function(r){this.uniforms.sepia=r},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"noise",{get:function(){return this.uniforms.noise},set:function(r){this.uniforms.noise=r},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"noiseSize",{get:function(){return this.uniforms.noiseSize},set:function(r){this.uniforms.noiseSize=r},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"scratch",{get:function(){return this.uniforms.scratch},set:function(r){this.uniforms.scratch=r},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"scratchDensity",{get:function(){return this.uniforms.scratchDensity},set:function(r){this.uniforms.scratchDensity=r},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"scratchWidth",{get:function(){return this.uniforms.scratchWidth},set:function(r){this.uniforms.scratchWidth=r},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"vignetting",{get:function(){return this.uniforms.vignetting},set:function(r){this.uniforms.vignetting=r},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"vignettingAlpha",{get:function(){return this.uniforms.vignettingAlpha},set:function(r){this.uniforms.vignettingAlpha=r},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"vignettingBlur",{get:function(){return this.uniforms.vignettingBlur},set:function(r){this.uniforms.vignettingBlur=r},enumerable:!1,configurable:!0}),t.defaults={sepia:.3,noise:.3,noiseSize:1,scratch:.5,scratchDensity:.3,scratchWidth:1,vignetting:.3,vignettingAlpha:1,vignettingBlur:.3},t}(ge);/*!
 * @pixi/filter-dot - v4.2.0
 * Compiled Fri, 05 Aug 2022 19:53:35 UTC
 *
 * @pixi/filter-dot is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 *//*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var y0=function(e,t){return y0=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(r[i]=n[i])},y0(e,t)};function mue(e,t){y0(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}var vue=`attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;

uniform mat3 projectionMatrix;

varying vec2 vTextureCoord;

void main(void)
{
    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);
    vTextureCoord = aTextureCoord;
}`,gue=`precision mediump float;

varying vec2 vTextureCoord;
varying vec4 vColor;

uniform vec4 filterArea;
uniform sampler2D uSampler;

uniform float angle;
uniform float scale;

float pattern()
{
   float s = sin(angle), c = cos(angle);
   vec2 tex = vTextureCoord * filterArea.xy;
   vec2 point = vec2(
       c * tex.x - s * tex.y,
       s * tex.x + c * tex.y
   ) * scale;
   return (sin(point.x) * sin(point.y)) * 4.0;
}

void main()
{
   vec4 color = texture2D(uSampler, vTextureCoord);
   float average = (color.r + color.g + color.b) / 3.0;
   gl_FragColor = vec4(vec3(average * 10.0 - 5.0 + pattern()), color.a);
}
`,yue=function(e){mue(t,e);function t(r,n){r===void 0&&(r=1),n===void 0&&(n=5);var i=e.call(this,vue,gue)||this;return i.scale=r,i.angle=n,i}return Object.defineProperty(t.prototype,"scale",{get:function(){return this.uniforms.scale},set:function(r){this.uniforms.scale=r},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"angle",{get:function(){return this.uniforms.angle},set:function(r){this.uniforms.angle=r},enumerable:!1,configurable:!0}),t}(ge);/*!
 * @pixi/filter-reflection - v4.2.0
 * Compiled Fri, 05 Aug 2022 19:53:35 UTC
 *
 * @pixi/filter-reflection is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 *//*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var _0=function(e,t){return _0=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(r[i]=n[i])},_0(e,t)};function _ue(e,t){_0(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}var xue=`attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;

uniform mat3 projectionMatrix;

varying vec2 vTextureCoord;

void main(void)
{
    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);
    vTextureCoord = aTextureCoord;
}`,bue=`varying vec2 vTextureCoord;
uniform sampler2D uSampler;

uniform vec4 filterArea;
uniform vec4 filterClamp;
uniform vec2 dimensions;

uniform bool mirror;
uniform float boundary;
uniform vec2 amplitude;
uniform vec2 waveLength;
uniform vec2 alpha;
uniform float time;

float rand(vec2 co) {
    return fract(sin(dot(co.xy, vec2(12.9898, 78.233))) * 43758.5453);
}

void main(void)
{
    vec2 pixelCoord = vTextureCoord.xy * filterArea.xy;
    vec2 coord = pixelCoord / dimensions;

    if (coord.y < boundary) {
        gl_FragColor = texture2D(uSampler, vTextureCoord);
        return;
    }

    float k = (coord.y - boundary) / (1. - boundary + 0.0001);
    float areaY = boundary * dimensions.y / filterArea.y;
    float v = areaY + areaY - vTextureCoord.y;
    float y = mirror ? v : vTextureCoord.y;

    float _amplitude = ((amplitude.y - amplitude.x) * k + amplitude.x ) / filterArea.x;
    float _waveLength = ((waveLength.y - waveLength.x) * k + waveLength.x) / filterArea.y;
    float _alpha = (alpha.y - alpha.x) * k + alpha.x;

    float x = vTextureCoord.x + cos(v * 6.28 / _waveLength - time) * _amplitude;
    x = clamp(x, filterClamp.x, filterClamp.z);

    vec4 color = texture2D(uSampler, vec2(x, y));

    gl_FragColor = color * _alpha;
}
`,Sue=function(e){_ue(t,e);function t(r){var n=e.call(this,xue,bue)||this;return n.time=0,n.uniforms.amplitude=new Float32Array(2),n.uniforms.waveLength=new Float32Array(2),n.uniforms.alpha=new Float32Array(2),n.uniforms.dimensions=new Float32Array(2),Object.assign(n,t.defaults,r),n}return t.prototype.apply=function(r,n,i,o){var a,s;this.uniforms.dimensions[0]=(a=n.filterFrame)===null||a===void 0?void 0:a.width,this.uniforms.dimensions[1]=(s=n.filterFrame)===null||s===void 0?void 0:s.height,this.uniforms.time=this.time,r.applyFilter(this,n,i,o)},Object.defineProperty(t.prototype,"mirror",{get:function(){return this.uniforms.mirror},set:function(r){this.uniforms.mirror=r},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"boundary",{get:function(){return this.uniforms.boundary},set:function(r){this.uniforms.boundary=r},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"amplitude",{get:function(){return this.uniforms.amplitude},set:function(r){this.uniforms.amplitude[0]=r[0],this.uniforms.amplitude[1]=r[1]},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"waveLength",{get:function(){return this.uniforms.waveLength},set:function(r){this.uniforms.waveLength[0]=r[0],this.uniforms.waveLength[1]=r[1]},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"alpha",{get:function(){return this.uniforms.alpha},set:function(r){this.uniforms.alpha[0]=r[0],this.uniforms.alpha[1]=r[1]},enumerable:!1,configurable:!0}),t.defaults={mirror:!0,boundary:.5,amplitude:[0,20],waveLength:[30,100],alpha:[1,1],time:0},t}(ge);/*!
 * @pixi/filter-glitch - v4.2.0
 * Compiled Fri, 05 Aug 2022 19:53:35 UTC
 *
 * @pixi/filter-glitch is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 *//*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var x0=function(e,t){return x0=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(r[i]=n[i])},x0(e,t)};function wue(e,t){x0(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}var Eue=`attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;

uniform mat3 projectionMatrix;

varying vec2 vTextureCoord;

void main(void)
{
    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);
    vTextureCoord = aTextureCoord;
}`,Tue=`// precision highp float;

varying vec2 vTextureCoord;
uniform sampler2D uSampler;

uniform vec4 filterArea;
uniform vec4 filterClamp;
uniform vec2 dimensions;
uniform float aspect;

uniform sampler2D displacementMap;
uniform float offset;
uniform float sinDir;
uniform float cosDir;
uniform int fillMode;

uniform float seed;
uniform vec2 red;
uniform vec2 green;
uniform vec2 blue;

const int TRANSPARENT = 0;
const int ORIGINAL = 1;
const int LOOP = 2;
const int CLAMP = 3;
const int MIRROR = 4;

void main(void)
{
    vec2 coord = (vTextureCoord * filterArea.xy) / dimensions;

    if (coord.x > 1.0 || coord.y > 1.0) {
        return;
    }

    float cx = coord.x - 0.5;
    float cy = (coord.y - 0.5) * aspect;
    float ny = (-sinDir * cx + cosDir * cy) / aspect + 0.5;

    // displacementMap: repeat
    // ny = ny > 1.0 ? ny - 1.0 : (ny < 0.0 ? 1.0 + ny : ny);

    // displacementMap: mirror
    ny = ny > 1.0 ? 2.0 - ny : (ny < 0.0 ? -ny : ny);

    vec4 dc = texture2D(displacementMap, vec2(0.5, ny));

    float displacement = (dc.r - dc.g) * (offset / filterArea.x);

    coord = vTextureCoord + vec2(cosDir * displacement, sinDir * displacement * aspect);

    if (fillMode == CLAMP) {
        coord = clamp(coord, filterClamp.xy, filterClamp.zw);
    } else {
        if( coord.x > filterClamp.z ) {
            if (fillMode == TRANSPARENT) {
                discard;
            } else if (fillMode == LOOP) {
                coord.x -= filterClamp.z;
            } else if (fillMode == MIRROR) {
                coord.x = filterClamp.z * 2.0 - coord.x;
            }
        } else if( coord.x < filterClamp.x ) {
            if (fillMode == TRANSPARENT) {
                discard;
            } else if (fillMode == LOOP) {
                coord.x += filterClamp.z;
            } else if (fillMode == MIRROR) {
                coord.x *= -filterClamp.z;
            }
        }

        if( coord.y > filterClamp.w ) {
            if (fillMode == TRANSPARENT) {
                discard;
            } else if (fillMode == LOOP) {
                coord.y -= filterClamp.w;
            } else if (fillMode == MIRROR) {
                coord.y = filterClamp.w * 2.0 - coord.y;
            }
        } else if( coord.y < filterClamp.y ) {
            if (fillMode == TRANSPARENT) {
                discard;
            } else if (fillMode == LOOP) {
                coord.y += filterClamp.w;
            } else if (fillMode == MIRROR) {
                coord.y *= -filterClamp.w;
            }
        }
    }

    gl_FragColor.r = texture2D(uSampler, coord + red * (1.0 - seed * 0.4) / filterArea.xy).r;
    gl_FragColor.g = texture2D(uSampler, coord + green * (1.0 - seed * 0.3) / filterArea.xy).g;
    gl_FragColor.b = texture2D(uSampler, coord + blue * (1.0 - seed * 0.2) / filterArea.xy).b;
    gl_FragColor.a = texture2D(uSampler, coord).a;
}
`,Cue=function(e){wue(t,e);function t(r){var n=e.call(this,Eue,Tue)||this;return n.offset=100,n.fillMode=t.TRANSPARENT,n.average=!1,n.seed=0,n.minSize=8,n.sampleSize=512,n._slices=0,n._offsets=new Float32Array(1),n._sizes=new Float32Array(1),n._direction=-1,n.uniforms.dimensions=new Float32Array(2),n._canvas=document.createElement("canvas"),n._canvas.width=4,n._canvas.height=n.sampleSize,n.texture=pe.from(n._canvas,{scaleMode:Br.NEAREST}),Object.assign(n,t.defaults,r),n}return t.prototype.apply=function(r,n,i,o){var a=n.filterFrame,s=a.width,l=a.height;this.uniforms.dimensions[0]=s,this.uniforms.dimensions[1]=l,this.uniforms.aspect=l/s,this.uniforms.seed=this.seed,this.uniforms.offset=this.offset,this.uniforms.fillMode=this.fillMode,r.applyFilter(this,n,i,o)},t.prototype._randomizeSizes=function(){var r=this._sizes,n=this._slices-1,i=this.sampleSize,o=Math.min(this.minSize/i,.9/this._slices);if(this.average){for(var a=this._slices,s=1,l=0;l<n;l++){var u=s/(a-l),c=Math.max(u*(1-Math.random()*.6),o);r[l]=c,s-=c}r[n]=s}else{for(var s=1,f=Math.sqrt(1/this._slices),l=0;l<n;l++){var c=Math.max(f*s*Math.random(),o);r[l]=c,s-=c}r[n]=s}this.shuffle()},t.prototype.shuffle=function(){for(var r=this._sizes,n=this._slices-1,i=n;i>0;i--){var o=Math.random()*i>>0,a=r[i];r[i]=r[o],r[o]=a}},t.prototype._randomizeOffsets=function(){for(var r=0;r<this._slices;r++)this._offsets[r]=Math.random()*(Math.random()<.5?-1:1)},t.prototype.refresh=function(){this._randomizeSizes(),this._randomizeOffsets(),this.redraw()},t.prototype.redraw=function(){var r=this.sampleSize,n=this.texture,i=this._canvas.getContext("2d");i.clearRect(0,0,8,r);for(var o,a=0,s=0;s<this._slices;s++){o=Math.floor(this._offsets[s]*256);var l=this._sizes[s]*r,u=o>0?o:0,c=o<0?-o:0;i.fillStyle="rgba("+u+", "+c+", 0, 1)",i.fillRect(0,a>>0,r,l+1>>0),a+=l}n.baseTexture.update(),this.uniforms.displacementMap=n},Object.defineProperty(t.prototype,"sizes",{get:function(){return this._sizes},set:function(r){for(var n=Math.min(this._slices,r.length),i=0;i<n;i++)this._sizes[i]=r[i]},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"offsets",{get:function(){return this._offsets},set:function(r){for(var n=Math.min(this._slices,r.length),i=0;i<n;i++)this._offsets[i]=r[i]},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"slices",{get:function(){return this._slices},set:function(r){this._slices!==r&&(this._slices=r,this.uniforms.slices=r,this._sizes=this.uniforms.slicesWidth=new Float32Array(r),this._offsets=this.uniforms.slicesOffset=new Float32Array(r),this.refresh())},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"direction",{get:function(){return this._direction},set:function(r){if(this._direction!==r){this._direction=r;var n=r*ko;this.uniforms.sinDir=Math.sin(n),this.uniforms.cosDir=Math.cos(n)}},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"red",{get:function(){return this.uniforms.red},set:function(r){this.uniforms.red=r},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"green",{get:function(){return this.uniforms.green},set:function(r){this.uniforms.green=r},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"blue",{get:function(){return this.uniforms.blue},set:function(r){this.uniforms.blue=r},enumerable:!1,configurable:!0}),t.prototype.destroy=function(){var r;(r=this.texture)===null||r===void 0||r.destroy(!0),this.texture=this._canvas=this.red=this.green=this.blue=this._sizes=this._offsets=null},t.defaults={slices:5,offset:100,direction:0,fillMode:0,average:!1,seed:0,red:[0,0],green:[0,0],blue:[0,0],minSize:8,sampleSize:512},t.TRANSPARENT=0,t.ORIGINAL=1,t.LOOP=2,t.CLAMP=3,t.MIRROR=4,t}(ge);/*!
 * @pixi/filter-rgb-split - v4.2.0
 * Compiled Fri, 05 Aug 2022 19:53:35 UTC
 *
 * @pixi/filter-rgb-split is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 *//*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var b0=function(e,t){return b0=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(r[i]=n[i])},b0(e,t)};function Pue(e,t){b0(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}var Aue=`attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;

uniform mat3 projectionMatrix;

varying vec2 vTextureCoord;

void main(void)
{
    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);
    vTextureCoord = aTextureCoord;
}`,Oue=`precision mediump float;

varying vec2 vTextureCoord;

uniform sampler2D uSampler;
uniform vec4 filterArea;
uniform vec2 red;
uniform vec2 green;
uniform vec2 blue;

void main(void)
{
   gl_FragColor.r = texture2D(uSampler, vTextureCoord + red/filterArea.xy).r;
   gl_FragColor.g = texture2D(uSampler, vTextureCoord + green/filterArea.xy).g;
   gl_FragColor.b = texture2D(uSampler, vTextureCoord + blue/filterArea.xy).b;
   gl_FragColor.a = texture2D(uSampler, vTextureCoord).a;
}
`,Iue=function(e){Pue(t,e);function t(r,n,i){r===void 0&&(r=[-10,0]),n===void 0&&(n=[0,10]),i===void 0&&(i=[0,0]);var o=e.call(this,Aue,Oue)||this;return o.red=r,o.green=n,o.blue=i,o}return Object.defineProperty(t.prototype,"red",{get:function(){return this.uniforms.red},set:function(r){this.uniforms.red=r},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"green",{get:function(){return this.uniforms.green},set:function(r){this.uniforms.green=r},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"blue",{get:function(){return this.uniforms.blue},set:function(r){this.uniforms.blue=r},enumerable:!1,configurable:!0}),t}(ge);/*!
 * @pixi/filter-godray - v4.2.0
 * Compiled Fri, 05 Aug 2022 19:53:35 UTC
 *
 * @pixi/filter-godray is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 *//*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var S0=function(e,t){return S0=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(r[i]=n[i])},S0(e,t)};function Mue(e,t){S0(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}var Rue=`attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;

uniform mat3 projectionMatrix;

varying vec2 vTextureCoord;

void main(void)
{
    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);
    vTextureCoord = aTextureCoord;
}`,kue=`vec3 mod289(vec3 x)
{
    return x - floor(x * (1.0 / 289.0)) * 289.0;
}
vec4 mod289(vec4 x)
{
    return x - floor(x * (1.0 / 289.0)) * 289.0;
}
vec4 permute(vec4 x)
{
    return mod289(((x * 34.0) + 1.0) * x);
}
vec4 taylorInvSqrt(vec4 r)
{
    return 1.79284291400159 - 0.85373472095314 * r;
}
vec3 fade(vec3 t)
{
    return t * t * t * (t * (t * 6.0 - 15.0) + 10.0);
}
// Classic Perlin noise, periodic variant
float pnoise(vec3 P, vec3 rep)
{
    vec3 Pi0 = mod(floor(P), rep); // Integer part, modulo period
    vec3 Pi1 = mod(Pi0 + vec3(1.0), rep); // Integer part + 1, mod period
    Pi0 = mod289(Pi0);
    Pi1 = mod289(Pi1);
    vec3 Pf0 = fract(P); // Fractional part for interpolation
    vec3 Pf1 = Pf0 - vec3(1.0); // Fractional part - 1.0
    vec4 ix = vec4(Pi0.x, Pi1.x, Pi0.x, Pi1.x);
    vec4 iy = vec4(Pi0.yy, Pi1.yy);
    vec4 iz0 = Pi0.zzzz;
    vec4 iz1 = Pi1.zzzz;
    vec4 ixy = permute(permute(ix) + iy);
    vec4 ixy0 = permute(ixy + iz0);
    vec4 ixy1 = permute(ixy + iz1);
    vec4 gx0 = ixy0 * (1.0 / 7.0);
    vec4 gy0 = fract(floor(gx0) * (1.0 / 7.0)) - 0.5;
    gx0 = fract(gx0);
    vec4 gz0 = vec4(0.5) - abs(gx0) - abs(gy0);
    vec4 sz0 = step(gz0, vec4(0.0));
    gx0 -= sz0 * (step(0.0, gx0) - 0.5);
    gy0 -= sz0 * (step(0.0, gy0) - 0.5);
    vec4 gx1 = ixy1 * (1.0 / 7.0);
    vec4 gy1 = fract(floor(gx1) * (1.0 / 7.0)) - 0.5;
    gx1 = fract(gx1);
    vec4 gz1 = vec4(0.5) - abs(gx1) - abs(gy1);
    vec4 sz1 = step(gz1, vec4(0.0));
    gx1 -= sz1 * (step(0.0, gx1) - 0.5);
    gy1 -= sz1 * (step(0.0, gy1) - 0.5);
    vec3 g000 = vec3(gx0.x, gy0.x, gz0.x);
    vec3 g100 = vec3(gx0.y, gy0.y, gz0.y);
    vec3 g010 = vec3(gx0.z, gy0.z, gz0.z);
    vec3 g110 = vec3(gx0.w, gy0.w, gz0.w);
    vec3 g001 = vec3(gx1.x, gy1.x, gz1.x);
    vec3 g101 = vec3(gx1.y, gy1.y, gz1.y);
    vec3 g011 = vec3(gx1.z, gy1.z, gz1.z);
    vec3 g111 = vec3(gx1.w, gy1.w, gz1.w);
    vec4 norm0 = taylorInvSqrt(vec4(dot(g000, g000), dot(g010, g010), dot(g100, g100), dot(g110, g110)));
    g000 *= norm0.x;
    g010 *= norm0.y;
    g100 *= norm0.z;
    g110 *= norm0.w;
    vec4 norm1 = taylorInvSqrt(vec4(dot(g001, g001), dot(g011, g011), dot(g101, g101), dot(g111, g111)));
    g001 *= norm1.x;
    g011 *= norm1.y;
    g101 *= norm1.z;
    g111 *= norm1.w;
    float n000 = dot(g000, Pf0);
    float n100 = dot(g100, vec3(Pf1.x, Pf0.yz));
    float n010 = dot(g010, vec3(Pf0.x, Pf1.y, Pf0.z));
    float n110 = dot(g110, vec3(Pf1.xy, Pf0.z));
    float n001 = dot(g001, vec3(Pf0.xy, Pf1.z));
    float n101 = dot(g101, vec3(Pf1.x, Pf0.y, Pf1.z));
    float n011 = dot(g011, vec3(Pf0.x, Pf1.yz));
    float n111 = dot(g111, Pf1);
    vec3 fade_xyz = fade(Pf0);
    vec4 n_z = mix(vec4(n000, n100, n010, n110), vec4(n001, n101, n011, n111), fade_xyz.z);
    vec2 n_yz = mix(n_z.xy, n_z.zw, fade_xyz.y);
    float n_xyz = mix(n_yz.x, n_yz.y, fade_xyz.x);
    return 2.2 * n_xyz;
}
float turb(vec3 P, vec3 rep, float lacunarity, float gain)
{
    float sum = 0.0;
    float sc = 1.0;
    float totalgain = 1.0;
    for (float i = 0.0; i < 6.0; i++)
    {
        sum += totalgain * pnoise(P * sc, rep);
        sc *= lacunarity;
        totalgain *= gain;
    }
    return abs(sum);
}
`,Lue=`varying vec2 vTextureCoord;
uniform sampler2D uSampler;
uniform vec4 filterArea;
uniform vec2 dimensions;

uniform vec2 light;
uniform bool parallel;
uniform float aspect;

uniform float gain;
uniform float lacunarity;
uniform float time;
uniform float alpha;

\${perlin}

void main(void) {
    vec2 coord = vTextureCoord * filterArea.xy / dimensions.xy;

    float d;

    if (parallel) {
        float _cos = light.x;
        float _sin = light.y;
        d = (_cos * coord.x) + (_sin * coord.y * aspect);
    } else {
        float dx = coord.x - light.x / dimensions.x;
        float dy = (coord.y - light.y / dimensions.y) * aspect;
        float dis = sqrt(dx * dx + dy * dy) + 0.00001;
        d = dy / dis;
    }

    vec3 dir = vec3(d, d, 0.0);

    float noise = turb(dir + vec3(time, 0.0, 62.1 + time) * 0.05, vec3(480.0, 320.0, 480.0), lacunarity, gain);
    noise = mix(noise, 0.0, 0.3);
    //fade vertically.
    vec4 mist = vec4(noise, noise, noise, 1.0) * (1.0 - coord.y);
    mist.a = 1.0;
    // apply user alpha
    mist *= alpha;

    gl_FragColor = texture2D(uSampler, vTextureCoord) + mist;

}
`,Fue=function(e){Mue(t,e);function t(r){var n=e.call(this,Rue,Lue.replace("${perlin}",kue))||this;n.parallel=!0,n.time=0,n._angle=0,n.uniforms.dimensions=new Float32Array(2);var i=Object.assign(t.defaults,r);return n._angleLight=new Pe,n.angle=i.angle,n.gain=i.gain,n.lacunarity=i.lacunarity,n.alpha=i.alpha,n.parallel=i.parallel,n.center=i.center,n.time=i.time,n}return t.prototype.apply=function(r,n,i,o){var a=n.filterFrame,s=a.width,l=a.height;this.uniforms.light=this.parallel?this._angleLight:this.center,this.uniforms.parallel=this.parallel,this.uniforms.dimensions[0]=s,this.uniforms.dimensions[1]=l,this.uniforms.aspect=l/s,this.uniforms.time=this.time,this.uniforms.alpha=this.alpha,r.applyFilter(this,n,i,o)},Object.defineProperty(t.prototype,"angle",{get:function(){return this._angle},set:function(r){this._angle=r;var n=r*ko;this._angleLight.x=Math.cos(n),this._angleLight.y=Math.sin(n)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"gain",{get:function(){return this.uniforms.gain},set:function(r){this.uniforms.gain=r},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"lacunarity",{get:function(){return this.uniforms.lacunarity},set:function(r){this.uniforms.lacunarity=r},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"alpha",{get:function(){return this.uniforms.alpha},set:function(r){this.uniforms.alpha=r},enumerable:!1,configurable:!0}),t.defaults={angle:30,gain:.5,lacunarity:2.5,time:0,parallel:!0,center:[0,0],alpha:1},t}(ge);/*!
 * @pixi/filter-adjustment - v4.2.0
 * Compiled Fri, 05 Aug 2022 19:53:35 UTC
 *
 * @pixi/filter-adjustment is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 *//*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var w0=function(e,t){return w0=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(r[i]=n[i])},w0(e,t)};function Due(e,t){w0(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}var Nue=`attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;

uniform mat3 projectionMatrix;

varying vec2 vTextureCoord;

void main(void)
{
    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);
    vTextureCoord = aTextureCoord;
}`,Bue=`varying vec2 vTextureCoord;
uniform sampler2D uSampler;

uniform float gamma;
uniform float contrast;
uniform float saturation;
uniform float brightness;
uniform float red;
uniform float green;
uniform float blue;
uniform float alpha;

void main(void)
{
    vec4 c = texture2D(uSampler, vTextureCoord);

    if (c.a > 0.0) {
        c.rgb /= c.a;

        vec3 rgb = pow(c.rgb, vec3(1. / gamma));
        rgb = mix(vec3(.5), mix(vec3(dot(vec3(.2125, .7154, .0721), rgb)), rgb, saturation), contrast);
        rgb.r *= red;
        rgb.g *= green;
        rgb.b *= blue;
        c.rgb = rgb * brightness;

        c.rgb *= c.a;
    }

    gl_FragColor = c * alpha;
}
`;(function(e){Due(t,e);function t(r){var n=e.call(this,Nue,Bue)||this;return n.gamma=1,n.saturation=1,n.contrast=1,n.brightness=1,n.red=1,n.green=1,n.blue=1,n.alpha=1,Object.assign(n,r),n}return t.prototype.apply=function(r,n,i,o){this.uniforms.gamma=Math.max(this.gamma,1e-4),this.uniforms.saturation=this.saturation,this.uniforms.contrast=this.contrast,this.uniforms.brightness=this.brightness,this.uniforms.red=this.red,this.uniforms.green=this.green,this.uniforms.blue=this.blue,this.uniforms.alpha=this.alpha,r.applyFilter(this,n,i,o)},t})(ge);/*!
 * @pixi/filter-kawase-blur - v4.2.0
 * Compiled Fri, 05 Aug 2022 19:53:35 UTC
 *
 * @pixi/filter-kawase-blur is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 *//*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var E0=function(e,t){return E0=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(r[i]=n[i])},E0(e,t)};function jue(e,t){E0(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}var Uue=`attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;

uniform mat3 projectionMatrix;

varying vec2 vTextureCoord;

void main(void)
{
    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);
    vTextureCoord = aTextureCoord;
}`,$ue=`
varying vec2 vTextureCoord;
uniform sampler2D uSampler;

uniform vec2 uOffset;

void main(void)
{
    vec4 color = vec4(0.0);

    // Sample top left pixel
    color += texture2D(uSampler, vec2(vTextureCoord.x - uOffset.x, vTextureCoord.y + uOffset.y));

    // Sample top right pixel
    color += texture2D(uSampler, vec2(vTextureCoord.x + uOffset.x, vTextureCoord.y + uOffset.y));

    // Sample bottom right pixel
    color += texture2D(uSampler, vec2(vTextureCoord.x + uOffset.x, vTextureCoord.y - uOffset.y));

    // Sample bottom left pixel
    color += texture2D(uSampler, vec2(vTextureCoord.x - uOffset.x, vTextureCoord.y - uOffset.y));

    // Average
    color *= 0.25;

    gl_FragColor = color;
}`,Gue=`
varying vec2 vTextureCoord;
uniform sampler2D uSampler;

uniform vec2 uOffset;
uniform vec4 filterClamp;

void main(void)
{
    vec4 color = vec4(0.0);

    // Sample top left pixel
    color += texture2D(uSampler, clamp(vec2(vTextureCoord.x - uOffset.x, vTextureCoord.y + uOffset.y), filterClamp.xy, filterClamp.zw));

    // Sample top right pixel
    color += texture2D(uSampler, clamp(vec2(vTextureCoord.x + uOffset.x, vTextureCoord.y + uOffset.y), filterClamp.xy, filterClamp.zw));

    // Sample bottom right pixel
    color += texture2D(uSampler, clamp(vec2(vTextureCoord.x + uOffset.x, vTextureCoord.y - uOffset.y), filterClamp.xy, filterClamp.zw));

    // Sample bottom left pixel
    color += texture2D(uSampler, clamp(vec2(vTextureCoord.x - uOffset.x, vTextureCoord.y - uOffset.y), filterClamp.xy, filterClamp.zw));

    // Average
    color *= 0.25;

    gl_FragColor = color;
}
`,Od=function(e){jue(t,e);function t(r,n,i){r===void 0&&(r=4),n===void 0&&(n=3),i===void 0&&(i=!1);var o=e.call(this,Uue,i?Gue:$ue)||this;return o._kernels=[],o._blur=4,o._quality=3,o.uniforms.uOffset=new Float32Array(2),o._pixelSize=new Pe,o.pixelSize=1,o._clamp=i,Array.isArray(r)?o.kernels=r:(o._blur=r,o.quality=n),o}return t.prototype.apply=function(r,n,i,o){var a=this._pixelSize.x/n._frame.width,s=this._pixelSize.y/n._frame.height,l;if(this._quality===1||this._blur===0)l=this._kernels[0]+.5,this.uniforms.uOffset[0]=l*a,this.uniforms.uOffset[1]=l*s,r.applyFilter(this,n,i,o);else{for(var u=r.getFilterTexture(),c=n,f=u,h=void 0,d=this._quality-1,m=0;m<d;m++)l=this._kernels[m]+.5,this.uniforms.uOffset[0]=l*a,this.uniforms.uOffset[1]=l*s,r.applyFilter(this,c,f,1),h=c,c=f,f=h;l=this._kernels[d]+.5,this.uniforms.uOffset[0]=l*a,this.uniforms.uOffset[1]=l*s,r.applyFilter(this,c,i,o),r.returnFilterTexture(u)}},t.prototype._updatePadding=function(){this.padding=Math.ceil(this._kernels.reduce(function(r,n){return r+n+.5},0))},t.prototype._generateKernels=function(){var r=this._blur,n=this._quality,i=[r];if(r>0)for(var o=r,a=r/n,s=1;s<n;s++)o-=a,i.push(o);this._kernels=i,this._updatePadding()},Object.defineProperty(t.prototype,"kernels",{get:function(){return this._kernels},set:function(r){Array.isArray(r)&&r.length>0?(this._kernels=r,this._quality=r.length,this._blur=Math.max.apply(Math,r)):(this._kernels=[0],this._quality=1)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"clamp",{get:function(){return this._clamp},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"pixelSize",{get:function(){return this._pixelSize},set:function(r){typeof r=="number"?(this._pixelSize.x=r,this._pixelSize.y=r):Array.isArray(r)?(this._pixelSize.x=r[0],this._pixelSize.y=r[1]):r instanceof Pe?(this._pixelSize.x=r.x,this._pixelSize.y=r.y):(this._pixelSize.x=1,this._pixelSize.y=1)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"quality",{get:function(){return this._quality},set:function(r){this._quality=Math.max(1,Math.round(r)),this._generateKernels()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"blur",{get:function(){return this._blur},set:function(r){this._blur=r,this._generateKernels()},enumerable:!1,configurable:!0}),t}(ge);/*!
 * @pixi/filter-advanced-bloom - v4.2.0
 * Compiled Fri, 05 Aug 2022 19:53:35 UTC
 *
 * @pixi/filter-advanced-bloom is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 *//*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var T0=function(e,t){return T0=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(r[i]=n[i])},T0(e,t)};function $L(e,t){T0(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}var GL=`attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;

uniform mat3 projectionMatrix;

varying vec2 vTextureCoord;

void main(void)
{
    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);
    vTextureCoord = aTextureCoord;
}`,zue=`
uniform sampler2D uSampler;
varying vec2 vTextureCoord;

uniform float threshold;

void main() {
    vec4 color = texture2D(uSampler, vTextureCoord);

    // A simple & fast algorithm for getting brightness.
    // It's inaccuracy , but good enought for this feature.
    float _max = max(max(color.r, color.g), color.b);
    float _min = min(min(color.r, color.g), color.b);
    float brightness = (_max + _min) * 0.5;

    if(brightness > threshold) {
        gl_FragColor = color;
    } else {
        gl_FragColor = vec4(0.0, 0.0, 0.0, 0.0);
    }
}
`,Vue=function(e){$L(t,e);function t(r){r===void 0&&(r=.5);var n=e.call(this,GL,zue)||this;return n.threshold=r,n}return Object.defineProperty(t.prototype,"threshold",{get:function(){return this.uniforms.threshold},set:function(r){this.uniforms.threshold=r},enumerable:!1,configurable:!0}),t}(ge),Hue=`uniform sampler2D uSampler;
varying vec2 vTextureCoord;

uniform sampler2D bloomTexture;
uniform float bloomScale;
uniform float brightness;

void main() {
    vec4 color = texture2D(uSampler, vTextureCoord);
    color.rgb *= brightness;
    vec4 bloomColor = vec4(texture2D(bloomTexture, vTextureCoord).rgb, 0.0);
    bloomColor.rgb *= bloomScale;
    gl_FragColor = color + bloomColor;
}
`;(function(e){$L(t,e);function t(r){var n=e.call(this,GL,Hue)||this;n.bloomScale=1,n.brightness=1,n._resolution=ne.FILTER_RESOLUTION,typeof r=="number"&&(r={threshold:r});var i=Object.assign(t.defaults,r);n.bloomScale=i.bloomScale,n.brightness=i.brightness;var o=i.kernels,a=i.blur,s=i.quality,l=i.pixelSize,u=i.resolution;return n._extractFilter=new Vue(i.threshold),n._extractFilter.resolution=u,n._blurFilter=o?new Od(o):new Od(a,s),n.pixelSize=l,n.resolution=u,n}return t.prototype.apply=function(r,n,i,o,a){var s=r.getFilterTexture();this._extractFilter.apply(r,n,s,1,a);var l=r.getFilterTexture();this._blurFilter.apply(r,s,l,1),this.uniforms.bloomScale=this.bloomScale,this.uniforms.brightness=this.brightness,this.uniforms.bloomTexture=l,r.applyFilter(this,n,i,o),r.returnFilterTexture(l),r.returnFilterTexture(s)},Object.defineProperty(t.prototype,"resolution",{get:function(){return this._resolution},set:function(r){this._resolution=r,this._extractFilter&&(this._extractFilter.resolution=r),this._blurFilter&&(this._blurFilter.resolution=r)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"threshold",{get:function(){return this._extractFilter.threshold},set:function(r){this._extractFilter.threshold=r},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"kernels",{get:function(){return this._blurFilter.kernels},set:function(r){this._blurFilter.kernels=r},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"blur",{get:function(){return this._blurFilter.blur},set:function(r){this._blurFilter.blur=r},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"quality",{get:function(){return this._blurFilter.quality},set:function(r){this._blurFilter.quality=r},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"pixelSize",{get:function(){return this._blurFilter.pixelSize},set:function(r){this._blurFilter.pixelSize=r},enumerable:!1,configurable:!0}),t.defaults={threshold:.5,bloomScale:1,brightness:1,kernels:null,blur:8,quality:4,pixelSize:1,resolution:ne.FILTER_RESOLUTION},t})(ge);/*!
 * @pixi/filter-ascii - v4.2.0
 * Compiled Fri, 05 Aug 2022 19:53:35 UTC
 *
 * @pixi/filter-ascii is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 *//*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var C0=function(e,t){return C0=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(r[i]=n[i])},C0(e,t)};function Wue(e,t){C0(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}var Xue=`attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;

uniform mat3 projectionMatrix;

varying vec2 vTextureCoord;

void main(void)
{
    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);
    vTextureCoord = aTextureCoord;
}`,que=`varying vec2 vTextureCoord;

uniform vec4 filterArea;
uniform float pixelSize;
uniform sampler2D uSampler;

vec2 mapCoord( vec2 coord )
{
    coord *= filterArea.xy;
    coord += filterArea.zw;

    return coord;
}

vec2 unmapCoord( vec2 coord )
{
    coord -= filterArea.zw;
    coord /= filterArea.xy;

    return coord;
}

vec2 pixelate(vec2 coord, vec2 size)
{
    return floor( coord / size ) * size;
}

vec2 getMod(vec2 coord, vec2 size)
{
    return mod( coord , size) / size;
}

float character(float n, vec2 p)
{
    p = floor(p*vec2(4.0, -4.0) + 2.5);

    if (clamp(p.x, 0.0, 4.0) == p.x)
    {
        if (clamp(p.y, 0.0, 4.0) == p.y)
        {
            if (int(mod(n/exp2(p.x + 5.0*p.y), 2.0)) == 1) return 1.0;
        }
    }
    return 0.0;
}

void main()
{
    vec2 coord = mapCoord(vTextureCoord);

    // get the rounded color..
    vec2 pixCoord = pixelate(coord, vec2(pixelSize));
    pixCoord = unmapCoord(pixCoord);

    vec4 color = texture2D(uSampler, pixCoord);

    // determine the character to use
    float gray = (color.r + color.g + color.b) / 3.0;

    float n =  65536.0;             // .
    if (gray > 0.2) n = 65600.0;    // :
    if (gray > 0.3) n = 332772.0;   // *
    if (gray > 0.4) n = 15255086.0; // o
    if (gray > 0.5) n = 23385164.0; // &
    if (gray > 0.6) n = 15252014.0; // 8
    if (gray > 0.7) n = 13199452.0; // @
    if (gray > 0.8) n = 11512810.0; // #

    // get the mod..
    vec2 modd = getMod(coord, vec2(pixelSize));

    gl_FragColor = color * character( n, vec2(-1.0) + modd * 2.0);

}
`;(function(e){Wue(t,e);function t(r){r===void 0&&(r=8);var n=e.call(this,Xue,que)||this;return n.size=r,n}return Object.defineProperty(t.prototype,"size",{get:function(){return this.uniforms.pixelSize},set:function(r){this.uniforms.pixelSize=r},enumerable:!1,configurable:!0}),t})(ge);/*!
 * @pixi/filter-bevel - v4.2.0
 * Compiled Fri, 05 Aug 2022 19:53:35 UTC
 *
 * @pixi/filter-bevel is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 *//*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var P0=function(e,t){return P0=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(r[i]=n[i])},P0(e,t)};function Yue(e,t){P0(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}var Kue=`attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;

uniform mat3 projectionMatrix;

varying vec2 vTextureCoord;

void main(void)
{
    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);
    vTextureCoord = aTextureCoord;
}`,Zue=`precision mediump float;

varying vec2 vTextureCoord;
uniform sampler2D uSampler;
uniform vec4 filterArea;

uniform float transformX;
uniform float transformY;
uniform vec3 lightColor;
uniform float lightAlpha;
uniform vec3 shadowColor;
uniform float shadowAlpha;

void main(void) {
    vec2 transform = vec2(1.0 / filterArea) * vec2(transformX, transformY);
    vec4 color = texture2D(uSampler, vTextureCoord);
    float light = texture2D(uSampler, vTextureCoord - transform).a;
    float shadow = texture2D(uSampler, vTextureCoord + transform).a;

    color.rgb = mix(color.rgb, lightColor, clamp((color.a - light) * lightAlpha, 0.0, 1.0));
    color.rgb = mix(color.rgb, shadowColor, clamp((color.a - shadow) * shadowAlpha, 0.0, 1.0));
    gl_FragColor = vec4(color.rgb * color.a, color.a);
}
`;(function(e){Yue(t,e);function t(r){var n=e.call(this,Kue,Zue)||this;return n._thickness=2,n._angle=0,n.uniforms.lightColor=new Float32Array(3),n.uniforms.shadowColor=new Float32Array(3),Object.assign(n,{rotation:45,thickness:2,lightColor:16777215,lightAlpha:.7,shadowColor:0,shadowAlpha:.7},r),n.padding=1,n}return t.prototype._updateTransform=function(){this.uniforms.transformX=this._thickness*Math.cos(this._angle),this.uniforms.transformY=this._thickness*Math.sin(this._angle)},Object.defineProperty(t.prototype,"rotation",{get:function(){return this._angle/ko},set:function(r){this._angle=r*ko,this._updateTransform()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"thickness",{get:function(){return this._thickness},set:function(r){this._thickness=r,this._updateTransform()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"lightColor",{get:function(){return Sn(this.uniforms.lightColor)},set:function(r){Qt(r,this.uniforms.lightColor)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"lightAlpha",{get:function(){return this.uniforms.lightAlpha},set:function(r){this.uniforms.lightAlpha=r},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"shadowColor",{get:function(){return Sn(this.uniforms.shadowColor)},set:function(r){Qt(r,this.uniforms.shadowColor)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"shadowAlpha",{get:function(){return this.uniforms.shadowAlpha},set:function(r){this.uniforms.shadowAlpha=r},enumerable:!1,configurable:!0}),t})(ge);/*!
 * @pixi/filter-bloom - v4.2.0
 * Compiled Fri, 05 Aug 2022 19:53:35 UTC
 *
 * @pixi/filter-bloom is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 *//*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var A0=function(e,t){return A0=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(r[i]=n[i])},A0(e,t)};function Jue(e,t){A0(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}(function(e){Jue(t,e);function t(r,n,i,o){r===void 0&&(r=2),n===void 0&&(n=4),i===void 0&&(i=ne.FILTER_RESOLUTION),o===void 0&&(o=5);var a=e.call(this)||this,s,l;return typeof r=="number"?(s=r,l=r):r instanceof Pe?(s=r.x,l=r.y):Array.isArray(r)&&(s=r[0],l=r[1]),a.blurXFilter=new Oc(!0,s,n,i,o),a.blurYFilter=new Oc(!1,l,n,i,o),a.blurYFilter.blendMode=ce.SCREEN,a.defaultFilter=new AL,a}return t.prototype.apply=function(r,n,i,o){var a=r.getFilterTexture();this.defaultFilter.apply(r,n,i,o),this.blurXFilter.apply(r,n,a,1),this.blurYFilter.apply(r,a,i,0),r.returnFilterTexture(a)},Object.defineProperty(t.prototype,"blur",{get:function(){return this.blurXFilter.blur},set:function(r){this.blurXFilter.blur=this.blurYFilter.blur=r},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"blurX",{get:function(){return this.blurXFilter.blur},set:function(r){this.blurXFilter.blur=r},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"blurY",{get:function(){return this.blurYFilter.blur},set:function(r){this.blurYFilter.blur=r},enumerable:!1,configurable:!0}),t})(ge);/*!
 * @pixi/filter-bulge-pinch - v4.2.0
 * Compiled Fri, 05 Aug 2022 19:53:35 UTC
 *
 * @pixi/filter-bulge-pinch is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 *//*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var O0=function(e,t){return O0=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(r[i]=n[i])},O0(e,t)};function Que(e,t){O0(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}var ece=`attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;

uniform mat3 projectionMatrix;

varying vec2 vTextureCoord;

void main(void)
{
    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);
    vTextureCoord = aTextureCoord;
}`,tce=`uniform float radius;
uniform float strength;
uniform vec2 center;
uniform sampler2D uSampler;
varying vec2 vTextureCoord;

uniform vec4 filterArea;
uniform vec4 filterClamp;
uniform vec2 dimensions;

void main()
{
    vec2 coord = vTextureCoord * filterArea.xy;
    coord -= center * dimensions.xy;
    float distance = length(coord);
    if (distance < radius) {
        float percent = distance / radius;
        if (strength > 0.0) {
            coord *= mix(1.0, smoothstep(0.0, radius / distance, percent), strength * 0.75);
        } else {
            coord *= mix(1.0, pow(percent, 1.0 + strength * 0.75) * radius / distance, 1.0 - percent);
        }
    }
    coord += center * dimensions.xy;
    coord /= filterArea.xy;
    vec2 clampedCoord = clamp(coord, filterClamp.xy, filterClamp.zw);
    vec4 color = texture2D(uSampler, clampedCoord);
    if (coord != clampedCoord) {
        color *= max(0.0, 1.0 - length(coord - clampedCoord));
    }

    gl_FragColor = color;
}
`;(function(e){Que(t,e);function t(r){var n=e.call(this,ece,tce)||this;return n.uniforms.dimensions=new Float32Array(2),Object.assign(n,t.defaults,r),n}return t.prototype.apply=function(r,n,i,o){var a=n.filterFrame,s=a.width,l=a.height;this.uniforms.dimensions[0]=s,this.uniforms.dimensions[1]=l,r.applyFilter(this,n,i,o)},Object.defineProperty(t.prototype,"radius",{get:function(){return this.uniforms.radius},set:function(r){this.uniforms.radius=r},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"strength",{get:function(){return this.uniforms.strength},set:function(r){this.uniforms.strength=r},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"center",{get:function(){return this.uniforms.center},set:function(r){this.uniforms.center=r},enumerable:!1,configurable:!0}),t.defaults={center:[.5,.5],radius:100,strength:1},t})(ge);/*!
 * @pixi/filter-color-map - v4.2.0
 * Compiled Fri, 05 Aug 2022 19:53:35 UTC
 *
 * @pixi/filter-color-map is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 *//*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var I0=function(e,t){return I0=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(r[i]=n[i])},I0(e,t)};function rce(e,t){I0(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}var nce=`attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;

uniform mat3 projectionMatrix;

varying vec2 vTextureCoord;

void main(void)
{
    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);
    vTextureCoord = aTextureCoord;
}`,ice=`varying vec2 vTextureCoord;
uniform sampler2D uSampler;
uniform sampler2D colorMap;
uniform float _mix;
uniform float _size;
uniform float _sliceSize;
uniform float _slicePixelSize;
uniform float _sliceInnerSize;
void main() {
    vec4 color = texture2D(uSampler, vTextureCoord.xy);

    vec4 adjusted;
    if (color.a > 0.0) {
        color.rgb /= color.a;
        float innerWidth = _size - 1.0;
        float zSlice0 = min(floor(color.b * innerWidth), innerWidth);
        float zSlice1 = min(zSlice0 + 1.0, innerWidth);
        float xOffset = _slicePixelSize * 0.5 + color.r * _sliceInnerSize;
        float s0 = xOffset + (zSlice0 * _sliceSize);
        float s1 = xOffset + (zSlice1 * _sliceSize);
        float yOffset = _sliceSize * 0.5 + color.g * (1.0 - _sliceSize);
        vec4 slice0Color = texture2D(colorMap, vec2(s0,yOffset));
        vec4 slice1Color = texture2D(colorMap, vec2(s1,yOffset));
        float zOffset = fract(color.b * innerWidth);
        adjusted = mix(slice0Color, slice1Color, zOffset);

        color.rgb *= color.a;
    }
    gl_FragColor = vec4(mix(color, adjusted, _mix).rgb, color.a);

}`;(function(e){rce(t,e);function t(r,n,i){n===void 0&&(n=!1),i===void 0&&(i=1);var o=e.call(this,nce,ice)||this;return o.mix=1,o._size=0,o._sliceSize=0,o._slicePixelSize=0,o._sliceInnerSize=0,o._nearest=!1,o._scaleMode=null,o._colorMap=null,o._scaleMode=null,o.nearest=n,o.mix=i,o.colorMap=r,o}return t.prototype.apply=function(r,n,i,o){this.uniforms._mix=this.mix,r.applyFilter(this,n,i,o)},Object.defineProperty(t.prototype,"colorSize",{get:function(){return this._size},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"colorMap",{get:function(){return this._colorMap},set:function(r){var n;r&&(r instanceof pe||(r=pe.from(r)),!((n=r)===null||n===void 0)&&n.baseTexture&&(r.baseTexture.scaleMode=this._scaleMode,r.baseTexture.mipmap=zr.OFF,this._size=r.height,this._sliceSize=1/this._size,this._slicePixelSize=this._sliceSize/this._size,this._sliceInnerSize=this._slicePixelSize*(this._size-1),this.uniforms._size=this._size,this.uniforms._sliceSize=this._sliceSize,this.uniforms._slicePixelSize=this._slicePixelSize,this.uniforms._sliceInnerSize=this._sliceInnerSize,this.uniforms.colorMap=r),this._colorMap=r)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"nearest",{get:function(){return this._nearest},set:function(r){this._nearest=r,this._scaleMode=r?Br.NEAREST:Br.LINEAR;var n=this._colorMap;n&&n.baseTexture&&(n.baseTexture._glTextures={},n.baseTexture.scaleMode=this._scaleMode,n.baseTexture.mipmap=zr.OFF,n._updateID++,n.baseTexture.emit("update",n.baseTexture))},enumerable:!1,configurable:!0}),t.prototype.updateColorMap=function(){var r=this._colorMap;r&&r.baseTexture&&(r._updateID++,r.baseTexture.emit("update",r.baseTexture),this.colorMap=r)},t.prototype.destroy=function(r){r===void 0&&(r=!1),this._colorMap&&this._colorMap.destroy(r),e.prototype.destroy.call(this)},t})(ge);/*!
 * @pixi/filter-color-overlay - v4.2.0
 * Compiled Fri, 05 Aug 2022 19:53:35 UTC
 *
 * @pixi/filter-color-overlay is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 *//*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var M0=function(e,t){return M0=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(r[i]=n[i])},M0(e,t)};function oce(e,t){M0(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}var ace=`attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;

uniform mat3 projectionMatrix;

varying vec2 vTextureCoord;

void main(void)
{
    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);
    vTextureCoord = aTextureCoord;
}`,sce=`varying vec2 vTextureCoord;
uniform sampler2D uSampler;
uniform vec3 color;
uniform float alpha;

void main(void) {
    vec4 currentColor = texture2D(uSampler, vTextureCoord);
    gl_FragColor = vec4(mix(currentColor.rgb, color.rgb, currentColor.a * alpha), currentColor.a);
}
`;(function(e){oce(t,e);function t(r,n){r===void 0&&(r=0),n===void 0&&(n=1);var i=e.call(this,ace,sce)||this;return i._color=0,i._alpha=1,i.uniforms.color=new Float32Array(3),i.color=r,i.alpha=n,i}return Object.defineProperty(t.prototype,"color",{get:function(){return this._color},set:function(r){var n=this.uniforms.color;typeof r=="number"?(Qt(r,n),this._color=r):(n[0]=r[0],n[1]=r[1],n[2]=r[2],this._color=Sn(n))},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"alpha",{get:function(){return this._alpha},set:function(r){this.uniforms.alpha=r,this._alpha=r},enumerable:!1,configurable:!0}),t})(ge);/*!
 * @pixi/filter-color-replace - v4.2.0
 * Compiled Fri, 05 Aug 2022 19:53:35 UTC
 *
 * @pixi/filter-color-replace is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 *//*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var R0=function(e,t){return R0=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(r[i]=n[i])},R0(e,t)};function lce(e,t){R0(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}var uce=`attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;

uniform mat3 projectionMatrix;

varying vec2 vTextureCoord;

void main(void)
{
    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);
    vTextureCoord = aTextureCoord;
}`,cce=`varying vec2 vTextureCoord;
uniform sampler2D uSampler;
uniform vec3 originalColor;
uniform vec3 newColor;
uniform float epsilon;
void main(void) {
    vec4 currentColor = texture2D(uSampler, vTextureCoord);
    vec3 colorDiff = originalColor - (currentColor.rgb / max(currentColor.a, 0.0000000001));
    float colorDistance = length(colorDiff);
    float doReplace = step(colorDistance, epsilon);
    gl_FragColor = vec4(mix(currentColor.rgb, (newColor + colorDiff) * currentColor.a, doReplace), currentColor.a);
}
`;(function(e){lce(t,e);function t(r,n,i){r===void 0&&(r=16711680),n===void 0&&(n=0),i===void 0&&(i=.4);var o=e.call(this,uce,cce)||this;return o._originalColor=16711680,o._newColor=0,o.uniforms.originalColor=new Float32Array(3),o.uniforms.newColor=new Float32Array(3),o.originalColor=r,o.newColor=n,o.epsilon=i,o}return Object.defineProperty(t.prototype,"originalColor",{get:function(){return this._originalColor},set:function(r){var n=this.uniforms.originalColor;typeof r=="number"?(Qt(r,n),this._originalColor=r):(n[0]=r[0],n[1]=r[1],n[2]=r[2],this._originalColor=Sn(n))},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"newColor",{get:function(){return this._newColor},set:function(r){var n=this.uniforms.newColor;typeof r=="number"?(Qt(r,n),this._newColor=r):(n[0]=r[0],n[1]=r[1],n[2]=r[2],this._newColor=Sn(n))},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"epsilon",{get:function(){return this.uniforms.epsilon},set:function(r){this.uniforms.epsilon=r},enumerable:!1,configurable:!0}),t})(ge);/*!
 * @pixi/filter-convolution - v4.2.0
 * Compiled Fri, 05 Aug 2022 19:53:35 UTC
 *
 * @pixi/filter-convolution is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 *//*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var k0=function(e,t){return k0=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(r[i]=n[i])},k0(e,t)};function fce(e,t){k0(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}var hce=`attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;

uniform mat3 projectionMatrix;

varying vec2 vTextureCoord;

void main(void)
{
    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);
    vTextureCoord = aTextureCoord;
}`,dce=`precision mediump float;

varying mediump vec2 vTextureCoord;

uniform sampler2D uSampler;
uniform vec2 texelSize;
uniform float matrix[9];

void main(void)
{
   vec4 c11 = texture2D(uSampler, vTextureCoord - texelSize); // top left
   vec4 c12 = texture2D(uSampler, vec2(vTextureCoord.x, vTextureCoord.y - texelSize.y)); // top center
   vec4 c13 = texture2D(uSampler, vec2(vTextureCoord.x + texelSize.x, vTextureCoord.y - texelSize.y)); // top right

   vec4 c21 = texture2D(uSampler, vec2(vTextureCoord.x - texelSize.x, vTextureCoord.y)); // mid left
   vec4 c22 = texture2D(uSampler, vTextureCoord); // mid center
   vec4 c23 = texture2D(uSampler, vec2(vTextureCoord.x + texelSize.x, vTextureCoord.y)); // mid right

   vec4 c31 = texture2D(uSampler, vec2(vTextureCoord.x - texelSize.x, vTextureCoord.y + texelSize.y)); // bottom left
   vec4 c32 = texture2D(uSampler, vec2(vTextureCoord.x, vTextureCoord.y + texelSize.y)); // bottom center
   vec4 c33 = texture2D(uSampler, vTextureCoord + texelSize); // bottom right

   gl_FragColor =
       c11 * matrix[0] + c12 * matrix[1] + c13 * matrix[2] +
       c21 * matrix[3] + c22 * matrix[4] + c23 * matrix[5] +
       c31 * matrix[6] + c32 * matrix[7] + c33 * matrix[8];

   gl_FragColor.a = c22.a;
}
`;(function(e){fce(t,e);function t(r,n,i){n===void 0&&(n=200),i===void 0&&(i=200);var o=e.call(this,hce,dce)||this;return o.uniforms.texelSize=new Float32Array(2),o.uniforms.matrix=new Float32Array(9),r!==void 0&&(o.matrix=r),o.width=n,o.height=i,o}return Object.defineProperty(t.prototype,"matrix",{get:function(){return this.uniforms.matrix},set:function(r){var n=this;r.forEach(function(i,o){n.uniforms.matrix[o]=i})},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"width",{get:function(){return 1/this.uniforms.texelSize[0]},set:function(r){this.uniforms.texelSize[0]=1/r},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"height",{get:function(){return 1/this.uniforms.texelSize[1]},set:function(r){this.uniforms.texelSize[1]=1/r},enumerable:!1,configurable:!0}),t})(ge);/*!
 * @pixi/filter-cross-hatch - v4.2.0
 * Compiled Fri, 05 Aug 2022 19:53:35 UTC
 *
 * @pixi/filter-cross-hatch is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 *//*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var L0=function(e,t){return L0=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(r[i]=n[i])},L0(e,t)};function pce(e,t){L0(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}var mce=`attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;

uniform mat3 projectionMatrix;

varying vec2 vTextureCoord;

void main(void)
{
    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);
    vTextureCoord = aTextureCoord;
}`,vce=`precision mediump float;

varying vec2 vTextureCoord;

uniform sampler2D uSampler;

void main(void)
{
    float lum = length(texture2D(uSampler, vTextureCoord.xy).rgb);

    gl_FragColor = vec4(1.0, 1.0, 1.0, 1.0);

    if (lum < 1.00)
    {
        if (mod(gl_FragCoord.x + gl_FragCoord.y, 10.0) == 0.0)
        {
            gl_FragColor = vec4(0.0, 0.0, 0.0, 1.0);
        }
    }

    if (lum < 0.75)
    {
        if (mod(gl_FragCoord.x - gl_FragCoord.y, 10.0) == 0.0)
        {
            gl_FragColor = vec4(0.0, 0.0, 0.0, 1.0);
        }
    }

    if (lum < 0.50)
    {
        if (mod(gl_FragCoord.x + gl_FragCoord.y - 5.0, 10.0) == 0.0)
        {
            gl_FragColor = vec4(0.0, 0.0, 0.0, 1.0);
        }
    }

    if (lum < 0.3)
    {
        if (mod(gl_FragCoord.x - gl_FragCoord.y - 5.0, 10.0) == 0.0)
        {
            gl_FragColor = vec4(0.0, 0.0, 0.0, 1.0);
        }
    }
}
`;(function(e){pce(t,e);function t(){return e.call(this,mce,vce)||this}return t})(ge);/*!
 * @pixi/filter-crt - v4.2.0
 * Compiled Fri, 05 Aug 2022 19:53:35 UTC
 *
 * @pixi/filter-crt is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 *//*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var F0=function(e,t){return F0=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(r[i]=n[i])},F0(e,t)};function gce(e,t){F0(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}var yce=`attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;

uniform mat3 projectionMatrix;

varying vec2 vTextureCoord;

void main(void)
{
    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);
    vTextureCoord = aTextureCoord;
}`,_ce=`varying vec2 vTextureCoord;
uniform sampler2D uSampler;

uniform vec4 filterArea;
uniform vec2 dimensions;

const float SQRT_2 = 1.414213;

const float light = 1.0;

uniform float curvature;
uniform float lineWidth;
uniform float lineContrast;
uniform bool verticalLine;
uniform float noise;
uniform float noiseSize;

uniform float vignetting;
uniform float vignettingAlpha;
uniform float vignettingBlur;

uniform float seed;
uniform float time;

float rand(vec2 co) {
    return fract(sin(dot(co.xy, vec2(12.9898, 78.233))) * 43758.5453);
}

void main(void)
{
    vec2 pixelCoord = vTextureCoord.xy * filterArea.xy;
    vec2 dir = vec2(vTextureCoord.xy * filterArea.xy / dimensions - vec2(0.5, 0.5));
    
    gl_FragColor = texture2D(uSampler, vTextureCoord);
    vec3 rgb = gl_FragColor.rgb;

    if (noise > 0.0 && noiseSize > 0.0)
    {
        pixelCoord.x = floor(pixelCoord.x / noiseSize);
        pixelCoord.y = floor(pixelCoord.y / noiseSize);
        float _noise = rand(pixelCoord * noiseSize * seed) - 0.5;
        rgb += _noise * noise;
    }

    if (lineWidth > 0.0)
    {
        float _c = curvature > 0. ? curvature : 1.;
        float k = curvature > 0. ?(length(dir * dir) * 0.25 * _c * _c + 0.935 * _c) : 1.;
        vec2 uv = dir * k;

        float v = (verticalLine ? uv.x * dimensions.x : uv.y * dimensions.y) * min(1.0, 2.0 / lineWidth ) / _c;
        float j = 1. + cos(v * 1.2 - time) * 0.5 * lineContrast;
        rgb *= j;
        float segment = verticalLine ? mod((dir.x + .5) * dimensions.x, 4.) : mod((dir.y + .5) * dimensions.y, 4.);
        rgb *= 0.99 + ceil(segment) * 0.015;
    }

    if (vignetting > 0.0)
    {
        float outter = SQRT_2 - vignetting * SQRT_2;
        float darker = clamp((outter - length(dir) * SQRT_2) / ( 0.00001 + vignettingBlur * SQRT_2), 0.0, 1.0);
        rgb *= darker + (1.0 - darker) * (1.0 - vignettingAlpha);
    }

    gl_FragColor.rgb = rgb;
}
`;(function(e){gce(t,e);function t(r){var n=e.call(this,yce,_ce)||this;return n.time=0,n.seed=0,n.uniforms.dimensions=new Float32Array(2),Object.assign(n,t.defaults,r),n}return t.prototype.apply=function(r,n,i,o){var a=n.filterFrame,s=a.width,l=a.height;this.uniforms.dimensions[0]=s,this.uniforms.dimensions[1]=l,this.uniforms.seed=this.seed,this.uniforms.time=this.time,r.applyFilter(this,n,i,o)},Object.defineProperty(t.prototype,"curvature",{get:function(){return this.uniforms.curvature},set:function(r){this.uniforms.curvature=r},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"lineWidth",{get:function(){return this.uniforms.lineWidth},set:function(r){this.uniforms.lineWidth=r},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"lineContrast",{get:function(){return this.uniforms.lineContrast},set:function(r){this.uniforms.lineContrast=r},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"verticalLine",{get:function(){return this.uniforms.verticalLine},set:function(r){this.uniforms.verticalLine=r},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"noise",{get:function(){return this.uniforms.noise},set:function(r){this.uniforms.noise=r},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"noiseSize",{get:function(){return this.uniforms.noiseSize},set:function(r){this.uniforms.noiseSize=r},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"vignetting",{get:function(){return this.uniforms.vignetting},set:function(r){this.uniforms.vignetting=r},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"vignettingAlpha",{get:function(){return this.uniforms.vignettingAlpha},set:function(r){this.uniforms.vignettingAlpha=r},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"vignettingBlur",{get:function(){return this.uniforms.vignettingBlur},set:function(r){this.uniforms.vignettingBlur=r},enumerable:!1,configurable:!0}),t.defaults={curvature:1,lineWidth:1,lineContrast:.25,verticalLine:!1,noise:0,noiseSize:1,seed:0,vignetting:.3,vignettingAlpha:1,vignettingBlur:.3,time:0},t})(ge);/*!
 * @pixi/filter-drop-shadow - v4.2.0
 * Compiled Fri, 05 Aug 2022 19:53:35 UTC
 *
 * @pixi/filter-drop-shadow is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 *//*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var D0=function(e,t){return D0=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(r[i]=n[i])},D0(e,t)};function xce(e,t){D0(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}var Id=function(){return Id=Object.assign||function(t){for(var r=arguments,n,i=1,o=arguments.length;i<o;i++){n=r[i];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(t[a]=n[a])}return t},Id.apply(this,arguments)},bce=`attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;

uniform mat3 projectionMatrix;

varying vec2 vTextureCoord;

void main(void)
{
    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);
    vTextureCoord = aTextureCoord;
}`,Sce=`varying vec2 vTextureCoord;
uniform sampler2D uSampler;
uniform float alpha;
uniform vec3 color;

uniform vec2 shift;
uniform vec4 inputSize;

void main(void){
    vec4 sample = texture2D(uSampler, vTextureCoord - shift * inputSize.zw);

    // Premultiply alpha
    sample.rgb = color.rgb * sample.a;

    // alpha user alpha
    sample *= alpha;

    gl_FragColor = sample;
}`;(function(e){xce(t,e);function t(r){var n=e.call(this)||this;n.angle=45,n._distance=5,n._resolution=ne.FILTER_RESOLUTION;var i=r?Id(Id({},t.defaults),r):t.defaults,o=i.kernels,a=i.blur,s=i.quality,l=i.pixelSize,u=i.resolution;n._tintFilter=new ge(bce,Sce),n._tintFilter.uniforms.color=new Float32Array(4),n._tintFilter.uniforms.shift=new Pe,n._tintFilter.resolution=u,n._blurFilter=o?new Od(o):new Od(a,s),n.pixelSize=l,n.resolution=u;var c=i.shadowOnly,f=i.rotation,h=i.distance,d=i.alpha,m=i.color;return n.shadowOnly=c,n.rotation=f,n.distance=h,n.alpha=d,n.color=m,n._updatePadding(),n}return t.prototype.apply=function(r,n,i,o){var a=r.getFilterTexture();this._tintFilter.apply(r,n,a,1),this._blurFilter.apply(r,a,i,o),this.shadowOnly!==!0&&r.applyFilter(this,n,i,0),r.returnFilterTexture(a)},t.prototype._updatePadding=function(){this.padding=this.distance+this.blur*2},t.prototype._updateShift=function(){this._tintFilter.uniforms.shift.set(this.distance*Math.cos(this.angle),this.distance*Math.sin(this.angle))},Object.defineProperty(t.prototype,"resolution",{get:function(){return this._resolution},set:function(r){this._resolution=r,this._tintFilter&&(this._tintFilter.resolution=r),this._blurFilter&&(this._blurFilter.resolution=r)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"distance",{get:function(){return this._distance},set:function(r){this._distance=r,this._updatePadding(),this._updateShift()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"rotation",{get:function(){return this.angle/ko},set:function(r){this.angle=r*ko,this._updateShift()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"alpha",{get:function(){return this._tintFilter.uniforms.alpha},set:function(r){this._tintFilter.uniforms.alpha=r},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"color",{get:function(){return Sn(this._tintFilter.uniforms.color)},set:function(r){Qt(r,this._tintFilter.uniforms.color)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"kernels",{get:function(){return this._blurFilter.kernels},set:function(r){this._blurFilter.kernels=r},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"blur",{get:function(){return this._blurFilter.blur},set:function(r){this._blurFilter.blur=r,this._updatePadding()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"quality",{get:function(){return this._blurFilter.quality},set:function(r){this._blurFilter.quality=r},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"pixelSize",{get:function(){return this._blurFilter.pixelSize},set:function(r){this._blurFilter.pixelSize=r},enumerable:!1,configurable:!0}),t.defaults={rotation:45,distance:5,color:0,alpha:.5,shadowOnly:!1,kernels:null,blur:2,quality:3,pixelSize:1,resolution:ne.FILTER_RESOLUTION},t})(ge);/*!
 * @pixi/filter-emboss - v4.2.0
 * Compiled Fri, 05 Aug 2022 19:53:35 UTC
 *
 * @pixi/filter-emboss is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 *//*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var N0=function(e,t){return N0=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(r[i]=n[i])},N0(e,t)};function wce(e,t){N0(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}var Ece=`attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;

uniform mat3 projectionMatrix;

varying vec2 vTextureCoord;

void main(void)
{
    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);
    vTextureCoord = aTextureCoord;
}`,Tce=`precision mediump float;

varying vec2 vTextureCoord;

uniform sampler2D uSampler;
uniform float strength;
uniform vec4 filterArea;


void main(void)
{
	vec2 onePixel = vec2(1.0 / filterArea);

	vec4 color;

	color.rgb = vec3(0.5);

	color -= texture2D(uSampler, vTextureCoord - onePixel) * strength;
	color += texture2D(uSampler, vTextureCoord + onePixel) * strength;

	color.rgb = vec3((color.r + color.g + color.b) / 3.0);

	float alpha = texture2D(uSampler, vTextureCoord).a;

	gl_FragColor = vec4(color.rgb * alpha, alpha);
}
`;(function(e){wce(t,e);function t(r){r===void 0&&(r=5);var n=e.call(this,Ece,Tce)||this;return n.strength=r,n}return Object.defineProperty(t.prototype,"strength",{get:function(){return this.uniforms.strength},set:function(r){this.uniforms.strength=r},enumerable:!1,configurable:!0}),t})(ge);/*!
 * @pixi/filter-glow - v4.2.0
 * Compiled Fri, 05 Aug 2022 19:53:35 UTC
 *
 * @pixi/filter-glow is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 *//*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var B0=function(e,t){return B0=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(r[i]=n[i])},B0(e,t)};function Cce(e,t){B0(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}var Pce=`attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;

uniform mat3 projectionMatrix;

varying vec2 vTextureCoord;

void main(void)
{
    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);
    vTextureCoord = aTextureCoord;
}`,Ace=`varying vec2 vTextureCoord;
varying vec4 vColor;

uniform sampler2D uSampler;

uniform float outerStrength;
uniform float innerStrength;

uniform vec4 glowColor;

uniform vec4 filterArea;
uniform vec4 filterClamp;
uniform bool knockout;

const float PI = 3.14159265358979323846264;

const float DIST = __DIST__;
const float ANGLE_STEP_SIZE = min(__ANGLE_STEP_SIZE__, PI * 2.0);
const float ANGLE_STEP_NUM = ceil(PI * 2.0 / ANGLE_STEP_SIZE);

const float MAX_TOTAL_ALPHA = ANGLE_STEP_NUM * DIST * (DIST + 1.0) / 2.0;

void main(void) {
    vec2 px = vec2(1.0 / filterArea.x, 1.0 / filterArea.y);

    float totalAlpha = 0.0;

    vec2 direction;
    vec2 displaced;
    vec4 curColor;

    for (float angle = 0.0; angle < PI * 2.0; angle += ANGLE_STEP_SIZE) {
       direction = vec2(cos(angle), sin(angle)) * px;

       for (float curDistance = 0.0; curDistance < DIST; curDistance++) {
           displaced = clamp(vTextureCoord + direction * 
                   (curDistance + 1.0), filterClamp.xy, filterClamp.zw);

           curColor = texture2D(uSampler, displaced);

           totalAlpha += (DIST - curDistance) * curColor.a;
       }
    }
    
    curColor = texture2D(uSampler, vTextureCoord);

    float alphaRatio = (totalAlpha / MAX_TOTAL_ALPHA);

    float innerGlowAlpha = (1.0 - alphaRatio) * innerStrength * curColor.a;
    float innerGlowStrength = min(1.0, innerGlowAlpha);
    
    vec4 innerColor = mix(curColor, glowColor, innerGlowStrength);

    float outerGlowAlpha = alphaRatio * outerStrength * (1. - curColor.a);
    float outerGlowStrength = min(1.0 - innerColor.a, outerGlowAlpha);

    vec4 outerGlowColor = outerGlowStrength * glowColor.rgba;
    
    if (knockout) {
      float resultAlpha = outerGlowAlpha + innerGlowAlpha;
      gl_FragColor = vec4(glowColor.rgb * resultAlpha, resultAlpha);
    }
    else {
      gl_FragColor = innerColor + outerGlowColor;
    }
}
`;(function(e){Cce(t,e);function t(r){var n=this,i=Object.assign({},t.defaults,r),o=i.outerStrength,a=i.innerStrength,s=i.color,l=i.knockout,u=i.quality,c=Math.round(i.distance);return n=e.call(this,Pce,Ace.replace(/__ANGLE_STEP_SIZE__/gi,""+(1/u/c).toFixed(7)).replace(/__DIST__/gi,c.toFixed(0)+".0"))||this,n.uniforms.glowColor=new Float32Array([0,0,0,1]),Object.assign(n,{color:s,outerStrength:o,innerStrength:a,padding:c,knockout:l}),n}return Object.defineProperty(t.prototype,"color",{get:function(){return Sn(this.uniforms.glowColor)},set:function(r){Qt(r,this.uniforms.glowColor)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"outerStrength",{get:function(){return this.uniforms.outerStrength},set:function(r){this.uniforms.outerStrength=r},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"innerStrength",{get:function(){return this.uniforms.innerStrength},set:function(r){this.uniforms.innerStrength=r},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"knockout",{get:function(){return this.uniforms.knockout},set:function(r){this.uniforms.knockout=r},enumerable:!1,configurable:!0}),t.defaults={distance:10,outerStrength:4,innerStrength:0,color:16777215,quality:.1,knockout:!1},t})(ge);/*!
 * @pixi/filter-motion-blur - v4.2.0
 * Compiled Fri, 05 Aug 2022 19:53:35 UTC
 *
 * @pixi/filter-motion-blur is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 *//*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var j0=function(e,t){return j0=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(r[i]=n[i])},j0(e,t)};function Oce(e,t){j0(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}var Ice=`attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;

uniform mat3 projectionMatrix;

varying vec2 vTextureCoord;

void main(void)
{
    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);
    vTextureCoord = aTextureCoord;
}`,Mce=`varying vec2 vTextureCoord;
uniform sampler2D uSampler;
uniform vec4 filterArea;

uniform vec2 uVelocity;
uniform int uKernelSize;
uniform float uOffset;

const int MAX_KERNEL_SIZE = 2048;

// Notice:
// the perfect way:
//    int kernelSize = min(uKernelSize, MAX_KERNELSIZE);
// BUT in real use-case , uKernelSize < MAX_KERNELSIZE almost always.
// So use uKernelSize directly.

void main(void)
{
    vec4 color = texture2D(uSampler, vTextureCoord);

    if (uKernelSize == 0)
    {
        gl_FragColor = color;
        return;
    }

    vec2 velocity = uVelocity / filterArea.xy;
    float offset = -uOffset / length(uVelocity) - 0.5;
    int k = uKernelSize - 1;

    for(int i = 0; i < MAX_KERNEL_SIZE - 1; i++) {
        if (i == k) {
            break;
        }
        vec2 bias = velocity * (float(i) / float(k) + offset);
        color += texture2D(uSampler, vTextureCoord + bias);
    }
    gl_FragColor = color / float(uKernelSize);
}
`;(function(e){Oce(t,e);function t(r,n,i){r===void 0&&(r=[0,0]),n===void 0&&(n=5),i===void 0&&(i=0);var o=e.call(this,Ice,Mce)||this;return o.kernelSize=5,o.uniforms.uVelocity=new Float32Array(2),o._velocity=new Li(o.velocityChanged,o),o.setVelocity(r),o.kernelSize=n,o.offset=i,o}return t.prototype.apply=function(r,n,i,o){var a=this.velocity,s=a.x,l=a.y;this.uniforms.uKernelSize=s!==0||l!==0?this.kernelSize:0,r.applyFilter(this,n,i,o)},Object.defineProperty(t.prototype,"velocity",{get:function(){return this._velocity},set:function(r){this.setVelocity(r)},enumerable:!1,configurable:!0}),t.prototype.setVelocity=function(r){if(Array.isArray(r)){var n=r[0],i=r[1];this._velocity.set(n,i)}else this._velocity.copyFrom(r)},t.prototype.velocityChanged=function(){this.uniforms.uVelocity[0]=this._velocity.x,this.uniforms.uVelocity[1]=this._velocity.y,this.padding=(Math.max(Math.abs(this._velocity.x),Math.abs(this._velocity.y))>>0)+1},Object.defineProperty(t.prototype,"offset",{get:function(){return this.uniforms.uOffset},set:function(r){this.uniforms.uOffset=r},enumerable:!1,configurable:!0}),t})(ge);/*!
 * @pixi/filter-multi-color-replace - v4.2.0
 * Compiled Fri, 05 Aug 2022 19:53:35 UTC
 *
 * @pixi/filter-multi-color-replace is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 *//*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var U0=function(e,t){return U0=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(r[i]=n[i])},U0(e,t)};function Rce(e,t){U0(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}var kce=`attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;

uniform mat3 projectionMatrix;

varying vec2 vTextureCoord;

void main(void)
{
    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);
    vTextureCoord = aTextureCoord;
}`,Lce=`varying vec2 vTextureCoord;
uniform sampler2D uSampler;

uniform float epsilon;

const int MAX_COLORS = %maxColors%;

uniform vec3 originalColors[MAX_COLORS];
uniform vec3 targetColors[MAX_COLORS];

void main(void)
{
    gl_FragColor = texture2D(uSampler, vTextureCoord);

    float alpha = gl_FragColor.a;
    if (alpha < 0.0001)
    {
      return;
    }

    vec3 color = gl_FragColor.rgb / alpha;

    for(int i = 0; i < MAX_COLORS; i++)
    {
      vec3 origColor = originalColors[i];
      if (origColor.r < 0.0)
      {
        break;
      }
      vec3 colorDiff = origColor - color;
      if (length(colorDiff) < epsilon)
      {
        vec3 targetColor = targetColors[i];
        gl_FragColor = vec4((targetColor + colorDiff) * alpha, alpha);
        return;
      }
    }
}
`;(function(e){Rce(t,e);function t(r,n,i){n===void 0&&(n=.05),i===void 0&&(i=r.length);var o=e.call(this,kce,Lce.replace(/%maxColors%/g,i.toFixed(0)))||this;return o._replacements=[],o._maxColors=0,o.epsilon=n,o._maxColors=i,o.uniforms.originalColors=new Float32Array(i*3),o.uniforms.targetColors=new Float32Array(i*3),o.replacements=r,o}return Object.defineProperty(t.prototype,"replacements",{get:function(){return this._replacements},set:function(r){var n=this.uniforms.originalColors,i=this.uniforms.targetColors,o=r.length;if(o>this._maxColors)throw new Error("Length of replacements ("+o+") exceeds the maximum colors length ("+this._maxColors+")");n[o*3]=-1;for(var a=0;a<o;a++){var s=r[a],l=s[0];typeof l=="number"?l=Qt(l):s[0]=Sn(l),n[a*3]=l[0],n[a*3+1]=l[1],n[a*3+2]=l[2];var u=s[1];typeof u=="number"?u=Qt(u):s[1]=Sn(u),i[a*3]=u[0],i[a*3+1]=u[1],i[a*3+2]=u[2]}this._replacements=r},enumerable:!1,configurable:!0}),t.prototype.refresh=function(){this.replacements=this._replacements},Object.defineProperty(t.prototype,"maxColors",{get:function(){return this._maxColors},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"epsilon",{get:function(){return this.uniforms.epsilon},set:function(r){this.uniforms.epsilon=r},enumerable:!1,configurable:!0}),t})(ge);/*!
 * @pixi/filter-outline - v4.2.0
 * Compiled Fri, 05 Aug 2022 19:53:35 UTC
 *
 * @pixi/filter-outline is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 *//*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var $0=function(e,t){return $0=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(r[i]=n[i])},$0(e,t)};function Fce(e,t){$0(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}var Dce=`attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;

uniform mat3 projectionMatrix;

varying vec2 vTextureCoord;

void main(void)
{
    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);
    vTextureCoord = aTextureCoord;
}`,Nce=`varying vec2 vTextureCoord;
uniform sampler2D uSampler;

uniform vec2 thickness;
uniform vec4 outlineColor;
uniform vec4 filterClamp;

const float DOUBLE_PI = 3.14159265358979323846264 * 2.;

void main(void) {
    vec4 ownColor = texture2D(uSampler, vTextureCoord);
    vec4 curColor;
    float maxAlpha = 0.;
    vec2 displaced;
    for (float angle = 0.; angle <= DOUBLE_PI; angle += \${angleStep}) {
        displaced.x = vTextureCoord.x + thickness.x * cos(angle);
        displaced.y = vTextureCoord.y + thickness.y * sin(angle);
        curColor = texture2D(uSampler, clamp(displaced, filterClamp.xy, filterClamp.zw));
        maxAlpha = max(maxAlpha, curColor.a);
    }
    float resultAlpha = max(maxAlpha, ownColor.a);
    gl_FragColor = vec4((ownColor.rgb + outlineColor.rgb * (1. - ownColor.a)) * resultAlpha, resultAlpha);
}
`;(function(e){Fce(t,e);function t(r,n,i){r===void 0&&(r=1),n===void 0&&(n=0),i===void 0&&(i=.1);var o=e.call(this,Dce,Nce.replace(/\$\{angleStep\}/,t.getAngleStep(i)))||this;return o._thickness=1,o.uniforms.thickness=new Float32Array([0,0]),o.uniforms.outlineColor=new Float32Array([0,0,0,1]),Object.assign(o,{thickness:r,color:n,quality:i}),o}return t.getAngleStep=function(r){var n=Math.max(r*t.MAX_SAMPLES,t.MIN_SAMPLES);return(Math.PI*2/n).toFixed(7)},t.prototype.apply=function(r,n,i,o){this.uniforms.thickness[0]=this._thickness/n._frame.width,this.uniforms.thickness[1]=this._thickness/n._frame.height,r.applyFilter(this,n,i,o)},Object.defineProperty(t.prototype,"color",{get:function(){return Sn(this.uniforms.outlineColor)},set:function(r){Qt(r,this.uniforms.outlineColor)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"thickness",{get:function(){return this._thickness},set:function(r){this._thickness=r,this.padding=r},enumerable:!1,configurable:!0}),t.MIN_SAMPLES=1,t.MAX_SAMPLES=100,t})(ge);/*!
 * @pixi/filter-pixelate - v4.2.0
 * Compiled Fri, 05 Aug 2022 19:53:35 UTC
 *
 * @pixi/filter-pixelate is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 *//*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var G0=function(e,t){return G0=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(r[i]=n[i])},G0(e,t)};function Bce(e,t){G0(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}var jce=`attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;

uniform mat3 projectionMatrix;

varying vec2 vTextureCoord;

void main(void)
{
    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);
    vTextureCoord = aTextureCoord;
}`,Uce=`precision mediump float;

varying vec2 vTextureCoord;

uniform vec2 size;
uniform sampler2D uSampler;

uniform vec4 filterArea;

vec2 mapCoord( vec2 coord )
{
    coord *= filterArea.xy;
    coord += filterArea.zw;

    return coord;
}

vec2 unmapCoord( vec2 coord )
{
    coord -= filterArea.zw;
    coord /= filterArea.xy;

    return coord;
}

vec2 pixelate(vec2 coord, vec2 size)
{
	return floor( coord / size ) * size;
}

void main(void)
{
    vec2 coord = mapCoord(vTextureCoord);

    coord = pixelate(coord, size);

    coord = unmapCoord(coord);

    gl_FragColor = texture2D(uSampler, coord);
}
`;(function(e){Bce(t,e);function t(r){r===void 0&&(r=10);var n=e.call(this,jce,Uce)||this;return n.size=r,n}return Object.defineProperty(t.prototype,"size",{get:function(){return this.uniforms.size},set:function(r){typeof r=="number"&&(r=[r,r]),this.uniforms.size=r},enumerable:!1,configurable:!0}),t})(ge);/*!
 * @pixi/filter-radial-blur - v4.2.0
 * Compiled Fri, 05 Aug 2022 19:53:35 UTC
 *
 * @pixi/filter-radial-blur is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 *//*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var z0=function(e,t){return z0=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(r[i]=n[i])},z0(e,t)};function $ce(e,t){z0(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}var Gce=`attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;

uniform mat3 projectionMatrix;

varying vec2 vTextureCoord;

void main(void)
{
    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);
    vTextureCoord = aTextureCoord;
}`,zce=`varying vec2 vTextureCoord;
uniform sampler2D uSampler;
uniform vec4 filterArea;

uniform float uRadian;
uniform vec2 uCenter;
uniform float uRadius;
uniform int uKernelSize;

const int MAX_KERNEL_SIZE = 2048;

void main(void)
{
    vec4 color = texture2D(uSampler, vTextureCoord);

    if (uKernelSize == 0)
    {
        gl_FragColor = color;
        return;
    }

    float aspect = filterArea.y / filterArea.x;
    vec2 center = uCenter.xy / filterArea.xy;
    float gradient = uRadius / filterArea.x * 0.3;
    float radius = uRadius / filterArea.x - gradient * 0.5;
    int k = uKernelSize - 1;

    vec2 coord = vTextureCoord;
    vec2 dir = vec2(center - coord);
    float dist = length(vec2(dir.x, dir.y * aspect));

    float radianStep = uRadian;
    if (radius >= 0.0 && dist > radius) {
        float delta = dist - radius;
        float gap = gradient;
        float scale = 1.0 - abs(delta / gap);
        if (scale <= 0.0) {
            gl_FragColor = color;
            return;
        }
        radianStep *= scale;
    }
    radianStep /= float(k);

    float s = sin(radianStep);
    float c = cos(radianStep);
    mat2 rotationMatrix = mat2(vec2(c, -s), vec2(s, c));

    for(int i = 0; i < MAX_KERNEL_SIZE - 1; i++) {
        if (i == k) {
            break;
        }

        coord -= center;
        coord.y *= aspect;
        coord = rotationMatrix * coord;
        coord.y /= aspect;
        coord += center;

        vec4 sample = texture2D(uSampler, coord);

        // switch to pre-multiplied alpha to correctly blur transparent images
        // sample.rgb *= sample.a;

        color += sample;
    }

    gl_FragColor = color / float(uKernelSize);
}
`;(function(e){$ce(t,e);function t(r,n,i,o){r===void 0&&(r=0),n===void 0&&(n=[0,0]),i===void 0&&(i=5),o===void 0&&(o=-1);var a=e.call(this,Gce,zce)||this;return a._angle=0,a.angle=r,a.center=n,a.kernelSize=i,a.radius=o,a}return t.prototype.apply=function(r,n,i,o){this.uniforms.uKernelSize=this._angle!==0?this.kernelSize:0,r.applyFilter(this,n,i,o)},Object.defineProperty(t.prototype,"angle",{get:function(){return this._angle},set:function(r){this._angle=r,this.uniforms.uRadian=r*Math.PI/180},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"center",{get:function(){return this.uniforms.uCenter},set:function(r){this.uniforms.uCenter=r},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"radius",{get:function(){return this.uniforms.uRadius},set:function(r){(r<0||r===1/0)&&(r=-1),this.uniforms.uRadius=r},enumerable:!1,configurable:!0}),t})(ge);/*!
 * @pixi/filter-shockwave - v4.2.0
 * Compiled Fri, 05 Aug 2022 19:53:35 UTC
 *
 * @pixi/filter-shockwave is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 *//*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var V0=function(e,t){return V0=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(r[i]=n[i])},V0(e,t)};function Vce(e,t){V0(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}var Hce=`attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;

uniform mat3 projectionMatrix;

varying vec2 vTextureCoord;

void main(void)
{
    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);
    vTextureCoord = aTextureCoord;
}`,Wce=`varying vec2 vTextureCoord;
uniform sampler2D uSampler;
uniform vec4 filterArea;
uniform vec4 filterClamp;

uniform vec2 center;

uniform float amplitude;
uniform float wavelength;
// uniform float power;
uniform float brightness;
uniform float speed;
uniform float radius;

uniform float time;

const float PI = 3.14159;

void main()
{
    float halfWavelength = wavelength * 0.5 / filterArea.x;
    float maxRadius = radius / filterArea.x;
    float currentRadius = time * speed / filterArea.x;

    float fade = 1.0;

    if (maxRadius > 0.0) {
        if (currentRadius > maxRadius) {
            gl_FragColor = texture2D(uSampler, vTextureCoord);
            return;
        }
        fade = 1.0 - pow(currentRadius / maxRadius, 2.0);
    }

    vec2 dir = vec2(vTextureCoord - center / filterArea.xy);
    dir.y *= filterArea.y / filterArea.x;
    float dist = length(dir);

    if (dist <= 0.0 || dist < currentRadius - halfWavelength || dist > currentRadius + halfWavelength) {
        gl_FragColor = texture2D(uSampler, vTextureCoord);
        return;
    }

    vec2 diffUV = normalize(dir);

    float diff = (dist - currentRadius) / halfWavelength;

    float p = 1.0 - pow(abs(diff), 2.0);

    // float powDiff = diff * pow(p, 2.0) * ( amplitude * fade );
    float powDiff = 1.25 * sin(diff * PI) * p * ( amplitude * fade );

    vec2 offset = diffUV * powDiff / filterArea.xy;

    // Do clamp :
    vec2 coord = vTextureCoord + offset;
    vec2 clampedCoord = clamp(coord, filterClamp.xy, filterClamp.zw);
    vec4 color = texture2D(uSampler, clampedCoord);
    if (coord != clampedCoord) {
        color *= max(0.0, 1.0 - length(coord - clampedCoord));
    }

    // No clamp :
    // gl_FragColor = texture2D(uSampler, vTextureCoord + offset);

    color.rgb *= 1.0 + (brightness - 1.0) * p * fade;

    gl_FragColor = color;
}
`,Xce=function(e){Vce(t,e);function t(r,n,i){r===void 0&&(r=[0,0]),i===void 0&&(i=0);var o=e.call(this,Hce,Wce)||this;return o.center=r,Object.assign(o,t.defaults,n),o.time=i,o}return t.prototype.apply=function(r,n,i,o){this.uniforms.time=this.time,r.applyFilter(this,n,i,o)},Object.defineProperty(t.prototype,"center",{get:function(){return this.uniforms.center},set:function(r){this.uniforms.center=r},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"amplitude",{get:function(){return this.uniforms.amplitude},set:function(r){this.uniforms.amplitude=r},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"wavelength",{get:function(){return this.uniforms.wavelength},set:function(r){this.uniforms.wavelength=r},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"brightness",{get:function(){return this.uniforms.brightness},set:function(r){this.uniforms.brightness=r},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"speed",{get:function(){return this.uniforms.speed},set:function(r){this.uniforms.speed=r},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"radius",{get:function(){return this.uniforms.radius},set:function(r){this.uniforms.radius=r},enumerable:!1,configurable:!0}),t.defaults={amplitude:30,wavelength:160,brightness:1,speed:500,radius:-1},t}(ge);/*!
 * @pixi/filter-simple-lightmap - v4.2.0
 * Compiled Fri, 05 Aug 2022 19:53:35 UTC
 *
 * @pixi/filter-simple-lightmap is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 *//*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var H0=function(e,t){return H0=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(r[i]=n[i])},H0(e,t)};function qce(e,t){H0(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}var Yce=`attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;

uniform mat3 projectionMatrix;

varying vec2 vTextureCoord;

void main(void)
{
    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);
    vTextureCoord = aTextureCoord;
}`,Kce=`varying vec2 vTextureCoord;
uniform sampler2D uSampler;
uniform sampler2D uLightmap;
uniform vec4 filterArea;
uniform vec2 dimensions;
uniform vec4 ambientColor;
void main() {
    vec4 diffuseColor = texture2D(uSampler, vTextureCoord);
    vec2 lightCoord = (vTextureCoord * filterArea.xy) / dimensions;
    vec4 light = texture2D(uLightmap, lightCoord);
    vec3 ambient = ambientColor.rgb * ambientColor.a;
    vec3 intensity = ambient + light.rgb;
    vec3 finalColor = diffuseColor.rgb * intensity;
    gl_FragColor = vec4(finalColor, diffuseColor.a);
}
`;(function(e){qce(t,e);function t(r,n,i){n===void 0&&(n=0),i===void 0&&(i=1);var o=e.call(this,Yce,Kce)||this;return o._color=0,o.uniforms.dimensions=new Float32Array(2),o.uniforms.ambientColor=new Float32Array([0,0,0,i]),o.texture=r,o.color=n,o}return t.prototype.apply=function(r,n,i,o){var a,s;this.uniforms.dimensions[0]=(a=n.filterFrame)===null||a===void 0?void 0:a.width,this.uniforms.dimensions[1]=(s=n.filterFrame)===null||s===void 0?void 0:s.height,r.applyFilter(this,n,i,o)},Object.defineProperty(t.prototype,"texture",{get:function(){return this.uniforms.uLightmap},set:function(r){this.uniforms.uLightmap=r},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"color",{get:function(){return this._color},set:function(r){var n=this.uniforms.ambientColor;typeof r=="number"?(Qt(r,n),this._color=r):(n[0]=r[0],n[1]=r[1],n[2]=r[2],n[3]=r[3],this._color=Sn(n))},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"alpha",{get:function(){return this.uniforms.ambientColor[3]},set:function(r){this.uniforms.ambientColor[3]=r},enumerable:!1,configurable:!0}),t})(ge);/*!
 * @pixi/filter-tilt-shift - v4.2.0
 * Compiled Fri, 05 Aug 2022 19:53:35 UTC
 *
 * @pixi/filter-tilt-shift is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 *//*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var W0=function(e,t){return W0=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(r[i]=n[i])},W0(e,t)};function Vp(e,t){W0(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}var Zce=`attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;

uniform mat3 projectionMatrix;

varying vec2 vTextureCoord;

void main(void)
{
    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);
    vTextureCoord = aTextureCoord;
}`,Jce=`varying vec2 vTextureCoord;

uniform sampler2D uSampler;
uniform float blur;
uniform float gradientBlur;
uniform vec2 start;
uniform vec2 end;
uniform vec2 delta;
uniform vec2 texSize;

float random(vec3 scale, float seed)
{
    return fract(sin(dot(gl_FragCoord.xyz + seed, scale)) * 43758.5453 + seed);
}

void main(void)
{
    vec4 color = vec4(0.0);
    float total = 0.0;

    float offset = random(vec3(12.9898, 78.233, 151.7182), 0.0);
    vec2 normal = normalize(vec2(start.y - end.y, end.x - start.x));
    float radius = smoothstep(0.0, 1.0, abs(dot(vTextureCoord * texSize - start, normal)) / gradientBlur) * blur;

    for (float t = -30.0; t <= 30.0; t++)
    {
        float percent = (t + offset - 0.5) / 30.0;
        float weight = 1.0 - abs(percent);
        vec4 sample = texture2D(uSampler, vTextureCoord + delta / texSize * percent * radius);
        sample.rgb *= sample.a;
        color += sample * weight;
        total += weight;
    }

    color /= total;
    color.rgb /= color.a + 0.00001;

    gl_FragColor = color;
}
`,zL=function(e){Vp(t,e);function t(r,n,i,o){r===void 0&&(r=100),n===void 0&&(n=600);var a=e.call(this,Zce,Jce)||this;return a.uniforms.blur=r,a.uniforms.gradientBlur=n,a.uniforms.start=i||new Pe(0,window.innerHeight/2),a.uniforms.end=o||new Pe(600,window.innerHeight/2),a.uniforms.delta=new Pe(30,30),a.uniforms.texSize=new Pe(window.innerWidth,window.innerHeight),a.updateDelta(),a}return t.prototype.updateDelta=function(){this.uniforms.delta.x=0,this.uniforms.delta.y=0},Object.defineProperty(t.prototype,"blur",{get:function(){return this.uniforms.blur},set:function(r){this.uniforms.blur=r},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"gradientBlur",{get:function(){return this.uniforms.gradientBlur},set:function(r){this.uniforms.gradientBlur=r},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"start",{get:function(){return this.uniforms.start},set:function(r){this.uniforms.start=r,this.updateDelta()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"end",{get:function(){return this.uniforms.end},set:function(r){this.uniforms.end=r,this.updateDelta()},enumerable:!1,configurable:!0}),t}(ge),Qce=function(e){Vp(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.updateDelta=function(){var r=this.uniforms.end.x-this.uniforms.start.x,n=this.uniforms.end.y-this.uniforms.start.y,i=Math.sqrt(r*r+n*n);this.uniforms.delta.x=r/i,this.uniforms.delta.y=n/i},t}(zL),efe=function(e){Vp(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.updateDelta=function(){var r=this.uniforms.end.x-this.uniforms.start.x,n=this.uniforms.end.y-this.uniforms.start.y,i=Math.sqrt(r*r+n*n);this.uniforms.delta.x=-n/i,this.uniforms.delta.y=r/i},t}(zL);(function(e){Vp(t,e);function t(r,n,i,o){r===void 0&&(r=100),n===void 0&&(n=600);var a=e.call(this)||this;return a.tiltShiftXFilter=new Qce(r,n,i,o),a.tiltShiftYFilter=new efe(r,n,i,o),a}return t.prototype.apply=function(r,n,i,o){var a=r.getFilterTexture();this.tiltShiftXFilter.apply(r,n,a,1),this.tiltShiftYFilter.apply(r,a,i,o),r.returnFilterTexture(a)},Object.defineProperty(t.prototype,"blur",{get:function(){return this.tiltShiftXFilter.blur},set:function(r){this.tiltShiftXFilter.blur=this.tiltShiftYFilter.blur=r},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"gradientBlur",{get:function(){return this.tiltShiftXFilter.gradientBlur},set:function(r){this.tiltShiftXFilter.gradientBlur=this.tiltShiftYFilter.gradientBlur=r},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"start",{get:function(){return this.tiltShiftXFilter.start},set:function(r){this.tiltShiftXFilter.start=this.tiltShiftYFilter.start=r},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"end",{get:function(){return this.tiltShiftXFilter.end},set:function(r){this.tiltShiftXFilter.end=this.tiltShiftYFilter.end=r},enumerable:!1,configurable:!0}),t})(ge);/*!
 * @pixi/filter-twist - v4.2.0
 * Compiled Fri, 05 Aug 2022 19:53:35 UTC
 *
 * @pixi/filter-twist is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 *//*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var X0=function(e,t){return X0=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(r[i]=n[i])},X0(e,t)};function tfe(e,t){X0(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}var rfe=`attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;

uniform mat3 projectionMatrix;

varying vec2 vTextureCoord;

void main(void)
{
    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);
    vTextureCoord = aTextureCoord;
}`,nfe=`varying vec2 vTextureCoord;

uniform sampler2D uSampler;
uniform float radius;
uniform float angle;
uniform vec2 offset;
uniform vec4 filterArea;

vec2 mapCoord( vec2 coord )
{
    coord *= filterArea.xy;
    coord += filterArea.zw;

    return coord;
}

vec2 unmapCoord( vec2 coord )
{
    coord -= filterArea.zw;
    coord /= filterArea.xy;

    return coord;
}

vec2 twist(vec2 coord)
{
    coord -= offset;

    float dist = length(coord);

    if (dist < radius)
    {
        float ratioDist = (radius - dist) / radius;
        float angleMod = ratioDist * ratioDist * angle;
        float s = sin(angleMod);
        float c = cos(angleMod);
        coord = vec2(coord.x * c - coord.y * s, coord.x * s + coord.y * c);
    }

    coord += offset;

    return coord;
}

void main(void)
{

    vec2 coord = mapCoord(vTextureCoord);

    coord = twist(coord);

    coord = unmapCoord(coord);

    gl_FragColor = texture2D(uSampler, coord );

}
`;(function(e){tfe(t,e);function t(r){var n=e.call(this,rfe,nfe)||this;return Object.assign(n,t.defaults,r),n}return Object.defineProperty(t.prototype,"offset",{get:function(){return this.uniforms.offset},set:function(r){this.uniforms.offset=r},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"radius",{get:function(){return this.uniforms.radius},set:function(r){this.uniforms.radius=r},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"angle",{get:function(){return this.uniforms.angle},set:function(r){this.uniforms.angle=r},enumerable:!1,configurable:!0}),t.defaults={radius:200,angle:4,padding:20,offset:new Pe},t})(ge);/*!
 * @pixi/filter-zoom-blur - v4.2.0
 * Compiled Fri, 05 Aug 2022 19:53:35 UTC
 *
 * @pixi/filter-zoom-blur is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 *//*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var q0=function(e,t){return q0=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(r[i]=n[i])},q0(e,t)};function ife(e,t){q0(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}function ofe(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(e);i<n.length;i++)t.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(e,n[i])&&(r[n[i]]=e[n[i]]);return r}var afe=`attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;

uniform mat3 projectionMatrix;

varying vec2 vTextureCoord;

void main(void)
{
    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);
    vTextureCoord = aTextureCoord;
}`,sfe=`varying vec2 vTextureCoord;
uniform sampler2D uSampler;
uniform vec4 filterArea;

uniform vec2 uCenter;
uniform float uStrength;
uniform float uInnerRadius;
uniform float uRadius;

const float MAX_KERNEL_SIZE = \${maxKernelSize};

// author: http://byteblacksmith.com/improvements-to-the-canonical-one-liner-glsl-rand-for-opengl-es-2-0/
highp float rand(vec2 co, float seed) {
    const highp float a = 12.9898, b = 78.233, c = 43758.5453;
    highp float dt = dot(co + seed, vec2(a, b)), sn = mod(dt, 3.14159);
    return fract(sin(sn) * c + seed);
}

void main() {

    float minGradient = uInnerRadius * 0.3;
    float innerRadius = (uInnerRadius + minGradient * 0.5) / filterArea.x;

    float gradient = uRadius * 0.3;
    float radius = (uRadius - gradient * 0.5) / filterArea.x;

    float countLimit = MAX_KERNEL_SIZE;

    vec2 dir = vec2(uCenter.xy / filterArea.xy - vTextureCoord);
    float dist = length(vec2(dir.x, dir.y * filterArea.y / filterArea.x));

    float strength = uStrength;

    float delta = 0.0;
    float gap;
    if (dist < innerRadius) {
        delta = innerRadius - dist;
        gap = minGradient;
    } else if (radius >= 0.0 && dist > radius) { // radius < 0 means it's infinity
        delta = dist - radius;
        gap = gradient;
    }

    if (delta > 0.0) {
        float normalCount = gap / filterArea.x;
        delta = (normalCount - delta) / normalCount;
        countLimit *= delta;
        strength *= delta;
        if (countLimit < 1.0)
        {
            gl_FragColor = texture2D(uSampler, vTextureCoord);
            return;
        }
    }

    // randomize the lookup values to hide the fixed number of samples
    float offset = rand(vTextureCoord, 0.0);

    float total = 0.0;
    vec4 color = vec4(0.0);

    dir *= strength;

    for (float t = 0.0; t < MAX_KERNEL_SIZE; t++) {
        float percent = (t + offset) / MAX_KERNEL_SIZE;
        float weight = 4.0 * (percent - percent * percent);
        vec2 p = vTextureCoord + dir * percent;
        vec4 sample = texture2D(uSampler, p);

        // switch to pre-multiplied alpha to correctly blur transparent images
        // sample.rgb *= sample.a;

        color += sample * weight;
        total += weight;

        if (t > countLimit){
            break;
        }
    }

    color /= total;
    // switch back from pre-multiplied alpha
    // color.rgb /= color.a + 0.00001;

    gl_FragColor = color;
}
`;(function(e){ife(t,e);function t(r){var n=this,i=Object.assign(t.defaults,r),o=i.maxKernelSize,a=ofe(i,["maxKernelSize"]);return n=e.call(this,afe,sfe.replace("${maxKernelSize}",o.toFixed(1)))||this,Object.assign(n,a),n}return Object.defineProperty(t.prototype,"center",{get:function(){return this.uniforms.uCenter},set:function(r){this.uniforms.uCenter=r},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"strength",{get:function(){return this.uniforms.uStrength},set:function(r){this.uniforms.uStrength=r},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"innerRadius",{get:function(){return this.uniforms.uInnerRadius},set:function(r){this.uniforms.uInnerRadius=r},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"radius",{get:function(){return this.uniforms.uRadius},set:function(r){(r<0||r===1/0)&&(r=-1),this.uniforms.uRadius=r},enumerable:!1,configurable:!0}),t.defaults={strength:.1,center:[0,0],innerRadius:0,radius:-1,maxKernelSize:32},t})(ge);const Y0="shockwaveFilter";function lfe(e,t){const r=e.containerFilters.get(Y0);if(r)return r;if(t){const n=new Xce([1280,720]);return n.time=0,e.addFilter(n),e.containerFilters.set(Y0,n),n}}function ufe(e){return e.getOrCreateShockwaveFilter(!1)?e.getOrCreateShockwaveFilter().time:0}function cfe(e,t){if(t===0)e.removeFilter(Y0);else{const r=e.getOrCreateShockwaveFilter();r&&(r.time=t)}}const K0=0,Z0="radiusAlphaFilter";class ffe extends ge{constructor(t,r){const n=`
// fragment shader
precision mediump float;

uniform sampler2D uSampler;  // 
varying vec2 vTextureCoord;  // 
uniform vec2 center;         // 
uniform float radius;        // 

void main(void) {
    vec4 color = texture2D(uSampler, vTextureCoord);

    // 
    float aspect = 16.0 / 9.0;

    // 
    vec2 aspectCorrectCoord = vTextureCoord;
    aspectCorrectCoord.x *= aspect;

    // 
    float dist = distance(aspectCorrectCoord, center * vec2(aspect, 1.0));

    // smoothstepalpha,
    float alpha = smoothstep(radius, radius + 0.05, dist);

    // 
    gl_FragColor = color * (1.0 - alpha);
}
    `;super(null,n),this.uniforms.center=[t.x,t.y],this.uniforms.radius=r}set center(t){this.uniforms.center=[t.x,t.y]}get center(){return new Pe(this.uniforms.center[0],this.uniforms.center[1])}set radius(t){this.uniforms.radius=t}get radius(){return this.uniforms.radius}}function hfe(e,t){const r=e.containerFilters.get(Z0);if(r)return r;if(t){const n=new ffe(new Pe(.5,.5),K0);return n.radius=K0,e.addFilter(n),e.containerFilters.set(Z0,n),n}}function dfe(e){return e.getOrCreateShockwaveFilter(!1)?e.getOrCreateRadiusAlphaFilter().radius:K0}function pfe(e,t){if(t===0)e.removeFilter(Z0);else{const r=e.getOrCreateRadiusAlphaFilter();r&&(r.radius=t)}}class ys extends _r{constructor(){super();oe(this,"containerFilters",new Map);oe(this,"baseX",0);oe(this,"baseY",0);oe(this,"alphaFilter",new p0.AlphaFilter(1));this.addFilter(this.alphaFilter)}get alphaFilterVal(){return this.alphaFilter.alpha}set alphaFilterVal(r){this.alphaFilter.alpha=r}addFilter(r){this.filters?this.filters.push(r):this.filters=[r]}removeFilter(r){const n=this.containerFilters.get(r);if(n){const i=((this==null?void 0:this.filters)??[]).findIndex(o=>o===n);this.filters&&(this.filters.splice(i,1),this.containerFilters.delete(r))}}get blur(){return this.getOrCreateBlurFilter().blur}set blur(r){this.getOrCreateBlurFilter().blur=r}get x(){var n;return(((n=super.position)==null?void 0:n.x)??0)-this.baseX}set x(r){super.position&&(super.position.x=r+this.baseX)}get y(){var n;return(((n=super.position)==null?void 0:n.y)??0)-this.baseY}set y(r){super.position&&(super.position.y=r+this.baseY)}setBaseX(r){const n=this.x;this.baseX=r,this.x=n}setBaseY(r){const n=this.y;this.baseY=r,this.y=n}getOrCreateBlurFilter(){const r=this.containerFilters.get("blur");if(r)return r;{const n=new p0.BlurFilter;return n.blur=0,this.addFilter(n),this.containerFilters.set("blur",n),n}}getOrCreateOldFilmFilter(r=!0){const n=this.containerFilters.get("oldFilm");if(n)return n;if(r){const i=new pue;return this.addFilter(i),this.containerFilters.set("oldFilm",i),i}else return null}get oldFilm(){return this.getOrCreateOldFilmFilter(!1)?1:0}set oldFilm(r){r===0?this.removeFilter("oldFilm"):this.getOrCreateOldFilmFilter()}getOrCreateDotFilter(r=!0){const n=this.containerFilters.get("dotFilm");if(n)return n;if(r){const i=new yue;return this.addFilter(i),this.containerFilters.set("dotFilm",i),i}else return null}get dotFilm(){return this.getOrCreateDotFilter(!1)?1:0}set dotFilm(r){r===0?this.removeFilter("dotFilm"):this.getOrCreateDotFilter()}getOrCreateReflectionFilter(r=!0){const n=this.containerFilters.get("reflectionFilm");if(n)return n;if(r){const i=new Sue;return this.addFilter(i),this.containerFilters.set("reflectionFilm",i),i}else return null}get reflectionFilm(){return this.getOrCreateReflectionFilter(!1)?1:0}set reflectionFilm(r){r===0?this.removeFilter("reflectionFilm"):this.getOrCreateReflectionFilter()}getOrCreateGlitchFilter(r=!0){const n=this.containerFilters.get("glitchFilm");if(n)return n;if(r){const i=new Cue;return this.addFilter(i),this.containerFilters.set("glitchFilm",i),i}else return null}get glitchFilm(){return this.getOrCreateGlitchFilter(!1)?1:0}set glitchFilm(r){r===0?this.removeFilter("glitchFilm"):this.getOrCreateGlitchFilter()}getOrCreateRGBSplitFilter(r=!0){const n=this.containerFilters.get("rgbFilm");if(n)return n;if(r){const i=new Iue;return this.addFilter(i),this.containerFilters.set("rgbFilm",i),i}}get rgbFilm(){return this.getOrCreateRGBSplitFilter(!1)?1:0}set rgbFilm(r){r===0?this.removeFilter("rgbFilm"):this.getOrCreateRGBSplitFilter()}getOrCreateGodrayFilter(r=!0){const n=this.containerFilters.get("godrayFilm");if(n)return n;if(r){const i=new Fue;return this.addFilter(i),this.containerFilters.set("godrayFilm",i),i}}get godrayFilm(){return this.getOrCreateGodrayFilter(!1)?1:0}set godrayFilm(r){r===0?this.removeFilter("godrayFilm"):this.getOrCreateGodrayFilter()}getOrCreateShockwaveFilter(r=!0){return lfe(this,r)}get shockwaveFilter(){return ufe(this)}set shockwaveFilter(r){cfe(this,r)}getOrCreateRadiusAlphaFilter(r=!0){return hfe(this,r)}get radiusAlphaFilter(){return dfe(this)}set radiusAlphaFilter(r){pfe(this,r)}}const Md={height:1440,width:2560};let mfe=null,VL;async function HL(){return mfe}async function vfe(e,t,r="center"){const n=`spine-${t}`,i=await HL(),o=new ys;this.figureObjects.findIndex(f=>f.key===e)>=0&&this.removeStageObjectByKey(e);const l=this.getFigureMetadataByKey(e);l&&l.zIndex&&(o.zIndex=l.zIndex),this.figureContainer.addChild(o);const u=eo();this.figureObjects.push({uuid:u,key:e,pixiContainer:o,sourceUrl:t,sourceType:"spine",sourceExt:this.getExtName(t)});const c=async()=>{if(!i){te.warn(`Spine module not loaded. Skipping Spine figure: ${e}`);return}};this.cacheGC(),VL.add(n,t).load(c)}async function gfe(e,t){const r=`spine-${t}`,n=new ys;this.backgroundObjects.findIndex(l=>l.key===e)>=0&&this.removeStageObjectByKey(e),this.backgroundContainer.addChild(n);const a=eo();this.backgroundObjects.push({uuid:a,key:e,pixiContainer:n,sourceUrl:t,sourceType:"spine",sourceExt:this.getExtName(t)});const s=async()=>{if(!await HL()){te.warn(`Spine module not loaded. Skipping Spine background: ${e}`);return}setTimeout(()=>{},0)};this.cacheGC(),VL.add(r,t).load(s)}class yfe{constructor(){oe(this,"_content","")}push(t){this._content=t}pop(){const t=this._content;return this._content="",t}}const _fe=new yfe;var Xo=Math.pow,bt=(e,t,r)=>new Promise((n,i)=>{var o=l=>{try{s(r.next(l))}catch(u){i(u)}},a=l=>{try{s(r.throw(l))}catch(u){i(u)}},s=l=>l.done?n(l.value):Promise.resolve(l.value).then(o,a);s((r=r.apply(e,t)).next())});const KP=2,ZP=2;var Ic;(e=>{e.supportMoreMaskDivisions=!0,e.setOpacityFromMotion=!1})(Ic||(Ic={}));var lr;(e=>{e.LOG_LEVEL_VERBOSE=0,e.LOG_LEVEL_WARNING=1,e.LOG_LEVEL_ERROR=2,e.LOG_LEVEL_NONE=999,e.logLevel=e.LOG_LEVEL_WARNING,e.sound=!0,e.motionSync=!0,e.motionFadingDuration=500,e.idleMotionFadingDuration=2e3,e.expressionFadingDuration=500,e.preserveExpressionOnMotion=!0,e.cubism4=Ic})(lr||(lr={}));const rt={log(e,...t){lr.logLevel<=lr.LOG_LEVEL_VERBOSE&&console.log(`[${e}]`,...t)},warn(e,...t){lr.logLevel<=lr.LOG_LEVEL_WARNING&&console.warn(`[${e}]`,...t)},error(e,...t){lr.logLevel<=lr.LOG_LEVEL_ERROR&&console.error(`[${e}]`,...t)}};function Rd(e,t,r){return e<t?t:e>r?r:e}function xfe(e,t){return Math.random()*(t-e)+e}function nu(e,t,r,n,i){const o=t[n];o!==null&&typeof o===e&&(r[i]=o)}function iu(e,t,r,n,i){const o=t[n];Array.isArray(o)&&(r[i]=o.filter(a=>a!==null&&typeof a===e))}function WL(e,t){t.forEach(r=>{Object.getOwnPropertyNames(r.prototype).forEach(n=>{n!=="constructor"&&Object.defineProperty(e.prototype,n,Object.getOwnPropertyDescriptor(r.prototype,n))})})}function bfe(e){let t=e.lastIndexOf("/");return t!=-1&&(e=e.slice(0,t)),t=e.lastIndexOf("/"),t!==-1&&(e=e.slice(t+1)),e}function Sfe(e,t){const r=e.indexOf(t);r!==-1&&e.splice(r,1)}class eS extends Vi{constructor(t,r){super(),this.expressions=[],this.reserveExpressionIndex=-1,this.destroyed=!1,this.settings=t,this.tag=`ExpressionManager(${t.name})`}init(){this.defaultExpression=this.createExpression({},void 0),this.currentExpression=this.defaultExpression,this.stopAllExpressions()}loadExpression(t){return bt(this,null,function*(){if(!this.definitions[t]){rt.warn(this.tag,`Undefined expression at [${t}]`);return}if(this.expressions[t]===null){rt.warn(this.tag,`Cannot set expression at [${t}] because it's already failed in loading.`);return}if(this.expressions[t])return this.expressions[t];const r=yield this._loadExpression(t);return this.expressions[t]=r,r})}_loadExpression(t){throw new Error("Not implemented.")}setRandomExpression(){return bt(this,null,function*(){if(this.definitions.length){const t=[];for(let r=0;r<this.definitions.length;r++)this.expressions[r]!==null&&this.expressions[r]!==this.currentExpression&&r!==this.reserveExpressionIndex&&t.push(r);if(t.length){const r=Math.floor(Math.random()*t.length);return this.setExpression(r)}}return!1})}resetExpression(){this._setExpression(this.defaultExpression)}restoreExpression(){this._setExpression(this.currentExpression)}setExpression(t){return bt(this,null,function*(){if(typeof t!="number"&&(t=this.getExpressionIndex(t)),!(t>-1&&t<this.definitions.length)||t===this.expressions.indexOf(this.currentExpression))return!1;this.reserveExpressionIndex=t;const r=yield this.loadExpression(t);return!r||this.reserveExpressionIndex!==t?!1:(this.reserveExpressionIndex=-1,this.currentExpression=r,this._setExpression(r),!0)})}update(t,r){return this.isFinished()?!1:this.updateParameters(t,r)}destroy(){this.destroyed=!0,this.emit("destroy");const t=this;t.definitions=void 0,t.expressions=void 0}}const JP=.01,wfe=40/7.5,Efe=1/(.15*1e3);class Tfe{constructor(){this.targetX=0,this.targetY=0,this.x=0,this.y=0,this.vx=0,this.vy=0}focus(t,r,n=!1){this.targetX=Rd(t,-1,1),this.targetY=Rd(r,-1,1),n&&(this.x=this.targetX,this.y=this.targetY)}update(t){const r=this.targetX-this.x,n=this.targetY-this.y;if(Math.abs(r)<JP&&Math.abs(n)<JP)return;const i=Math.sqrt(Xo(r,2)+Xo(n,2)),o=wfe/(1e3/t);let a=o*(r/i)-this.vx,s=o*(n/i)-this.vy;const l=Math.sqrt(Xo(a,2)+Xo(s,2)),u=o*Efe*t;l>u&&(a*=u/l,s*=u/l),this.vx+=a,this.vy+=s;const c=Math.sqrt(Xo(this.vx,2)+Xo(this.vy,2)),f=.5*(Math.sqrt(Xo(u,2)+8*u*i)-u);c>f&&(this.vx*=f/c,this.vy*=f/c),this.x+=this.vx,this.y+=this.vy}}class Hp{constructor(t){this.json=t;let r=t.url;if(typeof r!="string")throw new TypeError("The `url` field in settings JSON must be defined as a string.");this.url=r,this.name=bfe(this.url)}resolveURL(t){return ii.resolve(this.url,t)}replaceFiles(t){this.moc=t(this.moc,"moc"),this.pose!==void 0&&(this.pose=t(this.pose,"pose")),this.physics!==void 0&&(this.physics=t(this.physics,"physics"));for(let r=0;r<this.textures.length;r++)this.textures[r]=t(this.textures[r],`textures[${r}]`)}getDefinedFiles(){const t=[];return this.replaceFiles(r=>(t.push(r),r)),t}validateFiles(t){const r=(o,a)=>{const s=this.resolveURL(o);if(!t.includes(s)){if(a)throw new Error(`File "${o}" is defined in settings, but doesn't exist in given files`);return!1}return!0};return[this.moc,...this.textures].forEach(o=>r(o,!0)),this.getDefinedFiles().filter(o=>r(o,!1))}}var J0=(e=>(e[e.NONE=0]="NONE",e[e.IDLE=1]="IDLE",e[e.NORMAL=2]="NORMAL",e[e.FORCE=3]="FORCE",e))(J0||{});class Cfe{constructor(){this.debug=!1,this.currentPriority=0,this.reservePriority=0}reserve(t,r,n){if(n<=0)return rt.log(this.tag,"Cannot start a motion with MotionPriority.NONE."),!1;if(t===this.currentGroup&&r===this.currentIndex)return rt.log(this.tag,"Motion is already playing.",this.dump(t,r)),!1;if(t===this.reservedGroup&&r===this.reservedIndex||t===this.reservedIdleGroup&&r===this.reservedIdleIndex)return rt.log(this.tag,"Motion is already reserved.",this.dump(t,r)),!1;if(n===1){if(this.currentPriority!==0)return rt.log(this.tag,"Cannot start idle motion because another motion is playing.",this.dump(t,r)),!1;if(this.reservedIdleGroup!==void 0)return rt.log(this.tag,"Cannot start idle motion because another idle motion has reserved.",this.dump(t,r)),!1;this.setReservedIdle(t,r)}else{if(n<3){if(n<=this.currentPriority)return rt.log(this.tag,"Cannot start motion because another motion is playing as an equivalent or higher priority.",this.dump(t,r)),!1;if(n<=this.reservePriority)return rt.log(this.tag,"Cannot start motion because another motion has reserved as an equivalent or higher priority.",this.dump(t,r)),!1}this.setReserved(t,r,n)}return!0}start(t,r,n,i){if(i===1){if(this.setReservedIdle(void 0,void 0),this.currentPriority!==0)return rt.log(this.tag,"Cannot start idle motion because another motion is playing.",this.dump(r,n)),!1}else{if(r!==this.reservedGroup||n!==this.reservedIndex)return rt.log(this.tag,"Cannot start motion because another motion has taken the place.",this.dump(r,n)),!1;this.setReserved(void 0,void 0,0)}return t?(this.setCurrent(r,n,i),!0):!1}complete(){this.setCurrent(void 0,void 0,0)}setCurrent(t,r,n){this.currentPriority=n,this.currentGroup=t,this.currentIndex=r}setReserved(t,r,n){this.reservePriority=n,this.reservedGroup=t,this.reservedIndex=r}setReservedIdle(t,r){this.reservedIdleGroup=t,this.reservedIdleIndex=r}isActive(t,r){return t===this.currentGroup&&r===this.currentIndex||t===this.reservedGroup&&r===this.reservedIndex||t===this.reservedIdleGroup&&r===this.reservedIdleIndex}reset(){this.setCurrent(void 0,void 0,0),this.setReserved(void 0,void 0,0),this.setReservedIdle(void 0,void 0)}shouldRequestIdleMotion(){return this.currentGroup===void 0&&this.reservedIdleGroup===void 0}shouldOverrideExpression(){return!lr.preserveExpressionOnMotion&&this.currentPriority>1}dump(t,r){if(this.debug){const n=["currentPriority","reservePriority","currentGroup","currentIndex","reservedGroup","reservedIndex","reservedIdleGroup","reservedIdleIndex"];return`
<Requested> group = "${t}", index = ${r}
`+n.map(i=>"["+i+"] "+this[i]).join(`
`)}return""}}const Pfe="SoundManager",Afe=.5;class no{static get volume(){return this._volume}static set volume(t){this._volume=(t>1?1:t<0?0:t)||0,this.audios.forEach(r=>r.volume=this._volume)}static add(t,r,n){const i=new Audio(t);return i.volume=this._volume,i.preload="auto",i.addEventListener("ended",()=>{this.dispose(i),r==null||r()}),i.addEventListener("error",o=>{this.dispose(i),rt.warn(Pfe,`Error occurred on "${t}"`,o.error),n==null||n(o.error)}),this.audios.push(i),i}static play(t){return new Promise((r,n)=>{var i;(i=t.play())==null||i.catch(o=>{t.dispatchEvent(new ErrorEvent("error",{error:o})),n(o)}),t.readyState===t.HAVE_ENOUGH_DATA?r():t.addEventListener("canplaythrough",r)})}static dispose(t){t.pause(),t.removeAttribute("src"),Sfe(this.audios,t)}static destroy(){for(let t=this.audios.length-1;t>=0;t--)this.dispose(this.audios[t])}}no.audios=[];no._volume=Afe;class Wp extends Vi{constructor(t,r){super(),this.motionGroups={},this.state=new Cfe,this.playing=!1,this.destroyed=!1,this.settings=t,this.tag=`MotionManager(${t.name})`,this.state.tag=this.tag}init(t){t!=null&&t.idleMotionGroup&&(this.groups.idle=t.idleMotionGroup),this.setupMotions(t),this.stopAllMotions()}setupMotions(t){for(const n of Object.keys(this.definitions))this.motionGroups[n]=[];let r;switch(t==null?void 0:t.motionPreload){case"NONE":return;case"ALL":r=Object.keys(this.definitions);break;case"IDLE":default:r=[this.groups.idle];break}for(const n of r)if(this.definitions[n])for(let i=0;i<this.definitions[n].length;i++)this.loadMotion(n,i).then()}loadMotion(t,r){return bt(this,null,function*(){var n;if(!((n=this.definitions[t])!=null&&n[r])){rt.warn(this.tag,`Undefined motion at "${t}"[${r}]`);return}if(this.motionGroups[t][r]===null){rt.warn(this.tag,`Cannot start motion at "${t}"[${r}] because it's already failed in loading.`);return}if(this.motionGroups[t][r])return this.motionGroups[t][r];const i=yield this._loadMotion(t,r);if(!this.destroyed)return this.motionGroups[t][r]=i??null,i})}_loadMotion(t,r){throw new Error("Not implemented.")}startMotion(t,r){return bt(this,arguments,function*(n,i,o=J0.NORMAL){var a;if(!this.state.reserve(n,i,o))return!1;const s=(a=this.definitions[n])==null?void 0:a[i];if(!s)return!1;this.currentAudio&&no.dispose(this.currentAudio);let l;if(lr.sound){const c=this.getSoundFile(s);if(c)try{l=no.add(this.settings.resolveURL(c),()=>this.currentAudio=void 0,()=>this.currentAudio=void 0),this.currentAudio=l}catch(f){rt.warn(this.tag,"Failed to create audio",c,f)}}const u=yield this.loadMotion(n,i);if(l){const c=no.play(l).catch(f=>rt.warn(this.tag,"Failed to play audio",l.src,f));lr.motionSync&&(yield c)}return this.state.start(u,n,i,o)?(rt.log(this.tag,"Start motion:",this.getMotionName(s)),this.emit("motionStart",n,i,l),this.state.shouldOverrideExpression()&&this.expressionManager&&this.expressionManager.resetExpression(),this.playing=!0,this._startMotion(u),!0):(l&&(no.dispose(l),this.currentAudio=void 0),!1)})}startRandomMotion(t,r){return bt(this,null,function*(){const n=this.definitions[t];if(n!=null&&n.length){const i=[];for(let o=0;o<n.length;o++)this.motionGroups[t][o]!==null&&!this.state.isActive(t,o)&&i.push(o);if(i.length){const o=Math.floor(Math.random()*i.length);return this.startMotion(t,i[o],r)}}return!1})}stopAllMotions(){this._stopAllMotions(),this.state.reset(),this.currentAudio&&(no.dispose(this.currentAudio),this.currentAudio=void 0)}update(t,r){var n;return this.isFinished()&&(this.playing&&(this.playing=!1,this.emit("motionFinish")),this.state.shouldOverrideExpression()&&((n=this.expressionManager)==null||n.restoreExpression()),this.state.complete(),this.state.shouldRequestIdleMotion()&&this.startRandomMotion(this.groups.idle,J0.IDLE)),this.updateParameters(t,r)}destroy(){var t;this.destroyed=!0,this.emit("destroy"),this.stopAllMotions(),(t=this.expressionManager)==null||t.destroy();const r=this;r.definitions=void 0,r.motionGroups=void 0}}const Ofe={x:0,y:0,width:0,height:0};class XL extends Vi{constructor(){super(...arguments),this.focusController=new Tfe,this.originalWidth=0,this.originalHeight=0,this.width=0,this.height=0,this.localTransform=new gt,this.drawingMatrix=new gt,this.hitAreas={},this.textureFlipY=!1,this.viewport=[0,0,0,0],this.destroyed=!1}init(){this.setupLayout(),this.setupHitAreas()}setupLayout(){const t=this,r=this.getSize();t.originalWidth=r[0],t.originalHeight=r[1];const n=Object.assign({width:KP,height:ZP},this.getLayout());this.localTransform.scale(n.width/KP,n.height/ZP),t.width=this.originalWidth*this.localTransform.a,t.height=this.originalHeight*this.localTransform.d;const i=n.x!==void 0&&n.x-n.width/2||n.centerX!==void 0&&n.centerX||n.left!==void 0&&n.left-n.width/2||n.right!==void 0&&n.right+n.width/2||0,o=n.y!==void 0&&n.y-n.height/2||n.centerY!==void 0&&n.centerY||n.top!==void 0&&n.top-n.height/2||n.bottom!==void 0&&n.bottom+n.height/2||0;this.localTransform.translate(this.width*i,-this.height*o)}setupHitAreas(){const t=this.getHitAreaDefs().filter(r=>r.index>=0);for(const r of t)this.hitAreas[r.name]=r}hitTest(t,r){return Object.keys(this.hitAreas).filter(n=>this.isHit(n,t,r))}isHit(t,r,n){if(!this.hitAreas[t])return!1;const i=this.hitAreas[t].index,o=this.getDrawableBounds(i,Ofe);return o.x<=r&&r<=o.x+o.width&&o.y<=n&&n<=o.y+o.height}getDrawableBounds(t,r){const n=this.getDrawableVertices(t);let i=n[0],o=n[0],a=n[1],s=n[1];for(let l=0;l<n.length;l+=2){const u=n[l],c=n[l+1];i=Math.min(u,i),o=Math.max(u,o),a=Math.min(c,a),s=Math.max(c,s)}return r??(r={}),r.x=i,r.y=a,r.width=o-i,r.height=s-a,r}updateTransform(t){this.drawingMatrix.copyFrom(t).append(this.localTransform)}update(t,r){this.focusController.update(t)}destroy(){this.destroyed=!0,this.emit("destroy"),this.motionManager.destroy(),this.motionManager=void 0}}const Ife="XHRLoader";class QP extends Error{constructor(t,r,n,i=!1){super(t),this.url=r,this.status=n,this.aborted=i}}const Cr=class{static createXHR(e,t,r,n,i){const o=new XMLHttpRequest;if(Cr.allXhrSet.add(o),e){let a=Cr.xhrMap.get(e);a?a.add(o):(a=new Set([o]),Cr.xhrMap.set(e,a)),e.listeners("destroy").includes(Cr.cancelXHRs)||e.once("destroy",Cr.cancelXHRs)}return o.open("GET",t),o.responseType=r,o.onload=()=>{(o.status===200||o.status===0)&&o.response?n(o.response):o.onerror()},o.onerror=()=>{rt.warn(Ife,`Failed to load resource as ${o.responseType} (Status ${o.status}): ${t}`),i(new QP("Network error.",t,o.status))},o.onabort=()=>i(new QP("Aborted.",t,o.status,!0)),o.onloadend=()=>{var a;Cr.allXhrSet.delete(o),e&&((a=Cr.xhrMap.get(e))==null||a.delete(o))},o}static cancelXHRs(){var e;(e=Cr.xhrMap.get(this))==null||e.forEach(t=>{t.abort(),Cr.allXhrSet.delete(t)}),Cr.xhrMap.delete(this)}static release(){Cr.allXhrSet.forEach(e=>e.abort()),Cr.allXhrSet.clear(),Cr.xhrMap=new WeakMap}};let Xp=Cr;Xp.xhrMap=new WeakMap;Xp.allXhrSet=new Set;Xp.loader=(e,t)=>new Promise((r,n)=>{Cr.createXHR(e.target,e.settings?e.settings.resolveURL(e.url):e.url,e.type,o=>{e.result=o,r()},n).send()});function qL(e,t){let r=-1;return n(0);function n(i,o){if(o)return Promise.reject(o);if(i<=r)return Promise.reject(new Error("next() called multiple times"));r=i;const a=e[i];if(!a)return Promise.resolve();try{return Promise.resolve(a(t,n.bind(null,i+1)))}catch(s){return Promise.reject(s)}}}class Fo{static load(t){return qL(this.middlewares,t).then(()=>t.result)}}Fo.middlewares=[Xp.loader];function Mfe(e,t={}){var r;const n={resourceOptions:{crossorigin:t.crossOrigin}};if(pe.fromURL)return pe.fromURL(e,n).catch(a=>{if(a instanceof Error)throw a;const s=new Error("Texture loading error");throw s.event=a,s});n.resourceOptions.autoLoad=!1;const i=pe.from(e,n);if(i.baseTexture.valid)return Promise.resolve(i);const o=i.baseTexture.resource;return(r=o._live2d_load)!=null||(o._live2d_load=new Promise((a,s)=>{const l=u=>{o.source.removeEventListener("error",l);const c=new Error("Texture loading error");c.event=u,s(c)};o.source.addEventListener("error",l),o.load().then(()=>a(i)).catch(l)})),o._live2d_load}const eA="Live2DFactory",YL=(e,t)=>bt(void 0,null,function*(){if(typeof e.source=="string"){const r=yield Fo.load({url:e.source,type:"json",target:e.live2dModel});r.url=e.source,e.source=r,e.live2dModel.emit("settingsJSONLoaded",r)}return t()}),KL=(e,t)=>bt(void 0,null,function*(){if(e.source instanceof Hp)return e.settings=e.source,t();if(typeof e.source=="object"){const r=yt.findRuntime(e.source);if(r){const n=r.createModelSettings(e.source);return e.settings=n,e.live2dModel.emit("settingsLoaded",n),t()}}throw new TypeError("Unknown settings format.")}),ZL=(e,t)=>{if(e.settings){const r=yt.findRuntime(e.settings);if(r)return r.ready().then(t)}return t()},JL=(e,t)=>bt(void 0,null,function*(){yield t();const r=e.internalModel;if(r){const n=e.settings,i=yt.findRuntime(n);if(i){const o=[];n.pose&&o.push(Fo.load({settings:n,url:n.pose,type:"json",target:r}).then(a=>{r.pose=i.createPose(r.coreModel,a),e.live2dModel.emit("poseLoaded",r.pose)}).catch(a=>{e.live2dModel.emit("poseLoadError",a),rt.warn(eA,"Failed to load pose.",a)})),n.physics&&o.push(Fo.load({settings:n,url:n.physics,type:"json",target:r}).then(a=>{r.physics=i.createPhysics(r.coreModel,a),e.live2dModel.emit("physicsLoaded",r.physics)}).catch(a=>{e.live2dModel.emit("physicsLoadError",a),rt.warn(eA,"Failed to load physics.",a)})),o.length&&(yield Promise.all(o))}}}),QL=(e,t)=>bt(void 0,null,function*(){if(e.settings){const r=e.live2dModel,n=e.settings.textures.map(i=>{const o=e.settings.resolveURL(i);return Mfe(o,{crossOrigin:e.options.crossOrigin})});if(yield t(),e.internalModel)r.internalModel=e.internalModel,r.emit("modelLoaded",e.internalModel);else throw new TypeError("Missing internal model.");r.textures=yield Promise.all(n),r.emit("textureLoaded",r.textures)}else throw new TypeError("Missing settings.")}),eF=(e,t)=>bt(void 0,null,function*(){const r=e.settings;if(r instanceof Hp){const n=yt.findRuntime(r);if(!n)throw new TypeError("Unknown model settings.");const i=yield Fo.load({settings:r,url:r.moc,type:"arraybuffer",target:e.live2dModel});if(!n.isValidMoc(i))throw new Error("Invalid moc data");const o=n.createCoreModel(i);return e.internalModel=n.createInternalModel(o,r,e.options),t()}throw new TypeError("Missing settings.")}),nr=class{static registerRuntime(e){nr.runtimes.push(e),nr.runtimes.sort((t,r)=>r.version-t.version)}static findRuntime(e){for(const t of nr.runtimes)if(t.test(e))return t}static setupLive2DModel(e,t,r){return bt(this,null,function*(){const n=new Promise(a=>e.once("textureLoaded",a)),i=new Promise(a=>e.once("modelLoaded",a)),o=Promise.all([n,i]).then(()=>e.emit("ready"));yield qL(nr.live2DModelMiddlewares,{live2dModel:e,source:t,options:r||{}}),yield o,e.emit("load")})}static loadMotion(e,t,r){var n,i;const o=a=>e.emit("motionLoadError",t,r,a);try{const a=(n=e.definitions[t])==null?void 0:n[r];if(!a)return Promise.resolve(void 0);e.listeners("destroy").includes(nr.releaseTasks)||e.once("destroy",nr.releaseTasks);let s=nr.motionTasksMap.get(e);s||(s={},nr.motionTasksMap.set(e,s));let l=s[t];l||(l=[],s[t]=l);const u=e.getMotionFile(a);return(i=l[r])!=null||(l[r]=Fo.load({url:u,settings:e.settings,type:e.motionDataType,target:e}).then(c=>{var f;const h=(f=nr.motionTasksMap.get(e))==null?void 0:f[t];h&&delete h[r];const d=e.createMotion(c,t,a);return e.emit("motionLoaded",t,r,d),d}).catch(c=>{rt.warn(e.tag,`Failed to load motion: ${u}
`,c),o(c)})),l[r]}catch(a){rt.warn(e.tag,`Failed to load motion at "${t}"[${r}]
`,a),o(a)}return Promise.resolve(void 0)}static loadExpression(e,t){var r;const n=i=>e.emit("expressionLoadError",t,i);try{const i=e.definitions[t];if(!i)return Promise.resolve(void 0);e.listeners("destroy").includes(nr.releaseTasks)||e.once("destroy",nr.releaseTasks);let o=nr.expressionTasksMap.get(e);o||(o=[],nr.expressionTasksMap.set(e,o));const a=e.getExpressionFile(i);return(r=o[t])!=null||(o[t]=Fo.load({url:a,settings:e.settings,type:"json",target:e}).then(s=>{const l=nr.expressionTasksMap.get(e);l&&delete l[t];const u=e.createExpression(s,i);return e.emit("expressionLoaded",t,u),u}).catch(s=>{rt.warn(e.tag,`Failed to load expression: ${a}
`,s),n(s)})),o[t]}catch(i){rt.warn(e.tag,`Failed to load expression at [${t}]
`,i),n(i)}return Promise.resolve(void 0)}static releaseTasks(){this instanceof Wp?nr.motionTasksMap.delete(this):nr.expressionTasksMap.delete(this)}};let yt=nr;yt.runtimes=[];yt.urlToJSON=YL;yt.jsonToSettings=KL;yt.waitUntilReady=ZL;yt.setupOptionals=JL;yt.setupEssentials=QL;yt.createInternalModel=eF;yt.live2DModelMiddlewares=[YL,KL,ZL,JL,QL,eF];yt.motionTasksMap=new WeakMap;yt.expressionTasksMap=new WeakMap;Wp.prototype._loadMotion=function(e,t){return yt.loadMotion(this,e,t)};eS.prototype._loadExpression=function(e){return yt.loadExpression(this,e)};class Rfe{constructor(){this._autoInteract=!1}get autoInteract(){return this._autoInteract}set autoInteract(t){t!==this._autoInteract&&(t?this.on("pointertap",tA,this):this.off("pointertap",tA,this),this._autoInteract=t)}registerInteraction(t){t!==this.interactionManager&&(this.unregisterInteraction(),this._autoInteract&&t&&(this.interactionManager=t,t.on("pointermove",rA,this)))}unregisterInteraction(){var t;this.interactionManager&&((t=this.interactionManager)==null||t.off("pointermove",rA,this),this.interactionManager=void 0)}}function tA(e){this.tap(e.data.global.x,e.data.global.y)}function rA(e){this.focus(e.data.global.x,e.data.global.y)}class kfe extends Dp{}const on=new Pe,Lfe=new gt;let qi;class tF extends _r{constructor(t){super(),this.tag="Live2DModel(uninitialized)",this.textures=[],this.transform=new kfe,this.anchor=new Li(this.onAnchorChange,this,0,0),this.glContextID=-1,this.elapsedTime=performance.now(),this.deltaTime=0,this.overrideBounds={x0:0,y0:0,x1:0,y1:0},this._autoUpdate=!1,this.once("modelLoaded",()=>this.init(t))}static from(t,r){const n=new this(r);return yt.setupLive2DModel(n,t,r).then(()=>n)}static fromSync(t,r){const n=new this(r);return yt.setupLive2DModel(n,t,r).then(r==null?void 0:r.onLoad).catch(r==null?void 0:r.onError),n}static registerTicker(t){qi=t}get autoUpdate(){return this._autoUpdate}set autoUpdate(t){var r;qi||(qi=(r=window.PIXI)==null?void 0:r.Ticker),t?this._destroyed||(qi?(qi.shared.add(this.onTickerUpdate,this),this._autoUpdate=!0):rt.warn(this.tag,"No Ticker registered, please call Live2DModel.registerTicker(Ticker).")):(qi==null||qi.shared.remove(this.onTickerUpdate,this),this._autoUpdate=!1)}init(t){this.tag=`Live2DModel(${this.internalModel.settings.name})`;const r=Object.assign({autoUpdate:!0,autoInteract:!0},t);r.autoInteract&&(this.interactive=!0),r.overWriteBounds&&(this.overrideBounds=r.overWriteBounds),this.autoInteract=r.autoInteract,this.autoUpdate=r.autoUpdate}onAnchorChange(){this.pivot.set(this.anchor.x*this.internalModel.width,this.anchor.y*this.internalModel.height)}motion(t,r,n){return r===void 0?this.internalModel.motionManager.startRandomMotion(t,n):this.internalModel.motionManager.startMotion(t,r,n)}expression(t){return this.internalModel.motionManager.expressionManager?t===void 0?this.internalModel.motionManager.expressionManager.setRandomExpression():this.internalModel.motionManager.expressionManager.setExpression(t):Promise.resolve(!1)}focus(t,r,n=!1){on.x=t,on.y=r,this.toModelPosition(on,on,!0);let i=on.x/this.internalModel.originalWidth*2-1,o=on.y/this.internalModel.originalHeight*2-1,a=Math.atan2(o,i);this.internalModel.focusController.focus(Math.cos(a),-Math.sin(a),n)}tap(t,r){const n=this.hitTest(t,r);n.length&&(rt.log(this.tag,"Hit",n),this.emit("hit",n))}hitTest(t,r){return on.x=t,on.y=r,this.toModelPosition(on,on),this.internalModel.hitTest(on.x,on.y)}toModelPosition(t,r=t.clone(),n){return n||(this._recursivePostUpdateTransform(),this.parent?this.displayObjectUpdateTransform():(this.parent=this._tempDisplayObjectParent,this.displayObjectUpdateTransform(),this.parent=null)),this.transform.worldTransform.applyInverse(t,r),this.internalModel.localTransform.applyInverse(r,r),r}containsPoint(t){return this.getBounds(!0).contains(t.x,t.y)}_calculateBounds(){this._bounds.addFrame(this.transform,this.overrideBounds.x0,this.overrideBounds.y0,this.internalModel.width+this.overrideBounds.x1,this.internalModel.height+this.overrideBounds.y1)}onTickerUpdate(){this.update(qi.shared.deltaMS)}update(t){this.deltaTime+=t,this.elapsedTime+=t}_render(t){this.registerInteraction(t.plugins.interaction),t.batch.reset(),t.geometry.reset(),t.shader.reset(),t.state.reset();let r=!1;this.glContextID!==t.CONTEXT_UID&&(this.glContextID=t.CONTEXT_UID,this.internalModel.updateWebGLContext(t.gl,this.glContextID),r=!0);for(let o=0;o<this.textures.length;o++){const a=this.textures[o];a.valid&&((r||!a.baseTexture._glTextures[this.glContextID])&&(t.gl.pixelStorei(WebGLRenderingContext.UNPACK_FLIP_Y_WEBGL,this.internalModel.textureFlipY),t.texture.bind(a.baseTexture,0)),this.internalModel.bindTexture(o,a.baseTexture._glTextures[this.glContextID].texture),a.baseTexture.touched=t.textureGC.count)}const n=t.framebuffer.viewport;this.internalModel.viewport=[n.x,n.y,n.width,n.height],this.deltaTime&&(this.internalModel.update(this.deltaTime,this.elapsedTime),this.deltaTime=0);const i=Lfe.copyFrom(t.globalUniforms.uniforms.projectionMatrix).append(this.worldTransform);this.internalModel.updateTransform(i),this.internalModel.draw(t.gl),t.state.reset(),t.texture.reset()}destroy(t){this.emit("destroy"),this.autoUpdate=!1,this.unregisterInteraction(),t!=null&&t.texture&&this.textures.forEach(r=>r.destroy(t.baseTexture)),this.internalModel.destroy(),super.destroy(t)}}WL(tF,[Rfe]);const Zn=class{static resolveURL(e,t){var r;const n=(r=Zn.filesMap[e])==null?void 0:r[t];if(n===void 0)throw new Error("Cannot find this file from uploaded files: "+t);return n}static upload(e,t){return bt(this,null,function*(){const r={};for(const n of t.getDefinedFiles()){const i=decodeURI(ii.resolve(t.url,n)),o=e.find(a=>a.webkitRelativePath===i);o&&(r[n]=URL.createObjectURL(o))}Zn.filesMap[t._objectURL]=r})}static createSettings(e){return bt(this,null,function*(){const t=e.find(a=>a.name.endsWith("model.json")||a.name.endsWith("model3.json"));if(!t)throw new TypeError("Settings file not found");const r=yield Zn.readText(t),n=JSON.parse(r);n.url=t.webkitRelativePath;const i=yt.findRuntime(n);if(!i)throw new Error("Unknown settings JSON");const o=i.createModelSettings(n);return o._objectURL=URL.createObjectURL(t),o})}static readText(e){return bt(this,null,function*(){return new Promise((t,r)=>{const n=new FileReader;n.onload=()=>t(n.result),n.onerror=r,n.readAsText(e,"utf8")})})}};let tS=Zn;tS.filesMap={};tS.factory=(e,t)=>bt(void 0,null,function*(){if(Array.isArray(e.source)&&e.source[0]instanceof File){const r=e.source;let n=r.settings;if(!n)n=yield Zn.createSettings(r);else if(!n._objectURL)throw new Error('"_objectURL" must be specified in ModelSettings');n.validateFiles(r.map(i=>encodeURI(i.webkitRelativePath))),yield Zn.upload(r,n),n.resolveURL=function(i){return Zn.resolveURL(this._objectURL,i)},e.source=n,e.live2dModel.once("modelLoaded",i=>{i.once("destroy",function(){const o=this.settings._objectURL;if(URL.revokeObjectURL(o),Zn.filesMap[o])for(const a of Object.values(Zn.filesMap[o]))URL.revokeObjectURL(a);delete Zn.filesMap[o]})})}return t()});yt.live2DModelMiddlewares.unshift(tS.factory);const Dr=class{static unzip(e,t){return bt(this,null,function*(){const r=yield Dr.getFilePaths(e),n=[];for(const o of t.getDefinedFiles()){const a=decodeURI(ii.resolve(t.url,o));r.includes(a)&&n.push(a)}const i=yield Dr.getFiles(e,n);for(let o=0;o<i.length;o++){const a=n[o],s=i[o];Object.defineProperty(s,"webkitRelativePath",{value:a})}return i})}static createSettings(e){return bt(this,null,function*(){const r=(yield Dr.getFilePaths(e)).find(a=>a.endsWith("model.json")||a.endsWith("model3.json"));if(!r)throw new Error("Settings file not found");const n=yield Dr.readText(e,r);if(!n)throw new Error("Empty settings file: "+r);const i=JSON.parse(n);i.url=r;const o=yt.findRuntime(i);if(!o)throw new Error("Unknown settings JSON");return o.createModelSettings(i)})}static zipReader(e,t){return bt(this,null,function*(){throw new Error("Not implemented")})}static getFilePaths(e){return bt(this,null,function*(){throw new Error("Not implemented")})}static getFiles(e,t){return bt(this,null,function*(){throw new Error("Not implemented")})}static readText(e,t){return bt(this,null,function*(){throw new Error("Not implemented")})}static releaseReader(e){}};let qp=Dr;qp.ZIP_PROTOCOL="zip://";qp.uid=0;qp.factory=(e,t)=>bt(void 0,null,function*(){const r=e.source;let n,i,o;if(typeof r=="string"&&(r.endsWith(".zip")||r.startsWith(Dr.ZIP_PROTOCOL))?(r.startsWith(Dr.ZIP_PROTOCOL)?n=r.slice(Dr.ZIP_PROTOCOL.length):n=r,i=yield Fo.load({url:n,type:"blob",target:e.live2dModel})):Array.isArray(r)&&r.length===1&&r[0]instanceof File&&r[0].name.endsWith(".zip")&&(i=r[0],n=URL.createObjectURL(i),o=r.settings),i){if(!i.size)throw new Error("Empty zip file");const a=yield Dr.zipReader(i,n);o||(o=yield Dr.createSettings(a)),o._objectURL=Dr.ZIP_PROTOCOL+Dr.uid+"/"+o.url;const s=yield Dr.unzip(a,o);s.settings=o,e.source=s,n.startsWith("blob:")&&e.live2dModel.once("modelLoaded",l=>{l.once("destroy",function(){URL.revokeObjectURL(n)})}),Dr.releaseReader(a)}return t()});yt.live2DModelMiddlewares.unshift(qp.factory);if(!window.Live2D)throw new Error("Could not find Cubism 2 runtime. This plugin requires live2d.min.js to be loaded.");const Ffe=Live2DMotion.prototype.updateParam;Live2DMotion.prototype.updateParam=function(e,t){Ffe.call(this,e,t),t.isFinished()&&this.onFinishHandler&&(this.onFinishHandler(this),delete this.onFinishHandler)};class Dfe extends AMotion{constructor(t){super(),this.params=[],this.setFadeIn(t.fade_in>0?t.fade_in:lr.expressionFadingDuration),this.setFadeOut(t.fade_out>0?t.fade_out:lr.expressionFadingDuration),Array.isArray(t.params)&&t.params.forEach(r=>{const n=r.calc||"add";if(n==="add"){const i=r.def||0;r.val-=i}else if(n==="mult"){const i=r.def||1;r.val/=i}this.params.push({calc:n,val:r.val,id:r.id})})}updateParamExe(t,r,n,i){this.params.forEach(o=>{let a=t.getParamFloat(o.id);t.setParamFloat(o.id,o.val*n+a*(1-n))})}}class Nfe extends eS{constructor(t,r){var n;super(t,r),this.queueManager=new MotionQueueManager,this.definitions=(n=this.settings.expressions)!=null?n:[],this.init()}isFinished(){return this.queueManager.isFinished()}getExpressionIndex(t){return this.definitions.findIndex(r=>r.name===t)}getExpressionFile(t){return t.file}createExpression(t,r){return new Dfe(t)}_setExpression(t){return this.queueManager.startMotion(t)}stopAllExpressions(){this.queueManager.stopAllMotions()}updateParameters(t,r){return this.queueManager.updateParam(t)}}class Bfe extends Wp{constructor(t,r){super(t,r),this.groups={idle:"idle"},this.motionDataType="arraybuffer",this.queueManager=new MotionQueueManager,this.definitions=this.settings.motions,this.init(r)}init(t){super.init(t),this.settings.expressions&&(this.expressionManager=new Nfe(this.settings,t))}isFinished(){return this.queueManager.isFinished()}createMotion(t,r,n){const i=Live2DMotion.loadMotion(t),o=r===this.groups.idle?lr.idleMotionFadingDuration:lr.motionFadingDuration;return i.setFadeIn(n.fade_in>0?n.fade_in:o),i.setFadeOut(n.fade_out>0?n.fade_out:o),i}getMotionFile(t){return t.file}getMotionName(t){return t.file}getSoundFile(t){return t.sound}_startMotion(t,r){return t.onFinishHandler=r,this.queueManager.stopAllMotions(),this.queueManager.startMotion(t)}_stopAllMotions(){this.queueManager.stopAllMotions()}updateParameters(t,r){return this.queueManager.updateParam(t)}destroy(){super.destroy(),this.queueManager=void 0}}class jfe{constructor(t){this.coreModel=t,this.blinkInterval=4e3,this.closingDuration=100,this.closedDuration=50,this.openingDuration=150,this.eyeState=0,this.eyeParamValue=1,this.closedTimer=0,this.nextBlinkTimeLeft=this.blinkInterval,this.leftParam=t.getParamIndex("PARAM_EYE_L_OPEN"),this.rightParam=t.getParamIndex("PARAM_EYE_R_OPEN")}setEyeParams(t){this.eyeParamValue=Rd(t,0,1),this.coreModel.setParamFloat(this.leftParam,this.eyeParamValue),this.coreModel.setParamFloat(this.rightParam,this.eyeParamValue)}update(t){switch(this.eyeState){case 0:this.nextBlinkTimeLeft-=t,this.nextBlinkTimeLeft<0&&(this.eyeState=1,this.nextBlinkTimeLeft=this.blinkInterval+this.closingDuration+this.closedDuration+this.openingDuration+xfe(0,2e3));break;case 1:this.setEyeParams(this.eyeParamValue+t/this.closingDuration),this.eyeParamValue<=0&&(this.eyeState=2,this.closedTimer=0);break;case 2:this.closedTimer+=t,this.closedTimer>=this.closedDuration&&(this.eyeState=3);break;case 3:this.setEyeParams(this.eyeParamValue+t/this.openingDuration),this.eyeParamValue>=1&&(this.eyeState=0)}}}const qo=new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]);class Ufe extends XL{constructor(t,r,n){super(),this.textureFlipY=!0,this.drawDataCount=0,this.disableCulling=!1,this.coreModel=t,this.settings=r,this.motionManager=new Bfe(r,n),this.eyeBlink=new jfe(t),this.eyeballXParamIndex=t.getParamIndex("PARAM_EYE_BALL_X"),this.eyeballYParamIndex=t.getParamIndex("PARAM_EYE_BALL_Y"),this.angleXParamIndex=t.getParamIndex("PARAM_ANGLE_X"),this.angleYParamIndex=t.getParamIndex("PARAM_ANGLE_Y"),this.angleZParamIndex=t.getParamIndex("PARAM_ANGLE_Z"),this.bodyAngleXParamIndex=t.getParamIndex("PARAM_BODY_ANGLE_X"),this.breathParamIndex=t.getParamIndex("PARAM_BREATH"),this.init()}init(){super.init(),this.settings.initParams&&this.settings.initParams.forEach(({id:o,value:a})=>this.coreModel.setParamFloat(o,a)),this.settings.initOpacities&&this.settings.initOpacities.forEach(({id:o,value:a})=>this.coreModel.setPartsOpacity(o,a)),this.coreModel.saveParam();const t=this.coreModel.getModelContext()._$aS;t!=null&&t.length&&(this.drawDataCount=t.length);let r=this.coreModel.drawParamWebGL.culling;Object.defineProperty(this.coreModel.drawParamWebGL,"culling",{set:o=>r=o,get:()=>this.disableCulling?!1:r});const n=this.coreModel.getModelContext().clipManager,i=n.setupClip;n.setupClip=(o,a)=>{i.call(n,o,a),a.gl.viewport(...this.viewport)}}getSize(){return[this.coreModel.getCanvasWidth(),this.coreModel.getCanvasHeight()]}getLayout(){const t={};if(this.settings.layout)for(const r of Object.keys(this.settings.layout)){let n=r;r==="center_x"?n="centerX":r==="center_y"&&(n="centerY"),t[n]=this.settings.layout[r]}return t}updateWebGLContext(t,r){const n=this.coreModel.drawParamWebGL;n.firstDraw=!0,n.setGL(t),n.glno=r;for(const a in n)n.hasOwnProperty(a)&&n[a]instanceof WebGLBuffer&&(n[a]=null);const i=this.coreModel.getModelContext().clipManager;i.curFrameNo=r;const o=t.getParameter(t.FRAMEBUFFER_BINDING);i.getMaskRenderTexture(),t.bindFramebuffer(t.FRAMEBUFFER,o)}bindTexture(t,r){this.coreModel.setTexture(t,r)}getHitAreaDefs(){var t;return((t=this.settings.hitAreas)==null?void 0:t.map(r=>({id:r.id,name:r.name,index:this.coreModel.getDrawDataIndex(r.id)})))||[]}getDrawableIDs(){const t=this.coreModel.getModelContext(),r=[];for(let n=0;n<this.drawDataCount;n++){const i=t.getDrawData(n);i&&r.push(i.getDrawDataID().id)}return r}getDrawableIndex(t){return this.coreModel.getDrawDataIndex(t)}getDrawableVertices(t){if(typeof t=="string"&&(t=this.coreModel.getDrawDataIndex(t),t===-1))throw new TypeError("Unable to find drawable ID: "+t);return this.coreModel.getTransformedPoints(t).slice()}update(t,r){var n,i,o,a;super.update(t,r);const s=this.coreModel;this.emit("beforeMotionUpdate");const l=this.motionManager.update(this.coreModel,r);this.emit("afterMotionUpdate"),s.saveParam(),(n=this.motionManager.expressionManager)==null||n.update(s,r),l||(i=this.eyeBlink)==null||i.update(t),this.updateFocus(),this.updateNaturalMovements(t,r),(o=this.physics)==null||o.update(r),(a=this.pose)==null||a.update(t),this.emit("beforeModelUpdate"),s.update(),s.loadParam()}updateFocus(){this.coreModel.addToParamFloat(this.eyeballXParamIndex,this.focusController.x),this.coreModel.addToParamFloat(this.eyeballYParamIndex,this.focusController.y),this.coreModel.addToParamFloat(this.angleXParamIndex,this.focusController.x*30),this.coreModel.addToParamFloat(this.angleYParamIndex,this.focusController.y*30),this.coreModel.addToParamFloat(this.angleZParamIndex,this.focusController.x*this.focusController.y*-30),this.coreModel.addToParamFloat(this.bodyAngleXParamIndex,this.focusController.x*10)}updateNaturalMovements(t,r){const n=r/1e3*2*Math.PI;this.coreModel.addToParamFloat(this.angleXParamIndex,15*Math.sin(n/6.5345)*.5),this.coreModel.addToParamFloat(this.angleYParamIndex,8*Math.sin(n/3.5345)*.5),this.coreModel.addToParamFloat(this.angleZParamIndex,10*Math.sin(n/5.5345)*.5),this.coreModel.addToParamFloat(this.bodyAngleXParamIndex,4*Math.sin(n/15.5345)*.5),this.coreModel.setParamFloat(this.breathParamIndex,.5+.5*Math.sin(n/3.2345))}draw(t){const r=this.disableCulling;t.getParameter(t.FRAMEBUFFER_BINDING)&&(this.disableCulling=!0);const n=this.drawingMatrix;qo[0]=n.a,qo[1]=n.b,qo[4]=n.c,qo[5]=n.d,qo[12]=n.tx,qo[13]=n.ty,this.coreModel.setMatrix(qo),this.coreModel.draw(),this.disableCulling=r}destroy(){super.destroy(),this.coreModel=void 0}}class Hu extends Hp{constructor(t){if(super(t),this.motions={},!Hu.isValidJSON(t))throw new TypeError("Invalid JSON.");this.moc=t.model,iu("string",t,this,"textures","textures"),this.copy(t)}static isValidJSON(t){var r;return!!t&&typeof t.model=="string"&&((r=t.textures)==null?void 0:r.length)>0&&t.textures.every(n=>typeof n=="string")}copy(t){nu("string",t,this,"name","name"),nu("string",t,this,"pose","pose"),nu("string",t,this,"physics","physics"),nu("object",t,this,"layout","layout"),nu("object",t,this,"motions","motions"),iu("object",t,this,"hit_areas","hitAreas"),iu("object",t,this,"expressions","expressions"),iu("object",t,this,"init_params","initParams"),iu("object",t,this,"init_opacities","initOpacities")}replaceFiles(t){super.replaceFiles(t);for(const[r,n]of Object.entries(this.motions))for(let i=0;i<n.length;i++)n[i].file=t(n[i].file,`motions.${r}[${i}].file`),n[i].sound!==void 0&&(n[i].sound=t(n[i].sound,`motions.${r}[${i}].sound`));if(this.expressions)for(let r=0;r<this.expressions.length;r++)this.expressions[r].file=t(this.expressions[r].file,`expressions[${r}].file`)}}const $fe={x:PhysicsHair.Src.SRC_TO_X,y:PhysicsHair.Src.SRC_TO_Y,angle:PhysicsHair.Src.SRC_TO_G_ANGLE},Gfe={x:PhysicsHair.Src.SRC_TO_X,y:PhysicsHair.Src.SRC_TO_Y,angle:PhysicsHair.Src.SRC_TO_G_ANGLE};class zfe{constructor(t,r){this.coreModel=t,this.physicsHairs=[],r.physics_hair&&(this.physicsHairs=r.physics_hair.map(n=>{const i=new PhysicsHair;return i.setup(n.setup.length,n.setup.regist,n.setup.mass),n.src.forEach(({id:o,ptype:a,scale:s,weight:l})=>{const u=$fe[a];u&&i.addSrcParam(u,o,s,l)}),n.targets.forEach(({id:o,ptype:a,scale:s,weight:l})=>{const u=Gfe[a];u&&i.addTargetParam(u,o,s,l)}),i}))}update(t){this.physicsHairs.forEach(r=>r.update(this.coreModel,t))}}class nA{constructor(t){this.id=t,this.paramIndex=-1,this.partsIndex=-1,this.link=[]}initIndex(t){this.paramIndex=t.getParamIndex("VISIBLE:"+this.id),this.partsIndex=t.getPartsDataIndex(PartsDataID.getID(this.id)),t.setParamFloat(this.paramIndex,1)}}class Vfe{constructor(t,r){this.coreModel=t,this.opacityAnimDuration=500,this.partsGroups=[],r.parts_visible&&(this.partsGroups=r.parts_visible.map(({group:n})=>n.map(({id:i,link:o})=>{const a=new nA(i);return o&&(a.link=o.map(s=>new nA(s))),a})),this.init())}init(){this.partsGroups.forEach(t=>{t.forEach(r=>{if(r.initIndex(this.coreModel),r.paramIndex>=0){const n=this.coreModel.getParamFloat(r.paramIndex)!==0;this.coreModel.setPartsOpacity(r.partsIndex,n?1:0),this.coreModel.setParamFloat(r.paramIndex,n?1:0),r.link.length>0&&r.link.forEach(i=>i.initIndex(this.coreModel))}})})}normalizePartsOpacityGroup(t,r){const n=this.coreModel,i=.5,o=.15;let a=1,s=t.findIndex(({paramIndex:l,partsIndex:u})=>u>=0&&n.getParamFloat(l)!==0);if(s>=0){const l=n.getPartsOpacity(t[s].partsIndex);a=Rd(l+r/this.opacityAnimDuration,0,1)}else s=0,a=1;t.forEach(({partsIndex:l},u)=>{if(l>=0)if(s==u)n.setPartsOpacity(l,a);else{let c=n.getPartsOpacity(l),f;a<i?f=a*(i-1)/i+1:f=(1-a)*i/(1-i),(1-f)*(1-a)>o&&(f=1-o/(1-a)),c>f&&(c=f),n.setPartsOpacity(l,c)}})}copyOpacity(t){const r=this.coreModel;t.forEach(({partsIndex:n,link:i})=>{if(n>=0&&i){const o=r.getPartsOpacity(n);i.forEach(({partsIndex:a})=>{a>=0&&r.setPartsOpacity(a,o)})}})}update(t){this.partsGroups.forEach(r=>{this.normalizePartsOpacityGroup(r,t),this.copyOpacity(r)})}}yt.registerRuntime({version:2,test(e){return e instanceof Hu||Hu.isValidJSON(e)},ready(){return Promise.resolve()},isValidMoc(e){if(e.byteLength<3)return!1;const t=new Int8Array(e,0,3);return String.fromCharCode(...t)==="moc"},createModelSettings(e){return new Hu(e)},createCoreModel(e){const t=Live2DModelWebGL.loadModel(e),r=Live2D.getError();if(r)throw r;return t},createInternalModel(e,t,r){return new Ufe(e,t,r)},createPose(e,t){return new Vfe(e,t)},createPhysics(e,t){return new zfe(e,t)}});if(!window.Live2DCubismCore)throw new Error("Could not find Cubism 4 runtime. This plugin requires live2dcubismcore.js to be loaded.");class _e{constructor(t,r){this.x=t||0,this.y=r||0}add(t){const r=new _e(0,0);return r.x=this.x+t.x,r.y=this.y+t.y,r}substract(t){const r=new _e(0,0);return r.x=this.x-t.x,r.y=this.y-t.y,r}multiply(t){const r=new _e(0,0);return r.x=this.x*t.x,r.y=this.y*t.y,r}multiplyByScaler(t){return this.multiply(new _e(t,t))}division(t){const r=new _e(0,0);return r.x=this.x/t.x,r.y=this.y/t.y,r}divisionByScalar(t){return this.division(new _e(t,t))}getLength(){return Math.sqrt(this.x*this.x+this.y*this.y)}getDistanceWith(t){return Math.sqrt((this.x-t.x)*(this.x-t.x)+(this.y-t.y)*(this.y-t.y))}dot(t){return this.x*t.x+this.y*t.y}normalize(){const t=Math.pow(this.x*this.x+this.y*this.y,.5);this.x=this.x/t,this.y=this.y/t}isEqual(t){return this.x==t.x&&this.y==t.y}isNotEqual(t){return!this.isEqual(t)}}const Ih=class{static range(e,t,r){return e<t?e=t:e>r&&(e=r),e}static sin(e){return Math.sin(e)}static cos(e){return Math.cos(e)}static abs(e){return Math.abs(e)}static sqrt(e){return Math.sqrt(e)}static cbrt(e){if(e===0)return e;let t=e;const r=t<0;r&&(t=-t);let n;return t===1/0?n=1/0:(n=Math.exp(Math.log(t)/3),n=(t/(n*n)+2*n)/3),r?-n:n}static getEasingSine(e){return e<0?0:e>1?1:.5-.5*this.cos(e*Math.PI)}static max(e,t){return e>t?e:t}static min(e,t){return e>t?t:e}static degreesToRadian(e){return e/180*Math.PI}static radianToDegrees(e){return e*180/Math.PI}static directionToRadian(e,t){const r=Math.atan2(t.y,t.x),n=Math.atan2(e.y,e.x);let i=r-n;for(;i<-Math.PI;)i+=Math.PI*2;for(;i>Math.PI;)i-=Math.PI*2;return i}static directionToDegrees(e,t){const r=this.directionToRadian(e,t);let n=this.radianToDegrees(r);return t.x-e.x>0&&(n=-n),n}static radianToDirection(e){const t=new _e;return t.x=this.sin(e),t.y=this.cos(e),t}static quadraticEquation(e,t,r){return this.abs(e)<Ih.Epsilon?this.abs(t)<Ih.Epsilon?-r:-r/t:-(t+this.sqrt(t*t-4*e*r))/(2*e)}static cardanoAlgorithmForBezier(e,t,r,n){if(this.sqrt(e)<Ih.Epsilon)return this.range(this.quadraticEquation(t,r,n),0,1);const i=t/e,o=r/e,a=n/e,s=(3*o-i*i)/3,l=s/3,u=(2*i*i*i-9*i*o+27*a)/27,c=u/2,f=c*c+l*l*l,h=.5,d=h+.01;if(f<0){const y=-s/3,_=y*y*y,x=this.sqrt(_),b=-u/(2*x),S=this.range(b,-1,1),E=Math.acos(S),A=2*this.cbrt(x),O=A*this.cos(E/3)-i/3;if(this.abs(O-h)<d)return this.range(O,0,1);const D=A*this.cos((E+2*Math.PI)/3)-i/3;if(this.abs(D-h)<d)return this.range(D,0,1);const B=A*this.cos((E+4*Math.PI)/3)-i/3;return this.range(B,0,1)}if(f==0){let y;c<0?y=this.cbrt(-c):y=-this.cbrt(c);const _=2*y-i/3;if(this.abs(_-h)<d)return this.range(_,0,1);const x=-y-i/3;return this.range(x,0,1)}const m=this.sqrt(f),g=this.cbrt(m-c),p=this.cbrt(m+c),v=g-p-i/3;return this.range(v,0,1)}constructor(){}};let at=Ih;at.Epsilon=1e-5;class vn{constructor(){this._tr=new Float32Array(16),this.loadIdentity()}static multiply(t,r,n){const i=new Float32Array([0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]),o=4;for(let a=0;a<o;++a)for(let s=0;s<o;++s)for(let l=0;l<o;++l)i[s+a*4]+=t[l+a*4]*r[s+l*4];for(let a=0;a<16;++a)n[a]=i[a]}loadIdentity(){const t=new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]);this.setMatrix(t)}setMatrix(t){for(let r=0;r<16;++r)this._tr[r]=t[r]}getArray(){return this._tr}getScaleX(){return this._tr[0]}getScaleY(){return this._tr[5]}getTranslateX(){return this._tr[12]}getTranslateY(){return this._tr[13]}transformX(t){return this._tr[0]*t+this._tr[12]}transformY(t){return this._tr[5]*t+this._tr[13]}invertTransformX(t){return(t-this._tr[12])/this._tr[0]}invertTransformY(t){return(t-this._tr[13])/this._tr[5]}translateRelative(t,r){const n=new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,t,r,0,1]);vn.multiply(n,this._tr,this._tr)}translate(t,r){this._tr[12]=t,this._tr[13]=r}translateX(t){this._tr[12]=t}translateY(t){this._tr[13]=t}scaleRelative(t,r){const n=new Float32Array([t,0,0,0,0,r,0,0,0,0,1,0,0,0,0,1]);vn.multiply(n,this._tr,this._tr)}scale(t,r){this._tr[0]=t,this._tr[5]=r}multiplyByMatrix(t){vn.multiply(t.getArray(),this._tr,this._tr)}clone(){const t=new vn;for(let r=0;r<this._tr.length;r++)t._tr[r]=this._tr[r];return t}}class rS{initialize(t){this._model=t}drawModel(){this.getModel()!=null&&this.doDrawModel()}setMvpMatrix(t){this._mvpMatrix4x4.setMatrix(t.getArray())}getMvpMatrix(){return this._mvpMatrix4x4}setModelColor(t,r,n,i){t<0?t=0:t>1&&(t=1),r<0?r=0:r>1&&(r=1),n<0?n=0:n>1&&(n=1),i<0?i=0:i>1&&(i=1),this._modelColor.R=t,this._modelColor.G=r,this._modelColor.B=n,this._modelColor.A=i}getModelColor(){return Object.assign({},this._modelColor)}setIsPremultipliedAlpha(t){this._isPremultipliedAlpha=t}isPremultipliedAlpha(){return this._isPremultipliedAlpha}setIsCulling(t){this._isCulling=t}isCulling(){return this._isCulling}setAnisotropy(t){this._anisortopy=t}getAnisotropy(){return this._anisortopy}getModel(){return this._model}constructor(){this._isCulling=!1,this._isPremultipliedAlpha=!1,this._anisortopy=0,this._modelColor=new _u,this._mvpMatrix4x4=new vn,this._mvpMatrix4x4.loadIdentity()}}var Eo=(e=>(e[e.CubismBlendMode_Normal=0]="CubismBlendMode_Normal",e[e.CubismBlendMode_Additive=1]="CubismBlendMode_Additive",e[e.CubismBlendMode_Multiplicative=2]="CubismBlendMode_Multiplicative",e))(Eo||{});class _u{constructor(){this.R=1,this.G=1,this.B=1,this.A=1}}let Hn=!1,rs=!1,ns;const Bg={vertexOffset:0,vertexStep:2};class Mc{static startUp(t){if(Hn)return ou("CubismFramework.startUp() is already done."),Hn;if(Live2DCubismCore._isStarted)return Hn=!0,!0;if(Live2DCubismCore._isStarted=!0,ns=t,ns&&Live2DCubismCore.Logging.csmSetLogFunction(ns.logFunction),Hn=!0,Hn){const r=Live2DCubismCore.Version.csmGetVersion(),n=(r&4278190080)>>24,i=(r&16711680)>>16,o=r&65535,a=r;ou("Live2D Cubism Core version: {0}.{1}.{2} ({3})",("00"+n).slice(-2),("00"+i).slice(-2),("0000"+o).slice(-4),a)}return ou("CubismFramework.startUp() is complete."),Hn}static cleanUp(){Hn=!1,rs=!1,ns=void 0}static initialize(){if(!Hn){xu("CubismFramework is not started.");return}if(rs){xu("CubismFramework.initialize() skipped, already initialized.");return}rs=!0,ou("CubismFramework.initialize() is complete.")}static dispose(){if(!Hn){xu("CubismFramework is not started.");return}if(!rs){xu("CubismFramework.dispose() skipped, not initialized.");return}rS.staticRelease(),rs=!1,ou("CubismFramework.dispose() is complete.")}static isStarted(){return Hn}static isInitialized(){return rs}static coreLogFunction(t){Live2DCubismCore.Logging.csmGetLogFunction()&&Live2DCubismCore.Logging.csmGetLogFunction()(t)}static getLoggingLevel(){return ns!=null?ns.loggingLevel:Va.LogLevel_Off}constructor(){}}var Va=(e=>(e[e.LogLevel_Verbose=0]="LogLevel_Verbose",e[e.LogLevel_Debug=1]="LogLevel_Debug",e[e.LogLevel_Info=2]="LogLevel_Info",e[e.LogLevel_Warning=3]="LogLevel_Warning",e[e.LogLevel_Error=4]="LogLevel_Error",e[e.LogLevel_Off=5]="LogLevel_Off",e))(Va||{});const Jf=()=>{};function iA(e,...t){Yp.print(Va.LogLevel_Debug,"[CSM][D]"+e+`
`,t)}function ou(e,...t){Yp.print(Va.LogLevel_Info,"[CSM][I]"+e+`
`,t)}function xu(e,...t){Yp.print(Va.LogLevel_Warning,"[CSM][W]"+e+`
`,t)}function cs(e,...t){Yp.print(Va.LogLevel_Error,"[CSM][E]"+e+`
`,t)}class Yp{static print(t,r,n){if(t<Mc.getLoggingLevel())return;const i=Mc.coreLogFunction;if(!i)return;const o=r.replace(/{(\d+)}/g,(a,s)=>n[s]);i(o)}static dumpBytes(t,r,n){for(let i=0;i<n;i++)i%16==0&&i>0?this.print(t,`
`):i%8==0&&i>0&&this.print(t,"  "),this.print(t,"{0} ",[r[i]&255]);this.print(t,`
`)}constructor(){}}class rF{constructor(){this._fadeInSeconds=-1,this._fadeOutSeconds=-1,this._weight=1,this._offsetSeconds=0,this._firedEventValues=[]}release(){this._weight=0}updateParameters(t,r,n){if(!r.isAvailable()||r.isFinished())return;if(!r.isStarted()){r.setIsStarted(!0),r.setStartTime(n-this._offsetSeconds),r.setFadeInStartTime(n);const s=this.getDuration();r.getEndTime()<0&&r.setEndTime(s<=0?-1:r.getStartTime()+s)}let i=this._weight;const o=this._fadeInSeconds==0?1:at.getEasingSine((n-r.getFadeInStartTime())/this._fadeInSeconds),a=this._fadeOutSeconds==0||r.getEndTime()<0?1:at.getEasingSine((r.getEndTime()-n)/this._fadeOutSeconds);i=i*o*a,r.setState(n,i),this.doUpdateParameters(t,n,i,r),r.getEndTime()>0&&r.getEndTime()<n&&r.setIsFinished(!0)}setFadeInTime(t){this._fadeInSeconds=t}setFadeOutTime(t){this._fadeOutSeconds=t}getFadeOutTime(){return this._fadeOutSeconds}getFadeInTime(){return this._fadeInSeconds}setWeight(t){this._weight=t}getWeight(){return this._weight}getDuration(){return-1}getLoopDuration(){return-1}setOffsetTime(t){this._offsetSeconds=t}getFiredEvent(t,r){return this._firedEventValues}setFinishedMotionHandler(t){this._onFinishedMotion=t}getFinishedMotionHandler(){return this._onFinishedMotion}}const oA=1;class nS extends rF{constructor(){super(),this._parameters=[]}static create(t){const r=new nS,n=t.FadeInTime,i=t.FadeOutTime;r.setFadeInTime(n!==void 0?n:oA),r.setFadeOutTime(i!==void 0?i:oA);const o=t.Parameters||[];for(let a=0;a<o.length;++a){const s=o[a],l=s.Id,u=s.Value;let c;switch(s.Blend){case"Multiply":c=oa.ExpressionBlendType_Multiply;break;case"Overwrite":c=oa.ExpressionBlendType_Overwrite;break;case"Add":default:c=oa.ExpressionBlendType_Add;break}const f={parameterId:l,blendType:c,value:u};r._parameters.push(f)}return r}doUpdateParameters(t,r,n,i){for(let o=0;o<this._parameters.length;++o){const a=this._parameters[o];switch(a.blendType){case oa.ExpressionBlendType_Add:{t.addParameterValueById(a.parameterId,a.value,n);break}case oa.ExpressionBlendType_Multiply:{t.multiplyParameterValueById(a.parameterId,a.value,n);break}case oa.ExpressionBlendType_Overwrite:{t.setParameterValueById(a.parameterId,a.value,n);break}}}}}var oa=(e=>(e[e.ExpressionBlendType_Add=0]="ExpressionBlendType_Add",e[e.ExpressionBlendType_Multiply=1]="ExpressionBlendType_Multiply",e[e.ExpressionBlendType_Overwrite=2]="ExpressionBlendType_Overwrite",e))(oa||{});class Hfe{constructor(){this._autoDelete=!1,this._available=!0,this._finished=!1,this._started=!1,this._startTimeSeconds=-1,this._fadeInStartTimeSeconds=0,this._endTimeSeconds=-1,this._stateTimeSeconds=0,this._stateWeight=0,this._lastEventCheckSeconds=0,this._motionQueueEntryHandle=this,this._fadeOutSeconds=0,this._isTriggeredFadeOut=!1}release(){this._autoDelete&&this._motion&&this._motion.release()}setFadeOut(t){this._fadeOutSeconds=t,this._isTriggeredFadeOut=!0}startFadeOut(t,r){const n=r+t;this._isTriggeredFadeOut=!0,(this._endTimeSeconds<0||n<this._endTimeSeconds)&&(this._endTimeSeconds=n)}isFinished(){return this._finished}isStarted(){return this._started}getStartTime(){return this._startTimeSeconds}getFadeInStartTime(){return this._fadeInStartTimeSeconds}getEndTime(){return this._endTimeSeconds}setStartTime(t){this._startTimeSeconds=t}setFadeInStartTime(t){this._fadeInStartTimeSeconds=t}setEndTime(t){this._endTimeSeconds=t}setIsFinished(t){this._finished=t}setIsStarted(t){this._started=t}isAvailable(){return this._available}setIsAvailable(t){this._available=t}setState(t,r){this._stateTimeSeconds=t,this._stateWeight=r}getStateTime(){return this._stateTimeSeconds}getStateWeight(){return this._stateWeight}getLastCheckEventSeconds(){return this._lastEventCheckSeconds}setLastCheckEventSeconds(t){this._lastEventCheckSeconds=t}isTriggeredFadeOut(){return this._isTriggeredFadeOut}getFadeOutSeconds(){return this._fadeOutSeconds}}class nF{constructor(){this._userTimeSeconds=0,this._eventCustomData=null,this._motions=[]}release(){for(let t=0;t<this._motions.length;++t)this._motions[t]&&this._motions[t].release();this._motions=void 0}startMotion(t,r,n){if(t==null)return Wfe;let i;for(let o=0;o<this._motions.length;++o)i=this._motions[o],i!=null&&i.setFadeOut(i._motion.getFadeOutTime());return i=new Hfe,i._autoDelete=r,i._motion=t,this._motions.push(i),i._motionQueueEntryHandle}isFinished(){let t=0;for(;t<this._motions.length;){const r=this._motions[t];if(r==null){this._motions.splice(t,1);continue}if(r._motion==null){r.release(),this._motions.splice(t,1);continue}if(!r.isFinished())return!1;t++}return!0}isFinishedByHandle(t){for(let r=0;r<this._motions.length;r++){const n=this._motions[r];if(n!=null&&n._motionQueueEntryHandle==t&&!n.isFinished())return!1}return!0}stopAllMotions(){for(let t=0;t<this._motions.length;t++){const r=this._motions[t];r!=null&&r.release()}this._motions=[]}getCubismMotionQueueEntry(t){return this._motions.find(r=>r!=null&&r._motionQueueEntryHandle==t)}setEventCallback(t,r=null){this._eventCallBack=t,this._eventCustomData=r}doUpdateMotion(t,r){let n=!1,i=0;for(;i<this._motions.length;){const o=this._motions[i];if(o==null){this._motions.splice(i,1);continue}const a=o._motion;if(a==null){o.release(),this._motions.splice(i,1);continue}a.updateParameters(t,o,r),n=!0;const s=a.getFiredEvent(o.getLastCheckEventSeconds()-o.getStartTime(),r-o.getStartTime());for(let l=0;l<s.length;++l)this._eventCallBack(this,s[l],this._eventCustomData);o.setLastCheckEventSeconds(r),o.isFinished()?(o.release(),this._motions.splice(i,1)):(o.isTriggeredFadeOut()&&o.startFadeOut(o.getFadeOutSeconds(),r),i++)}return n}}const Wfe=-1;class Xfe extends eS{constructor(t,r){var n;super(t,r),this.queueManager=new nF,this.definitions=(n=t.expressions)!=null?n:[],this.init()}isFinished(){return this.queueManager.isFinished()}getExpressionIndex(t){return this.definitions.findIndex(r=>r.Name===t)}getExpressionFile(t){return t.File}createExpression(t,r){return nS.create(t)}_setExpression(t){return this.queueManager.startMotion(t,!1,performance.now())}stopAllExpressions(){this.queueManager.stopAllMotions()}updateParameters(t,r){return this.queueManager.doUpdateMotion(t,r)}}class iF{constructor(t){this.groups=t.Groups,this.hitAreas=t.HitAreas,this.layout=t.Layout,this.moc=t.FileReferences.Moc,this.expressions=t.FileReferences.Expressions,this.motions=t.FileReferences.Motions,this.textures=t.FileReferences.Textures,this.physics=t.FileReferences.Physics,this.pose=t.FileReferences.Pose}getEyeBlinkParameters(){var t,r;return(r=(t=this.groups)==null?void 0:t.find(n=>n.Name==="EyeBlink"))==null?void 0:r.Ids}getLipSyncParameters(){var t,r;return(r=(t=this.groups)==null?void 0:t.find(n=>n.Name==="LipSync"))==null?void 0:r.Ids}}class Ns extends Hp{constructor(t){if(super(t),!Ns.isValidJSON(t))throw new TypeError("Invalid JSON.");Object.assign(this,new iF(t))}static isValidJSON(t){var r;return!!(t!=null&&t.FileReferences)&&typeof t.FileReferences.Moc=="string"&&((r=t.FileReferences.Textures)==null?void 0:r.length)>0&&t.FileReferences.Textures.every(n=>typeof n=="string")}replaceFiles(t){if(super.replaceFiles(t),this.motions)for(const[r,n]of Object.entries(this.motions))for(let i=0;i<n.length;i++)n[i].File=t(n[i].File,`motions.${r}[${i}].File`),n[i].Sound!==void 0&&(n[i].Sound=t(n[i].Sound,`motions.${r}[${i}].Sound`));if(this.expressions)for(let r=0;r<this.expressions.length;r++)this.expressions[r].File=t(this.expressions[r].File,`expressions[${r}].File`)}}WL(Ns,[iF]);var aa=(e=>(e[e.CubismMotionCurveTarget_Model=0]="CubismMotionCurveTarget_Model",e[e.CubismMotionCurveTarget_Parameter=1]="CubismMotionCurveTarget_Parameter",e[e.CubismMotionCurveTarget_PartOpacity=2]="CubismMotionCurveTarget_PartOpacity",e))(aa||{}),Xn=(e=>(e[e.CubismMotionSegmentType_Linear=0]="CubismMotionSegmentType_Linear",e[e.CubismMotionSegmentType_Bezier=1]="CubismMotionSegmentType_Bezier",e[e.CubismMotionSegmentType_Stepped=2]="CubismMotionSegmentType_Stepped",e[e.CubismMotionSegmentType_InverseStepped=3]="CubismMotionSegmentType_InverseStepped",e))(Xn||{});class Ki{constructor(t=0,r=0){this.time=t,this.value=r}}class qfe{constructor(){this.basePointIndex=0,this.segmentType=0}}class Yfe{constructor(){this.id="",this.type=0,this.segmentCount=0,this.baseSegmentIndex=0,this.fadeInTime=0,this.fadeOutTime=0}}class Kfe{constructor(){this.fireTime=0,this.value=""}}class Zfe{constructor(){this.duration=0,this.loop=!1,this.curveCount=0,this.eventCount=0,this.fps=0,this.curves=[],this.segments=[],this.points=[],this.events=[]}}class oF{constructor(t){this._json=t}release(){this._json=void 0}getMotionDuration(){return this._json.Meta.Duration}isMotionLoop(){return this._json.Meta.Loop||!1}getEvaluationOptionFlag(t){return iS.EvaluationOptionFlag_AreBeziersRistricted==t?!!this._json.Meta.AreBeziersRestricted:!1}getMotionCurveCount(){return this._json.Meta.CurveCount}getMotionFps(){return this._json.Meta.Fps}getMotionTotalSegmentCount(){return this._json.Meta.TotalSegmentCount}getMotionTotalPointCount(){return this._json.Meta.TotalPointCount}getMotionFadeInTime(){return this._json.Meta.FadeInTime}getMotionFadeOutTime(){return this._json.Meta.FadeOutTime}getMotionCurveTarget(t){return this._json.Curves[t].Target}getMotionCurveId(t){return this._json.Curves[t].Id}getMotionCurveFadeInTime(t){return this._json.Curves[t].FadeInTime}getMotionCurveFadeOutTime(t){return this._json.Curves[t].FadeOutTime}getMotionCurveSegmentCount(t){return this._json.Curves[t].Segments.length}getMotionCurveSegment(t,r){return this._json.Curves[t].Segments[r]}getEventCount(){return this._json.Meta.UserDataCount||0}getTotalEventValueSize(){return this._json.Meta.TotalUserDataSize}getEventTime(t){return this._json.UserData[t].Time}getEventValue(t){return this._json.UserData[t].Value}}var iS=(e=>(e[e.EvaluationOptionFlag_AreBeziersRistricted=0]="EvaluationOptionFlag_AreBeziersRistricted",e))(iS||{});const Jfe="EyeBlink",Qfe="LipSync",ehe="Model",the="Parameter",rhe="PartOpacity",nhe=!1;function cn(e,t,r){const n=new Ki;return n.time=e.time+(t.time-e.time)*r,n.value=e.value+(t.value-e.value)*r,n}function ihe(e,t){let r=(t-e[0].time)/(e[1].time-e[0].time);return r<0&&(r=0),e[0].value+(e[1].value-e[0].value)*r}function ohe(e,t){let r=(t-e[0].time)/(e[3].time-e[0].time);r<0&&(r=0);const n=cn(e[0],e[1],r),i=cn(e[1],e[2],r),o=cn(e[2],e[3],r),a=cn(n,i,r),s=cn(i,o,r);return cn(a,s,r).value}function ahe(e,t){const r=t,n=e[0].time,i=e[3].time,o=e[1].time,a=e[2].time,s=i-3*a+3*o-n,l=3*a-6*o+3*n,u=3*o-3*n,c=n-r,f=at.cardanoAlgorithmForBezier(s,l,u,c),h=cn(e[0],e[1],f),d=cn(e[1],e[2],f),m=cn(e[2],e[3],f),g=cn(h,d,f),p=cn(d,m,f);return cn(g,p,f).value}function she(e,t){return e[0].value}function lhe(e,t){return e[1].value}function jg(e,t,r){const n=e.curves[t];let i=-1;const o=n.baseSegmentIndex+n.segmentCount;let a=0;for(let l=n.baseSegmentIndex;l<o;++l)if(a=e.segments[l].basePointIndex+(e.segments[l].segmentType==Xn.CubismMotionSegmentType_Bezier?3:1),e.points[a].time>r){i=l;break}if(i==-1)return e.points[a].value;const s=e.segments[i];return s.evaluate(e.points.slice(s.basePointIndex),r)}class oS extends rF{constructor(){super(),this._eyeBlinkParameterIds=[],this._lipSyncParameterIds=[],this._sourceFrameRate=30,this._loopDurationSeconds=-1,this._isLoop=!1,this._isLoopFadeIn=!0,this._lastWeight=0}static create(t,r){const n=new oS;return n.parse(t),n._sourceFrameRate=n._motionData.fps,n._loopDurationSeconds=n._motionData.duration,n._onFinishedMotion=r,n}doUpdateParameters(t,r,n,i){this._modelCurveIdEyeBlink==null&&(this._modelCurveIdEyeBlink=Jfe),this._modelCurveIdLipSync==null&&(this._modelCurveIdLipSync=Qfe);let o=r-i.getStartTime();o<0&&(o=0);let a=Number.MAX_VALUE,s=Number.MAX_VALUE;const l=64;let u=0,c=0;this._eyeBlinkParameterIds.length>l&&iA("too many eye blink targets : {0}",this._eyeBlinkParameterIds.length),this._lipSyncParameterIds.length>l&&iA("too many lip sync targets : {0}",this._lipSyncParameterIds.length);const f=this._fadeInSeconds<=0?1:at.getEasingSine((r-i.getFadeInStartTime())/this._fadeInSeconds),h=this._fadeOutSeconds<=0||i.getEndTime()<0?1:at.getEasingSine((i.getEndTime()-r)/this._fadeOutSeconds);let d,m,g,p=o;if(this._isLoop)for(;p>this._motionData.duration;)p-=this._motionData.duration;const v=this._motionData.curves;for(m=0;m<this._motionData.curveCount&&v[m].type==aa.CubismMotionCurveTarget_Model;++m)d=jg(this._motionData,m,p),v[m].id==this._modelCurveIdEyeBlink?s=d:v[m].id==this._modelCurveIdLipSync&&(a=d);for(;m<this._motionData.curveCount&&v[m].type==aa.CubismMotionCurveTarget_Parameter;++m){if(g=t.getParameterIndex(v[m].id),g==-1)continue;const y=t.getParameterValueByIndex(g);if(d=jg(this._motionData,m,p),s!=Number.MAX_VALUE){for(let x=0;x<this._eyeBlinkParameterIds.length&&x<l;++x)if(this._eyeBlinkParameterIds[x]==v[m].id){d*=s,c|=1<<x;break}}if(a!=Number.MAX_VALUE){for(let x=0;x<this._lipSyncParameterIds.length&&x<l;++x)if(this._lipSyncParameterIds[x]==v[m].id){d+=a,u|=1<<x;break}}let _;if(v[m].fadeInTime<0&&v[m].fadeOutTime<0)_=y+(d-y)*n;else{let x,b;v[m].fadeInTime<0?x=f:x=v[m].fadeInTime==0?1:at.getEasingSine((r-i.getFadeInStartTime())/v[m].fadeInTime),v[m].fadeOutTime<0?b=h:b=v[m].fadeOutTime==0||i.getEndTime()<0?1:at.getEasingSine((i.getEndTime()-r)/v[m].fadeOutTime);const S=this._weight*x*b;_=y+(d-y)*S}t.setParameterValueByIndex(g,_,1)}{if(s!=Number.MAX_VALUE)for(let y=0;y<this._eyeBlinkParameterIds.length&&y<l;++y){const _=t.getParameterValueById(this._eyeBlinkParameterIds[y]);if(c>>y&1)continue;const x=_+(s-_)*n;t.setParameterValueById(this._eyeBlinkParameterIds[y],x)}if(a!=Number.MAX_VALUE)for(let y=0;y<this._lipSyncParameterIds.length&&y<l;++y){const _=t.getParameterValueById(this._lipSyncParameterIds[y]);if(u>>y&1)continue;const x=_+(a-_)*n;t.setParameterValueById(this._lipSyncParameterIds[y],x)}}for(;m<this._motionData.curveCount&&v[m].type==aa.CubismMotionCurveTarget_PartOpacity;++m)if(d=jg(this._motionData,m,p),Ic.setOpacityFromMotion)t.setPartOpacityById(v[m].id,d);else{if(g=t.getParameterIndex(v[m].id),g==-1)continue;t.setParameterValueByIndex(g,d)}o>=this._motionData.duration&&(this._isLoop?(i.setStartTime(r),this._isLoopFadeIn&&i.setFadeInStartTime(r)):(this._onFinishedMotion&&this._onFinishedMotion(this),i.setIsFinished(!0))),this._lastWeight=n}setIsLoop(t){this._isLoop=t}isLoop(){return this._isLoop}setIsLoopFadeIn(t){this._isLoopFadeIn=t}isLoopFadeIn(){return this._isLoopFadeIn}getDuration(){return this._isLoop?-1:this._loopDurationSeconds}getLoopDuration(){return this._loopDurationSeconds}setParameterFadeInTime(t,r){const n=this._motionData.curves;for(let i=0;i<this._motionData.curveCount;++i)if(t==n[i].id){n[i].fadeInTime=r;return}}setParameterFadeOutTime(t,r){const n=this._motionData.curves;for(let i=0;i<this._motionData.curveCount;++i)if(t==n[i].id){n[i].fadeOutTime=r;return}}getParameterFadeInTime(t){const r=this._motionData.curves;for(let n=0;n<this._motionData.curveCount;++n)if(t==r[n].id)return r[n].fadeInTime;return-1}getParameterFadeOutTime(t){const r=this._motionData.curves;for(let n=0;n<this._motionData.curveCount;++n)if(t==r[n].id)return r[n].fadeOutTime;return-1}setEffectIds(t,r){this._eyeBlinkParameterIds=t,this._lipSyncParameterIds=r}release(){this._motionData=void 0}parse(t){this._motionData=new Zfe;let r=new oF(t);this._motionData.duration=r.getMotionDuration(),this._motionData.loop=r.isMotionLoop(),this._motionData.curveCount=r.getMotionCurveCount(),this._motionData.fps=r.getMotionFps(),this._motionData.eventCount=r.getEventCount();const n=r.getEvaluationOptionFlag(iS.EvaluationOptionFlag_AreBeziersRistricted),i=r.getMotionFadeInTime(),o=r.getMotionFadeOutTime();i!==void 0?this._fadeInSeconds=i<0?1:i:this._fadeInSeconds=1,o!==void 0?this._fadeOutSeconds=o<0?1:o:this._fadeOutSeconds=1,this._motionData.curves=Array.from({length:this._motionData.curveCount}).map(()=>new Yfe),this._motionData.segments=Array.from({length:r.getMotionTotalSegmentCount()}).map(()=>new qfe),this._motionData.events=Array.from({length:this._motionData.eventCount}).map(()=>new Kfe),this._motionData.points=[];let a=0,s=0;for(let l=0;l<this._motionData.curveCount;++l){const u=this._motionData.curves[l];switch(r.getMotionCurveTarget(l)){case ehe:u.type=aa.CubismMotionCurveTarget_Model;break;case the:u.type=aa.CubismMotionCurveTarget_Parameter;break;case rhe:u.type=aa.CubismMotionCurveTarget_PartOpacity;break;default:xu('Warning : Unable to get segment type from Curve! The number of "CurveCount" may be incorrect!')}u.id=r.getMotionCurveId(l),u.baseSegmentIndex=s;const c=r.getMotionCurveFadeInTime(l),f=r.getMotionCurveFadeOutTime(l);u.fadeInTime=c!==void 0?c:-1,u.fadeOutTime=f!==void 0?f:-1;for(let h=0;h<r.getMotionCurveSegmentCount(l);){switch(h==0?(this._motionData.segments[s].basePointIndex=a,this._motionData.points[a]=new Ki(r.getMotionCurveSegment(l,h),r.getMotionCurveSegment(l,h+1)),a+=1,h+=2):this._motionData.segments[s].basePointIndex=a-1,r.getMotionCurveSegment(l,h)){case Xn.CubismMotionSegmentType_Linear:{this._motionData.segments[s].segmentType=Xn.CubismMotionSegmentType_Linear,this._motionData.segments[s].evaluate=ihe,this._motionData.points[a]=new Ki(r.getMotionCurveSegment(l,h+1),r.getMotionCurveSegment(l,h+2)),a+=1,h+=3;break}case Xn.CubismMotionSegmentType_Bezier:{this._motionData.segments[s].segmentType=Xn.CubismMotionSegmentType_Bezier,n||nhe?this._motionData.segments[s].evaluate=ohe:this._motionData.segments[s].evaluate=ahe,this._motionData.points[a]=new Ki(r.getMotionCurveSegment(l,h+1),r.getMotionCurveSegment(l,h+2)),this._motionData.points[a+1]=new Ki(r.getMotionCurveSegment(l,h+3),r.getMotionCurveSegment(l,h+4)),this._motionData.points[a+2]=new Ki(r.getMotionCurveSegment(l,h+5),r.getMotionCurveSegment(l,h+6)),a+=3,h+=7;break}case Xn.CubismMotionSegmentType_Stepped:{this._motionData.segments[s].segmentType=Xn.CubismMotionSegmentType_Stepped,this._motionData.segments[s].evaluate=she,this._motionData.points[a]=new Ki(r.getMotionCurveSegment(l,h+1),r.getMotionCurveSegment(l,h+2)),a+=1,h+=3;break}case Xn.CubismMotionSegmentType_InverseStepped:{this._motionData.segments[s].segmentType=Xn.CubismMotionSegmentType_InverseStepped,this._motionData.segments[s].evaluate=lhe,this._motionData.points[a]=new Ki(r.getMotionCurveSegment(l,h+1),r.getMotionCurveSegment(l,h+2)),a+=1,h+=3;break}}++u.segmentCount,++s}this._motionData.curves.push(u)}for(let l=0;l<r.getEventCount();++l)this._motionData.events[l].fireTime=r.getEventTime(l),this._motionData.events[l].value=r.getEventValue(l);r.release()}getFiredEvent(t,r){this._firedEventValues.length=0;for(let n=0;n<this._motionData.eventCount;++n)this._motionData.events[n].fireTime>t&&this._motionData.events[n].fireTime<=r&&this._firedEventValues.push(this._motionData.events[n].value);return this._firedEventValues}}class uhe extends Wp{constructor(t,r){var n;super(t,r),this.groups={idle:"Idle"},this.motionDataType="json",this.queueManager=new nF,this.definitions=(n=t.motions)!=null?n:{},this.eyeBlinkIds=t.getEyeBlinkParameters()||[],this.lipSyncIds=t.getLipSyncParameters()||[],this.init(r)}init(t){super.init(t),this.settings.expressions&&(this.expressionManager=new Xfe(this.settings,t)),this.queueManager.setEventCallback((r,n,i)=>{this.emit("motion:"+n)})}isFinished(){return this.queueManager.isFinished()}_startMotion(t,r){return t.setFinishedMotionHandler(r),this.queueManager.stopAllMotions(),this.queueManager.startMotion(t,!1,performance.now())}_stopAllMotions(){this.queueManager.stopAllMotions()}createMotion(t,r,n){const i=oS.create(t),o=new oF(t),a=(r===this.groups.idle?lr.idleMotionFadingDuration:lr.motionFadingDuration)/1e3;return o.getMotionFadeInTime()===void 0&&i.setFadeInTime(n.FadeInTime>0?n.FadeInTime:a),o.getMotionFadeOutTime()===void 0&&i.setFadeOutTime(n.FadeOutTime>0?n.FadeOutTime:a),i.setEffectIds(this.eyeBlinkIds,this.lipSyncIds),i}getMotionFile(t){return t.File}getMotionName(t){return t.File}getSoundFile(t){return t.Sound}updateParameters(t,r){return this.queueManager.doUpdateMotion(t,r)}destroy(){super.destroy(),this.queueManager.release(),this.queueManager=void 0}}const che="ParamAngleX",fhe="ParamAngleY",hhe="ParamAngleZ",dhe="ParamEyeBallX",phe="ParamEyeBallY",mhe="ParamBodyAngleX",vhe="ParamBreath";class aS{constructor(){this._breathParameters=[],this._currentTime=0}static create(){return new aS}setParameters(t){this._breathParameters=t}getParameters(){return this._breathParameters}updateParameters(t,r){this._currentTime+=r;const n=this._currentTime*2*3.14159;for(let i=0;i<this._breathParameters.length;++i){const o=this._breathParameters[i];t.addParameterValueById(o.parameterId,o.offset+o.peak*Math.sin(n/o.cycle),o.weight)}}}class au{constructor(t,r,n,i,o){this.parameterId=t??void 0,this.offset=r??0,this.peak=n??0,this.cycle=i??0,this.weight=o??0}}const Q0=class{static create(e){return new Q0(e)}setBlinkingInterval(e){this._blinkingIntervalSeconds=e}setBlinkingSetting(e,t,r){this._closingSeconds=e,this._closedSeconds=t,this._openingSeconds=r}setParameterIds(e){this._parameterIds=e}getParameterIds(){return this._parameterIds}updateParameters(e,t){this._userTimeSeconds+=t;let r,n=0;switch(this._blinkingState){case sn.EyeState_Closing:n=(this._userTimeSeconds-this._stateStartTimeSeconds)/this._closingSeconds,n>=1&&(n=1,this._blinkingState=sn.EyeState_Closed,this._stateStartTimeSeconds=this._userTimeSeconds),r=1-n;break;case sn.EyeState_Closed:n=(this._userTimeSeconds-this._stateStartTimeSeconds)/this._closedSeconds,n>=1&&(this._blinkingState=sn.EyeState_Opening,this._stateStartTimeSeconds=this._userTimeSeconds),r=0;break;case sn.EyeState_Opening:n=(this._userTimeSeconds-this._stateStartTimeSeconds)/this._openingSeconds,n>=1&&(n=1,this._blinkingState=sn.EyeState_Interval,this._nextBlinkingTime=this.determinNextBlinkingTiming()),r=n;break;case sn.EyeState_Interval:this._nextBlinkingTime<this._userTimeSeconds&&(this._blinkingState=sn.EyeState_Closing,this._stateStartTimeSeconds=this._userTimeSeconds),r=1;break;case sn.EyeState_First:default:this._blinkingState=sn.EyeState_Interval,this._nextBlinkingTime=this.determinNextBlinkingTiming(),r=1;break}Q0.CloseIfZero||(r=-r);for(let i=0;i<this._parameterIds.length;++i)e.setParameterValueById(this._parameterIds[i],r)}constructor(e){var t,r;this._blinkingState=sn.EyeState_First,this._nextBlinkingTime=0,this._stateStartTimeSeconds=0,this._blinkingIntervalSeconds=4,this._closingSeconds=.1,this._closedSeconds=.05,this._openingSeconds=.15,this._userTimeSeconds=0,this._parameterIds=[],e!=null&&(this._parameterIds=(r=(t=e.getEyeBlinkParameters())==null?void 0:t.slice())!=null?r:this._parameterIds)}determinNextBlinkingTiming(){const e=Math.random();return this._userTimeSeconds+e*(2*this._blinkingIntervalSeconds-1)}};let aF=Q0;aF.CloseIfZero=!0;var sn=(e=>(e[e.EyeState_First=0]="EyeState_First",e[e.EyeState_Interval=1]="EyeState_Interval",e[e.EyeState_Closing=2]="EyeState_Closing",e[e.EyeState_Closed=3]="EyeState_Closed",e[e.EyeState_Opening=4]="EyeState_Opening",e))(sn||{});class ex{constructor(t=0,r=0,n=0,i=0){this.x=t,this.y=r,this.width=n,this.height=i}getCenterX(){return this.x+.5*this.width}getCenterY(){return this.y+.5*this.height}getRight(){return this.x+this.width}getBottom(){return this.y+this.height}setRect(t){this.x=t.x,this.y=t.y,this.width=t.width,this.height=t.height}expand(t,r){this.x-=t,this.y-=r,this.width+=t*2,this.height+=r*2}}const Ug=4,ghe=10;let Yo,bu,tx;class $g{getChannelFlagAsColor(t){return this._channelColors[t]}getMaskRenderTexture(){let t=0;if(this._maskTexture&&this._maskTexture.texture!=0&&(this._maskTexture.frameNo=this._currentFrameNo,t=this._maskTexture.texture),t==0){const r=this._clippingMaskBufferSize;this._colorBuffer=this.gl.createTexture(),this.gl.bindTexture(this.gl.TEXTURE_2D,this._colorBuffer),this.gl.texImage2D(this.gl.TEXTURE_2D,0,this.gl.RGBA,r,r,0,this.gl.RGBA,this.gl.UNSIGNED_BYTE,null),this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_WRAP_S,this.gl.CLAMP_TO_EDGE),this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_WRAP_T,this.gl.CLAMP_TO_EDGE),this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_MIN_FILTER,this.gl.LINEAR),this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_MAG_FILTER,this.gl.LINEAR),this.gl.bindTexture(this.gl.TEXTURE_2D,null),t=this.gl.createFramebuffer(),this.gl.bindFramebuffer(this.gl.FRAMEBUFFER,t),this.gl.framebufferTexture2D(this.gl.FRAMEBUFFER,this.gl.COLOR_ATTACHMENT0,this.gl.TEXTURE_2D,this._colorBuffer,0),this.gl.bindFramebuffer(this.gl.FRAMEBUFFER,tx),this._maskTexture=new yhe(this._currentFrameNo,t)}return t}setGL(t){this.gl=t}calcClippedDrawTotalBounds(t,r){let n=Number.MAX_VALUE,i=Number.MAX_VALUE,o=Number.MIN_VALUE,a=Number.MIN_VALUE;const s=r._clippedDrawableIndexList.length;for(let l=0;l<s;l++){const u=r._clippedDrawableIndexList[l],c=t.getDrawableVertexCount(u),f=t.getDrawableVertices(u);let h=Number.MAX_VALUE,d=Number.MAX_VALUE,m=Number.MIN_VALUE,g=Number.MIN_VALUE;const p=c*Bg.vertexStep;for(let v=Bg.vertexOffset;v<p;v+=Bg.vertexStep){const y=f[v],_=f[v+1];y<h&&(h=y),y>m&&(m=y),_<d&&(d=_),_>g&&(g=_)}if(h!=Number.MAX_VALUE)if(h<n&&(n=h),d<i&&(i=d),m>o&&(o=m),g>a&&(a=g),n==Number.MAX_VALUE)r._allClippedDrawRect.x=0,r._allClippedDrawRect.y=0,r._allClippedDrawRect.width=0,r._allClippedDrawRect.height=0,r._isUsing=!1;else{r._isUsing=!0;const v=o-n,y=a-i;r._allClippedDrawRect.x=n,r._allClippedDrawRect.y=i,r._allClippedDrawRect.width=v,r._allClippedDrawRect.height=y}}}constructor(){this._maskRenderTexture=null,this._colorBuffer=null,this._currentFrameNo=0,this._clippingMaskBufferSize=256,this._clippingContextListForMask=[],this._clippingContextListForDraw=[],this._channelColors=[],this._tmpBoundsOnModel=new ex,this._tmpMatrix=new vn,this._tmpMatrixForMask=new vn,this._tmpMatrixForDraw=new vn;let t=new _u;t.R=1,t.G=0,t.B=0,t.A=0,this._channelColors.push(t),t=new _u,t.R=0,t.G=1,t.B=0,t.A=0,this._channelColors.push(t),t=new _u,t.R=0,t.G=0,t.B=1,t.A=0,this._channelColors.push(t),t=new _u,t.R=0,t.G=0,t.B=0,t.A=1,this._channelColors.push(t)}release(){var t,r,n;const i=this;for(let o=0;o<this._clippingContextListForMask.length;o++)this._clippingContextListForMask[o]&&((t=this._clippingContextListForMask[o])==null||t.release());i._clippingContextListForMask=void 0,i._clippingContextListForDraw=void 0,this._maskTexture&&((r=this.gl)==null||r.deleteFramebuffer(this._maskTexture.texture),i._maskTexture=void 0),i._channelColors=void 0,(n=this.gl)==null||n.deleteTexture(this._colorBuffer),this._colorBuffer=null}initialize(t,r,n,i){for(let o=0;o<r;o++){if(i[o]<=0){this._clippingContextListForDraw.push(null);continue}let a=this.findSameClip(n[o],i[o]);a==null&&(a=new _he(this,n[o],i[o]),this._clippingContextListForMask.push(a)),a.addClippedDrawable(o),this._clippingContextListForDraw.push(a)}}setupClippingContext(t,r){this._currentFrameNo++;let n=0;for(let i=0;i<this._clippingContextListForMask.length;i++){const o=this._clippingContextListForMask[i];this.calcClippedDrawTotalBounds(t,o),o._isUsing&&n++}if(n>0){this.gl.viewport(0,0,this._clippingMaskBufferSize,this._clippingMaskBufferSize),this._maskRenderTexture=this.getMaskRenderTexture(),r.getMvpMatrix(),r.preDraw(),this.setupLayoutBounds(n),this.gl.bindFramebuffer(this.gl.FRAMEBUFFER,this._maskRenderTexture),this.gl.clearColor(1,1,1,1),this.gl.clear(this.gl.COLOR_BUFFER_BIT);for(let i=0;i<this._clippingContextListForMask.length;i++){const o=this._clippingContextListForMask[i],a=o._allClippedDrawRect,s=o._layoutBounds,l=.05;this._tmpBoundsOnModel.setRect(a),this._tmpBoundsOnModel.expand(a.width*l,a.height*l);const u=s.width/this._tmpBoundsOnModel.width,c=s.height/this._tmpBoundsOnModel.height;this._tmpMatrix.loadIdentity(),this._tmpMatrix.translateRelative(-1,-1),this._tmpMatrix.scaleRelative(2,2),this._tmpMatrix.translateRelative(s.x,s.y),this._tmpMatrix.scaleRelative(u,c),this._tmpMatrix.translateRelative(-this._tmpBoundsOnModel.x,-this._tmpBoundsOnModel.y),this._tmpMatrixForMask.setMatrix(this._tmpMatrix.getArray()),this._tmpMatrix.loadIdentity(),this._tmpMatrix.translateRelative(s.x,s.y),this._tmpMatrix.scaleRelative(u,c),this._tmpMatrix.translateRelative(-this._tmpBoundsOnModel.x,-this._tmpBoundsOnModel.y),this._tmpMatrixForDraw.setMatrix(this._tmpMatrix.getArray()),o._matrixForMask.setMatrix(this._tmpMatrixForMask.getArray()),o._matrixForDraw.setMatrix(this._tmpMatrixForDraw.getArray());const f=o._clippingIdCount;for(let h=0;h<f;h++){const d=o._clippingIdList[h];t.getDrawableDynamicFlagVertexPositionsDidChange(d)&&(r.setIsCulling(t.getDrawableCulling(d)!=!1),r.setClippingContextBufferForMask(o),r.drawMesh(t.getDrawableTextureIndices(d),t.getDrawableVertexIndexCount(d),t.getDrawableVertexCount(d),t.getDrawableVertexIndices(d),t.getDrawableVertices(d),t.getDrawableVertexUvs(d),t.getDrawableOpacity(d),Eo.CubismBlendMode_Normal,!1))}}this.gl.bindFramebuffer(this.gl.FRAMEBUFFER,tx),r.setClippingContextBufferForMask(null),this.gl.viewport(bu[0],bu[1],bu[2],bu[3])}}findSameClip(t,r){for(let n=0;n<this._clippingContextListForMask.length;n++){const i=this._clippingContextListForMask[n],o=i._clippingIdCount;if(o!=r)continue;let a=0;for(let s=0;s<o;s++){const l=i._clippingIdList[s];for(let u=0;u<o;u++)if(t[u]==l){a++;break}}if(a==o)return i}return null}setupLayoutBounds(t){let r=t/Ug,n=t%Ug;r=~~r,n=~~n;let i=0;for(let o=0;o<Ug;o++){const a=r+(o<n?1:0);if(a!=0)if(a==1){const s=this._clippingContextListForMask[i++];s._layoutChannelNo=o,s._layoutBounds.x=0,s._layoutBounds.y=0,s._layoutBounds.width=1,s._layoutBounds.height=1}else if(a==2)for(let s=0;s<a;s++){let l=s%2;l=~~l;const u=this._clippingContextListForMask[i++];u._layoutChannelNo=o,u._layoutBounds.x=l*.5,u._layoutBounds.y=0,u._layoutBounds.width=.5,u._layoutBounds.height=1}else if(a<=4)for(let s=0;s<a;s++){let l=s%2,u=s/2;l=~~l,u=~~u;const c=this._clippingContextListForMask[i++];c._layoutChannelNo=o,c._layoutBounds.x=l*.5,c._layoutBounds.y=u*.5,c._layoutBounds.width=.5,c._layoutBounds.height=.5}else if(a<=9)for(let s=0;s<a;s++){let l=s%3,u=s/3;l=~~l,u=~~u;const c=this._clippingContextListForMask[i++];c._layoutChannelNo=o,c._layoutBounds.x=l/3,c._layoutBounds.y=u/3,c._layoutBounds.width=1/3,c._layoutBounds.height=1/3}else if(Ic.supportMoreMaskDivisions&&a<=16)for(let s=0;s<a;s++){let l=s%4,u=s/4;l=~~l,u=~~u;const c=this._clippingContextListForMask[i++];c._layoutChannelNo=o,c._layoutBounds.x=l/4,c._layoutBounds.y=u/4,c._layoutBounds.width=1/4,c._layoutBounds.height=1/4}else cs("not supported mask count : {0}",a)}}getColorBuffer(){return this._colorBuffer}getClippingContextListForDraw(){return this._clippingContextListForDraw}setClippingMaskBufferSize(t){this._clippingMaskBufferSize=t}getClippingMaskBufferSize(){return this._clippingMaskBufferSize}}class yhe{constructor(t,r){this.frameNo=t,this.texture=r}}class _he{constructor(t,r,n){this._isUsing=!1,this._owner=t,this._clippingIdList=r,this._clippingIdCount=n,this._allClippedDrawRect=new ex,this._layoutBounds=new ex,this._clippedDrawableIndexList=[],this._matrixForMask=new vn,this._matrixForDraw=new vn}release(){const t=this;t._layoutBounds=void 0,t._allClippedDrawRect=void 0,t._clippedDrawableIndexList=void 0}addClippedDrawable(t){this._clippedDrawableIndexList.push(t)}getClippingManager(){return this._owner}setGl(t){this._owner.setGL(t)}}class Bs{static getInstance(){return Yo==null&&(Yo=new Bs),Yo}static deleteInstance(){Yo&&(Yo.release(),Yo=void 0)}constructor(){this._shaderSets=[]}release(){this.releaseShaderProgram()}setupShaderProgram(t,r,n,i,o,a,s,l,u,c,f,h,d){f||cs("NoPremultipliedAlpha is not allowed"),this._shaderSets.length==0&&this.generateShaders();let m,g,p,v;const y=t.getClippingContextBufferForMask();if(y!=null){const _=this._shaderSets[Su.ShaderNames_SetupMask];this.gl.useProgram(_.shaderProgram),this.gl.activeTexture(this.gl.TEXTURE0),this.gl.bindTexture(this.gl.TEXTURE_2D,r),this.gl.uniform1i(_.samplerTexture0Location,0),s.vertex==null&&(s.vertex=this.gl.createBuffer()),this.gl.bindBuffer(this.gl.ARRAY_BUFFER,s.vertex),this.gl.bufferData(this.gl.ARRAY_BUFFER,i,this.gl.DYNAMIC_DRAW),this.gl.enableVertexAttribArray(_.attributePositionLocation),this.gl.vertexAttribPointer(_.attributePositionLocation,2,this.gl.FLOAT,!1,0,0),s.uv==null&&(s.uv=this.gl.createBuffer()),this.gl.bindBuffer(this.gl.ARRAY_BUFFER,s.uv),this.gl.bufferData(this.gl.ARRAY_BUFFER,a,this.gl.DYNAMIC_DRAW),this.gl.enableVertexAttribArray(_.attributeTexCoordLocation),this.gl.vertexAttribPointer(_.attributeTexCoordLocation,2,this.gl.FLOAT,!1,0,0);const x=y._layoutChannelNo,b=y.getClippingManager().getChannelFlagAsColor(x);this.gl.uniform4f(_.uniformChannelFlagLocation,b.R,b.G,b.B,b.A),this.gl.uniformMatrix4fv(_.uniformClipMatrixLocation,!1,y._matrixForMask.getArray());const S=y._layoutBounds;this.gl.uniform4f(_.uniformBaseColorLocation,S.x*2-1,S.y*2-1,S.getRight()*2-1,S.getBottom()*2-1),m=this.gl.ZERO,g=this.gl.ONE_MINUS_SRC_COLOR,p=this.gl.ZERO,v=this.gl.ONE_MINUS_SRC_ALPHA}else{const _=t.getClippingContextBufferForDraw(),b=_!=null?d?2:1:0;let S;switch(u){case Eo.CubismBlendMode_Normal:default:S=this._shaderSets[Su.ShaderNames_NormalPremultipliedAlpha+b],m=this.gl.ONE,g=this.gl.ONE_MINUS_SRC_ALPHA,p=this.gl.ONE,v=this.gl.ONE_MINUS_SRC_ALPHA;break;case Eo.CubismBlendMode_Additive:S=this._shaderSets[Su.ShaderNames_AddPremultipliedAlpha+b],m=this.gl.ONE,g=this.gl.ONE,p=this.gl.ZERO,v=this.gl.ONE;break;case Eo.CubismBlendMode_Multiplicative:S=this._shaderSets[Su.ShaderNames_MultPremultipliedAlpha+b],m=this.gl.DST_COLOR,g=this.gl.ONE_MINUS_SRC_ALPHA,p=this.gl.ZERO,v=this.gl.ONE;break}if(this.gl.useProgram(S.shaderProgram),s.vertex==null&&(s.vertex=this.gl.createBuffer()),this.gl.bindBuffer(this.gl.ARRAY_BUFFER,s.vertex),this.gl.bufferData(this.gl.ARRAY_BUFFER,i,this.gl.DYNAMIC_DRAW),this.gl.enableVertexAttribArray(S.attributePositionLocation),this.gl.vertexAttribPointer(S.attributePositionLocation,2,this.gl.FLOAT,!1,0,0),s.uv==null&&(s.uv=this.gl.createBuffer()),this.gl.bindBuffer(this.gl.ARRAY_BUFFER,s.uv),this.gl.bufferData(this.gl.ARRAY_BUFFER,a,this.gl.DYNAMIC_DRAW),this.gl.enableVertexAttribArray(S.attributeTexCoordLocation),this.gl.vertexAttribPointer(S.attributeTexCoordLocation,2,this.gl.FLOAT,!1,0,0),_!=null){this.gl.activeTexture(this.gl.TEXTURE1);const E=_.getClippingManager().getColorBuffer();this.gl.bindTexture(this.gl.TEXTURE_2D,E),this.gl.uniform1i(S.samplerTexture1Location,1),this.gl.uniformMatrix4fv(S.uniformClipMatrixLocation,!1,_._matrixForDraw.getArray());const I=_._layoutChannelNo,A=_.getClippingManager().getChannelFlagAsColor(I);this.gl.uniform4f(S.uniformChannelFlagLocation,A.R,A.G,A.B,A.A)}this.gl.activeTexture(this.gl.TEXTURE0),this.gl.bindTexture(this.gl.TEXTURE_2D,r),this.gl.uniform1i(S.samplerTexture0Location,0),this.gl.uniformMatrix4fv(S.uniformMatrixLocation,!1,h.getArray()),this.gl.uniform4f(S.uniformBaseColorLocation,c.R,c.G,c.B,c.A)}s.index==null&&(s.index=this.gl.createBuffer()),this.gl.bindBuffer(this.gl.ELEMENT_ARRAY_BUFFER,s.index),this.gl.bufferData(this.gl.ELEMENT_ARRAY_BUFFER,o,this.gl.DYNAMIC_DRAW),this.gl.blendFuncSeparate(m,g,p,v)}releaseShaderProgram(){for(let t=0;t<this._shaderSets.length;t++)this.gl.deleteProgram(this._shaderSets[t].shaderProgram),this._shaderSets[t].shaderProgram=0;this._shaderSets=[]}generateShaders(){for(let t=0;t<ghe;t++)this._shaderSets.push({});this._shaderSets[0].shaderProgram=this.loadShaderProgram(xhe,bhe),this._shaderSets[1].shaderProgram=this.loadShaderProgram(She,whe),this._shaderSets[2].shaderProgram=this.loadShaderProgram(aA,Ehe),this._shaderSets[3].shaderProgram=this.loadShaderProgram(aA,The),this._shaderSets[4].shaderProgram=this._shaderSets[1].shaderProgram,this._shaderSets[5].shaderProgram=this._shaderSets[2].shaderProgram,this._shaderSets[6].shaderProgram=this._shaderSets[3].shaderProgram,this._shaderSets[7].shaderProgram=this._shaderSets[1].shaderProgram,this._shaderSets[8].shaderProgram=this._shaderSets[2].shaderProgram,this._shaderSets[9].shaderProgram=this._shaderSets[3].shaderProgram,this._shaderSets[0].attributePositionLocation=this.gl.getAttribLocation(this._shaderSets[0].shaderProgram,"a_position"),this._shaderSets[0].attributeTexCoordLocation=this.gl.getAttribLocation(this._shaderSets[0].shaderProgram,"a_texCoord"),this._shaderSets[0].samplerTexture0Location=this.gl.getUniformLocation(this._shaderSets[0].shaderProgram,"s_texture0"),this._shaderSets[0].uniformClipMatrixLocation=this.gl.getUniformLocation(this._shaderSets[0].shaderProgram,"u_clipMatrix"),this._shaderSets[0].uniformChannelFlagLocation=this.gl.getUniformLocation(this._shaderSets[0].shaderProgram,"u_channelFlag"),this._shaderSets[0].uniformBaseColorLocation=this.gl.getUniformLocation(this._shaderSets[0].shaderProgram,"u_baseColor"),this._shaderSets[1].attributePositionLocation=this.gl.getAttribLocation(this._shaderSets[1].shaderProgram,"a_position"),this._shaderSets[1].attributeTexCoordLocation=this.gl.getAttribLocation(this._shaderSets[1].shaderProgram,"a_texCoord"),this._shaderSets[1].samplerTexture0Location=this.gl.getUniformLocation(this._shaderSets[1].shaderProgram,"s_texture0"),this._shaderSets[1].uniformMatrixLocation=this.gl.getUniformLocation(this._shaderSets[1].shaderProgram,"u_matrix"),this._shaderSets[1].uniformBaseColorLocation=this.gl.getUniformLocation(this._shaderSets[1].shaderProgram,"u_baseColor"),this._shaderSets[2].attributePositionLocation=this.gl.getAttribLocation(this._shaderSets[2].shaderProgram,"a_position"),this._shaderSets[2].attributeTexCoordLocation=this.gl.getAttribLocation(this._shaderSets[2].shaderProgram,"a_texCoord"),this._shaderSets[2].samplerTexture0Location=this.gl.getUniformLocation(this._shaderSets[2].shaderProgram,"s_texture0"),this._shaderSets[2].samplerTexture1Location=this.gl.getUniformLocation(this._shaderSets[2].shaderProgram,"s_texture1"),this._shaderSets[2].uniformMatrixLocation=this.gl.getUniformLocation(this._shaderSets[2].shaderProgram,"u_matrix"),this._shaderSets[2].uniformClipMatrixLocation=this.gl.getUniformLocation(this._shaderSets[2].shaderProgram,"u_clipMatrix"),this._shaderSets[2].uniformChannelFlagLocation=this.gl.getUniformLocation(this._shaderSets[2].shaderProgram,"u_channelFlag"),this._shaderSets[2].uniformBaseColorLocation=this.gl.getUniformLocation(this._shaderSets[2].shaderProgram,"u_baseColor"),this._shaderSets[3].attributePositionLocation=this.gl.getAttribLocation(this._shaderSets[3].shaderProgram,"a_position"),this._shaderSets[3].attributeTexCoordLocation=this.gl.getAttribLocation(this._shaderSets[3].shaderProgram,"a_texCoord"),this._shaderSets[3].samplerTexture0Location=this.gl.getUniformLocation(this._shaderSets[3].shaderProgram,"s_texture0"),this._shaderSets[3].samplerTexture1Location=this.gl.getUniformLocation(this._shaderSets[3].shaderProgram,"s_texture1"),this._shaderSets[3].uniformMatrixLocation=this.gl.getUniformLocation(this._shaderSets[3].shaderProgram,"u_matrix"),this._shaderSets[3].uniformClipMatrixLocation=this.gl.getUniformLocation(this._shaderSets[3].shaderProgram,"u_clipMatrix"),this._shaderSets[3].uniformChannelFlagLocation=this.gl.getUniformLocation(this._shaderSets[3].shaderProgram,"u_channelFlag"),this._shaderSets[3].uniformBaseColorLocation=this.gl.getUniformLocation(this._shaderSets[3].shaderProgram,"u_baseColor"),this._shaderSets[4].attributePositionLocation=this.gl.getAttribLocation(this._shaderSets[4].shaderProgram,"a_position"),this._shaderSets[4].attributeTexCoordLocation=this.gl.getAttribLocation(this._shaderSets[4].shaderProgram,"a_texCoord"),this._shaderSets[4].samplerTexture0Location=this.gl.getUniformLocation(this._shaderSets[4].shaderProgram,"s_texture0"),this._shaderSets[4].uniformMatrixLocation=this.gl.getUniformLocation(this._shaderSets[4].shaderProgram,"u_matrix"),this._shaderSets[4].uniformBaseColorLocation=this.gl.getUniformLocation(this._shaderSets[4].shaderProgram,"u_baseColor"),this._shaderSets[5].attributePositionLocation=this.gl.getAttribLocation(this._shaderSets[5].shaderProgram,"a_position"),this._shaderSets[5].attributeTexCoordLocation=this.gl.getAttribLocation(this._shaderSets[5].shaderProgram,"a_texCoord"),this._shaderSets[5].samplerTexture0Location=this.gl.getUniformLocation(this._shaderSets[5].shaderProgram,"s_texture0"),this._shaderSets[5].samplerTexture1Location=this.gl.getUniformLocation(this._shaderSets[5].shaderProgram,"s_texture1"),this._shaderSets[5].uniformMatrixLocation=this.gl.getUniformLocation(this._shaderSets[5].shaderProgram,"u_matrix"),this._shaderSets[5].uniformClipMatrixLocation=this.gl.getUniformLocation(this._shaderSets[5].shaderProgram,"u_clipMatrix"),this._shaderSets[5].uniformChannelFlagLocation=this.gl.getUniformLocation(this._shaderSets[5].shaderProgram,"u_channelFlag"),this._shaderSets[5].uniformBaseColorLocation=this.gl.getUniformLocation(this._shaderSets[5].shaderProgram,"u_baseColor"),this._shaderSets[6].attributePositionLocation=this.gl.getAttribLocation(this._shaderSets[6].shaderProgram,"a_position"),this._shaderSets[6].attributeTexCoordLocation=this.gl.getAttribLocation(this._shaderSets[6].shaderProgram,"a_texCoord"),this._shaderSets[6].samplerTexture0Location=this.gl.getUniformLocation(this._shaderSets[6].shaderProgram,"s_texture0"),this._shaderSets[6].samplerTexture1Location=this.gl.getUniformLocation(this._shaderSets[6].shaderProgram,"s_texture1"),this._shaderSets[6].uniformMatrixLocation=this.gl.getUniformLocation(this._shaderSets[6].shaderProgram,"u_matrix"),this._shaderSets[6].uniformClipMatrixLocation=this.gl.getUniformLocation(this._shaderSets[6].shaderProgram,"u_clipMatrix"),this._shaderSets[6].uniformChannelFlagLocation=this.gl.getUniformLocation(this._shaderSets[6].shaderProgram,"u_channelFlag"),this._shaderSets[6].uniformBaseColorLocation=this.gl.getUniformLocation(this._shaderSets[6].shaderProgram,"u_baseColor"),this._shaderSets[7].attributePositionLocation=this.gl.getAttribLocation(this._shaderSets[7].shaderProgram,"a_position"),this._shaderSets[7].attributeTexCoordLocation=this.gl.getAttribLocation(this._shaderSets[7].shaderProgram,"a_texCoord"),this._shaderSets[7].samplerTexture0Location=this.gl.getUniformLocation(this._shaderSets[7].shaderProgram,"s_texture0"),this._shaderSets[7].uniformMatrixLocation=this.gl.getUniformLocation(this._shaderSets[7].shaderProgram,"u_matrix"),this._shaderSets[7].uniformBaseColorLocation=this.gl.getUniformLocation(this._shaderSets[7].shaderProgram,"u_baseColor"),this._shaderSets[8].attributePositionLocation=this.gl.getAttribLocation(this._shaderSets[8].shaderProgram,"a_position"),this._shaderSets[8].attributeTexCoordLocation=this.gl.getAttribLocation(this._shaderSets[8].shaderProgram,"a_texCoord"),this._shaderSets[8].samplerTexture0Location=this.gl.getUniformLocation(this._shaderSets[8].shaderProgram,"s_texture0"),this._shaderSets[8].samplerTexture1Location=this.gl.getUniformLocation(this._shaderSets[8].shaderProgram,"s_texture1"),this._shaderSets[8].uniformMatrixLocation=this.gl.getUniformLocation(this._shaderSets[8].shaderProgram,"u_matrix"),this._shaderSets[8].uniformClipMatrixLocation=this.gl.getUniformLocation(this._shaderSets[8].shaderProgram,"u_clipMatrix"),this._shaderSets[8].uniformChannelFlagLocation=this.gl.getUniformLocation(this._shaderSets[8].shaderProgram,"u_channelFlag"),this._shaderSets[8].uniformBaseColorLocation=this.gl.getUniformLocation(this._shaderSets[8].shaderProgram,"u_baseColor"),this._shaderSets[9].attributePositionLocation=this.gl.getAttribLocation(this._shaderSets[9].shaderProgram,"a_position"),this._shaderSets[9].attributeTexCoordLocation=this.gl.getAttribLocation(this._shaderSets[9].shaderProgram,"a_texCoord"),this._shaderSets[9].samplerTexture0Location=this.gl.getUniformLocation(this._shaderSets[9].shaderProgram,"s_texture0"),this._shaderSets[9].samplerTexture1Location=this.gl.getUniformLocation(this._shaderSets[9].shaderProgram,"s_texture1"),this._shaderSets[9].uniformMatrixLocation=this.gl.getUniformLocation(this._shaderSets[9].shaderProgram,"u_matrix"),this._shaderSets[9].uniformClipMatrixLocation=this.gl.getUniformLocation(this._shaderSets[9].shaderProgram,"u_clipMatrix"),this._shaderSets[9].uniformChannelFlagLocation=this.gl.getUniformLocation(this._shaderSets[9].shaderProgram,"u_channelFlag"),this._shaderSets[9].uniformBaseColorLocation=this.gl.getUniformLocation(this._shaderSets[9].shaderProgram,"u_baseColor")}loadShaderProgram(t,r){let n=this.gl.createProgram(),i=this.compileShaderSource(this.gl.VERTEX_SHADER,t);if(!i)return cs("Vertex shader compile error!"),0;let o=this.compileShaderSource(this.gl.FRAGMENT_SHADER,r);return o?(this.gl.attachShader(n,i),this.gl.attachShader(n,o),this.gl.linkProgram(n),this.gl.getProgramParameter(n,this.gl.LINK_STATUS)?(this.gl.deleteShader(i),this.gl.deleteShader(o),n):(cs("Failed to link program: {0}",n),this.gl.deleteShader(i),this.gl.deleteShader(o),n&&this.gl.deleteProgram(n),0)):(cs("Vertex shader compile error!"),0)}compileShaderSource(t,r){const n=r,i=this.gl.createShader(t);if(this.gl.shaderSource(i,n),this.gl.compileShader(i),!i){const a=this.gl.getShaderInfoLog(i);cs("Shader compile log: {0} ",a)}return this.gl.getShaderParameter(i,this.gl.COMPILE_STATUS)?i:(this.gl.deleteShader(i),null)}setGl(t){this.gl=t}}var Su=(e=>(e[e.ShaderNames_SetupMask=0]="ShaderNames_SetupMask",e[e.ShaderNames_NormalPremultipliedAlpha=1]="ShaderNames_NormalPremultipliedAlpha",e[e.ShaderNames_NormalMaskedPremultipliedAlpha=2]="ShaderNames_NormalMaskedPremultipliedAlpha",e[e.ShaderNames_NomralMaskedInvertedPremultipliedAlpha=3]="ShaderNames_NomralMaskedInvertedPremultipliedAlpha",e[e.ShaderNames_AddPremultipliedAlpha=4]="ShaderNames_AddPremultipliedAlpha",e[e.ShaderNames_AddMaskedPremultipliedAlpha=5]="ShaderNames_AddMaskedPremultipliedAlpha",e[e.ShaderNames_AddMaskedPremultipliedAlphaInverted=6]="ShaderNames_AddMaskedPremultipliedAlphaInverted",e[e.ShaderNames_MultPremultipliedAlpha=7]="ShaderNames_MultPremultipliedAlpha",e[e.ShaderNames_MultMaskedPremultipliedAlpha=8]="ShaderNames_MultMaskedPremultipliedAlpha",e[e.ShaderNames_MultMaskedPremultipliedAlphaInverted=9]="ShaderNames_MultMaskedPremultipliedAlphaInverted",e))(Su||{});const xhe="attribute vec4     a_position;attribute vec2     a_texCoord;varying vec2       v_texCoord;varying vec4       v_myPos;uniform mat4       u_clipMatrix;void main(){   gl_Position = u_clipMatrix * a_position;   v_myPos = u_clipMatrix * a_position;   v_texCoord = a_texCoord;   v_texCoord.y = 1.0 - v_texCoord.y;}",bhe="precision mediump float;varying vec2       v_texCoord;varying vec4       v_myPos;uniform vec4       u_baseColor;uniform vec4       u_channelFlag;uniform sampler2D  s_texture0;void main(){   float isInside =        step(u_baseColor.x, v_myPos.x/v_myPos.w)       * step(u_baseColor.y, v_myPos.y/v_myPos.w)       * step(v_myPos.x/v_myPos.w, u_baseColor.z)       * step(v_myPos.y/v_myPos.w, u_baseColor.w);   gl_FragColor = u_channelFlag * texture2D(s_texture0, v_texCoord).a * isInside;}",She="attribute vec4     a_position;attribute vec2     a_texCoord;varying vec2       v_texCoord;uniform mat4       u_matrix;void main(){   gl_Position = u_matrix * a_position;   v_texCoord = a_texCoord;   v_texCoord.y = 1.0 - v_texCoord.y;}",aA="attribute vec4     a_position;attribute vec2     a_texCoord;varying vec2       v_texCoord;varying vec4       v_clipPos;uniform mat4       u_matrix;uniform mat4       u_clipMatrix;void main(){   gl_Position = u_matrix * a_position;   v_clipPos = u_clipMatrix * a_position;   v_texCoord = a_texCoord;   v_texCoord.y = 1.0 - v_texCoord.y;}",whe="precision mediump float;varying vec2       v_texCoord;uniform vec4       u_baseColor;uniform sampler2D  s_texture0;void main(){   gl_FragColor = texture2D(s_texture0 , v_texCoord) * u_baseColor;}",Ehe="precision mediump float;varying vec2       v_texCoord;varying vec4       v_clipPos;uniform vec4       u_baseColor;uniform vec4       u_channelFlag;uniform sampler2D  s_texture0;uniform sampler2D  s_texture1;void main(){   vec4 col_formask = texture2D(s_texture0 , v_texCoord) * u_baseColor;   vec4 clipMask = (1.0 - texture2D(s_texture1, v_clipPos.xy / v_clipPos.w)) * u_channelFlag;   float maskVal = clipMask.r + clipMask.g + clipMask.b + clipMask.a;   col_formask = col_formask * maskVal;   gl_FragColor = col_formask;}",The="precision mediump float;varying vec2 v_texCoord;varying vec4 v_clipPos;uniform sampler2D s_texture0;uniform sampler2D s_texture1;uniform vec4 u_channelFlag;uniform vec4 u_baseColor;void main(){vec4 col_formask = texture2D(s_texture0, v_texCoord) * u_baseColor;vec4 clipMask = (1.0 - texture2D(s_texture1, v_clipPos.xy / v_clipPos.w)) * u_channelFlag;float maskVal = clipMask.r + clipMask.g + clipMask.b + clipMask.a;col_formask = col_formask * (1.0 - maskVal);gl_FragColor = col_formask;}";class sF extends rS{constructor(){super(),this._clippingContextBufferForMask=null,this._clippingContextBufferForDraw=null,this._clippingManager=new $g,this.firstDraw=!0,this._textures={},this._sortedDrawableIndexList=[],this._bufferData={vertex:null,uv:null,index:null}}initialize(t){t.isUsingMasking()&&(this._clippingManager=new $g,this._clippingManager.initialize(t,t.getDrawableCount(),t.getDrawableMasks(),t.getDrawableMaskCounts()));for(let r=t.getDrawableCount()-1;r>=0;r--)this._sortedDrawableIndexList[r]=0;super.initialize(t)}bindTexture(t,r){this._textures[t]=r}getBindedTextures(){return this._textures}setClippingMaskBufferSize(t){this._clippingManager.release(),this._clippingManager=new $g,this._clippingManager.setClippingMaskBufferSize(t),this._clippingManager.initialize(this.getModel(),this.getModel().getDrawableCount(),this.getModel().getDrawableMasks(),this.getModel().getDrawableMaskCounts())}getClippingMaskBufferSize(){return this._clippingManager.getClippingMaskBufferSize()}release(){var t,r,n;const i=this;this._clippingManager.release(),i._clippingManager=void 0,(t=this.gl)==null||t.deleteBuffer(this._bufferData.vertex),this._bufferData.vertex=null,(r=this.gl)==null||r.deleteBuffer(this._bufferData.uv),this._bufferData.uv=null,(n=this.gl)==null||n.deleteBuffer(this._bufferData.index),this._bufferData.index=null,i._bufferData=void 0,i._textures=void 0}doDrawModel(){this.preDraw(),this._clippingManager!=null&&this._clippingManager.setupClippingContext(this.getModel(),this);const t=this.getModel().getDrawableCount(),r=this.getModel().getDrawableRenderOrders();for(let n=0;n<t;++n){const i=r[n];this._sortedDrawableIndexList[i]=n}for(let n=0;n<t;++n){const i=this._sortedDrawableIndexList[n];this.getModel().getDrawableDynamicFlagIsVisible(i)&&(this.setClippingContextBufferForDraw(this._clippingManager!=null?this._clippingManager.getClippingContextListForDraw()[i]:null),this.setIsCulling(this.getModel().getDrawableCulling(i)),this.drawMesh(this.getModel().getDrawableTextureIndices(i),this.getModel().getDrawableVertexIndexCount(i),this.getModel().getDrawableVertexCount(i),this.getModel().getDrawableVertexIndices(i),this.getModel().getDrawableVertices(i),this.getModel().getDrawableVertexUvs(i),this.getModel().getDrawableOpacity(i),this.getModel().getDrawableBlendMode(i),this.getModel().getDrawableInvertedMaskBit(i)))}}drawMesh(t,r,n,i,o,a,s,l,u){this.isCulling()?this.gl.enable(this.gl.CULL_FACE):this.gl.disable(this.gl.CULL_FACE),this.gl.frontFace(this.gl.CCW);const c=this.getModelColor();this.getClippingContextBufferForMask()==null&&(c.A*=s,this.isPremultipliedAlpha()&&(c.R*=c.A,c.G*=c.A,c.B*=c.A));let f=null;this._textures[t]!=null&&(f=this._textures[t]),Bs.getInstance().setupShaderProgram(this,f,n,o,i,a,this._bufferData,s,l,c,this.isPremultipliedAlpha(),this.getMvpMatrix(),u),this.gl.drawElements(this.gl.TRIANGLES,r,this.gl.UNSIGNED_SHORT,0),this.gl.useProgram(null),this.setClippingContextBufferForDraw(null),this.setClippingContextBufferForMask(null)}static doStaticRelease(){Bs.deleteInstance()}setRenderState(t,r){tx=t,bu=r}preDraw(){this.firstDraw&&(this.firstDraw=!1,this._anisortopy=this.gl.getExtension("EXT_texture_filter_anisotropic")||this.gl.getExtension("WEBKIT_EXT_texture_filter_anisotropic")||this.gl.getExtension("MOZ_EXT_texture_filter_anisotropic")),this.gl.disable(this.gl.SCISSOR_TEST),this.gl.disable(this.gl.STENCIL_TEST),this.gl.disable(this.gl.DEPTH_TEST),this.gl.frontFace(this.gl.CW),this.gl.enable(this.gl.BLEND),this.gl.colorMask(!0,!0,!0,!0),this.gl.bindBuffer(this.gl.ARRAY_BUFFER,null),this.gl.bindBuffer(this.gl.ELEMENT_ARRAY_BUFFER,null)}setClippingContextBufferForMask(t){this._clippingContextBufferForMask=t}getClippingContextBufferForMask(){return this._clippingContextBufferForMask}setClippingContextBufferForDraw(t){this._clippingContextBufferForDraw=t}getClippingContextBufferForDraw(){return this._clippingContextBufferForDraw}startUp(t){this.gl=t,this._clippingManager.setGL(t),Bs.getInstance().setGl(t)}}rS.staticRelease=()=>{sF.doStaticRelease()};const sA=new vn;class Che extends XL{constructor(t,r,n){super(),this.lipSync=!0,this.breath=aS.create(),this.renderer=new sF,this.idParamAngleX=che,this.idParamAngleY=fhe,this.idParamAngleZ=hhe,this.idParamEyeBallX=dhe,this.idParamEyeBallY=phe,this.idParamBodyAngleX=mhe,this.idParamBreath=vhe,this.pixelsPerUnit=1,this.centeringTransform=new gt,this.coreModel=t,this.settings=r,this.motionManager=new uhe(r,n),this.init()}init(){var t;super.init(),((t=this.settings.getEyeBlinkParameters())==null?void 0:t.length)>0&&(this.eyeBlink=aF.create(this.settings)),this.breath.setParameters([new au(this.idParamAngleX,0,15,6.5345,.5),new au(this.idParamAngleY,0,8,3.5345,.5),new au(this.idParamAngleZ,0,10,5.5345,.5),new au(this.idParamBodyAngleX,0,4,15.5345,.5),new au(this.idParamBreath,0,.5,3.2345,.5)]),this.renderer.initialize(this.coreModel),this.renderer.setIsPremultipliedAlpha(!0)}getSize(){return[this.coreModel.getModel().canvasinfo.CanvasWidth,this.coreModel.getModel().canvasinfo.CanvasHeight]}getLayout(){const t={};if(this.settings.layout)for(const r of Object.keys(this.settings.layout)){const n=r.charAt(0).toLowerCase()+r.slice(1);t[n]=this.settings.layout[r]}return t}setupLayout(){super.setupLayout(),this.pixelsPerUnit=this.coreModel.getModel().canvasinfo.PixelsPerUnit,this.centeringTransform.scale(this.pixelsPerUnit,this.pixelsPerUnit).translate(this.originalWidth/2,this.originalHeight/2)}updateWebGLContext(t,r){this.renderer.firstDraw=!0,this.renderer._bufferData={vertex:null,uv:null,index:null},this.renderer.startUp(t),this.renderer._clippingManager._currentFrameNo=r,this.renderer._clippingManager._maskTexture=void 0,Bs.getInstance()._shaderSets=[]}bindTexture(t,r){this.renderer.bindTexture(t,r)}getHitAreaDefs(){var t,r;return(r=(t=this.settings.hitAreas)==null?void 0:t.map(n=>({id:n.Id,name:n.Name,index:this.coreModel.getDrawableIndex(n.Id)})))!=null?r:[]}getDrawableIDs(){return this.coreModel.getDrawableIds()}getDrawableIndex(t){return this.coreModel.getDrawableIndex(t)}getDrawableVertices(t){if(typeof t=="string"&&(t=this.coreModel.getDrawableIndex(t),t===-1))throw new TypeError("Unable to find drawable ID: "+t);const r=this.coreModel.getDrawableVertices(t).slice();for(let n=0;n<r.length;n+=2)r[n]=r[n]*this.pixelsPerUnit+this.originalWidth/2,r[n+1]=-r[n+1]*this.pixelsPerUnit+this.originalHeight/2;return r}updateTransform(t){this.drawingMatrix.copyFrom(this.centeringTransform).prepend(this.localTransform).prepend(t)}update(t,r){var n,i,o,a;super.update(t,r),t/=1e3,r/=1e3;const s=this.coreModel;this.emit("beforeMotionUpdate");const l=this.motionManager.update(this.coreModel,r);this.emit("afterMotionUpdate"),s.saveParameters(),(n=this.motionManager.expressionManager)==null||n.update(s,r),l||(i=this.eyeBlink)==null||i.updateParameters(s,t),this.updateFocus(),this.updateNaturalMovements(t*1e3,r*1e3),(o=this.physics)==null||o.evaluate(s,t),(a=this.pose)==null||a.updateParameters(s,t),this.emit("beforeModelUpdate"),s.update(),s.loadParameters()}updateFocus(){this.coreModel.addParameterValueById(this.idParamEyeBallX,this.focusController.x),this.coreModel.addParameterValueById(this.idParamEyeBallY,this.focusController.y),this.coreModel.addParameterValueById(this.idParamAngleX,this.focusController.x*30),this.coreModel.addParameterValueById(this.idParamAngleY,this.focusController.y*30),this.coreModel.addParameterValueById(this.idParamAngleZ,this.focusController.x*this.focusController.y*-30),this.coreModel.addParameterValueById(this.idParamBodyAngleX,this.focusController.x*10)}updateNaturalMovements(t,r){var n;(n=this.breath)==null||n.updateParameters(this.coreModel,t/1e3)}draw(t){const r=this.drawingMatrix,n=sA.getArray();n[0]=r.a,n[1]=r.b,n[4]=-r.c,n[5]=-r.d,n[12]=r.tx,n[13]=r.ty,this.renderer.setMvpMatrix(sA),this.renderer.setRenderState(t.getParameter(t.FRAMEBUFFER_BINDING),this.viewport),this.renderer.drawModel()}destroy(){super.destroy(),this.renderer.release(),this.coreModel.release(),this.renderer=void 0,this.coreModel=void 0}}let Qf,lA=20;function Phe(){return Mc.isStarted()?Promise.resolve():(Qf??(Qf=new Promise((e,t)=>{function r(){try{Ahe(),e()}catch(n){if(lA--,lA<0){const i=new Error("Failed to start up Cubism 4 framework.");i.cause=n,t(i);return}rt.log("Cubism4","Startup failed, retrying 10ms later..."),setTimeout(r,10)}}r()})),Qf)}function Ahe(e){e=Object.assign({logFunction:console.log,loggingLevel:Va.LogLevel_Verbose},e),Mc.startUp(e),Mc.initialize()}const Ohe=.001,uA=.5;class sS{static create(t){const r=new sS;typeof t.FadeInTime=="number"&&(r._fadeTimeSeconds=t.FadeInTime,r._fadeTimeSeconds<=0&&(r._fadeTimeSeconds=uA));const n=t.Groups,i=n.length;for(let o=0;o<i;++o){const a=n[o],s=a.length;let l=0;for(let u=0;u<s;++u){const c=a[u],f=new kd;f.partId=c.Id;const h=c.Link;if(h){const d=h.length;for(let m=0;m<d;++m){const g=new kd;g.partId=h[m],f.link.push(g)}}r._partGroups.push(f),++l}r._partGroupCounts.push(l)}return r}updateParameters(t,r){t!=this._lastModel&&this.reset(t),this._lastModel=t,r<0&&(r=0);let n=0;for(let i=0;i<this._partGroupCounts.length;i++){const o=this._partGroupCounts[i];this.doFade(t,r,n,o),n+=o}this.copyPartOpacities(t)}reset(t){let r=0;for(let n=0;n<this._partGroupCounts.length;++n){const i=this._partGroupCounts[n];for(let o=r;o<r+i;++o){this._partGroups[o].initialize(t);const a=this._partGroups[o].partIndex,s=this._partGroups[o].parameterIndex;if(!(a<0)){t.setPartOpacityByIndex(a,o==r?1:0),t.setParameterValueByIndex(s,o==r?1:0);for(let l=0;l<this._partGroups[o].link.length;++l)this._partGroups[o].link[l].initialize(t)}}r+=i}}copyPartOpacities(t){for(let r=0;r<this._partGroups.length;++r){const n=this._partGroups[r];if(n.link.length==0)continue;const i=this._partGroups[r].partIndex,o=t.getPartOpacityByIndex(i);for(let a=0;a<n.link.length;++a){const l=n.link[a].partIndex;l<0||t.setPartOpacityByIndex(l,o)}}}doFade(t,r,n,i){let o=-1,a=1;const s=.5,l=.15;for(let u=n;u<n+i;++u){const c=this._partGroups[u].partIndex,f=this._partGroups[u].parameterIndex;if(t.getParameterValueByIndex(f)>Ohe){if(o>=0)break;o=u,a=t.getPartOpacityByIndex(c),a+=r/this._fadeTimeSeconds,a>1&&(a=1)}}o<0&&(o=0,a=1);for(let u=n;u<n+i;++u){const c=this._partGroups[u].partIndex;if(o==u)t.setPartOpacityByIndex(c,a);else{let f=t.getPartOpacityByIndex(c),h;a<s?h=a*(s-1)/s+1:h=(1-a)*s/(1-s),(1-h)*(1-a)>l&&(h=1-l/(1-a)),f>h&&(f=h),t.setPartOpacityByIndex(c,f)}}}constructor(){this._fadeTimeSeconds=uA,this._lastModel=void 0,this._partGroups=[],this._partGroupCounts=[]}}class kd{constructor(t){this.parameterIndex=0,this.partIndex=0,this.partId="",this.link=[],t!=null&&this.assignment(t)}assignment(t){return this.partId=t.partId,this.link=t.link.map(r=>r.clone()),this}initialize(t){this.parameterIndex=t.getParameterIndex(this.partId),this.partIndex=t.getPartIndex(this.partId),t.setParameterValueByIndex(this.parameterIndex,1)}clone(){const t=new kd;return t.partId=this.partId,t.parameterIndex=this.parameterIndex,t.partIndex=this.partIndex,t.link=this.link.map(r=>r.clone()),t}}class Ihe{update(){this._model.update(),this._model.drawables.resetDynamicFlags()}getCanvasWidth(){return this._model==null?0:this._model.canvasinfo.CanvasWidth/this._model.canvasinfo.PixelsPerUnit}getCanvasHeight(){return this._model==null?0:this._model.canvasinfo.CanvasHeight/this._model.canvasinfo.PixelsPerUnit}saveParameters(){const t=this._model.parameters.count,r=this._savedParameters.length;for(let n=0;n<t;++n)n<r?this._savedParameters[n]=this._parameterValues[n]:this._savedParameters.push(this._parameterValues[n])}getModel(){return this._model}getPartIndex(t){let r;const n=this._model.parts.count;for(r=0;r<n;++r)if(t==this._partIds[r])return r;return t in this._notExistPartId?this._notExistPartId[t]:(r=n+this._notExistPartId.length,this._notExistPartId[t]=r,this._notExistPartOpacities[r]=0,r)}getPartCount(){return this._model.parts.count}setPartOpacityByIndex(t,r){if(t in this._notExistPartOpacities){this._notExistPartOpacities[t]=r;return}Jf(0<=t&&t<this.getPartCount()),this._partOpacities[t]=r}setPartOpacityById(t,r){const n=this.getPartIndex(t);n<0||this.setPartOpacityByIndex(n,r)}getPartOpacityByIndex(t){return t in this._notExistPartOpacities?this._notExistPartOpacities[t]:(Jf(0<=t&&t<this.getPartCount()),this._partOpacities[t])}getPartOpacityById(t){const r=this.getPartIndex(t);return r<0?0:this.getPartOpacityByIndex(r)}getParameterIndex(t){let r;const n=this._model.parameters.count;for(r=0;r<n;++r)if(t==this._parameterIds[r])return r;return t in this._notExistParameterId?this._notExistParameterId[t]:(r=this._model.parameters.count+Object.keys(this._notExistParameterId).length,this._notExistParameterId[t]=r,this._notExistParameterValues[r]=0,r)}getParameterCount(){return this._model.parameters.count}getParameterMaximumValue(t){return this._model.parameters.maximumValues[t]}getParameterMinimumValue(t){return this._model.parameters.minimumValues[t]}getParameterDefaultValue(t){return this._model.parameters.defaultValues[t]}getParameterValueByIndex(t){return t in this._notExistParameterValues?this._notExistParameterValues[t]:(Jf(0<=t&&t<this.getParameterCount()),this._parameterValues[t])}getParameterValueById(t){const r=this.getParameterIndex(t);return this.getParameterValueByIndex(r)}setParameterValueByIndex(t,r,n=1){if(t in this._notExistParameterValues){this._notExistParameterValues[t]=n==1?r:this._notExistParameterValues[t]*(1-n)+r*n;return}Jf(0<=t&&t<this.getParameterCount()),this._model.parameters.maximumValues[t]<r&&(r=this._model.parameters.maximumValues[t]),this._model.parameters.minimumValues[t]>r&&(r=this._model.parameters.minimumValues[t]),this._parameterValues[t]=n==1?r:this._parameterValues[t]=this._parameterValues[t]*(1-n)+r*n}setParameterValueById(t,r,n=1){const i=this.getParameterIndex(t);this.setParameterValueByIndex(i,r,n)}addParameterValueByIndex(t,r,n=1){this.setParameterValueByIndex(t,this.getParameterValueByIndex(t)+r*n)}addParameterValueById(t,r,n=1){const i=this.getParameterIndex(t);this.addParameterValueByIndex(i,r,n)}multiplyParameterValueById(t,r,n=1){const i=this.getParameterIndex(t);this.multiplyParameterValueByIndex(i,r,n)}multiplyParameterValueByIndex(t,r,n=1){this.setParameterValueByIndex(t,this.getParameterValueByIndex(t)*(1+(r-1)*n))}getDrawableIds(){return this._drawableIds.slice()}getDrawableIndex(t){const r=this._model.drawables.count;for(let n=0;n<r;++n)if(this._drawableIds[n]==t)return n;return-1}getDrawableCount(){return this._model.drawables.count}getDrawableId(t){return this._model.drawables.ids[t]}getDrawableRenderOrders(){return this._model.drawables.renderOrders}getDrawableTextureIndices(t){return this._model.drawables.textureIndices[t]}getDrawableDynamicFlagVertexPositionsDidChange(t){const r=this._model.drawables.dynamicFlags;return Live2DCubismCore.Utils.hasVertexPositionsDidChangeBit(r[t])}getDrawableVertexIndexCount(t){return this._model.drawables.indexCounts[t]}getDrawableVertexCount(t){return this._model.drawables.vertexCounts[t]}getDrawableVertices(t){return this.getDrawableVertexPositions(t)}getDrawableVertexIndices(t){return this._model.drawables.indices[t]}getDrawableVertexPositions(t){return this._model.drawables.vertexPositions[t]}getDrawableVertexUvs(t){return this._model.drawables.vertexUvs[t]}getDrawableOpacity(t){return this._model.drawables.opacities[t]}getDrawableCulling(t){const r=this._model.drawables.constantFlags;return!Live2DCubismCore.Utils.hasIsDoubleSidedBit(r[t])}getDrawableBlendMode(t){const r=this._model.drawables.constantFlags;return Live2DCubismCore.Utils.hasBlendAdditiveBit(r[t])?Eo.CubismBlendMode_Additive:Live2DCubismCore.Utils.hasBlendMultiplicativeBit(r[t])?Eo.CubismBlendMode_Multiplicative:Eo.CubismBlendMode_Normal}getDrawableInvertedMaskBit(t){const r=this._model.drawables.constantFlags;return Live2DCubismCore.Utils.hasIsInvertedMaskBit(r[t])}getDrawableMasks(){return this._model.drawables.masks}getDrawableMaskCounts(){return this._model.drawables.maskCounts}isUsingMasking(){for(let t=0;t<this._model.drawables.count;++t)if(!(this._model.drawables.maskCounts[t]<=0))return!0;return!1}getDrawableDynamicFlagIsVisible(t){const r=this._model.drawables.dynamicFlags;return Live2DCubismCore.Utils.hasIsVisibleBit(r[t])}getDrawableDynamicFlagVisibilityDidChange(t){const r=this._model.drawables.dynamicFlags;return Live2DCubismCore.Utils.hasVisibilityDidChangeBit(r[t])}getDrawableDynamicFlagOpacityDidChange(t){const r=this._model.drawables.dynamicFlags;return Live2DCubismCore.Utils.hasOpacityDidChangeBit(r[t])}getDrawableDynamicFlagRenderOrderDidChange(t){const r=this._model.drawables.dynamicFlags;return Live2DCubismCore.Utils.hasRenderOrderDidChangeBit(r[t])}loadParameters(){let t=this._model.parameters.count;const r=this._savedParameters.length;t>r&&(t=r);for(let n=0;n<t;++n)this._parameterValues[n]=this._savedParameters[n]}initialize(){this._parameterValues=this._model.parameters.values,this._partOpacities=this._model.parts.opacities,this._parameterMaximumValues=this._model.parameters.maximumValues,this._parameterMinimumValues=this._model.parameters.minimumValues;{const t=this._model.parameters.ids,r=this._model.parameters.count;for(let n=0;n<r;++n)this._parameterIds.push(t[n])}{const t=this._model.parts.ids,r=this._model.parts.count;for(let n=0;n<r;++n)this._partIds.push(t[n])}{const t=this._model.drawables.ids,r=this._model.drawables.count;for(let n=0;n<r;++n)this._drawableIds.push(t[n])}}constructor(t){this._model=t,this._savedParameters=[],this._parameterIds=[],this._drawableIds=[],this._partIds=[],this._notExistPartId={},this._notExistParameterId={},this._notExistParameterValues={},this._notExistPartOpacities={},this.initialize()}release(){this._model.release(),this._model=void 0}}class lS{static create(t){const r=Live2DCubismCore.Moc.fromArrayBuffer(t);if(r)return new lS(r);throw new Error("Unknown error")}createModel(){let t;const r=Live2DCubismCore.Model.fromMoc(this._moc);if(r)return t=new Ihe(r),++this._modelCount,t;throw new Error("Unknown error")}deleteModel(t){t!=null&&--this._modelCount}constructor(t){this._moc=t,this._modelCount=0}release(){this._moc._release(),this._moc=void 0}}var rx=(e=>(e[e.CubismPhysicsTargetType_Parameter=0]="CubismPhysicsTargetType_Parameter",e))(rx||{}),sa=(e=>(e[e.CubismPhysicsSource_X=0]="CubismPhysicsSource_X",e[e.CubismPhysicsSource_Y=1]="CubismPhysicsSource_Y",e[e.CubismPhysicsSource_Angle=2]="CubismPhysicsSource_Angle",e))(sa||{});class Mhe{constructor(){this.initialPosition=new _e(0,0),this.position=new _e(0,0),this.lastPosition=new _e(0,0),this.lastGravity=new _e(0,0),this.force=new _e(0,0),this.velocity=new _e(0,0)}}class Rhe{constructor(){this.normalizationPosition={},this.normalizationAngle={}}}class khe{constructor(){this.source={}}}class Lhe{constructor(){this.destination={},this.translationScale=new _e(0,0)}}class Fhe{constructor(){this.settings=[],this.inputs=[],this.outputs=[],this.particles=[],this.gravity=new _e(0,0),this.wind=new _e(0,0)}}class Dhe{constructor(t){this._json=t}release(){this._json=void 0}getGravity(){const t=new _e(0,0);return t.x=this._json.Meta.EffectiveForces.Gravity.X,t.y=this._json.Meta.EffectiveForces.Gravity.Y,t}getWind(){const t=new _e(0,0);return t.x=this._json.Meta.EffectiveForces.Wind.X,t.y=this._json.Meta.EffectiveForces.Wind.Y,t}getSubRigCount(){return this._json.Meta.PhysicsSettingCount}getTotalInputCount(){return this._json.Meta.TotalInputCount}getTotalOutputCount(){return this._json.Meta.TotalOutputCount}getVertexCount(){return this._json.Meta.VertexCount}getNormalizationPositionMinimumValue(t){return this._json.PhysicsSettings[t].Normalization.Position.Minimum}getNormalizationPositionMaximumValue(t){return this._json.PhysicsSettings[t].Normalization.Position.Maximum}getNormalizationPositionDefaultValue(t){return this._json.PhysicsSettings[t].Normalization.Position.Default}getNormalizationAngleMinimumValue(t){return this._json.PhysicsSettings[t].Normalization.Angle.Minimum}getNormalizationAngleMaximumValue(t){return this._json.PhysicsSettings[t].Normalization.Angle.Maximum}getNormalizationAngleDefaultValue(t){return this._json.PhysicsSettings[t].Normalization.Angle.Default}getInputCount(t){return this._json.PhysicsSettings[t].Input.length}getInputWeight(t,r){return this._json.PhysicsSettings[t].Input[r].Weight}getInputReflect(t,r){return this._json.PhysicsSettings[t].Input[r].Reflect}getInputType(t,r){return this._json.PhysicsSettings[t].Input[r].Type}getInputSourceId(t,r){return this._json.PhysicsSettings[t].Input[r].Source.Id}getOutputCount(t){return this._json.PhysicsSettings[t].Output.length}getOutputVertexIndex(t,r){return this._json.PhysicsSettings[t].Output[r].VertexIndex}getOutputAngleScale(t,r){return this._json.PhysicsSettings[t].Output[r].Scale}getOutputWeight(t,r){return this._json.PhysicsSettings[t].Output[r].Weight}getOutputDestinationId(t,r){return this._json.PhysicsSettings[t].Output[r].Destination.Id}getOutputType(t,r){return this._json.PhysicsSettings[t].Output[r].Type}getOutputReflect(t,r){return this._json.PhysicsSettings[t].Output[r].Reflect}getParticleCount(t){return this._json.PhysicsSettings[t].Vertices.length}getParticleMobility(t,r){return this._json.PhysicsSettings[t].Vertices[r].Mobility}getParticleDelay(t,r){return this._json.PhysicsSettings[t].Vertices[r].Delay}getParticleAcceleration(t,r){return this._json.PhysicsSettings[t].Vertices[r].Acceleration}getParticleRadius(t,r){return this._json.PhysicsSettings[t].Vertices[r].Radius}getParticlePosition(t,r){const n=new _e(0,0);return n.x=this._json.PhysicsSettings[t].Vertices[r].Position.X,n.y=this._json.PhysicsSettings[t].Vertices[r].Position.Y,n}}const cA="X",fA="Y",hA="Angle",Nhe=5,lF=100,Bhe=.001;class uS{static create(t){const r=new uS;return r.parse(t),r._physicsRig.gravity.y=0,r}evaluate(t,r){let n,i,o,a;const s=new _e;let l,u,c,f,h,d,m,g;h=t.getModel().parameters.values,d=t.getModel().parameters.maximumValues,m=t.getModel().parameters.minimumValues,g=t.getModel().parameters.defaultValues;for(let p=0;p<this._physicsRig.subRigCount;++p){n={angle:0},s.x=0,s.y=0,l=this._physicsRig.settings[p],u=this._physicsRig.inputs.slice(l.baseInputIndex),c=this._physicsRig.outputs.slice(l.baseOutputIndex),f=this._physicsRig.particles.slice(l.baseParticleIndex);for(let v=0;v<l.inputCount;++v)i=u[v].weight/lF,u[v].sourceParameterIndex==-1&&(u[v].sourceParameterIndex=t.getParameterIndex(u[v].source.id)),u[v].getNormalizedParameterValue(s,n,h[u[v].sourceParameterIndex],m[u[v].sourceParameterIndex],d[u[v].sourceParameterIndex],g[u[v].sourceParameterIndex],l.normalizationPosition,l.normalizationAngle,u[v].reflect,i);o=at.degreesToRadian(-n.angle),s.x=s.x*at.cos(o)-s.y*at.sin(o),s.y=s.x*at.sin(o)+s.y*at.cos(o),Zhe(f,l.particleCount,s,n.angle,this._options.wind,Bhe*l.normalizationPosition.maximum,r,Nhe);for(let v=0;v<l.outputCount;++v){const y=c[v].vertexIndex;if(y<1||y>=l.particleCount)break;c[v].destinationParameterIndex==-1&&(c[v].destinationParameterIndex=t.getParameterIndex(c[v].destination.id));const _=new _e;_.x=f[y].position.x-f[y-1].position.x,_.y=f[y].position.y-f[y-1].position.y,a=c[v].getValue(_,f,y,c[v].reflect,this._options.gravity);const x=c[v].destinationParameterIndex,b=!Float32Array.prototype.slice&&"subarray"in Float32Array.prototype?JSON.parse(JSON.stringify(h.subarray(x))):h.slice(x);Jhe(b,m[x],d[x],a,c[v]);for(let S=x,E=0;S<h.length;S++,E++)h[S]=b[E]}}}setOptions(t){this._options=t}getOption(){return this._options}constructor(){this._options=new jhe,this._options.gravity.y=-1,this._options.gravity.x=0,this._options.wind.x=0,this._options.wind.y=0}release(){this._physicsRig=void 0}parse(t){this._physicsRig=new Fhe;let r=new Dhe(t);this._physicsRig.gravity=r.getGravity(),this._physicsRig.wind=r.getWind(),this._physicsRig.subRigCount=r.getSubRigCount();let n=0,i=0,o=0;for(let a=0;a<this._physicsRig.subRigCount;++a){const s=new Rhe;s.normalizationPosition.minimum=r.getNormalizationPositionMinimumValue(a),s.normalizationPosition.maximum=r.getNormalizationPositionMaximumValue(a),s.normalizationPosition.defalut=r.getNormalizationPositionDefaultValue(a),s.normalizationAngle.minimum=r.getNormalizationAngleMinimumValue(a),s.normalizationAngle.maximum=r.getNormalizationAngleMaximumValue(a),s.normalizationAngle.defalut=r.getNormalizationAngleDefaultValue(a),s.inputCount=r.getInputCount(a),s.baseInputIndex=n,n+=s.inputCount;for(let l=0;l<s.inputCount;++l){const u=new khe;switch(u.sourceParameterIndex=-1,u.weight=r.getInputWeight(a,l),u.reflect=r.getInputReflect(a,l),r.getInputType(a,l)){case cA:u.type=sa.CubismPhysicsSource_X,u.getNormalizedParameterValue=Uhe;break;case fA:u.type=sa.CubismPhysicsSource_Y,u.getNormalizedParameterValue=$he;break;case hA:u.type=sa.CubismPhysicsSource_Angle,u.getNormalizedParameterValue=Ghe;break}u.source.targetType=rx.CubismPhysicsTargetType_Parameter,u.source.id=r.getInputSourceId(a,l),this._physicsRig.inputs.push(u)}s.outputCount=r.getOutputCount(a),s.baseOutputIndex=i,i+=s.outputCount;for(let l=0;l<s.outputCount;++l){const u=new Lhe;switch(u.destinationParameterIndex=-1,u.vertexIndex=r.getOutputVertexIndex(a,l),u.angleScale=r.getOutputAngleScale(a,l),u.weight=r.getOutputWeight(a,l),u.destination.targetType=rx.CubismPhysicsTargetType_Parameter,u.destination.id=r.getOutputDestinationId(a,l),r.getOutputType(a,l)){case cA:u.type=sa.CubismPhysicsSource_X,u.getValue=zhe,u.getScale=qhe;break;case fA:u.type=sa.CubismPhysicsSource_Y,u.getValue=Vhe,u.getScale=Yhe;break;case hA:u.type=sa.CubismPhysicsSource_Angle,u.getValue=Hhe,u.getScale=Khe;break}u.reflect=r.getOutputReflect(a,l),this._physicsRig.outputs.push(u)}s.particleCount=r.getParticleCount(a),s.baseParticleIndex=o,o+=s.particleCount;for(let l=0;l<s.particleCount;++l){const u=new Mhe;u.mobility=r.getParticleMobility(a,l),u.delay=r.getParticleDelay(a,l),u.acceleration=r.getParticleAcceleration(a,l),u.radius=r.getParticleRadius(a,l),u.position=r.getParticlePosition(a,l),this._physicsRig.particles.push(u)}this._physicsRig.settings.push(s)}this.initialize(),r.release()}initialize(){let t,r,n;for(let i=0;i<this._physicsRig.subRigCount;++i){r=this._physicsRig.settings[i],t=this._physicsRig.particles.slice(r.baseParticleIndex),t[0].initialPosition=new _e(0,0),t[0].lastPosition=new _e(t[0].initialPosition.x,t[0].initialPosition.y),t[0].lastGravity=new _e(0,-1),t[0].lastGravity.y*=-1,t[0].velocity=new _e(0,0),t[0].force=new _e(0,0);for(let o=1;o<r.particleCount;++o)n=new _e(0,0),n.y=t[o].radius,t[o].initialPosition=new _e(t[o-1].initialPosition.x+n.x,t[o-1].initialPosition.y+n.y),t[o].position=new _e(t[o].initialPosition.x,t[o].initialPosition.y),t[o].lastPosition=new _e(t[o].initialPosition.x,t[o].initialPosition.y),t[o].lastGravity=new _e(0,-1),t[o].lastGravity.y*=-1,t[o].velocity=new _e(0,0),t[o].force=new _e(0,0)}}}let jhe=class{constructor(){this.gravity=new _e(0,0),this.wind=new _e(0,0)}};function Uhe(e,t,r,n,i,o,a,s,l,u){e.x+=cS(r,n,i,o,a.minimum,a.maximum,a.defalut,l)*u}function $he(e,t,r,n,i,o,a,s,l,u){e.y+=cS(r,n,i,o,a.minimum,a.maximum,a.defalut,l)*u}function Ghe(e,t,r,n,i,o,a,s,l,u){t.angle+=cS(r,n,i,o,s.minimum,s.maximum,s.defalut,l)*u}function zhe(e,t,r,n,i){let o=e.x;return n&&(o*=-1),o}function Vhe(e,t,r,n,i){let o=e.y;return n&&(o*=-1),o}function Hhe(e,t,r,n,i){let o;return r>=2?i=t[r-1].position.substract(t[r-2].position):i=i.multiplyByScaler(-1),o=at.directionToRadian(i,e),n&&(o*=-1),o}function Whe(e,t){return Math.abs(Math.max(e,t)-Math.min(e,t))}function Xhe(e,t){return Math.min(e,t)+Whe(e,t)/2}function qhe(e,t){return e.x}function Yhe(e,t){return e.y}function Khe(e,t){return t}function Zhe(e,t,r,n,i,o,a,s){let l,u,c,f,h=new _e(0,0),d=new _e(0,0),m=new _e(0,0),g=new _e(0,0);e[0].position=new _e(r.x,r.y),l=at.degreesToRadian(n),f=at.radianToDirection(l),f.normalize();for(let p=1;p<t;++p)e[p].force=f.multiplyByScaler(e[p].acceleration).add(i),e[p].lastPosition=new _e(e[p].position.x,e[p].position.y),u=e[p].delay*a*30,h=e[p].position.substract(e[p-1].position),c=at.directionToRadian(e[p].lastGravity,f)/s,h.x=at.cos(c)*h.x-h.y*at.sin(c),h.y=at.sin(c)*h.x+h.y*at.cos(c),e[p].position=e[p-1].position.add(h),d=e[p].velocity.multiplyByScaler(u),m=e[p].force.multiplyByScaler(u).multiplyByScaler(u),e[p].position=e[p].position.add(d).add(m),g=e[p].position.substract(e[p-1].position),g.normalize(),e[p].position=e[p-1].position.add(g.multiplyByScaler(e[p].radius)),at.abs(e[p].position.x)<o&&(e[p].position.x=0),u!=0&&(e[p].velocity=e[p].position.substract(e[p].lastPosition),e[p].velocity=e[p].velocity.divisionByScalar(u),e[p].velocity=e[p].velocity.multiplyByScaler(e[p].mobility)),e[p].force=new _e(0,0),e[p].lastGravity=new _e(f.x,f.y)}function Jhe(e,t,r,n,i){let o,a,s;o=i.getScale(i.translationScale,i.angleScale),a=n*o,a<t?(a<i.valueBelowMinimum&&(i.valueBelowMinimum=a),a=t):a>r&&(a>i.valueExceededMaximum&&(i.valueExceededMaximum=a),a=r),s=i.weight/lF,s>=1||(a=e[0]*(1-s)+a*s),e[0]=a}function cS(e,t,r,n,i,o,a,s){let l=0;const u=at.max(r,t);u<e&&(e=u);const c=at.min(r,t);c>e&&(e=c);const f=at.min(i,o),h=at.max(i,o),d=a,m=Xhe(c,u),g=e-m;switch(Math.sign(g)){case 1:{const p=h-d,v=u-m;v!=0&&(l=g*(p/v),l+=d);break}case-1:{const p=f-d,v=c-m;v!=0&&(l=g*(p/v),l+=d);break}case 0:{l=d;break}}return s?l:l*-1}yt.registerRuntime({version:4,ready:Phe,test(e){return e instanceof Ns||Ns.isValidJSON(e)},isValidMoc(e){if(e.byteLength<4)return!1;const t=new Int8Array(e,0,4);return String.fromCharCode(...t)==="MOC3"},createModelSettings(e){return new Ns(e)},createCoreModel(e){const t=lS.create(e);try{const r=t.createModel();return r.__moc=t,r}catch(r){try{t.release()}catch{}throw r}},createInternalModel(e,t,r){const n=new Che(e,t,r),i=e;return i.__moc&&(n.__moc=i.__moc,delete i.__moc,n.once("destroy",Qhe)),n},createPhysics(e,t){return uS.create(t)},createPose(e,t){return sS.create(t)}});function Qhe(){var e;(e=this.__moc)==null||e.release()}window.PIXI=Vle;class fi{constructor(){oe(this,"currentApp",null);oe(this,"effectsContainer");oe(this,"frameDuration",16.67);oe(this,"notUpdateBacklogEffects",!1);oe(this,"figureContainer");oe(this,"figureObjects",[]);oe(this,"stageWidth",Md.width);oe(this,"stageHeight",Md.height);oe(this,"assetLoader",new Js);oe(this,"backgroundContainer");oe(this,"backgroundObjects",[]);oe(this,"addSpineFigure",vfe.bind(this));oe(this,"addSpineBg",gfe.bind(this));oe(this,"stageAnimations",[]);oe(this,"loadQueue",[]);oe(this,"live2dFigureRecorder",[]);oe(this,"lockTransformTarget",[]);oe(this,"MAX_TEX_COUNT",10);const t=new q1({backgroundAlpha:0,preserveDrawingBuffer:!0});window.PIXIapp=this,window.__PIXI_APP__=t;const r=document.getElementById("pixiContianer");r&&(r.innerHTML="",r.appendChild(t.view)),t.renderer.view.style.position="absolute",t.renderer.view.style.display="block",t.renderer.view.id="pixiCanvas",t.renderer.autoResize=!0;const n=document.getElementById("root");n&&t.renderer.resize(n.clientWidth,n.clientHeight),Q1&&(t.renderer.view.style.zIndex="-5"),t.stage.sortableChildren=!0,this.effectsContainer=new _r,this.effectsContainer.zIndex=3,this.figureContainer=new _r,this.figureContainer.sortableChildren=!0,this.figureContainer.zIndex=2,this.backgroundContainer=new _r,this.backgroundContainer.zIndex=0,t.stage.addChild(this.effectsContainer,this.figureContainer,this.backgroundContainer),this.currentApp=t;const i=()=>{this.updateFps(),setTimeout(i,1e4)};i();const o=()=>{setTimeout(o,500),this.callLoader()};o()}static assignTransform(t,r){if(!r)return;const n=t.scale,i=t.position;t.scale&&Object.assign(n,r.scale),t.position&&Object.assign(i,r.position),Object.assign(t,r),t.scale=n,t.position=i}getFigureObjects(){return this.figureObjects}getAllLockedObject(){return this.lockTransformTarget}registerAnimation(t,r,n="default"){var i;t&&(this.stageAnimations.push({uuid:eo(),animationObject:t,key:r,targetKey:n,type:"common"}),this.lockStageObject(n),t.setStartState(),(i=this.currentApp)==null||i.ticker.add(t.tickerFunc))}registerPresetAnimation(t,r,n="default",i){var a;if(!t)return;const o=i.find(s=>s.target===n);if(o){const s=this.getStageObjByKey(n);if(s){const l=s.pixiContainer;fi.assignTransform(l,o.transform)}return}this.stageAnimations.push({uuid:eo(),animationObject:t,key:r,targetKey:n,type:"preset"}),this.lockStageObject(n),t.setStartState(),(a=this.currentApp)==null||a.ticker.add(t.tickerFunc)}stopPresetAnimationOnTarget(t){const r=this.stageAnimations.find(n=>n.targetKey===t&&n.type==="preset");r&&this.removeAnimation(r.key)}removeAnimation(t){var n;const r=this.stageAnimations.findIndex(i=>i.key===t);if(r>=0){const i=this.stageAnimations[r];(n=this.currentApp)==null||n.ticker.remove(i.animationObject.tickerFunc),i.animationObject.setEndState(),this.unlockStageObject(i.targetKey??"default"),this.stageAnimations.splice(r,1)}}removeAnimationWithSetEffects(t){var n,i,o;const r=this.stageAnimations.findIndex(a=>a.key===t);if(r>=0){const a=this.stageAnimations[r];(n=this.currentApp)==null||n.ticker.remove(a.animationObject.tickerFunc),a.animationObject.setEndState();const s=((o=(i=a.animationObject).getEndFilterEffect)==null?void 0:o.call(i))??{};if(this.unlockStageObject(a.targetKey??"default"),a.targetKey){const l=this.getStageObjByKey(a.targetKey);if(l){const u={alpha:l.pixiContainer.alphaFilterVal,scale:{x:l.pixiContainer.scale.x,y:l.pixiContainer.scale.y},position:{x:l.pixiContainer.x,y:l.pixiContainer.y},rotation:l.pixiContainer.rotation,blur:l.pixiContainer.blur,...s};let c={target:a.targetKey,transform:u};N.dispatch(Ut.updateEffect(c))}}this.stageAnimations.splice(r,1)}}performMouthSyncAnimation(t,r,n,i){var s;const o=(s=this.getStageObjByKey(t))==null?void 0:s.pixiContainer;if(!o)return;const a={open:r.mouthAnimation.open,half_open:r.mouthAnimation.halfOpen,closed:r.mouthAnimation.close};this.loadAsset(a[n],()=>{var c;const l=this.assetLoader.resources[a[n]].texture,u=(c=o==null?void 0:o.children)==null?void 0:c[0];!l||!u||(u.texture=l)})}performBlinkAnimation(t,r,n,i){var s;const o=(s=this.getStageObjByKey(t))==null?void 0:s.pixiContainer;if(!o)return;const a={open:r.blinkAnimation.open,closed:r.blinkAnimation.close};this.loadAsset(a[n],()=>{var c;const l=this.assetLoader.resources[a[n]].texture,u=(c=o==null?void 0:o.children)==null?void 0:c[0];!l||!u||(u.texture=l)})}addBg(t,r){var u,c;const n=this.assetLoader,i=new ys;this.backgroundObjects.findIndex(f=>f.key===t)>=0&&this.removeStageObjectByKey(t),this.backgroundContainer.addChild(i);const s=eo();this.backgroundObjects.push({uuid:s,key:t,pixiContainer:i,sourceUrl:r,sourceType:"img",sourceExt:this.getExtName(r)});const l=()=>{setTimeout(()=>{var h,d;const f=(d=(h=n.resources)==null?void 0:h[r])==null?void 0:d.texture;if(f&&this.getStageObjByUuid(s)){const m=f.width,g=f.height,p=this.stageWidth/m,v=this.stageHeight/g,y=Math.max(p,v),_=new ji(f);_.scale.x=y,_.scale.y=y,_.anchor.set(.5),_.position.y=this.stageHeight/2,i.setBaseX(this.stageWidth/2),i.setBaseY(this.stageHeight/2),i.pivot.set(0,this.stageHeight/2),i.addChild(_)}},0)};this.cacheGC(),(c=(u=n.resources)==null?void 0:u[r])!=null&&c.texture?l():this.loadAsset(r,l)}addVideoBg(t,r){var u,c;const n=this.assetLoader,i=new ys;this.backgroundObjects.findIndex(f=>f.key===t)>=0&&this.removeStageObjectByKey(t),this.backgroundContainer.addChild(i);const s=eo();this.backgroundObjects.push({uuid:s,key:t,pixiContainer:i,sourceUrl:r,sourceType:"video",sourceExt:this.getExtName(r)});const l=()=>{setTimeout(()=>{console.debug("start loaded video: "+r);const f=document.createElement("video"),h=new Up(f);h.src=r,h.source.preload="auto",h.source.muted=!0,h.source.loop=!0,h.source.autoplay=!0,h.source.src=r;const d=pe.from(h);d&&this.getStageObjByUuid(s)&&d.baseTexture.resource.load().then(()=>{const m=h.source.videoWidth,g=h.source.videoHeight,p=this.stageWidth/m,v=this.stageHeight/g,y=Math.max(p,v),_=new ji(d);_.scale.x=y,_.scale.y=y,_.anchor.set(.5),_.position.y=this.stageHeight/2,i.setBaseX(this.stageWidth/2),i.setBaseY(this.stageHeight/2),i.pivot.set(0,this.stageHeight/2),i.addChild(_)})},0)};this.cacheGC(),(c=(u=n.resources)==null?void 0:u[r])!=null&&c.texture?l():this.loadAsset(r,l)}addFigure(t,r,n="center"){var f,h;const i=this.assetLoader,o=new ys;this.figureObjects.findIndex(d=>d.key===t)>=0&&this.removeStageObjectByKey(t);const l=this.getFigureMetadataByKey(t);l&&l.zIndex&&(o.zIndex=l.zIndex),this.figureContainer.addChild(o);const u=eo();this.figureObjects.push({uuid:u,key:t,pixiContainer:o,sourceUrl:r,sourceType:"img",sourceExt:this.getExtName(r)});const c=()=>{setTimeout(()=>{var m,g;const d=(g=(m=i.resources)==null?void 0:m[r])==null?void 0:g.texture;if(d&&this.getStageObjByUuid(u)){const p=d.width,v=d.height,y=this.stageWidth/p,_=this.stageHeight/v,x=Math.min(y,_),b=new ji(d);b.scale.x=x,b.scale.y=x,b.anchor.set(.5),b.position.y=this.stageHeight/2;const S=p*x,E=v*x;o.setBaseY(this.stageHeight/2),E<this.stageHeight&&o.setBaseY(this.stageHeight/2+this.stageHeight-E/2),n==="center"&&o.setBaseX(this.stageWidth/2),n==="left"&&o.setBaseX(S/2),n==="right"&&o.setBaseX(this.stageWidth-S/2),o.pivot.set(0,this.stageHeight/2),o.addChild(b)}},0)};this.cacheGC(),(h=(f=i.resources)==null?void 0:f[r])!=null&&h.texture?c():this.loadAsset(r,c)}addLive2dFigure(t,r,n,i,o){let a=this.stageWidth,s=this.stageHeight;te.debug("Using motion:",i),_fe.push(r);const l=this.assetLoader,u=new ys;this.figureObjects.findIndex(p=>p.key===t)>=0&&this.removeStageObjectByKey(t);const h=this.getFigureMetadataByKey(t);h&&h.zIndex&&(u.zIndex=h.zIndex),this.figureContainer.addChild(u),this.figureObjects.push({uuid:eo(),key:t,pixiContainer:u,sourceUrl:r,sourceType:"live2d",sourceExt:"json"});const d=this,m=()=>{u&&async function(){let p=[0,0,0,0];const v=N.getState().stage.live2dMotion.find(_=>_.target===t);v!=null&&v.overrideBounds&&(p=v.overrideBounds),console.log(p),(await Promise.all([tF.from(r,{autoInteract:!1,overWriteBounds:{x0:p[0],y0:p[1],x1:p[2],y1:p[3]}})])).forEach(_=>{const x=a/_.width,b=s/_.height,S=Math.min(x,b)*1.5,E=_.width*S;_.scale.set(S),_.anchor.set(.5),_.position.x=a/2,_.position.y=s/1.2,n==="left"&&(_.position.x=E/2),n==="right"&&(_.position.x=a-E/2);let I=i,A=0,O=3;const D=N.getState().stage.live2dMotion.find(W=>W.target===t),B=N.getState().stage.live2dExpression.find(W=>W.target===t);D&&(I=D.motion),d.updateL2dMotionByKey(t,I),_.motion(I,A,O);let j=o;B&&(j=B.expression),d.updateL2dExpressionByKey(t,j),_.expression(j),_.internalModel.eyeBlink&&(_.internalModel.eyeBlink.blinkInterval=1e3*60*60*24,_.internalModel.eyeBlink.nextBlinkTimeLeft=1e3*60*60*24),no.volume=0,_.internalModel.angleXParamIndex!==void 0&&(_.internalModel.angleXParamIndex=999),_.internalModel.angleYParamIndex!==void 0&&(_.internalModel.angleYParamIndex=999),_.internalModel.angleZParamIndex!==void 0&&(_.internalModel.angleZParamIndex=999),u.addChild(_)})}()},g=Object.keys(l.resources);this.cacheGC(),g.includes(r)?m():this.loadAsset(r,m)}changeModelMotionByKey(t,r){var o,a;const n=this.figureObjects.find(s=>s.key===t);if((n==null?void 0:n.sourceType)!=="live2d")return;const i=this.live2dFigureRecorder.find(s=>s.target===t);if(n&&(i==null?void 0:i.motion)!==r){const l=n.pixiContainer.children;for(const u of l){let c=r,f=0,h=3;const d=(u==null?void 0:u.internalModel)??void 0;(a=(o=d==null?void 0:d.motionManager)==null?void 0:o.stopAllMotions)==null||a.call(o),u.motion(c,f,h)}this.updateL2dMotionByKey(t,r)}}changeModelExpressionByKey(t,r){const n=this.figureObjects.find(o=>o.key===t);if((n==null?void 0:n.sourceType)!=="live2d")return;const i=this.live2dFigureRecorder.find(o=>o.target===t);if(n&&(i==null?void 0:i.expression)!==r){const a=n.pixiContainer.children;for(const s of a)s.expression(r);this.updateL2dExpressionByKey(t,r)}}setModelMouthY(t,r){var a,s,l,u,c,f,h,d,m;function n(g){return g<50?0:(g-50)/50}const i=n(r),o=this.figureObjects.find(g=>g.key===t);if(o&&o.sourceType==="live2d"){const p=o.pixiContainer.children;for(const v of p)v!=null&&v.internalModel&&((s=(a=v==null?void 0:v.internalModel)==null?void 0:a.coreModel)!=null&&s.setParamFloat&&((c=(u=(l=v==null?void 0:v.internalModel)==null?void 0:l.coreModel)==null?void 0:u.setParamFloat)==null||c.call(u,"PARAM_MOUTH_OPEN_Y",i)),(h=(f=v==null?void 0:v.internalModel)==null?void 0:f.coreModel)!=null&&h.setParameterValueById&&((m=(d=v==null?void 0:v.internalModel)==null?void 0:d.coreModel)==null||m.setParameterValueById("ParamMouthOpenY",i)))}}getStageObjByKey(t){return[...this.figureObjects,...this.backgroundObjects].find(r=>r.key===t)}getStageObjByUuid(t){return[...this.figureObjects,...this.backgroundObjects].find(r=>r.uuid===t)}getAllStageObj(){return[...this.figureObjects,...this.backgroundObjects]}removeStageObjectByKey(t){const r=this.figureObjects.findIndex(i=>i.key===t),n=this.backgroundObjects.findIndex(i=>i.key===t);if(r>=0){const i=this.figureObjects[r];for(const o of i.pixiContainer.children)o.destroy();i.pixiContainer.destroy(),this.figureContainer.removeChild(i.pixiContainer),this.figureObjects.splice(r,1)}if(n>=0){const i=this.backgroundObjects[n];for(const o of i.pixiContainer.children)o.destroy();i.pixiContainer.destroy(),this.backgroundContainer.removeChild(i.pixiContainer),this.backgroundObjects.splice(n,1)}}cacheGC(){rk()}getExtName(t){return t.split(".").pop()??"png"}getFigureMetadataByKey(t){return console.log(t,N.getState().stage.figureMetaData),N.getState().stage.figureMetaData[t]}loadAsset(t,r,n){this.loadQueue.unshift({url:t,callback:r,name:n}),this.callLoader()}updateL2dMotionByKey(t,r){const n=this.live2dFigureRecorder.findIndex(i=>i.target===t);n>=0?this.live2dFigureRecorder[n].motion=r:this.live2dFigureRecorder.push({target:t,motion:r,expression:""})}updateL2dExpressionByKey(t,r){const n=this.live2dFigureRecorder.findIndex(i=>i.target===t);n>=0?this.live2dFigureRecorder[n].expression=r:this.live2dFigureRecorder.push({target:t,motion:"",expression:r})}callLoader(){if(!this.assetLoader.loading){const t=this.loadQueue.shift();if(t)try{this.assetLoader.resources[t.url]?(t.callback(),this.callLoader()):t.name?this.assetLoader.add(t.name,t.url).load(()=>{t.callback(),this.callLoader()}):this.assetLoader.add(t.url).load(()=>{t.callback(),this.callLoader()})}catch(r){te.fatal("PIXI Loader ",r),t.callback(),this.callLoader()}}}updateFps(){Gg==null||Gg(120).then(t=>{this.frameDuration=1e3/t})}lockStageObject(t){this.lockTransformTarget.push(t)}unlockStageObject(t){const r=this.lockTransformTarget.findIndex(n=>n===t);r>=0&&this.lockTransformTarget.splice(r,1)}}const Gg=(()=>{const e=[window.requestAnimationFrame,window.webkitRequestAnimationFrame,window.mozRequestAnimationFrame].find(t=>t);if(!e){console.error("requestAnimationFrame is not supported!");return}return(t=60)=>{if(t<1)throw new Error("targetCount cannot be less than 1.");const r=Date.now();let n=0;return new Promise(i=>{(function o(){e(()=>{if(++n>=t){const a=Date.now()-r,s=n/a*1e3;return i(s)}o()})})()})}})();function uF(e,t,r){for(const v of e)v.alphaFilterVal=v.alpha,v.alpha=1;const n=C.gameplay.pixiStage.getStageObjByKey(t);let i=0;const o=[],a=[];for(const v of e){const y=v.duration;i+=y;const{position:_,scale:x,...b}=v;o.push({x:_.x,y:_.y,scaleX:x.x,scaleY:x.y,...b}),r!==0?a.push(i/r):a.push(0)}const s=n==null?void 0:n.pixiContainer;let l=null;r>0&&(l=PK({to:o,offset:a,duration:r,onUpdate:v=>{if(s){const{scaleX:y,scaleY:_,...x}=v;fi.assignTransform(s,Jv(x,wi)),wi(y)||(s.scale.x=y),wi(_)||(s.scale.y=_)}}}));const{duration:u,...c}=g();N.dispatch(Ut.updateEffect({target:t,transform:c}));function f(){if(n!=null&&n.pixiContainer){const{position:v,scale:y,..._}=m(),x=Jv({x:v.x,y:v.y,..._},wi);fi.assignTransform(n==null?void 0:n.pixiContainer,x),n!=null&&n.pixiContainer&&(wi(y.x)||(n.pixiContainer.scale.x=y.x),wi(y==null?void 0:y.y)||(n.pixiContainer.scale.y=y.y))}}function h(){if(l&&l.stop(),l=null,n!=null&&n.pixiContainer){const{position:v,scale:y,..._}=g(),x=Jv({x:v.x,y:v.y,..._},wi);fi.assignTransform(n==null?void 0:n.pixiContainer,x),n!=null&&n.pixiContainer&&(wi(y.x)||(n.pixiContainer.scale.x=y.x),wi(y==null?void 0:y.y)||(n.pixiContainer.scale.y=y.y))}}function d(v){}function m(){return e[0]}function g(){return e[e.length-1]}function p(){const v=e[e.length-1],{alpha:y,rotation:_,blur:x,duration:b,scale:S,position:E,...I}=v;return I}return{setStartState:f,setEndState:h,tickerFunc:d,getEndFilterEffect:p}}function Ld(e,t,r){const n=C.animationManager.getAnimations().find(i=>i.name===e);if(n){const i=n.effects.map(o=>{const a=N.getState().stage.effects.find(l=>l.target===t),s=Pt({...(a==null?void 0:a.transform)??Wb,duration:0});return fi.assignTransform(s,o),s.duration=o.duration,s});return te.debug("",i),uF(i,t,r)}return null}function Ur(e){const t=C.animationManager.getAnimations().find(r=>r.name===e);if(t){let r=0;return t.effects.forEach(n=>{r+=n.duration}),r}return 0}function io(e,t,r=!1,n){if(t==="enter"){let i=500;r&&(i=1500);let o=zM(n??e,i);const a=C.animationManager.nextEnterAnimationName.get(e);return a&&(te.debug("",e),o=Ld(a,n??e,Ur(a)),i=Ur(a),C.animationManager.nextEnterAnimationName.delete(e)),{duration:i,animation:o}}else{let i=750;r&&(i=1500);let o=VM(n??e,i);const a=C.animationManager.nextExitAnimationName.get(e);return a&&(te.debug("",e),o=Ld(a,n??e,Ur(a)),i=Ur(a),C.animationManager.nextExitAnimationName.delete(e)),{duration:i,animation:o}}}const ede=e=>{const t=e.content;let r="",n="default";e.args.forEach(u=>{u.key==="unlockname"&&(r=u.value.toString()),u.key==="series"&&(n=u.value.toString())});const i=N.dispatch;r!==""&&i(hM({name:r,url:t,series:n})),i(Ut.removeEffectByTargetId("bg-main"));const o=Ie(e,"transform");let a=Ie(e,"duration");(!a||typeof a!="number")&&(a=1e3);let s;if(o)try{const u=JSON.parse(o.toString());s=fc("bg-main",u,a),s[0].alpha=0;const c=(Math.random()*10).toString(16),f={name:c,effects:s};C.animationManager.addAnimation(f),a=Ur(c),C.animationManager.nextEnterAnimationName.set("bg-main",c)}catch{l()}else l();function l(){s=fc("bg-main",{},a),s[0].alpha=0;const c=(Math.random()*10).toString(16),f={name:c,effects:s};C.animationManager.addAnimation(f),a=Ur(c),C.animationManager.nextEnterAnimationName.set("bg-main",c)}return Ie(e,"enter")&&(C.animationManager.nextEnterAnimationName.set("bg-main",Ie(e,"enter").toString()),a=Ur(Ie(e,"enter").toString())),Ie(e,"exit")&&(C.animationManager.nextExitAnimationName.set("bg-main-off",Ie(e,"exit").toString()),a=Ur(Ie(e,"exit").toString())),i(Ce({key:"bgName",value:e.content})),{performName:"none",duration:a,isHoldOn:!1,stopFunction:()=>{},blockingNext:()=>!1,blockingAuto:()=>!0,stopTimeout:void 0}};function tde(e){let t="center",r=e.content,n=!1,i="",o="",a="",s=500,l="",u="",c="",f="",h="",d="",m="",g=-1;const p=N.dispatch;for(const E of e.args)switch(E.key){case"left":E.value===!0&&(t="left");break;case"right":E.value===!0&&(t="right");break;case"clear":E.value===!0&&(r="");break;case"id":n=!0,a=E.value.toString();break;case"motion":i=E.value.toString();break;case"bounds":m=String(E.value);break;case"expression":o=E.value.toString();break;case"mouthOpen":l=E.value.toString(),l=Yr(l,qr.figure);break;case"mouthClose":u=E.value.toString(),u=Yr(u,qr.figure);break;case"mouthHalfOpen":c=E.value.toString(),c=Yr(c,qr.figure);break;case"eyesOpen":f=E.value.toString(),f=Yr(f,qr.figure);break;case"eyesClose":h=E.value.toString(),h=Yr(h,qr.figure);break;case"animationFlag":d=E.value.toString();break;case"none":r="";break;case"zIndex":g=Number(E.value);break}const v=a||`fig-${t}`,_=N.getState().stage.figureAssociatedAnimation.filter(E=>E.targetId!==v),x={targetId:v,animationFlag:d,mouthAnimation:{open:l,close:u,halfOpen:c},blinkAnimation:{open:f,close:h}};_.push(x),p(Ce({key:"figureAssociatedAnimation",value:_}));let b=!0;if(a!==""){const E=N.getState().stage.freeFigure.find(I=>I.key===a);E&&E.name===e.content&&(b=!1)}else t==="center"&&N.getState().stage.figName===e.content&&(b=!1),t==="left"&&N.getState().stage.figNameLeft===e.content&&(b=!1),t==="right"&&N.getState().stage.figNameRight===e.content&&(b=!1);if(b){const E=`fig-${t}`,I=`${a}`;N.dispatch(Ut.removeEffectByTargetId(E)),N.dispatch(Ut.removeEffectByTargetId(I)),p(Ut.setFigureMetaData([E,"zIndex",0,!0])),p(Ut.setFigureMetaData([I,"zIndex",0,!0]))}const S=(E,I)=>{const A=Ie(I,"transform"),O=Ie(I,"duration");O&&typeof O=="number"&&(s=O);let D;if(A){console.log(A);try{const $=JSON.parse(A.toString());D=fc(E,$,s),D[0].alpha=0;const z=(Math.random()*10).toString(16),ie={name:z,effects:D};C.animationManager.addAnimation(ie),s=Ur(z),C.animationManager.nextEnterAnimationName.set(E,z)}catch{B()}}else B();function B(){D=fc(E,{},s),D[0].alpha=0;const z=(Math.random()*10).toString(16),ie={name:z,effects:D};C.animationManager.addAnimation(ie),s=Ur(z),C.animationManager.nextEnterAnimationName.set(E,z)}const j=Ie(I,"enter"),W=Ie(I,"exit");j&&(C.animationManager.nextEnterAnimationName.set(E,j.toString()),s=Ur(j.toString())),W&&(C.animationManager.nextExitAnimationName.set(E+"-off",W.toString()),s=Ur(W.toString()))};if(n){const E={key:a,name:r,basePosition:t};S(a,e),(i||m)&&p(Ut.setLive2dMotion({target:a,motion:i,overrideBounds:dA(m)})),o&&p(Ut.setLive2dExpression({target:a,expression:o})),g>0&&p(Ut.setFigureMetaData([a,"zIndex",g,!1])),p(Ut.setFreeFigureByKey(E))}else{const E={center:"fig-center",left:"fig-left",right:"fig-right"},I={center:"figName",left:"figNameLeft",right:"figNameRight"};a=E[t],S(a,e),(i||m)&&p(Ut.setLive2dMotion({target:a,motion:i,overrideBounds:dA(m)})),o&&p(Ut.setLive2dExpression({target:a,expression:o})),g>0&&p(Ut.setFigureMetaData([a,"zIndex",g,!1])),p(Ce({key:I[t],value:r}))}return{performName:"none",duration:s,isHoldOn:!1,stopFunction:()=>{},blockingNext:()=>!1,blockingAuto:()=>!1,stopTimeout:void 0}}function dA(e){const t=e.split(",").map(n=>Number(n));let r=!0;if(t.forEach(n=>{isNaN(n)&&(r=!1)}),r=r&&t.length===4,r)return t}const cF=(e,t)=>{C.sceneManager.lockSceneWrite||(C.sceneManager.lockSceneWrite=!0,bi(e).then(r=>{C.sceneManager.sceneData.currentScene=Un(r,t,e),C.sceneManager.sceneData.currentSentenceId=0;const n=C.sceneManager.sceneData.currentScene.subSceneList;C.sceneManager.settledScenes.push(e);const i=Xc(n);qc(i),te.debug("",C.sceneManager.sceneData),C.sceneManager.lockSceneWrite=!1,cr()}).catch(r=>{te.error("",r),C.sceneManager.lockSceneWrite=!1}))},rde=e=>{const t=e.content.split("/"),r=t[t.length-1];return cF(e.content,r),{performName:"none",duration:0,isHoldOn:!0,stopFunction:()=>{},blockingNext:()=>!1,blockingAuto:()=>!0,stopTimeout:void 0}},fF=e=>{const t=C.sceneManager.sceneData.currentSentenceId;let r=t;C.sceneManager.sceneData.currentScene.sentenceList.forEach((n,i)=>{n.command===ke.label&&n.content===e&&i!==t&&(r=i)}),C.sceneManager.sceneData.currentSentenceId=r,setTimeout(cr,1)},nde="_Choose_Main_1kza1_1",ide="_Choose_item_1kza1_13",ode="_Choose_item_disabled_1kza1_34",ade="_Choose_item_outer_1kza1_50",eh={Choose_Main:nde,Choose_item:ide,Choose_item_disabled:ode,Choose_item_outer:ade},sde=""+new URL("page-flip-1-7df32409.mp3",import.meta.url).href,lde=""+new URL("switch-1-99b576bc.mp3",import.meta.url).href,hF="data:audio/mpeg;base64,SUQzBAAAAAAAI1RTU0UAAAAPAAADTGF2ZjU3LjE0LjEwMAAAAAAAAAAAAAAA//OAAAAAAAAAAAAAAAAAAAAAAAAASW5mbwAAAA8AAAAHAAAGhgA/Pz8/Pz8/Pz8/Pz8/P19fX19fX19fX19fX19ff39/f39/f39/f39/f3+fn5+fn5+fn5+fn5+fn5+/v7+/v7+/v7+/v7+/v9/f39/f39/f39/f39/f//////////////////8AAAAATGF2YzU3LjE1AAAAAAAAAAAAAAAAJAAAAAAAAAAABoYV32R7AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAP/zgGQAAAABpAAAAAAAAANIAAAAACADH/+QtN3NAAAKF6IiVEl7hE0Sv/+XsgGgCgQDQFAgGg3D+yBShQzd+K0qXyBQyRQUp3hEkUMGn/8oCBQ5KOIf+sPl3//+Xf/+GP//6w+EgFgk/nOfWhA4Q4ABxjnQhDhCD3pgIQLAARlkyZ8Ew+Ud1AgUOfy7/4OeGOUORPD//wwUd/KHP//+GPykMA445BCHBIYg4ZC4AyGP+PuWtgyRb6quwuJvp+v8wQwDAKoXYMnpC0w6gAc0HLf/84JkuwnkuN6ioaAAD3CpsVVFMAAFQBkWjRnE4hYMOnIaT5sXEGFHCyMLPhfcDTHTUmRcgnQMuCfCKHjcDRlTchxFTcEHsKGiBNQ6mLhLkNImWi8PkY6s3kUWgaJmjd1igSfFzk+gLLIOcMi4gXyupR9A20G/4zAhOJ/PDgGYKI4y4LMEEBYhnUz1lpozrmZk3//lsky4s+TB4ul8ny6YOV0FmRx0ElHlMbNWYOr///1uZFQ3IGRNBRmfWlRUYkeV8mVhC5j/+UOiwF4DdcGgB//zgmTqHCnhQS/NUAGcStp6X4JQAARBgQCDIwGbMjrzxBIRk8s4+IS7mMEYN4elXLheFicbuxm88zzzHaw/G//9DCJ+eYRf8WGFtZp9ydCUvPMKGf/57ZjPRjzHtq+3//+YZ2U8817jxbb1vcn/1yAPkAgGUJuPiliw1FHilYbAAkIkV4CdGauxnChrTd+JTOW4BTlAB55YoeqaxWm7Wv8xLqLOiiZLUixqapJF5JNAcoviEoN2gAwAUcLiN5Mk6i3TRU+ikk++6KKKTqSKyBsx//OCZFMVigU/GuzMAIuQEq5fwxACNMZGRPKvoqXbR0UbJP11I0t9J/SqSrRZ0lXoqetSTnWoto0kl26LJGJqizoJmtJSSNSWk7WdTpXUkiigbVor9K6lpKSrdFNi8gnstA65dQVWxkXlGyTGRiRt9gUkBwgAggllBkQbKigffEMUfzqlL+6Ruli5Bv+4lPf//////X/////o0Wte9XLYBs4JbHGkwql7GrPNPMusqAJDUPzthoURwGi5eZyu+VuecNrURSYBU/p8//81Vf+Znkn/84JkNA4gwTcvDYYmF1lmTbAzByQpycp3ROJPn025p4SQJoSeFQoViUUAoiJFRL3c8JRUNETudLFn0MtLDwrM4lUeOiJtiztbvBk6xyPrctYdEkBpA09q2Xn9/TmkZxYMuXBUW17I4clP/nKrXbW/C6FI5G0z11z31L9fvGqoAzY1X86WwYUHIdWCvLEwkeEq3kQ7iI8MPM/ssO/8OnlHsFW1nWeCvyzwVOtEvHuyqv/8hOYSETL//NtNaySXOSsAqIiRrkS82UvXUvppbobMbv/zgmQhC0HzBAAEwpKVEO4JYAjTIJ/y/0egY3vXWaZv65cpZm36G/mMUpdalcpStzalb1KXUoUBf8pXKyGM5Sv/TRRPKoUSQMYKTJfSwiUDeW+ZhhmIXNYfiyfSbiqFFLNEQaajFVnrO9YLTodKvET9Z0FcSgq6s6eIz3uLcFQmCxJY06W/g0Cri31AqGrq56EgaXxLPCUNdBZ5USrBUse3BqpNF93yP//yMyMDWEJGQ01////MjMv//I1kcjJrLf/stlzL55SkyyOX5q0cjVrL//OCZC4KtfrOGgAjbodYBawMAEQAYf//+Rk1qGRqygo5GRq1sP/sln//cyNWCg0cj//ZZZZKh+asCHP8lAL////9n/////////GMYm3raaWKige/+sW+LesVTEFNRTMuOTkuNaqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqo=",ude=""+new URL("dialog-d5b91235.mp3",import.meta.url).href,dF="data:audio/mpeg;base64,SUQzBAAAAAAAI1RTU0UAAAAPAAADTGF2ZjU4LjIzLjEwMQAAAAAAAAAAAAAA//OAAAAAAAAAAAAAAAAAAAAAAAAASW5mbwAAAA8AAAAHAAAGhgA/Pz8/Pz8/Pz8/Pz8/P19fX19fX19fX19fX19ff39/f39/f39/f39/f3+fn5+fn5+fn5+fn5+fn5+/v7+/v7+/v7+/v7+/v9/f39/f39/f39/f39/f//////////////////8AAAAATGF2YzU4LjQwAAAAAAAAAAAAAAAAJAL7AAAAAAAABobgvJxkAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAP/zgGQADLH/PRigiACM0AZ+XUAQAoAVYA9AY3IAASAgeRjeQMhP0O/nec/1cn+Qnv/8n+RuhGUhPoQDPISc6HP1Oec7+pwAROeQikI3IT////z+p3Q56VOd/nOc5JzyAAhQAAI053QDFnoQjKACGvoQ7yThzoBgZ8ADMJQURtuNAkMH4P4P+XOZD4f5d/D/64f/3co7/8H8u/wQ5R3/+sPiN8TvB95SDgYT/yjgQf+mpbd5dJrdLkpewIOA5GsDQUQZnZzSB6Q1U50Guqy9OaH/84JkIg/hbXkux6gBEfpLBx+SKAZQvxWLwbxAAoJRbMJjWBoPcgIzjpzzz2clFsxj0ITlVELLXdjzyg8Q3UoM0PPct+QCw/6D5KMrNmLdXOUnPRjXJ3nMYVFVfnfdzf//q//MR+Q/8uwB0uyB/lVHlY6YhEIGR4cHYHAcAZwSQAJAcAocdAxoAMh6L1HV969TxECi7iHlYn7jW//an//+JXU5/9v4l//6EM3f83/41j3///+ozd63/9C2p2W2W22i0Mq2OVytAvxB06nWCVQIZP/zgmQXD4W5ey/HqAEQUkbOR4koAmYRklcoUe+Yd1AuC8AHmsVSoIxFCwPh6RI8ajdB8807yw/JxoLbsai/djzjScCv+Q/lARCSFyRC8hIFYZkF06Dv//MLs5zV+edqzv6krdvP9V/yO3p66H//n73UnMetFzzx4P/MNxBOVut0AFwIAARCgysYSXL+VO2TXhMWBADVCKKhQmjLmX/////0/P+rf7f///29++FO9LfYWYp//Z9n/yHlg30VsPil34MMSQVrYqfLAYVacpCtK1Oq//OCZBUPGaFC3+e0AA8ZVoZdyxAA2az68kOa28sO3puYoqNkUTUxnD6CKnSNlGTJJositaK2TdJSb2NWSX/SSScyDlAnQ6myTv/1X0aJePGZqjnT1FL6v9SRkXW/dVaKP6VaKLOv//+r//X/ZzF06dSFLuv/1B0aZUKwhImgCMAB2aHaUe7x55QPP/rp3zyZZf/VkdS3RFZ3m/9H//iSCn/1Qaev/0CVH3+oO1P///1t+j//9KoPL7QDcAaC4x+83dEEEvXL3vljkRVf5ZqiVpT/84JkGw5BSSx+MMpOEjoual7AxBzqOG5mzBJL6c7URxGtROS/Zu8vMwc2/naKcgTgLi5R79f/ZSUVjWOSaa1aHK5xM/apQnJHJUuTbXQ5VN09HRzSUNfirDtAVBYCwdfpJmYrjDVue/9pJZFMiSvSUMuMAg40uvlBXQECFUh3VKcOGoUBJAurXLsY3+xpv///1aZAwAP///yghpkdW/5qt8OMEMKKg7/pDn///h1/Ues6P/xLEaAkoyibeSeC8E+AuhymiEos8tLHJNRoThxKnP/zgmQcDD0TFAk8xToRuh4sCGgPKooy1Y8s/q2X/ZH//6tqJAEEQwRKxjI9y1KWWqPDw8awiKqQPPob/pRUDwAioCEtX9R7/9eGlncrLPLBVgKmRZ+GpD/tqEogdIXwLlNkUnUxiamSS0W/ooqUlrot//zUCIHRc05Zrqaabod86PDZv/+b/UamAIGjTP+W/879s9liLSrmCVxXgq7xL+RKoQZ+UAAwBYQh4Rig2ZaVmytcNUuiO5/zP8jP1/+VMy/1RygyCgEMDDLv4CCZF3/S//OCZC8JaK7qfiQiTgxILdAAYYYEEhVLrP///S1HoCosaCoCCYZrZUSBkQDwESH/WkJSAZjByJI0oE4Z/////4FCQeBkVZ/xX/zIsRd/6hf7X//4qSfqwEEiLv1ciEyISQKqTEFNRTMuMTAwqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqo=";var pF={exports:{}},mF={};/**
 * @license React
 * use-sync-external-store-shim.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var nl=G;function cde(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var fde=typeof Object.is=="function"?Object.is:cde,hde=nl.useState,dde=nl.useEffect,pde=nl.useLayoutEffect,mde=nl.useDebugValue;function vde(e,t){var r=t(),n=hde({inst:{value:r,getSnapshot:t}}),i=n[0].inst,o=n[1];return pde(function(){i.value=r,i.getSnapshot=t,zg(i)&&o({inst:i})},[e,r,t]),dde(function(){return zg(i)&&o({inst:i}),e(function(){zg(i)&&o({inst:i})})},[e]),mde(r),r}function zg(e){var t=e.getSnapshot;e=e.value;try{var r=t();return!fde(e,r)}catch{return!0}}function gde(e,t){return t()}var yde=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?gde:vde;mF.useSyncExternalStore=nl.useSyncExternalStore!==void 0?nl.useSyncExternalStore:yde;pF.exports=mF;var _de=pF.exports,vF={exports:{}},gF={};/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Kp=G,xde=_de;function bde(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var Sde=typeof Object.is=="function"?Object.is:bde,wde=xde.useSyncExternalStore,Ede=Kp.useRef,Tde=Kp.useEffect,Cde=Kp.useMemo,Pde=Kp.useDebugValue;gF.useSyncExternalStoreWithSelector=function(e,t,r,n,i){var o=Ede(null);if(o.current===null){var a={hasValue:!1,value:null};o.current=a}else a=o.current;o=Cde(function(){function l(d){if(!u){if(u=!0,c=d,d=n(d),i!==void 0&&a.hasValue){var m=a.value;if(i(m,d))return f=m}return f=d}if(m=f,Sde(c,d))return m;var g=n(d);return i!==void 0&&i(m,g)?m:(c=d,f=g)}var u=!1,c,f,h=r===void 0?null:r;return[function(){return l(t())},h===null?void 0:function(){return l(h())}]},[t,r,n,i]);var s=wde(e,o[0],o[1]);return Tde(function(){a.hasValue=!0,a.value=s},[s]),Pde(s),s};vF.exports=gF;var Ade=vF.exports;function Ode(e){e()}let yF=Ode;const Ide=e=>yF=e,Mde=()=>yF,pA=Symbol.for("react-redux-context"),mA=typeof globalThis<"u"?globalThis:{};function Rde(){var e;if(!G.createContext)return{};const t=(e=mA[pA])!=null?e:mA[pA]=new Map;let r=t.get(G.createContext);return r||(r=G.createContext(null),t.set(G.createContext,r)),r}const Do=Rde();function fS(e=Do){return function(){return G.useContext(e)}}const _F=fS(),kde=()=>{throw new Error("uSES not initialized!")};let xF=kde;const Lde=e=>{xF=e},Fde=(e,t)=>e===t;function Dde(e=Do){const t=e===Do?_F:fS(e);return function(n,i={}){const{equalityFn:o=Fde,stabilityCheck:a=void 0,noopCheck:s=void 0}=typeof i=="function"?{equalityFn:i}:i,{store:l,subscription:u,getServerState:c,stabilityCheck:f,noopCheck:h}=t();G.useRef(!0);const d=G.useCallback({[n.name](g){return n(g)}}[n.name],[n,f,a]),m=xF(u.addNestedSub,l.getState,c||l.getState,d,o);return G.useDebugValue(m),m}}const me=Dde();function Nde(e,t){if(e==null)return{};var r={},n=Object.keys(e),i,o;for(o=0;o<n.length;o++)i=n[o],!(t.indexOf(i)>=0)&&(r[i]=e[i]);return r}var bF={exports:{}},Ke={};/** @license React v16.13.1
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var er=typeof Symbol=="function"&&Symbol.for,hS=er?Symbol.for("react.element"):60103,dS=er?Symbol.for("react.portal"):60106,Zp=er?Symbol.for("react.fragment"):60107,Jp=er?Symbol.for("react.strict_mode"):60108,Qp=er?Symbol.for("react.profiler"):60114,em=er?Symbol.for("react.provider"):60109,tm=er?Symbol.for("react.context"):60110,pS=er?Symbol.for("react.async_mode"):60111,rm=er?Symbol.for("react.concurrent_mode"):60111,nm=er?Symbol.for("react.forward_ref"):60112,im=er?Symbol.for("react.suspense"):60113,Bde=er?Symbol.for("react.suspense_list"):60120,om=er?Symbol.for("react.memo"):60115,am=er?Symbol.for("react.lazy"):60116,jde=er?Symbol.for("react.block"):60121,Ude=er?Symbol.for("react.fundamental"):60117,$de=er?Symbol.for("react.responder"):60118,Gde=er?Symbol.for("react.scope"):60119;function rn(e){if(typeof e=="object"&&e!==null){var t=e.$$typeof;switch(t){case hS:switch(e=e.type,e){case pS:case rm:case Zp:case Qp:case Jp:case im:return e;default:switch(e=e&&e.$$typeof,e){case tm:case nm:case am:case om:case em:return e;default:return t}}case dS:return t}}}function SF(e){return rn(e)===rm}Ke.AsyncMode=pS;Ke.ConcurrentMode=rm;Ke.ContextConsumer=tm;Ke.ContextProvider=em;Ke.Element=hS;Ke.ForwardRef=nm;Ke.Fragment=Zp;Ke.Lazy=am;Ke.Memo=om;Ke.Portal=dS;Ke.Profiler=Qp;Ke.StrictMode=Jp;Ke.Suspense=im;Ke.isAsyncMode=function(e){return SF(e)||rn(e)===pS};Ke.isConcurrentMode=SF;Ke.isContextConsumer=function(e){return rn(e)===tm};Ke.isContextProvider=function(e){return rn(e)===em};Ke.isElement=function(e){return typeof e=="object"&&e!==null&&e.$$typeof===hS};Ke.isForwardRef=function(e){return rn(e)===nm};Ke.isFragment=function(e){return rn(e)===Zp};Ke.isLazy=function(e){return rn(e)===am};Ke.isMemo=function(e){return rn(e)===om};Ke.isPortal=function(e){return rn(e)===dS};Ke.isProfiler=function(e){return rn(e)===Qp};Ke.isStrictMode=function(e){return rn(e)===Jp};Ke.isSuspense=function(e){return rn(e)===im};Ke.isValidElementType=function(e){return typeof e=="string"||typeof e=="function"||e===Zp||e===rm||e===Qp||e===Jp||e===im||e===Bde||typeof e=="object"&&e!==null&&(e.$$typeof===am||e.$$typeof===om||e.$$typeof===em||e.$$typeof===tm||e.$$typeof===nm||e.$$typeof===Ude||e.$$typeof===$de||e.$$typeof===Gde||e.$$typeof===jde)};Ke.typeOf=rn;bF.exports=Ke;var zde=bF.exports,wF=zde,Vde={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},Hde={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},EF={};EF[wF.ForwardRef]=Vde;EF[wF.Memo]=Hde;var Je={};/**
 * @license React
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var mS=Symbol.for("react.element"),vS=Symbol.for("react.portal"),sm=Symbol.for("react.fragment"),lm=Symbol.for("react.strict_mode"),um=Symbol.for("react.profiler"),cm=Symbol.for("react.provider"),fm=Symbol.for("react.context"),Wde=Symbol.for("react.server_context"),hm=Symbol.for("react.forward_ref"),dm=Symbol.for("react.suspense"),pm=Symbol.for("react.suspense_list"),mm=Symbol.for("react.memo"),vm=Symbol.for("react.lazy"),Xde=Symbol.for("react.offscreen"),TF;TF=Symbol.for("react.module.reference");function En(e){if(typeof e=="object"&&e!==null){var t=e.$$typeof;switch(t){case mS:switch(e=e.type,e){case sm:case um:case lm:case dm:case pm:return e;default:switch(e=e&&e.$$typeof,e){case Wde:case fm:case hm:case vm:case mm:case cm:return e;default:return t}}case vS:return t}}}Je.ContextConsumer=fm;Je.ContextProvider=cm;Je.Element=mS;Je.ForwardRef=hm;Je.Fragment=sm;Je.Lazy=vm;Je.Memo=mm;Je.Portal=vS;Je.Profiler=um;Je.StrictMode=lm;Je.Suspense=dm;Je.SuspenseList=pm;Je.isAsyncMode=function(){return!1};Je.isConcurrentMode=function(){return!1};Je.isContextConsumer=function(e){return En(e)===fm};Je.isContextProvider=function(e){return En(e)===cm};Je.isElement=function(e){return typeof e=="object"&&e!==null&&e.$$typeof===mS};Je.isForwardRef=function(e){return En(e)===hm};Je.isFragment=function(e){return En(e)===sm};Je.isLazy=function(e){return En(e)===vm};Je.isMemo=function(e){return En(e)===mm};Je.isPortal=function(e){return En(e)===vS};Je.isProfiler=function(e){return En(e)===um};Je.isStrictMode=function(e){return En(e)===lm};Je.isSuspense=function(e){return En(e)===dm};Je.isSuspenseList=function(e){return En(e)===pm};Je.isValidElementType=function(e){return typeof e=="string"||typeof e=="function"||e===sm||e===um||e===lm||e===dm||e===pm||e===Xde||typeof e=="object"&&e!==null&&(e.$$typeof===vm||e.$$typeof===mm||e.$$typeof===cm||e.$$typeof===fm||e.$$typeof===hm||e.$$typeof===TF||e.getModuleId!==void 0)};Je.typeOf=En;function qde(){const e=Mde();let t=null,r=null;return{clear(){t=null,r=null},notify(){e(()=>{let n=t;for(;n;)n.callback(),n=n.next})},get(){let n=[],i=t;for(;i;)n.push(i),i=i.next;return n},subscribe(n){let i=!0,o=r={callback:n,next:null,prev:r};return o.prev?o.prev.next=o:t=o,function(){!i||t===null||(i=!1,o.next?o.next.prev=o.prev:r=o.prev,o.prev?o.prev.next=o.next:t=o.next)}}}}const vA={notify(){},get:()=>[]};function Yde(e,t){let r,n=vA,i=0,o=!1;function a(g){c();const p=n.subscribe(g);let v=!1;return()=>{v||(v=!0,p(),f())}}function s(){n.notify()}function l(){m.onStateChange&&m.onStateChange()}function u(){return o}function c(){i++,r||(r=t?t.addNestedSub(l):e.subscribe(l),n=qde())}function f(){i--,r&&i===0&&(r(),r=void 0,n.clear(),n=vA)}function h(){o||(o=!0,c())}function d(){o&&(o=!1,f())}const m={addNestedSub:a,notifyNestedSubs:s,handleChangeWrapper:l,isSubscribed:u,trySubscribe:h,tryUnsubscribe:d,getListeners:()=>n};return m}const Kde=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",Zde=Kde?G.useLayoutEffect:G.useEffect;function CF({store:e,context:t,children:r,serverState:n,stabilityCheck:i="once",noopCheck:o="once"}){const a=G.useMemo(()=>{const u=Yde(e);return{store:e,subscription:u,getServerState:n?()=>n:void 0,stabilityCheck:i,noopCheck:o}},[e,n,i,o]),s=G.useMemo(()=>e.getState(),[e]);Zde(()=>{const{subscription:u}=a;return u.onStateChange=u.notifyNestedSubs,u.trySubscribe(),s!==e.getState()&&u.notifyNestedSubs(),()=>{u.tryUnsubscribe(),u.onStateChange=void 0}},[a,s]);const l=t||Do;return G.createElement(l.Provider,{value:a},r)}function PF(e=Do){const t=e===Do?_F:fS(e);return function(){const{store:n}=t();return n}}const Jde=PF();function Qde(e=Do){const t=e===Do?Jde:PF(e);return function(){return t().dispatch}}const tr=Qde();Lde(Ade.useSyncExternalStoreWithSelector);Ide(fI.unstable_batchedUpdates);const Rr=()=>{const e=tr();return{playSeEnter:()=>{e(Ce({key:"uiSe",value:hF}))},playSeClick:()=>{e(Ce({key:"uiSe",value:dF}))},playSePageChange:()=>{e(Ce({key:"uiSe",value:sde}))},playSeDialogOpen:()=>{e(Ce({key:"uiSe",value:ude}))},playSeSwitch:()=>{e(Ce({key:"uiSe",value:lde}))}}},gS=()=>({playSeEnter:()=>{N.dispatch(Ce({key:"uiSe",value:hF}))},playSeClick:()=>{N.dispatch(Ce({key:"uiSe",value:dF}))}}),epe=[{reg:/\\\\/g,val:"\\"},{reg:/\\\|/g,val:"|"},{reg:/\\:/g,val:":"},{reg:/\\,/g,val:","},{reg:/\\;/g,val:";"},{reg:/\\./g,val:"."}],yS=e=>{let t=e;for(let r of epe)t=t.replaceAll(r.reg,r.val);return t};function tpe(e){return Sm.parseScssToWebgalStyleObj(e)}function Nn(e){const[t,r]=G.useState(e);return{_value:t,set:function(n){this._value=n,r(n)},get value(){return this._value},set value(n){this.set(n)}}}function rpe(e){if(e.sheet)return e.sheet;for(var t=0;t<document.styleSheets.length;t++)if(document.styleSheets[t].ownerNode===e)return document.styleSheets[t]}function npe(e){var t=document.createElement("style");return t.setAttribute("data-emotion",e.key),e.nonce!==void 0&&t.setAttribute("nonce",e.nonce),t.appendChild(document.createTextNode("")),t.setAttribute("data-s",""),t}var ipe=function(){function e(r){var n=this;this._insertTag=function(i){var o;n.tags.length===0?n.insertionPoint?o=n.insertionPoint.nextSibling:n.prepend?o=n.container.firstChild:o=n.before:o=n.tags[n.tags.length-1].nextSibling,n.container.insertBefore(i,o),n.tags.push(i)},this.isSpeedy=r.speedy===void 0?!0:r.speedy,this.tags=[],this.ctr=0,this.nonce=r.nonce,this.key=r.key,this.container=r.container,this.prepend=r.prepend,this.insertionPoint=r.insertionPoint,this.before=null}var t=e.prototype;return t.hydrate=function(n){n.forEach(this._insertTag)},t.insert=function(n){this.ctr%(this.isSpeedy?65e3:1)===0&&this._insertTag(npe(this));var i=this.tags[this.tags.length-1];if(this.isSpeedy){var o=rpe(i);try{o.insertRule(n,o.cssRules.length)}catch{}}else i.appendChild(document.createTextNode(n));this.ctr++},t.flush=function(){this.tags.forEach(function(n){return n.parentNode&&n.parentNode.removeChild(n)}),this.tags=[],this.ctr=0},e}(),dr="-ms-",Fd="-moz-",Ue="-webkit-",AF="comm",_S="rule",xS="decl",ope="@import",OF="@keyframes",ape="@layer",spe=Math.abs,gm=String.fromCharCode,lpe=Object.assign;function upe(e,t){return ar(e,0)^45?(((t<<2^ar(e,0))<<2^ar(e,1))<<2^ar(e,2))<<2^ar(e,3):0}function IF(e){return e.trim()}function cpe(e,t){return(e=t.exec(e))?e[0]:e}function $e(e,t,r){return e.replace(t,r)}function nx(e,t){return e.indexOf(t)}function ar(e,t){return e.charCodeAt(t)|0}function Rc(e,t,r){return e.slice(t,r)}function Jn(e){return e.length}function bS(e){return e.length}function th(e,t){return t.push(e),e}function fpe(e,t){return e.map(t).join("")}var ym=1,il=1,MF=0,Vr=0,Nt=0,Cl="";function _m(e,t,r,n,i,o,a){return{value:e,root:t,parent:r,type:n,props:i,children:o,line:ym,column:il,length:a,return:""}}function su(e,t){return lpe(_m("",null,null,"",null,null,0),e,{length:-e.length},t)}function hpe(){return Nt}function dpe(){return Nt=Vr>0?ar(Cl,--Vr):0,il--,Nt===10&&(il=1,ym--),Nt}function Zr(){return Nt=Vr<MF?ar(Cl,Vr++):0,il++,Nt===10&&(il=1,ym++),Nt}function hi(){return ar(Cl,Vr)}function Mh(){return Vr}function nf(e,t){return Rc(Cl,e,t)}function kc(e){switch(e){case 0:case 9:case 10:case 13:case 32:return 5;case 33:case 43:case 44:case 47:case 62:case 64:case 126:case 59:case 123:case 125:return 4;case 58:return 3;case 34:case 39:case 40:case 91:return 2;case 41:case 93:return 1}return 0}function RF(e){return ym=il=1,MF=Jn(Cl=e),Vr=0,[]}function kF(e){return Cl="",e}function Rh(e){return IF(nf(Vr-1,ix(e===91?e+2:e===40?e+1:e)))}function ppe(e){for(;(Nt=hi())&&Nt<33;)Zr();return kc(e)>2||kc(Nt)>3?"":" "}function mpe(e,t){for(;--t&&Zr()&&!(Nt<48||Nt>102||Nt>57&&Nt<65||Nt>70&&Nt<97););return nf(e,Mh()+(t<6&&hi()==32&&Zr()==32))}function ix(e){for(;Zr();)switch(Nt){case e:return Vr;case 34:case 39:e!==34&&e!==39&&ix(Nt);break;case 40:e===41&&ix(e);break;case 92:Zr();break}return Vr}function vpe(e,t){for(;Zr()&&e+Nt!==47+10;)if(e+Nt===42+42&&hi()===47)break;return"/*"+nf(t,Vr-1)+"*"+gm(e===47?e:Zr())}function gpe(e){for(;!kc(hi());)Zr();return nf(e,Vr)}function ype(e){return kF(kh("",null,null,null,[""],e=RF(e),0,[0],e))}function kh(e,t,r,n,i,o,a,s,l){for(var u=0,c=0,f=a,h=0,d=0,m=0,g=1,p=1,v=1,y=0,_="",x=i,b=o,S=n,E=_;p;)switch(m=y,y=Zr()){case 40:if(m!=108&&ar(E,f-1)==58){nx(E+=$e(Rh(y),"&","&\f"),"&\f")!=-1&&(v=-1);break}case 34:case 39:case 91:E+=Rh(y);break;case 9:case 10:case 13:case 32:E+=ppe(m);break;case 92:E+=mpe(Mh()-1,7);continue;case 47:switch(hi()){case 42:case 47:th(_pe(vpe(Zr(),Mh()),t,r),l);break;default:E+="/"}break;case 123*g:s[u++]=Jn(E)*v;case 125*g:case 59:case 0:switch(y){case 0:case 125:p=0;case 59+c:v==-1&&(E=$e(E,/\f/g,"")),d>0&&Jn(E)-f&&th(d>32?yA(E+";",n,r,f-1):yA($e(E," ","")+";",n,r,f-2),l);break;case 59:E+=";";default:if(th(S=gA(E,t,r,u,c,i,s,_,x=[],b=[],f),o),y===123)if(c===0)kh(E,t,S,S,x,o,f,s,b);else switch(h===99&&ar(E,3)===110?100:h){case 100:case 108:case 109:case 115:kh(e,S,S,n&&th(gA(e,S,S,0,0,i,s,_,i,x=[],f),b),i,b,f,s,n?x:b);break;default:kh(E,S,S,S,[""],b,0,s,b)}}u=c=d=0,g=v=1,_=E="",f=a;break;case 58:f=1+Jn(E),d=m;default:if(g<1){if(y==123)--g;else if(y==125&&g++==0&&dpe()==125)continue}switch(E+=gm(y),y*g){case 38:v=c>0?1:(E+="\f",-1);break;case 44:s[u++]=(Jn(E)-1)*v,v=1;break;case 64:hi()===45&&(E+=Rh(Zr())),h=hi(),c=f=Jn(_=E+=gpe(Mh())),y++;break;case 45:m===45&&Jn(E)==2&&(g=0)}}return o}function gA(e,t,r,n,i,o,a,s,l,u,c){for(var f=i-1,h=i===0?o:[""],d=bS(h),m=0,g=0,p=0;m<n;++m)for(var v=0,y=Rc(e,f+1,f=spe(g=a[m])),_=e;v<d;++v)(_=IF(g>0?h[v]+" "+y:$e(y,/&\f/g,h[v])))&&(l[p++]=_);return _m(e,t,r,i===0?_S:s,l,u,c)}function _pe(e,t,r){return _m(e,t,r,AF,gm(hpe()),Rc(e,2,-2),0)}function yA(e,t,r,n){return _m(e,t,r,xS,Rc(e,0,n),Rc(e,n+1,-1),n)}function js(e,t){for(var r="",n=bS(e),i=0;i<n;i++)r+=t(e[i],i,e,t)||"";return r}function xpe(e,t,r,n){switch(e.type){case ape:if(e.children.length)break;case ope:case xS:return e.return=e.return||e.value;case AF:return"";case OF:return e.return=e.value+"{"+js(e.children,n)+"}";case _S:e.value=e.props.join(",")}return Jn(r=js(e.children,n))?e.return=e.value+"{"+r+"}":""}function bpe(e){var t=bS(e);return function(r,n,i,o){for(var a="",s=0;s<t;s++)a+=e[s](r,n,i,o)||"";return a}}function Spe(e){return function(t){t.root||(t=t.return)&&e(t)}}function wpe(e){var t=Object.create(null);return function(r){return t[r]===void 0&&(t[r]=e(r)),t[r]}}var Epe=function(t,r,n){for(var i=0,o=0;i=o,o=hi(),i===38&&o===12&&(r[n]=1),!kc(o);)Zr();return nf(t,Vr)},Tpe=function(t,r){var n=-1,i=44;do switch(kc(i)){case 0:i===38&&hi()===12&&(r[n]=1),t[n]+=Epe(Vr-1,r,n);break;case 2:t[n]+=Rh(i);break;case 4:if(i===44){t[++n]=hi()===58?"&\f":"",r[n]=t[n].length;break}default:t[n]+=gm(i)}while(i=Zr());return t},Cpe=function(t,r){return kF(Tpe(RF(t),r))},_A=new WeakMap,Ppe=function(t){if(!(t.type!=="rule"||!t.parent||t.length<1)){for(var r=t.value,n=t.parent,i=t.column===n.column&&t.line===n.line;n.type!=="rule";)if(n=n.parent,!n)return;if(!(t.props.length===1&&r.charCodeAt(0)!==58&&!_A.get(n))&&!i){_A.set(t,!0);for(var o=[],a=Cpe(r,o),s=n.props,l=0,u=0;l<a.length;l++)for(var c=0;c<s.length;c++,u++)t.props[u]=o[l]?a[l].replace(/&\f/g,s[c]):s[c]+" "+a[l]}}},Ape=function(t){if(t.type==="decl"){var r=t.value;r.charCodeAt(0)===108&&r.charCodeAt(2)===98&&(t.return="",t.value="")}};function LF(e,t){switch(upe(e,t)){case 5103:return Ue+"print-"+e+e;case 5737:case 4201:case 3177:case 3433:case 1641:case 4457:case 2921:case 5572:case 6356:case 5844:case 3191:case 6645:case 3005:case 6391:case 5879:case 5623:case 6135:case 4599:case 4855:case 4215:case 6389:case 5109:case 5365:case 5621:case 3829:return Ue+e+e;case 5349:case 4246:case 4810:case 6968:case 2756:return Ue+e+Fd+e+dr+e+e;case 6828:case 4268:return Ue+e+dr+e+e;case 6165:return Ue+e+dr+"flex-"+e+e;case 5187:return Ue+e+$e(e,/(\w+).+(:[^]+)/,Ue+"box-$1$2"+dr+"flex-$1$2")+e;case 5443:return Ue+e+dr+"flex-item-"+$e(e,/flex-|-self/,"")+e;case 4675:return Ue+e+dr+"flex-line-pack"+$e(e,/align-content|flex-|-self/,"")+e;case 5548:return Ue+e+dr+$e(e,"shrink","negative")+e;case 5292:return Ue+e+dr+$e(e,"basis","preferred-size")+e;case 6060:return Ue+"box-"+$e(e,"-grow","")+Ue+e+dr+$e(e,"grow","positive")+e;case 4554:return Ue+$e(e,/([^-])(transform)/g,"$1"+Ue+"$2")+e;case 6187:return $e($e($e(e,/(zoom-|grab)/,Ue+"$1"),/(image-set)/,Ue+"$1"),e,"")+e;case 5495:case 3959:return $e(e,/(image-set\([^]*)/,Ue+"$1$`$1");case 4968:return $e($e(e,/(.+:)(flex-)?(.*)/,Ue+"box-pack:$3"+dr+"flex-pack:$3"),/s.+-b[^;]+/,"justify")+Ue+e+e;case 4095:case 3583:case 4068:case 2532:return $e(e,/(.+)-inline(.+)/,Ue+"$1$2")+e;case 8116:case 7059:case 5753:case 5535:case 5445:case 5701:case 4933:case 4677:case 5533:case 5789:case 5021:case 4765:if(Jn(e)-1-t>6)switch(ar(e,t+1)){case 109:if(ar(e,t+4)!==45)break;case 102:return $e(e,/(.+:)(.+)-([^]+)/,"$1"+Ue+"$2-$3$1"+Fd+(ar(e,t+3)==108?"$3":"$2-$3"))+e;case 115:return~nx(e,"stretch")?LF($e(e,"stretch","fill-available"),t)+e:e}break;case 4949:if(ar(e,t+1)!==115)break;case 6444:switch(ar(e,Jn(e)-3-(~nx(e,"!important")&&10))){case 107:return $e(e,":",":"+Ue)+e;case 101:return $e(e,/(.+:)([^;!]+)(;|!.+)?/,"$1"+Ue+(ar(e,14)===45?"inline-":"")+"box$3$1"+Ue+"$2$3$1"+dr+"$2box$3")+e}break;case 5936:switch(ar(e,t+11)){case 114:return Ue+e+dr+$e(e,/[svh]\w+-[tblr]{2}/,"tb")+e;case 108:return Ue+e+dr+$e(e,/[svh]\w+-[tblr]{2}/,"tb-rl")+e;case 45:return Ue+e+dr+$e(e,/[svh]\w+-[tblr]{2}/,"lr")+e}return Ue+e+dr+e+e}return e}var Ope=function(t,r,n,i){if(t.length>-1&&!t.return)switch(t.type){case xS:t.return=LF(t.value,t.length);break;case OF:return js([su(t,{value:$e(t.value,"@","@"+Ue)})],i);case _S:if(t.length)return fpe(t.props,function(o){switch(cpe(o,/(::plac\w+|:read-\w+)/)){case":read-only":case":read-write":return js([su(t,{props:[$e(o,/:(read-\w+)/,":"+Fd+"$1")]})],i);case"::placeholder":return js([su(t,{props:[$e(o,/:(plac\w+)/,":"+Ue+"input-$1")]}),su(t,{props:[$e(o,/:(plac\w+)/,":"+Fd+"$1")]}),su(t,{props:[$e(o,/:(plac\w+)/,dr+"input-$1")]})],i)}return""})}},Ipe=[Ope],Mpe=function(t){var r=t.key;if(r==="css"){var n=document.querySelectorAll("style[data-emotion]:not([data-s])");Array.prototype.forEach.call(n,function(g){var p=g.getAttribute("data-emotion");p.indexOf(" ")!==-1&&(document.head.appendChild(g),g.setAttribute("data-s",""))})}var i=t.stylisPlugins||Ipe,o={},a,s=[];a=t.container||document.head,Array.prototype.forEach.call(document.querySelectorAll('style[data-emotion^="'+r+' "]'),function(g){for(var p=g.getAttribute("data-emotion").split(" "),v=1;v<p.length;v++)o[p[v]]=!0;s.push(g)});var l,u=[Ppe,Ape];{var c,f=[xpe,Spe(function(g){c.insert(g)})],h=bpe(u.concat(i,f)),d=function(p){return js(ype(p),h)};l=function(p,v,y,_){c=y,d(p?p+"{"+v.styles+"}":v.styles),_&&(m.inserted[v.name]=!0)}}var m={key:r,sheet:new ipe({key:r,container:a,nonce:t.nonce,speedy:t.speedy,prepend:t.prepend,insertionPoint:t.insertionPoint}),nonce:t.nonce,inserted:o,registered:{},insert:l};return m.sheet.hydrate(s),m};function Rpe(e){for(var t=0,r,n=0,i=e.length;i>=4;++n,i-=4)r=e.charCodeAt(n)&255|(e.charCodeAt(++n)&255)<<8|(e.charCodeAt(++n)&255)<<16|(e.charCodeAt(++n)&255)<<24,r=(r&65535)*1540483477+((r>>>16)*59797<<16),r^=r>>>24,t=(r&65535)*1540483477+((r>>>16)*59797<<16)^(t&65535)*1540483477+((t>>>16)*59797<<16);switch(i){case 3:t^=(e.charCodeAt(n+2)&255)<<16;case 2:t^=(e.charCodeAt(n+1)&255)<<8;case 1:t^=e.charCodeAt(n)&255,t=(t&65535)*1540483477+((t>>>16)*59797<<16)}return t^=t>>>13,t=(t&65535)*1540483477+((t>>>16)*59797<<16),((t^t>>>15)>>>0).toString(36)}var kpe={animationIterationCount:1,aspectRatio:1,borderImageOutset:1,borderImageSlice:1,borderImageWidth:1,boxFlex:1,boxFlexGroup:1,boxOrdinalGroup:1,columnCount:1,columns:1,flex:1,flexGrow:1,flexPositive:1,flexShrink:1,flexNegative:1,flexOrder:1,gridRow:1,gridRowEnd:1,gridRowSpan:1,gridRowStart:1,gridColumn:1,gridColumnEnd:1,gridColumnSpan:1,gridColumnStart:1,msGridRow:1,msGridRowSpan:1,msGridColumn:1,msGridColumnSpan:1,fontWeight:1,lineHeight:1,opacity:1,order:1,orphans:1,tabSize:1,widows:1,zIndex:1,zoom:1,WebkitLineClamp:1,fillOpacity:1,floodOpacity:1,stopOpacity:1,strokeDasharray:1,strokeDashoffset:1,strokeMiterlimit:1,strokeOpacity:1,strokeWidth:1},Lpe=/[A-Z]|^ms/g,Fpe=/_EMO_([^_]+?)_([^]*?)_EMO_/g,FF=function(t){return t.charCodeAt(1)===45},xA=function(t){return t!=null&&typeof t!="boolean"},Vg=wpe(function(e){return FF(e)?e:e.replace(Lpe,"-$&").toLowerCase()}),bA=function(t,r){switch(t){case"animation":case"animationName":if(typeof r=="string")return r.replace(Fpe,function(n,i,o){return Qn={name:i,styles:o,next:Qn},i})}return kpe[t]!==1&&!FF(t)&&typeof r=="number"&&r!==0?r+"px":r};function Lc(e,t,r){if(r==null)return"";if(r.__emotion_styles!==void 0)return r;switch(typeof r){case"boolean":return"";case"object":{if(r.anim===1)return Qn={name:r.name,styles:r.styles,next:Qn},r.name;if(r.styles!==void 0){var n=r.next;if(n!==void 0)for(;n!==void 0;)Qn={name:n.name,styles:n.styles,next:Qn},n=n.next;var i=r.styles+";";return i}return Dpe(e,t,r)}case"function":{if(e!==void 0){var o=Qn,a=r(e);return Qn=o,Lc(e,t,a)}break}}if(t==null)return r;var s=t[r];return s!==void 0?s:r}function Dpe(e,t,r){var n="";if(Array.isArray(r))for(var i=0;i<r.length;i++)n+=Lc(e,t,r[i])+";";else for(var o in r){var a=r[o];if(typeof a!="object")t!=null&&t[a]!==void 0?n+=o+"{"+t[a]+"}":xA(a)&&(n+=Vg(o)+":"+bA(o,a)+";");else if(Array.isArray(a)&&typeof a[0]=="string"&&(t==null||t[a[0]]===void 0))for(var s=0;s<a.length;s++)xA(a[s])&&(n+=Vg(o)+":"+bA(o,a[s])+";");else{var l=Lc(e,t,a);switch(o){case"animation":case"animationName":{n+=Vg(o)+":"+l+";";break}default:n+=o+"{"+l+"}"}}}return n}var SA=/label:\s*([^\s;\n{]+)\s*(;|$)/g,Qn,Hg=function(t,r,n){if(t.length===1&&typeof t[0]=="object"&&t[0]!==null&&t[0].styles!==void 0)return t[0];var i=!0,o="";Qn=void 0;var a=t[0];a==null||a.raw===void 0?(i=!1,o+=Lc(n,r,a)):o+=a[0];for(var s=1;s<t.length;s++)o+=Lc(n,r,t[s]),i&&(o+=a[s]);SA.lastIndex=0;for(var l="",u;(u=SA.exec(o))!==null;)l+="-"+u[1];var c=Rpe(o)+l;return{name:c,styles:o,next:Qn}},Npe=!0;function DF(e,t,r){var n="";return r.split(" ").forEach(function(i){e[i]!==void 0?t.push(e[i]+";"):n+=i+" "}),n}var Bpe=function(t,r,n){var i=t.key+"-"+r.name;(n===!1||Npe===!1)&&t.registered[i]===void 0&&(t.registered[i]=r.styles)},jpe=function(t,r,n){Bpe(t,r,n);var i=t.key+"-"+r.name;if(t.inserted[r.name]===void 0){var o=r;do t.insert(r===o?"."+i:"",o,t.sheet,!0),o=o.next;while(o!==void 0)}};function wA(e,t){if(e.inserted[t.name]===void 0)return e.insert("",t,e.sheet,!0)}function EA(e,t,r){var n=[],i=DF(e,n,r);return n.length<2?r:i+t(n)}var Upe=function(t){var r=Mpe(t);r.sheet.speedy=function(s){this.isSpeedy=s},r.compat=!0;var n=function(){for(var l=arguments.length,u=new Array(l),c=0;c<l;c++)u[c]=arguments[c];var f=Hg(u,r.registered,void 0);return jpe(r,f,!1),r.key+"-"+f.name},i=function(){for(var l=arguments.length,u=new Array(l),c=0;c<l;c++)u[c]=arguments[c];var f=Hg(u,r.registered),h="animation-"+f.name;return wA(r,{name:f.name,styles:"@keyframes "+h+"{"+f.styles+"}"}),h},o=function(){for(var l=arguments.length,u=new Array(l),c=0;c<l;c++)u[c]=arguments[c];var f=Hg(u,r.registered);wA(r,f)},a=function(){for(var l=arguments.length,u=new Array(l),c=0;c<l;c++)u[c]=arguments[c];return EA(r.registered,n,$pe(u))};return{css:n,cx:a,injectGlobal:o,keyframes:i,hydrate:function(l){l.forEach(function(u){r.inserted[u]=!0})},flush:function(){r.registered={},r.inserted={},r.sheet.flush()},sheet:r.sheet,cache:r,getRegisteredStyles:DF.bind(null,r.registered),merge:EA.bind(null,r.registered,n)}},$pe=function e(t){for(var r="",n=0;n<t.length;n++){var i=t[n];if(i!=null){var o=void 0;switch(typeof i){case"boolean":break;case"object":{if(Array.isArray(i))o=e(i);else{o="";for(var a in i)i[a]&&a&&(o&&(o+=" "),o+=a)}break}default:o=i}o&&(r&&(r+=" "),r+=o)}}return r},NF=Upe({key:"css"}),Gpe=NF.injectGlobal,wu=NF.css;function SS(e){const t=Nn({classNameStyles:{},others:""}),r=me(o=>o.stage.replacedUIlable),n=(o,a)=>{var l;const s=(r==null?void 0:r[o])??o;if(Object.keys(t.value.classNameStyles).includes(s)){const u=wu(((l=t.value.classNameStyles)==null?void 0:l[s])??"");return`${a} ${u}`}return a},i=async()=>{te.debug(" Scss ",e);const a=(await cc.get(`game/template/${e}`)).data;t.set(tpe(a))};return G.useEffect(()=>{i()},[]),G.useEffect(()=>{Gpe(t.value.others)},[t.value.others]),zpe(i),n}function zpe(e){const t=()=>{e()};G.useEffect(()=>(C.events.styleUpdate.on(t),()=>C.events.styleUpdate.off(t)),[])}class wS{constructor(t,r){oe(this,"text");oe(this,"jump");oe(this,"jumpToScene");oe(this,"showCondition");oe(this,"enableCondition");this.text=yS(t),this.jump=r,this.jumpToScene=r.match(new RegExp("(?<!\\\\)\\."))!==null}static parse(t){const r=t.split("->"),n=r.length>1?r[0]:null,o=(r.length>1?r[1]:r[0]).split(new RegExp("(?<!\\\\):","g")),a=new wS(o[0],o[1]);if(n!==null){const s=n.match(/\((.*)\)/);s&&(a.showCondition=s[1]);const l=n.match(/\[(.*)\]/);l&&(a.enableCondition=l[1])}return a}}const Vpe=e=>{const r=e.content.split(new RegExp("(?<!\\\\)\\|")).map(n=>wS.parse(n));return di.render(w.jsx(CF,{store:N,children:w.jsx(Hpe,{chooseOptions:r})}),document.getElementById("chooseContainer")),{performName:"choose",duration:1e3*60*60*24,isHoldOn:!1,stopFunction:()=>{di.render(w.jsx("div",{}),document.getElementById("chooseContainer"))},blockingNext:()=>!0,blockingAuto:()=>!0,stopTimeout:void 0}};function Hpe(e){const r=N.getState().userData.optionData.textboxFont===ui.song?'"", serif':'"WebgalUI", serif',{playSeEnter:n,playSeClick:i}=gS(),o=SS("Stage/Choose/choose.scss"),a=s=>s.filter((l,u)=>lx(l.showCondition)).map((l,u)=>{const c=lx(l.enableCondition),f=c?o("Choose_item",eh.Choose_item):o("Choose_item_disabled",eh.Choose_item_disabled),h=c?()=>{i(),l.jumpToScene?cF(l.jump,l.text):fF(l.jump),C.gameplay.performController.unmountPerform("choose")}:()=>{};return w.jsx("div",{className:o("Choose_item_outer",eh.Choose_item_outer),children:w.jsx("div",{className:f,style:{fontFamily:r},onClick:h,onMouseEnter:n,children:l.text})},l.jump+u)});return w.jsx("div",{className:o("Choose_Main",eh.Choose_Main),children:a(e.chooseOptions)})}const Wpe=e=>(te.debug(`${e.content}`),{performName:"none",duration:0,isHoldOn:!1,stopFunction:()=>{},blockingNext:()=>!1,blockingAuto:()=>!0,stopTimeout:void 0}),Xpe=e=>(e.content!==""&&e.content!=="none"?N.dispatch(Ce({key:"enableFilm",value:e.content})):N.dispatch(Ce({key:"enableFilm",value:""})),{performName:"none",duration:0,isHoldOn:!1,stopFunction:()=>{},blockingNext:()=>!1,blockingAuto:()=>!0,stopTimeout:void 0}),qpe="_Choose_Main_4xkm5_1",Ype="_Choose_item_4xkm5_13",Kpe="_glabalDialog_container_inner_4xkm5_28",Zpe="_glabalDialog_container_4xkm5_28",Jpe="_title_4xkm5_47",Qpe="_button_4xkm5_59",is={Choose_Main:qpe,Choose_item:Ype,glabalDialog_container_inner:Kpe,glabalDialog_container:Zpe,title:Jpe,button:Qpe},eme=e=>{const t=e.content.toString().trim(),r=Ie(e,"title"),n=(r===0?"Please Input":r)??"Please Input",i=Ie(e,"buttonText"),o=(i===0?"OK":i)??"OK",s=N.getState().userData.optionData.textboxFont===ui.song?'"", serif':'"WebgalUI", serif',{playSeEnter:l,playSeClick:u}=gS(),c=w.jsx("div",{style:{fontFamily:s},className:is.glabalDialog_container,children:w.jsxs("div",{className:is.glabalDialog_container_inner,children:[w.jsx("div",{className:is.title,children:n}),w.jsx("input",{id:"user-input",className:is.Choose_item}),w.jsx("div",{onMouseEnter:l,onClick:()=>{const f=document.getElementById("user-input");f&&N.dispatch(YI({key:t,value:((f==null?void 0:f.value)??"")===""?" ":(f==null?void 0:f.value)??""})),u(),C.gameplay.performController.unmountPerform("userInput"),cr()},className:is.button,children:o})]})});return di.render(w.jsx("div",{className:is.Choose_Main,children:c}),document.getElementById("chooseContainer")),{performName:"userInput",duration:1e3*60*60*24,isHoldOn:!1,stopFunction:()=>{di.render(w.jsx("div",{}),document.getElementById("chooseContainer"))},blockingNext:()=>!0,blockingAuto:()=>!0,stopTimeout:void 0}},tme="_FullScreenPerform_main_7er8a_2",rme="_FullScreenPerform_element_7er8a_9",nme="_fullScreen_video_7er8a_17",ime="_fadeIn_7er8a_74",ome="_intro_showSoftly_7er8a_1",ame="_slideIn_7er8a_80",sme="_typingEffect_7er8a_86",lme="_typing_7er8a_86",ume="_blinkCursor_7er8a_1",cme="_pixelateEffect_7er8a_95",fme="_pixelateAnimation_7er8a_1",hme="_revealAnimation_7er8a_101",dme="_videoContainer_7er8a_115",Yn={FullScreenPerform_main:tme,FullScreenPerform_element:rme,fullScreen_video:nme,fadeIn:ime,intro_showSoftly:ome,slideIn:ame,typingEffect:sme,typing:lme,blinkCursor:ume,pixelateEffect:cme,pixelateAnimation:fme,revealAnimation:hme,videoContainer:dme},pme=e=>{const t=`introPerform${Math.random().toString()}`;let r,n="rgba(0, 0, 0, 1)",i="rgba(255, 255, 255, 1)";const o=(S,E=0)=>{switch(S){case"fadeIn":return Yn.fadeIn;case"slideIn":return Yn.slideIn;case"typingEffect":return`${Yn.typingEffect} ${E}`;case"pixelateEffect":return Yn.pixelateEffect;case"revealAnimation":return Yn.revealAnimation;default:return Yn.fadeIn}};let a=Yn.fadeIn,s=1500,l=!1,u=!1;for(const S of e.args){if(S.key==="backgroundColor"&&(n=S.value||"rgba(0, 0, 0, 1)"),S.key==="fontColor"&&(i=S.value||"rgba(255, 255, 255, 1)"),S.key==="fontSize")switch(S.value){case"small":r="280%";break;case"medium":r="350%";break;case"large":r="420%";break}if(S.key==="animation"&&(a=o(S.value)),S.key==="delayTime"){const E=parseInt(S.value.toString(),10);s=isNaN(E)?s:E}S.key==="hold"&&S.value===!0&&(l=!0),S.key==="userForward"&&S.value===!0&&(u=!0,l=!0,s=99999999)}const c={background:n,color:i,fontSize:r||"350%",width:"100%",height:"100%"},f=e.content.split(new RegExp("(?<!\\\\)\\|")).map(S=>yS(S));let d=1e3+s*f.length;const m=l?1e3*60*60*24:1e3+s*f.length;let g=!0,p=setTimeout(()=>{g=!1},d),v=setTimeout(()=>{});const y=()=>{const S=document.getElementById("introContainer");if(d-=s,clearTimeout(p),p=setTimeout(()=>{g=!1},d),S){const E=S.childNodes[0].childNodes[0].childNodes,I=E.length;if(u){let A=!0;for(const O of E)if(Number(O.style.animationDelay.split("ms")[0])>0){A=!1;const B=O.getAnimations();O.style.animationDelay="0ms ";for(const j of B)j.currentTime=0,j.play()}A&&(clearTimeout(v),clearTimeout(p),C.gameplay.performController.unmountPerform(t));return}E.forEach((A,O)=>{const D=Number(A.style.animationDelay.split("ms")[0]);D>0&&(A.style.animationDelay=`${D-s}ms`),O===I-1&&(D===0?(clearTimeout(v),C.gameplay.performController.unmountPerform(t)):(clearTimeout(v),l||(v=setTimeout(()=>{C.gameplay.performController.unmountPerform(t)},d))))})}};C.events.userInteractNext.on(y);const _=f.map((S,E)=>w.jsxs("div",{style:{animationDelay:`${s*E}ms`},className:a,children:[S,S===""?"":""]},"introtext"+E+Math.random().toString())),x=w.jsx("div",{style:c,children:w.jsx("div",{style:{padding:"3em 4em 3em 4em"},children:_})});di.render(x,document.getElementById("introContainer"));const b=document.getElementById("introContainer");return b&&(b.style.display="block"),{performName:t,duration:m,isHoldOn:!1,stopFunction:()=>{const S=document.getElementById("introContainer");S&&(S.style.display="none"),C.events.userInteractNext.off(y)},blockingNext:()=>g,blockingAuto:()=>g,stopTimeout:void 0,goNextWhenOver:!0}},mme=e=>({performName:"none",duration:0,isHoldOn:!1,stopFunction:()=>{},blockingNext:()=>!1,blockingAuto:()=>!0,stopTimeout:void 0}),vme=e=>{let t=e.content;return(e.content==="none"||e.content==="")&&(t=""),N.dispatch(Ce({key:"miniAvatar",value:t})),{performName:"none",duration:0,isHoldOn:!0,stopFunction:()=>{},blockingNext:()=>!1,blockingAuto:()=>!0,stopTimeout:void 0}},gme="modulepreload",yme=function(e,t){return new URL(e,t).href},TA={},_me=function(t,r,n){if(!r||r.length===0)return t();const i=document.getElementsByTagName("link");return Promise.all(r.map(o=>{if(o=yme(o,n),o in TA)return;TA[o]=!0;const a=o.endsWith(".css"),s=a?'[rel="stylesheet"]':"";if(!!n)for(let c=i.length-1;c>=0;c--){const f=i[c];if(f.href===o&&(!a||f.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${o}"]${s}`))return;const u=document.createElement("link");if(u.rel=a?"stylesheet":gme,a||(u.as="script",u.crossOrigin=""),u.href=o,document.head.appendChild(u),a)return new Promise((c,f)=>{u.addEventListener("load",c),u.addEventListener("error",()=>f(new Error(`Unable to preload CSS for ${o}`)))})})).then(()=>t()).catch(o=>{const a=new Event("vite:preloadError",{cancelable:!0});if(a.payload=o,window.dispatchEvent(a),!a.defaultPrevented)throw o})},BF=new Map;function xme(e){return e?typeof e=="string"?e:e():null}function jF(e){const t=xme(e);return t||(te.error("Get name of perform failed. There no name of the perform."),"")}function K1e(e,t){if(!t||typeof t!="function")throw new Error(`"${e}" is not a callback.`);BF.set(jF(e),t)}function bme(e,t=[]){const r=BF.get(jF(e));if(!r||!(r instanceof Function))throw te.error(`Can't call the perform named "${e}"`),new Error(`"${e}" don't have the pixiPerform callback.`);return r(...t)}_me(()=>import("./initRegister-30d95af6.js"),[],import.meta.url);const Sme=e=>{const t="PixiPerform"+e.content;C.gameplay.performController.performList.forEach(o=>{if(o.performName===t)return{performName:"none",duration:0,isOver:!1,isHoldOn:!0,stopFunction:()=>{},blockingNext:()=>!1,blockingAuto:()=>!1,stopTimeout:void 0}});const r=bme(e.content),{container:n,tickerKey:i}=r;return{performName:t,duration:0,isHoldOn:!0,stopFunction:()=>{var o,a;te.warn("pixi"),n.destroy({texture:!0,baseTexture:!0}),(o=C.gameplay.pixiStage)==null||o.effectsContainer.removeChild(n),(a=C.gameplay.pixiStage)==null||a.removeAnimation(i)},blockingNext:()=>!1,blockingAuto:()=>!1,stopTimeout:void 0}},wme=e=>{var o;te.debug("play SE");let t="effect-sound";C.gameplay.performController.unmountPerform(t,!0);let r=e.content,n=!1;Ie(e,"id")&&(t=`effect-sound-${((o=Ie(e,"id"))==null?void 0:o.toString())??""}`,C.gameplay.performController.unmountPerform(t,!0),n=!0);let i=!1;return!r||r===t_?{performName:t_,duration:0,isHoldOn:!1,blockingAuto(){return!1},blockingNext(){return!1},stopFunction(){},stopTimeout:void 0}:{performName:"none",blockingAuto(){return!1},blockingNext(){return!1},isHoldOn:!1,stopFunction(){},stopTimeout:void 0,duration:1e3*60*60,arrangePerformPromise:new Promise(a=>{setTimeout(()=>{var m;const s=Ie(e,"volume");let l=document.createElement("audio");l.src=r,n&&(l.loop=!0);const u=N.getState().userData,c=u.optionData.volumeMain,f=typeof s=="number"&&s>=0&&s<=100?s:100,h=c*.01*(((m=u.optionData)==null?void 0:m.seVolume)??100)*.01*f*.01;l.volume=h,l.currentTime=0;const d={performName:t,duration:1e3*60*60,isHoldOn:n,skipNextCollect:!0,stopFunction:()=>{l.pause(),l.remove()},blockingNext:()=>!1,blockingAuto:()=>n?!1:!i,stopTimeout:void 0};a(d),l==null||l.play(),l.onended=()=>{for(const g of C.gameplay.performController.performList)g.performName===t&&(i=!0,g.stopFunction(),C.gameplay.performController.unmountPerform(g.performName))}},1)})}},Eme=e=>{const t=N.getState().userData,r=t.optionData.volumeMain,n=r*.01*t.optionData.vocalVolume*.01,i=r*.01*t.optionData.bgmVolume*.01,o=RS();let a=Ie(e,"skipOff"),s=!1;a&&(s=!0),di.render(w.jsx("div",{className:Yn.videoContainer,children:w.jsx("video",{className:Yn.fullScreen_video,id:"playVideoElement",src:e.content,autoPlay:!0})}),document.getElementById("videoContainer"));let l=!1;return{performName:"none",duration:0,isHoldOn:!1,stopFunction:()=>{},blockingNext:()=>s,blockingAuto:()=>!0,stopTimeout:void 0,arrangePerformPromise:new Promise(u=>{setTimeout(()=>{let c=document.getElementById("playVideoElement");if(c!==null){c.currentTime=0,c.volume=i;const f=()=>{for(const y of C.gameplay.performController.performList)y.performName===o&&(l=!0,y.stopFunction(),C.gameplay.performController.unmountPerform(y.performName))},h=()=>{f()};C.events.fullscreenDbClick.on(h);const d={performName:o,duration:1e3*60*60,isOver:!1,isHoldOn:!1,stopFunction:()=>{C.events.fullscreenDbClick.off(h);const y=document.getElementById("currentBgm");y&&(y.volume=i.toString());const _=document.getElementById("currentVocal");y&&(_.volume=n.toString()),di.render(w.jsx("div",{}),document.getElementById("videoContainer"))},blockingNext:()=>s,blockingAuto:()=>!l,stopTimeout:void 0,goNextWhenOver:!0};u(d);const m=0,g=0,p=document.getElementById("currentBgm");p&&(p.volume=g.toString());const v=document.getElementById("currentVocal");p&&(v.volume=m.toString()),c==null||c.play(),c.onended=()=>{f()}}},1)})}},Tme=e=>{var a;N.getState().stage.currentDialogKey;const t=e.content,r=Ur(t),n=(((a=Ie(e,"target"))==null?void 0:a.toString())??"default_id").toString(),i=`${n}-${t}-${r}`;let o;return setTimeout(()=>{var l,u;(l=C.gameplay.pixiStage)==null||l.stopPresetAnimationOnTarget(n);const s=Ld(t,n,r);s&&(te.debug(`${t}${n}`,r),(u=C.gameplay.pixiStage)==null||u.registerAnimation(s,i,n))},0),o=()=>{setTimeout(()=>{var s;N.getState().stage.currentDialogKey,(s=C.gameplay.pixiStage)==null||s.removeAnimationWithSetEffects(i)},0)},{performName:i,duration:r,isHoldOn:!1,stopFunction:o,blockingNext:()=>!1,blockingAuto:()=>!0,stopTimeout:void 0}};function Cme(e,t){const r=C.gameplay.pixiStage.getStageObjByKey(e);function n(){r&&(r.pixiContainer.alpha=0,r.pixiContainer.blur=0)}function i(){r&&(r.pixiContainer.alpha=1,r.pixiContainer.blur=5)}function o(a){if(r){const s=r.pixiContainer,l=C.gameplay.pixiStage.frameDuration,u=t/l*a,c=1/u,f=5/u;s.alpha<1&&(s.alpha+=c),s.blur<5&&(s.blur+=f)}}return{setStartState:n,setEndState:i,tickerFunc:o}}const Pme=[{name:"universalSoftIn",animationGenerateFunc:zM},{name:"universalSoftOff",animationGenerateFunc:VM},{name:"testblur",animationGenerateFunc:Cme}],Ame=e=>{var s,l,u;N.getState().stage.currentDialogKey;const t=e.content,r=Ie(e,"duration")??0,n=((s=Ie(e,"target"))==null?void 0:s.toString())??"0",i=`${n}-${t}-${r}`,o=Ome(t);let a=()=>{};if(o){te.debug(`${t}${n}`,r);const c=o(n,r);(l=C.gameplay.pixiStage)==null||l.stopPresetAnimationOnTarget(n),(u=C.gameplay.pixiStage)==null||u.registerAnimation(c,i,n),a=()=>{var f;N.getState().stage.currentDialogKey,(f=C.gameplay.pixiStage)==null||f.removeAnimationWithSetEffects(i)}}return{performName:i,duration:r,isHoldOn:!1,stopFunction:a,blockingNext:()=>!1,blockingAuto:()=>!0,stopTimeout:void 0}};function Ome(e){const t=Pme.find(r=>r.name===e);return te.debug("",t),t?t.animationGenerateFunc:null}const Ime=e=>({performName:"none",duration:0,isHoldOn:!1,stopFunction:()=>{},blockingNext:()=>!1,blockingAuto:()=>!0,stopTimeout:void 0}),Mme=e=>{var u;N.getState().stage.currentDialogKey;const t=(Math.random()*10).toString(16),r=e.content;let n;try{n=JSON.parse(r)}catch{n=[]}const i={name:t,effects:n};C.animationManager.addAnimation(i);const o=Ur(t),a=((u=Ie(e,"target"))==null?void 0:u.toString())??"0",s=`${a}-${t}-${o}`;let l=()=>{};return setTimeout(()=>{var f,h;(f=C.gameplay.pixiStage)==null||f.stopPresetAnimationOnTarget(a);const c=Ld(t,a,o);c&&(te.debug(`${t}${a}`,o),(h=C.gameplay.pixiStage)==null||h.registerAnimation(c,s,a))},0),l=()=>{setTimeout(()=>{var c;N.getState().stage.currentDialogKey,(c=C.gameplay.pixiStage)==null||c.removeAnimationWithSetEffects(s)},0)},{performName:s,duration:o,isHoldOn:!1,stopFunction:l,blockingNext:()=>!1,blockingAuto:()=>!0,stopTimeout:void 0}};function Rme(e){return e.content==="hide"?N.dispatch(Ce({key:"isDisableTextbox",value:!0})):N.dispatch(Ce({key:"isDisableTextbox",value:!1})),{performName:"none",duration:0,isHoldOn:!1,stopFunction:()=>{},blockingNext:()=>!1,blockingAuto:()=>!0,stopTimeout:void 0}}const kme=e=>{var c;N.getState().stage.currentDialogKey;const t=(Math.random()*10).toString(16),r=e.content;let n;const i=Ie(e,"duration"),o=((c=Ie(e,"target"))==null?void 0:c.toString())??"0";try{const f=JSON.parse(r);n=fc(o,f,i),console.log("animationObj:",n)}catch{n=[]}const a={name:t,effects:n};C.animationManager.addAnimation(a);const s=Fme(t),l=`${o}-${t}-${s}`;let u=()=>{};return setTimeout(()=>{var h,d;(h=C.gameplay.pixiStage)==null||h.stopPresetAnimationOnTarget(o);const f=Lme(t,o,s);f&&(te.debug(`${t}${o}`,s),(d=C.gameplay.pixiStage)==null||d.registerAnimation(f,l,o))},0),u=()=>{setTimeout(()=>{var f;N.getState().stage.currentDialogKey,(f=C.gameplay.pixiStage)==null||f.removeAnimationWithSetEffects(l)},0)},{performName:l,duration:s,isHoldOn:!1,stopFunction:u,blockingNext:()=>!1,blockingAuto:()=>!0,stopTimeout:void 0}};function Lme(e,t,r){const n=C.animationManager.getAnimations().find(i=>i.name===e);if(n){const i=n.effects.map(o=>{const a=Pt({...Wb,duration:0});return fi.assignTransform(a,o),a.duration=o.duration,a});return te.debug("",i),uF(i,t,r)}return null}function Fme(e){const t=C.animationManager.getAnimations().find(r=>r.name===e);if(t){let r=0;return t.effects.forEach(n=>{r+=n.duration}),r}return 0}const Dme=e=>{let t="0";for(const r of e.args)r.key==="target"&&(t=r.value.toString());return Ie(e,"enter")&&C.animationManager.nextEnterAnimationName.set(t,Ie(e,"enter").toString()),Ie(e,"exit")&&C.animationManager.nextExitAnimationName.set(t+"-off",Ie(e,"exit").toString()),{performName:"none",duration:0,isHoldOn:!1,stopFunction:()=>{},blockingNext:()=>!1,blockingAuto:()=>!1,stopTimeout:void 0}},Nme=e=>{const t=e.content;let r=e.content,n="default";e.args.forEach(o=>{o.key==="name"&&(r=o.value.toString()),o.key==="series"&&(n=o.value.toString())}),te.info(`BGM${r}${t}${n}`),N.dispatch(dM({name:r,url:t,series:n}));const i=N.getState().userData;return ja.setItem(C.gameKey,i).then(()=>{}),{performName:"none",duration:0,isHoldOn:!1,stopFunction:()=>{},blockingNext:()=>!1,blockingAuto:()=>!0,stopTimeout:void 0}},Bme=e=>{const t=e.content;let r=e.content,n="default";e.args.forEach(o=>{o.key==="name"&&(r=o.value.toString()),o.key==="series"&&(n=o.value.toString())}),te.info(`CG${r}${t}${n}`),N.dispatch(hM({name:r,url:t,series:n}));const i=N.getState().userData;return ja.setItem(C.gameKey,i).then(()=>{}),{performName:"none",duration:0,isHoldOn:!1,stopFunction:()=>{},blockingNext:()=>!1,blockingAuto:()=>!0,stopTimeout:void 0}},jme=e=>{zp(!0);const t=N.dispatch,r=Yr("start.txt",qr.scene);return setTimeout(()=>{C.sceneManager.resetScene()},5),t(Di.resetFastSave()),Bd(),bi(r).then(n=>{C.sceneManager.sceneData.currentScene=Un(n,"start.txt",r)}),t(Re({component:"showTitle",visibility:!0})),kS(N.getState().GUI.titleBgm),{performName:"none",duration:0,isHoldOn:!1,stopFunction:()=>{},blockingNext:()=>!1,blockingAuto:()=>!0,stopTimeout:void 0}},Ume=e=>(fF(e.content),{performName:"none",duration:0,isHoldOn:!1,stopFunction:()=>{},blockingNext:()=>!1,blockingAuto:()=>!0,stopTimeout:void 0}),$me=e=>(C.gameplay.performController.performList.forEach(t=>{if(t.performName.match(/PixiPerform/)){te.warn("pixi ",t.performName);for(let r=0;r<C.gameplay.performController.performList.length;r++){const n=C.gameplay.performController.performList[r];n.performName===t.performName&&(n.stopFunction(),clearTimeout(n.stopTimeout),C.gameplay.performController.performList.splice(r,1),r--)}N.dispatch(Ut.removeAllPixiPerforms())}}),{performName:"none",duration:0,isHoldOn:!1,stopFunction:()=>{},blockingNext:()=>!1,blockingAuto:()=>!0,stopTimeout:void 0}),Ve={audioContext:new AudioContext,source:null,analyser:void 0,dataArray:void 0,audioLevelInterval:setInterval(()=>{},0),blinkTimerID:setTimeout(()=>{},0),maxAudioLevel:0},Gme=e=>(Ve.maxAudioLevel=Math.max(e,Ve.maxAudioLevel),{OPEN_THRESHOLD:Ve.maxAudioLevel*.75,HALF_OPEN_THRESHOLD:Ve.maxAudioLevel*.5}),zme=e=>{let t=!1;function r(){var n;t||e.animationEndTime&&Date.now()>e.animationEndTime||(t=!0,(n=C.gameplay.pixiStage)==null||n.performBlinkAnimation(e.key,e.animationItem,"closed",e.pos),Ve.blinkTimerID=setTimeout(()=>{var o;(o=C.gameplay.pixiStage)==null||o.performBlinkAnimation(e.key,e.animationItem,"open",e.pos),t=!1;const i=Math.random()*300+3500;Ve.blinkTimerID=setTimeout(r,i)},200))}r()},Vme=(e,t,r)=>{e.getByteFrequencyData(t);let n=0;for(let i=0;i<r;i++)n+=t[i];return n/r},ox=e=>{var h,d;const{audioLevel:t,OPEN_THRESHOLD:r,HALF_OPEN_THRESHOLD:n,currentMouthValue:i,lerpSpeed:o,key:a,animationItem:s,pos:l}=e;let u;t>r?u=1:t>n?u=.5:u=0;const c=i+(u-i)*o;(h=C.gameplay.pixiStage)==null||h.setModelMouthY(a,t);let f;c>.75?f="open":c>.25?f="half_open":f="closed",s!==void 0&&((d=C.gameplay.pixiStage)==null||d.performMouthSyncAnimation(a,s,f,l))};class Hme{constructor(t){oe(this,"subject");oe(this,"result");oe(this,"isEnd",!1);this.subject=t}with(t,r){return!this.isEnd&&this.subject===t&&(this.result=r(),this.isEnd=!0),this}endsWith(t,r){return!this.isEnd&&this.subject===t&&(this.result=r(),this.isEnd=!0),this.evaluate()}default(t){return this.isEnd||(this.result=t()),this.evaluate()}evaluate(){return this.result}}function of(e){return new Hme(e)}const Wme=e=>{te.debug("play vocal");const t="vocal-play",r=Ie(e,"vocal"),n=Ie(e,"volume");let i;i=N.getState().stage;let o="",a="";const s=i.freeFigure,l=i.figureAssociatedAnimation;let u=0,c=0;const f=1;let h=document.getElementById("currentVocal");C.gameplay.performController.unmountPerform("vocal-play",!0),h!==null&&(h.currentTime=0,h.pause());for(const m of e.args)m.value===!0&&of(m.key).with("left",()=>{o="left"}).with("right",()=>{o="right"}).endsWith("center",()=>{o="center"}),m.key==="figureId"&&(a=`${m.value.toString()}`);N.dispatch(Ce({key:"playVocal",value:r})),N.dispatch(Ce({key:"vocal",value:r}));let d=!1;return{arrangePerformPromise:new Promise(m=>{setTimeout(()=>{let g=document.getElementById("currentVocal");if(typeof n=="number"&&n>=0&&n<=100?N.dispatch(Ce({key:"vocalVolume",value:n})):N.dispatch(Ce({key:"vocalVolume",value:100})),g!==null){g.currentTime=0;const p={performName:t,duration:1e3*60*60,isOver:!1,isHoldOn:!1,stopFunction:()=>{clearInterval(Ve.audioLevelInterval),g.pause(),a=a||`fig-${o}`;const y=l.find(_=>_.targetId===a);ox({audioLevel:0,OPEN_THRESHOLD:1,HALF_OPEN_THRESHOLD:1,currentMouthValue:c,lerpSpeed:f,key:a,animationItem:y,pos:o}),clearTimeout(Ve.blinkTimerID)},blockingNext:()=>!1,blockingAuto:()=>!d,skipNextCollect:!0,stopTimeout:void 0};C.gameplay.performController.arrangeNewPerform(p,e,!1),a=a||`fig-${o}`;const v=l.find(y=>y.targetId===a);if(v){const y=s.find(b=>b.key===a);if(y&&(o=y.basePosition),!Ve.audioContext){let b;b=new AudioContext,Ve.analyser=b.createAnalyser(),Ve.analyser.fftSize=256,Ve.dataArray=new Uint8Array(Ve.analyser.frequencyBinCount)}Ve.analyser||(Ve.analyser=Ve.audioContext.createAnalyser(),Ve.analyser.fftSize=256),u=Ve.analyser.frequencyBinCount,Ve.dataArray=new Uint8Array(u);let _=document.getElementById("currentVocal");Ve.source||(Ve.source=Ve.audioContext.createMediaElementSource(_),Ve.source.connect(Ve.analyser)),Ve.analyser.connect(Ve.audioContext.destination),Ve.audioLevelInterval=setInterval(()=>{const b=Vme(Ve.analyser,Ve.dataArray,u),{OPEN_THRESHOLD:S,HALF_OPEN_THRESHOLD:E}=Gme(b);ox({audioLevel:b,OPEN_THRESHOLD:S,HALF_OPEN_THRESHOLD:E,currentMouthValue:c,lerpSpeed:f,key:a,animationItem:v,pos:o})},50);let x;x=Date.now()+1e4,zme({key:a,animationItem:v,pos:o,animationEndTime:x}),setTimeout(()=>{clearTimeout(Ve.blinkTimerID)},1e4)}g==null||g.play(),g.onended=()=>{for(const y of C.gameplay.performController.performList)y.performName===t&&(d=!0,y.stopFunction(),C.gameplay.performController.unmountPerform(y.performName))}}},1)})}};function ES(e){return 3+(100-e)*1.5}function TS(e){return 200+(100-e)*15}function UF(){const e=me(r=>r.userData.optionData.textboxFont);function t(){return of(e).with(ui.song,()=>'"", serif').with(ui.lxgw,()=>'"LXGW", serif').with(ui.hei,()=>'"WebgalUI", serif').default(()=>'"WebgalUI", serif')}return t()}function ax(e){switch(e){case 0:return 155;case 1:return 205;case 2:return 230;default:return 205}}const Xme="_TextBox_EventHandler_1jt23_2",qme="_TextBox_Container_1jt23_10",Yme="_showSoftly_1jt23_1",Kme="_TextBox_main_1jt23_18",Zme="_TextBox_main_miniavatarOff_1jt23_39",Jme="_TextBox_Background_1jt23_43",Qme="_TextBox_textElement_start_1jt23_56",eve="_TextDelayShow_1jt23_1",tve="_outer_1jt23_64",rve="_inner_1jt23_78",nve="_zhanwei_1jt23_89",ive="_TextBox_textElement_Settled_1jt23_97",ove="_TextBox_showName_1jt23_104",ave="_TextBox_ShowName_Background_1jt23_117",sve="_miniAvatarContainer_1jt23_132",lve="_miniAvatarImg_1jt23_142",uve="_nameContainer_1jt23_150",cve="_outerName_1jt23_156",fve="_innerName_1jt23_167",hve="_text_1jt23_174",et={TextBox_EventHandler:Xme,TextBox_Container:qme,showSoftly:Yme,TextBox_main:Kme,TextBox_main_miniavatarOff:Zme,TextBox_Background:Jme,TextBox_textElement_start:Qme,TextDelayShow:eve,outer:tve,inner:rve,zhanwei:nve,TextBox_textElement_Settled:ive,TextBox_showName:ove,TextBox_ShowName_Background:ave,miniAvatarContainer:sve,miniAvatarImg:lve,nameContainer:uve,outerName:cve,innerName:fve,text:hve};function $F(e){const{textArray:t,textDelay:r,currentConcatDialogPrev:n,currentDialogKey:i,isText:o,isSafari:a,isFirefox:s,fontSize:l,miniAvatar:u,isHasName:c,showName:f,font:h,textDuration:d,isUseStroke:m,textboxOpacity:g,textSizeState:p}=e,v=SS("Stage/TextBox/textbox.scss");G.useEffect(()=>{function b(){[...document.querySelectorAll(".Textelement_start")].forEach(I=>{I.className=v("TextBox_textElement_Settled",et.TextBox_textElement_Settled)})}return C.events.textSettle.on(b),()=>{C.events.textSettle.off(b)}},[]);let y=0;const _=f.map((b,S)=>{const E=b.map((I,A)=>{const O=I.reactNode;let D="",B="",j=!1;if(I.enhancedValue){j=!0;const z=I.enhancedValue;for(const ie of z){const{key:Se,value:de}=ie;switch(Se){case"style":D=de;break;case"tips":break;case"style-alltext":B=de;break}}}const W=" "+wu(D,{label:"showname"}),$=" "+wu(B,{label:"showname"});return j?w.jsx("span",{style:{position:"relative"},children:w.jsxs("span",{className:et.zhanwei+$,children:[O,w.jsx("span",{className:v("outerName",et.outerName)+W+$,children:O}),m&&w.jsx("span",{className:v("innerName",et.innerName)+$,children:O})]})},A):w.jsx("span",{style:{position:"relative"},children:w.jsxs("span",{className:et.zhanwei+$,children:[O,w.jsx("span",{className:v("outerName",et.outerName)+W+$,children:O}),m&&w.jsx("span",{className:v("innerName",et.innerName)+$,children:O})]})},A)});return w.jsx("div",{style:{wordBreak:a||e.isFirefox?"break-all":void 0,display:a?"flex":void 0,flexWrap:a?"wrap":void 0},children:E},`text-line-${S}`)}),x=t.map((b,S)=>{const E=b.map((I,A)=>{const O=I.reactNode;let D="",B="";if(I.enhancedValue){const ie=I.enhancedValue;for(const Se of ie){const{key:de,value:X}=Se;switch(de){case"style":D=X;break;case"tips":break;case"style-alltext":B=X;break}}}let j=y*r;y++;let W=n.length;n!==""&&y>=W&&(j=j-W*r);const $=" "+wu(D),z=" "+wu(B);return y<W?w.jsx("span",{id:`${j}`,className:v("TextBox_textElement_Settled",et.TextBox_textElement_Settled),style:{animationDelay:`${j}ms`,animationDuration:`${d}ms`},children:w.jsxs("span",{className:et.zhanwei+z,children:[O,w.jsx("span",{className:v("outer",et.outer)+$+z,children:O}),m&&w.jsx("span",{className:v("inner",et.inner)+z,children:O})]})},i+A):w.jsx("span",{id:`${j}`,className:`${v("TextBox_textElement_start",et.TextBox_textElement_start)} Textelement_start`,style:{animationDelay:`${j}ms`,position:"relative"},children:w.jsxs("span",{className:et.zhanwei+z,children:[O,w.jsx("span",{className:v("outer",et.outer)+$+z,children:O}),m&&w.jsx("span",{className:v("inner",et.inner)+z,children:O})]})},i+A)});return w.jsx("div",{style:{wordBreak:a||e.isFirefox?"break-all":void 0,display:a?"flex":void 0,flexWrap:a?"wrap":void 0},children:E},`text-line-${S}`)});return w.jsx(w.Fragment,{children:o&&w.jsxs("div",{className:et.TextBox_Container,children:[w.jsx("div",{className:v("TextBox_main",et.TextBox_main)+" "+v("TextBox_Background",et.TextBox_Background)+" "+(u===""?v("TextBox_main_miniavatarOff",et.TextBox_main_miniavatarOff):void 0),style:{opacity:`${g/100}`}}),w.jsxs("div",{id:"textBoxMain",className:v("TextBox_main",et.TextBox_main)+" "+(u===""?v("TextBox_main_miniavatarOff",et.TextBox_main_miniavatarOff):void 0),style:{fontFamily:h},children:[w.jsx("div",{id:"miniAvatar",className:v("miniAvatarContainer",et.miniAvatarContainer),children:u!==""&&w.jsx("img",{className:v("miniAvatarImg",et.miniAvatarImg),alt:"miniAvatar",src:u})}),c&&w.jsxs(w.Fragment,{children:[w.jsx("div",{className:v("TextBox_showName",et.TextBox_showName)+" "+v("TextBox_ShowName_Background",et.TextBox_ShowName_Background),style:{opacity:`${g/100}`,fontSize:"200%"},children:w.jsx("span",{style:{opacity:0},children:_})}),w.jsx("div",{className:v("TextBox_showName",et.TextBox_showName),style:{fontSize:"200%"},children:_})]}),w.jsx("div",{className:v("text",et.text),style:{fontSize:l,flexFlow:"column",overflow:"hidden",paddingLeft:"0.1em",lineHeight:p===yn.medium?"2.2em":"2em"},children:x})]})]})})}const GF=navigator.userAgent,dve=/firefox/i.test(GF),pve=/^((?!chrome|android).)*safari/i.test(GF),mve=()=>{const[e,t]=G.useState(!0);G.useEffect(()=>{const _=()=>{const x=Md.height,b=Md.width,S=window.innerHeight,E=window.innerWidth,I=S/x,A=E/b,O=E/x,D=S/b;[I,A,O,D].forEach(B=>{B<=.2?t(!1):t(!0)})};return window.addEventListener("resize",_),_(),()=>{window.removeEventListener("resize",_)}},[]);const r=me(_=>_.stage),n=me(_=>_.userData),i=ES(n.optionData.textSpeed),o=TS(n.optionData.textSpeed);let a=ax(n.optionData.textSize)+"%";const s=UF(),l=r.showText!==""||r.showName!=="";let u=n.optionData.textSize;l&&r.showTextSize!==-1&&(a=ax(r.showTextSize)+"%",u=r.showTextSize);const c=of(u).with(yn.small,()=>3).with(yn.medium,()=>2).with(yn.large,()=>2).default(()=>2),f=Ra(r.showText,c),h=r.showName!=="",d=Ra(r.showName,c),m=r.currentConcatDialogPrev,g=r.currentDialogKey,p=r.miniAvatar,v=n.optionData.textboxOpacity,y=$F;return w.jsx(y,{textArray:f,isText:l,textDelay:i,showName:d,isHasName:h,currentConcatDialogPrev:m,fontSize:a,currentDialogKey:g,isSafari:pve,isFirefox:dve,miniAvatar:p,textDuration:o,font:s,textSizeState:u,lineLimit:c,isUseStroke:e,textboxOpacity:v})};function CA(e){return!!e.match(/[\u4e00-\u9fa5]|[\u0800-\u4e00]|[\uac00-\ud7ff]/)}function Ra(e,t,r,n=!0){return e.split(new RegExp("(?<!\\\\)\\|")).map(s=>yS(s)).map(s=>gve(s)).map(s=>{const l=[];return s.forEach((u,c)=>{of(u.type).with("SegmentType.String",()=>{const f=vve(u.value,n);l.push(...f.map(h=>({reactNode:h})))}).endsWith("SegmentType.Link",()=>{const f=u.value,h=w.jsx("span",{className:"__enhanced_text",children:w.jsxs("ruby",{children:[f.text,w.jsx("rt",{children:f.ruby})]},c+f.text)},f.text+`${c}`);l.push({reactNode:h,enhancedValue:f.values})})}),l}).slice(0,r?void 0:t)}function vve(e,t=!0){if(!e)return[""];const r=[];let n="",i=CA(e[0]);const o=a=>/[!-\/:-@\[-`{-~\u2000-\u206F\u3000-\u303F\uff00-\uffef]/g.test(a);for(const a of e)if(a===" "||a==="")n&&(r.push(n),n=""),t?r.push(""):r.push(a),i=!1;else if(CA(a)&&!o(a))!i&&n&&(r.push(n),n=""),r.push(a),i=!0;else{if(o(a)){n?(n+=a,r.push(n),n=""):r.length>0?r[r.length-1]+=a:r.push(a);continue}i&&n&&(r.push(n),n=""),n+=a,i=!1}return n&&r.push(n),r}function gve(e){const t=/(\[(.*?)\]\((.*?)\))|([^\[\]]+)/g,r=[];let n;for(;(n=t.exec(e))!==null;)if(n[1]){const i=n[2],o=n[3];let a=[],s="";if(o.match(/style=|tips=|ruby=|style-alltext=/)){a=yve(o);const l=a.find(u=>u.key==="ruby");l&&(s=l.value)}else s=o;r.push({type:"SegmentType.Link",value:{text:i,ruby:s,values:a}})}else{const i=n[0];r.push({type:"SegmentType.String",value:i})}return r.unshift({type:"SegmentType.String",value:""}),r}function yve(e){const t=[],r=/(\S+)=(.*?)(?=\s+\S+=|\s*$)/g;let n;for(;(n=r.exec(e))!==null;)t.push({key:n[1],value:n[2].replace(/~/g,":").trim()});return t}const _ve=e=>{const t=N.getState().stage,r=N.getState().userData,n=N.dispatch;let i=Math.random().toString(),o=e.content;o&&(o=String(o).replace(/ {2,}/g,I=>"".repeat(I.length)));const a=Ie(e,"concat"),s=Ie(e,"notend"),l=Ie(e,"speaker"),u=Ie(e,"clear"),c=Ie(e,"vocal");a?(i=t.currentDialogKey,o=t.showText+o,n(Ce({key:"currentConcatDialogPrev",value:t.showText}))):n(Ce({key:"currentConcatDialogPrev",value:""})),n(Ce({key:"showText",value:o})),n(Ce({key:"vocal",value:""})),r.optionData.voiceInterruption===uc.no&&c===null||(n(Ce({key:"playVocal",value:""})),C.gameplay.performController.unmountPerform("vocal-play",!0)),n(Ce({key:"currentDialogKey",value:i}));const f=ES(r.optionData.textSpeed),d=Ra(e.content,3).reduce((I,A)=>I+A.length,0),m=f*d;for(const I of e.args)if(I.key==="fontSize")switch(I.value){case"default":n(Ce({key:"showTextSize",value:-1}));break;case"small":n(Ce({key:"showTextSize",value:yn.small}));break;case"medium":n(Ce({key:"showTextSize",value:yn.medium}));break;case"large":n(Ce({key:"showTextSize",value:yn.large}));break}let g=t.showName;l!==null&&(g=l),u&&(g=""),n(Ce({key:"showName",value:g}));let p=null,v=0,y="",_="";for(const I of e.args)I.value===!0&&of(I.key).with("left",()=>{y="left"}).with("right",()=>{y="right"}).endsWith("center",()=>{y="center"}),I.key==="figureId"&&(_=`${I.value.toString()}`);let x=80;const b=(I=!1)=>{let A=x+(Math.random()*60-30);Math.abs(A-x)<5&&(A=x+Math.sign(A-x)*5),x=Math.max(15,Math.min(A,100));const B=N.getState().stage.figureAssociatedAnimation.find(W=>W.targetId===_),j=_||`fig-${y}`;I&&(x=0),ox({audioLevel:x,OPEN_THRESHOLD:50,HALF_OPEN_THRESHOLD:25,currentMouthValue:0,lerpSpeed:1,key:j,animationItem:B,pos:y}),I||(p=setTimeout(b,50))};c?Wme(e):(_||y)&&(v=d*250,b());const S=RS();let E=TS(r.optionData.textSpeed)/2;return s&&(E=0),{performName:S,duration:m+E+v,isHoldOn:!1,stopFunction:()=>{C.events.textSettle.emit(),p&&(b(!0),clearTimeout(p))},blockingNext:()=>!1,blockingAuto:()=>!0,stopTimeout:void 0,goNextWhenOver:s}};var CS={},xve={document:{}},xm=Object.prototype.hasOwnProperty,zF=function(e){return bm(e)?e.toLowerCase():e},Wu=Array.isArray,bve=function(e){return bm(e)?e.replace(/[A-Z]/g,function(t){return String.fromCharCode(t.charCodeAt(0)|32)}):e};"I".toLowerCase()!=="i"&&(zF=bve);function Dd(e){var t=Function.prototype.constructor;delete Function.prototype.constructor;var r=e();return Function.prototype.constructor=t,r}var Sve,PS=Object.prototype.toString,VF=Object.getPrototypeOf,Wg=KF("ng");function wve(e){if(e==null||OS(e))return!1;if(Wu(e)||bm(e)||Sve)return!0;var t="length"in Object(e)&&e.length;return AS(t)&&(t>=0&&(t-1 in e||e instanceof Array)||typeof e.item=="function")}function xt(e,t,r){var n,i;if(e)if(qF(e))for(n in e)n!=="prototype"&&n!=="length"&&n!=="name"&&e.hasOwnProperty(n)&&t.call(r,e[n],n,e);else if(Wu(e)||wve(e)){var o=typeof e!="object";for(n=0,i=e.length;n<i;n++)(o||n in e)&&t.call(r,e[n],n,e)}else if(e.forEach&&e.forEach!==xt)e.forEach(t,r,e);else if(XF(e))for(n in e)t.call(r,e[n],n,e);else if(typeof e.hasOwnProperty=="function")for(n in e)e.hasOwnProperty(n)&&t.call(r,e[n],n,e);else for(n in e)xm.call(e,n)&&t.call(r,e[n],n,e);return e}function Eve(e,t){t?e.$$hashKey=t:delete e.$$hashKey}function HF(){}function Tve(e){return typeof e>"u"}function _s(e){return typeof e<"u"}function WF(e){return e!==null&&typeof e=="object"}function XF(e){return e!==null&&typeof e=="object"&&!VF(e)}function bm(e){return typeof e=="string"}function AS(e){return typeof e=="number"}function qF(e){return typeof e=="function"}function OS(e){return e&&e.window===e}function YF(e){return e&&e.$evalAsync&&e.$watch}var Cve=/^\[object (?:Uint8|Uint8Clamped|Uint16|Uint32|Int8|Int16|Int32|Float32|Float64)Array\]$/;function Pve(e){return e&&AS(e.length)&&Cve.test(PS.call(e))}function Ave(e){return PS.call(e)==="[object ArrayBuffer]"}function Ove(e,t){var r=[],n=[];if(t){if(Pve(t)||Ave(t))throw Wg("cpta","Can't copy! TypedArray destination cannot be mutated.");if(e===t)throw Wg("cpi","Can't copy! Source and destination are identical.");return Wu(t)?t.length=0:xt(t,function(s,l){l!=="$$hashKey"&&delete t[l]}),r.push(e),n.push(t),i(e,t)}return o(e);function i(s,l){var u=l.$$hashKey,c;if(Wu(s))for(var f=0,h=s.length;f<h;f++)l.push(o(s[f]));else if(XF(s))for(c in s)l[c]=o(s[c]);else if(s&&typeof s.hasOwnProperty=="function")for(c in s)s.hasOwnProperty(c)&&(l[c]=o(s[c]));else for(c in s)xm.call(s,c)&&(l[c]=o(s[c]));return Eve(l,u),l}function o(s){if(!WF(s))return s;var l=r.indexOf(s);if(l!==-1)return n[l];if(OS(s)||YF(s))throw Wg("cpws","Can't copy! Making copies of Window or Scope instances is not supported.");var u=!1,c=a(s);return c===void 0&&(c=Wu(s)?[]:Object.create(VF(s)),u=!0),r.push(s),n.push(c),u?i(s,c):c}function a(s){switch(PS.call(s)){case"[object Int8Array]":case"[object Int16Array]":case"[object Int32Array]":case"[object Float32Array]":case"[object Float64Array]":case"[object Uint8Array]":case"[object Uint8ClampedArray]":case"[object Uint16Array]":case"[object Uint32Array]":return new s.constructor(o(s.buffer),s.byteOffset,s.length);case"[object ArrayBuffer]":if(!s.slice){var l=new ArrayBuffer(s.byteLength);return new Uint8Array(l).set(new Uint8Array(s)),l}return s.slice(0);case"[object Boolean]":case"[object Number]":case"[object String]":case"[object Date]":return new s.constructor(s.valueOf());case"[object RegExp]":var u=new RegExp(s.source,s.toString().match(/[^\/]*$/)[0]);return u.lastIndex=s.lastIndex,u;case"[object Blob]":return new s.constructor([s],{type:s.type})}if(qF(s.cloneNode))return s.cloneNode(!0)}}function Ive(e,t){var r=t;return typeof e=="string"&&e.charAt(0)==="$"&&e.charAt(1)==="$"?r=void 0:OS(t)?r="$WINDOW":t&&xve.document===t?r="$DOCUMENT":YF(t)&&(r="$SCOPE"),r}function Mve(){return Object.create(null)}function Rve(e){var t=[];return JSON.stringify(e,function(r,n){if(n=Ive(r,n),WF(n)){if(t.indexOf(n)>=0)return"...";t.push(n)}return n})}function PA(e){return typeof e=="function"?e.toString().replace(/ \{[\s\S]*$/,""):Tve(e)?"undefined":typeof e!="string"?Rve(e):e}function KF(e,t){return t=t||Error,function(){var r=2,n=arguments,i=n[0],o="["+(e?e+":":"")+i+"] ",a=n[1],s,l;for(o+=a.replace(/\{\d+\}/g,function(u){var c=+u.slice(1,-1),f=c+r;return f<n.length?PA(n[f]):u}),o+=`
http://errors.angularjs.org/"NG_VERSION_FULL"/`+(e?e+"/":"")+i,l=r,s="?";l<n.length;l++,s="&")o+=s+"p"+(l-r)+"="+encodeURIComponent(PA(n[l]));return new t(o)}}var xs=KF("$parse");function ZF(e){return e+""}var Lh=Mve();xt("+ - * / % === !== == != < > <= >= && || ! = |".split(" "),function(e){Lh[e]=!0});var kve={n:`
`,f:"\f",r:"\r",t:"	",v:"\v","'":"'",'"':'"'};function Fh(e){this.options=e||{}}Fh.prototype={constructor:Fh,lex:function(e){for(this.text=e,this.index=0,this.tokens=[];this.index<this.text.length;){var t=this.text.charAt(this.index);if(t==='"'||t==="'"||t==="`")this.readString(t);else if(this.isNumber(t)||t==="."&&this.isNumber(this.peek()))this.readNumber();else if(this.isIdentifierStart(this.peekMultichar()))this.readIdent();else if(this.is(t,"(){}[].,;:?"))this.tokens.push({index:this.index,text:t}),this.index++;else if(this.isWhitespace(t))this.index++;else{var r=t+this.peek(),n=r+this.peek(2),i=Lh[t],o=Lh[r],a=Lh[n];if(i||o||a){var s=a?n:o?r:t;this.tokens.push({index:this.index,text:s,operator:!0}),this.index+=s.length}else this.throwError("Unexpected next character ",this.index,this.index+1)}}return this.tokens},is:function(e,t){return t.indexOf(e)!==-1},peek:function(e){var t=e||1;return this.index+t<this.text.length?this.text.charAt(this.index+t):!1},isNumber:function(e){return e>="0"&&e<="9"&&typeof e=="string"},isWhitespace:function(e){return e===" "||e==="\r"||e==="	"||e===`
`||e==="\v"||e===""},isIdentifierStart:function(e){return this.options.isIdentifierStart?this.options.isIdentifierStart(e,this.codePointAt(e)):this.isValidIdentifierStart(e)},isValidIdentifierStart:function(e){return e>="a"&&e<="z"||e>="A"&&e<="Z"||e==="_"||e==="$"},isIdentifierContinue:function(e){return this.options.isIdentifierContinue?this.options.isIdentifierContinue(e,this.codePointAt(e)):this.isValidIdentifierContinue(e)},isValidIdentifierContinue:function(e,t){return this.isValidIdentifierStart(e,t)||this.isNumber(e)},codePointAt:function(e){return e.length===1?e.charCodeAt(0):(e.charCodeAt(0)<<10)+e.charCodeAt(1)-56613888},peekMultichar:function(){var e=this.text.charAt(this.index),t=this.peek();if(!t)return e;var r=e.charCodeAt(0),n=t.charCodeAt(0);return r>=55296&&r<=56319&&n>=56320&&n<=57343?e+t:e},isExpOperator:function(e){return e==="-"||e==="+"||this.isNumber(e)},throwError:function(e,t,r){r=r||this.index;var n=_s(t)?"s "+t+"-"+this.index+" ["+this.text.substring(t,r)+"]":" "+r;throw xs("lexerr","Lexer Error: {0} at column{1} in expression [{2}].",e,n,this.text)},readNumber:function(){for(var e="",t=this.index;this.index<this.text.length;){var r=zF(this.text.charAt(this.index));if(r==="."||this.isNumber(r))e+=r;else{var n=this.peek();if(r==="e"&&this.isExpOperator(n))e+=r;else if(this.isExpOperator(r)&&n&&this.isNumber(n)&&e.charAt(e.length-1)==="e")e+=r;else if(this.isExpOperator(r)&&(!n||!this.isNumber(n))&&e.charAt(e.length-1)==="e")this.throwError("Invalid exponent");else break}this.index++}this.tokens.push({index:t,text:e,constant:!0,value:Number(e)})},readIdent:function(){var e=this.index;for(this.index+=this.peekMultichar().length;this.index<this.text.length;){var t=this.peekMultichar();if(!this.isIdentifierContinue(t))break;this.index+=t.length}this.tokens.push({index:e,text:this.text.slice(e,this.index),identifier:!0})},readString:function(e){var t=this.index;this.index++;for(var r="",n=e,i=e==="`",o=!1;this.index<this.text.length;){var a=this.text.charAt(this.index);if(i&&a==="$"&&this.text.charAt(this.index+1)==="{"){this.tokens.push({index:t,text:n,constant:!0,value:r});var s=this.text.indexOf("}",this.index),l=this.text.substr(this.index+2,s-this.index-2);this.tokens.push({index:this.index,text:"+",operator:!0});for(var u=new Fh(this.options).lex(l),c=0,f=u.length;c<f;c++)this.tokens.push(u[c]);this.tokens.push({index:this.index,text:"+",operator:!0}),this.index=s,this.readString("`");return}if(n+=a,o){if(a==="u"){var h=this.text.substring(this.index+1,this.index+5);h.match(/[\da-f]{4}/i)||this.throwError("Invalid unicode escape [\\u"+h+"]"),this.index+=4,r+=String.fromCharCode(parseInt(h,16))}else{var d=kve[a];r=r+(d||a)}o=!1}else if(a==="\\")o=!0;else if(a===e){this.index++,this.tokens.push({index:t,text:n,constant:!0,value:r});return}else r+=a;this.index++}this.throwError("Unterminated quote",t)}};function H(e,t){this.lexer=e,this.options=t}H.Program="Program";H.ExpressionStatement="ExpressionStatement";H.AssignmentExpression="AssignmentExpression";H.ConditionalExpression="ConditionalExpression";H.LogicalExpression="LogicalExpression";H.BinaryExpression="BinaryExpression";H.UnaryExpression="UnaryExpression";H.CallExpression="CallExpression";H.MemberExpression="MemberExpression";H.Identifier="Identifier";H.Literal="Literal";H.ArrayExpression="ArrayExpression";H.Property="Property";H.ObjectExpression="ObjectExpression";H.ThisExpression="ThisExpression";H.LocalsExpression="LocalsExpression";H.NGValueParameter="NGValueParameter";H.prototype={ast:function(e){this.text=e,this.tokens=this.lexer.lex(e);var t=this.program();return this.tokens.length!==0&&this.throwError("is an unexpected token",this.tokens[0]),t},program:function(){for(var e=[];;)if(this.tokens.length>0&&!this.peek("}",")",";","]")&&e.push(this.expressionStatement()),!this.expect(";"))return{type:H.Program,body:e}},expressionStatement:function(){return{type:H.ExpressionStatement,expression:this.filterChain()}},filterChain:function(){for(var e=this.expression();this.expect("|");)e=this.filter(e);return e},expression:function(){return this.assignment()},assignment:function(){var e=this.ternary();if(this.expect("=")){if(!eD(e))throw xs("lval","Trying to assign a value to a non l-value");e={type:H.AssignmentExpression,left:e,right:this.assignment(),operator:"="}}return e},ternary:function(){var e=this.logicalOR(),t,r;return this.expect("?")&&(t=this.expression(),this.consume(":"))?(r=this.expression(),{type:H.ConditionalExpression,test:e,alternate:t,consequent:r}):e},logicalOR:function(){for(var e=this.logicalAND();this.expect("||");)e={type:H.LogicalExpression,operator:"||",left:e,right:this.logicalAND()};return e},logicalAND:function(){for(var e=this.equality();this.expect("&&");)e={type:H.LogicalExpression,operator:"&&",left:e,right:this.equality()};return e},equality:function(){for(var e=this.relational(),t;t=this.expect("==","!=","===","!==");)e={type:H.BinaryExpression,operator:t.text,left:e,right:this.relational()};return e},relational:function(){for(var e=this.additive(),t;t=this.expect("<",">","<=",">=");)e={type:H.BinaryExpression,operator:t.text,left:e,right:this.additive()};return e},additive:function(){for(var e=this.multiplicative(),t;t=this.expect("+","-");)e={type:H.BinaryExpression,operator:t.text,left:e,right:this.multiplicative()};return e},multiplicative:function(){for(var e=this.unary(),t;t=this.expect("*","/","%");)e={type:H.BinaryExpression,operator:t.text,left:e,right:this.unary()};return e},unary:function(){var e;return(e=this.expect("+","-","!"))?{type:H.UnaryExpression,operator:e.text,prefix:!0,argument:this.unary()}:this.primary()},primary:function(){var e;this.expect("(")?(e=this.filterChain(),this.consume(")")):this.expect("[")?e=this.arrayDeclaration():this.expect("{")?e=this.object():this.selfReferential.hasOwnProperty(this.peek().text)?e=Ove(this.selfReferential[this.consume().text]):this.options.literals.hasOwnProperty(this.peek().text)?e={type:H.Literal,value:this.options.literals[this.consume().text]}:this.peek().identifier?e=this.identifier():this.peek().constant?e=this.constant():this.throwError("not a primary expression",this.peek());for(var t;t=this.expect("(","[",".");)t.text==="("?(e={type:H.CallExpression,callee:e,arguments:this.parseArguments()},this.consume(")")):t.text==="["?(e={type:H.MemberExpression,object:e,property:this.expression(),computed:!0},this.consume("]")):t.text==="."?e={type:H.MemberExpression,object:e,property:this.identifier(),computed:!1}:this.throwError("IMPOSSIBLE");return e},filter:function(e){for(var t=[e],r={type:H.CallExpression,callee:this.identifier(),arguments:t,filter:!0};this.expect(":");)t.push(this.expression());return r},parseArguments:function(){var e=[];if(this.peekToken().text!==")")do e.push(this.filterChain());while(this.expect(","));return e},identifier:function(){var e=this.consume();return e.identifier||this.throwError("is not a valid identifier",e),{type:H.Identifier,name:e.text}},constant:function(){return{type:H.Literal,value:this.consume().value}},arrayDeclaration:function(){var e=[];if(this.peekToken().text!=="]")do{if(this.peek("]"))break;e.push(this.expression())}while(this.expect(","));return this.consume("]"),{type:H.ArrayExpression,elements:e}},object:function(){var e=[],t;if(this.peekToken().text!=="}")do{if(this.peek("}"))break;t={type:H.Property,kind:"init"},this.peek().constant?(t.key=this.constant(),t.computed=!1,this.consume(":"),t.value=this.expression()):this.peek().identifier?(t.key=this.identifier(),t.computed=!1,this.peek(":")?(this.consume(":"),t.value=this.expression()):t.value=t.key):this.peek("[")?(this.consume("["),t.key=this.expression(),this.consume("]"),t.computed=!0,this.consume(":"),t.value=this.expression()):this.throwError("invalid key",this.peek()),e.push(t)}while(this.expect(","));return this.consume("}"),{type:H.ObjectExpression,properties:e}},throwError:function(e,t){throw xs("syntax","Syntax Error: Token '{0}' {1} at column {2} of the expression [{3}] starting at [{4}].",t.text,e,t.index+1,this.text,this.text.substring(t.index))},consume:function(e){if(this.tokens.length===0)throw xs("ueoe","Unexpected end of expression: {0}",this.text);var t=this.expect(e);return t||this.throwError("is unexpected, expecting ["+e+"]",this.peek()),t},peekToken:function(){if(this.tokens.length===0)throw xs("ueoe","Unexpected end of expression: {0}",this.text);return this.tokens[0]},peek:function(e,t,r,n){return this.peekAhead(0,e,t,r,n)},peekAhead:function(e,t,r,n,i){if(this.tokens.length>e){var o=this.tokens[e],a=o.text;if(a===t||a===r||a===n||a===i||!t&&!r&&!n&&!i)return o}return!1},expect:function(e,t,r,n){var i=this.peek(e,t,r,n);return i?(this.tokens.shift(),i):!1}};function Lve(e,t){return typeof e<"u"?e:t}function JF(e,t){return typeof e>"u"?t:typeof t>"u"?e:e+t}function Fve(e,t){var r=e(t);if(!r)throw new Error("Filter '"+t+"' is not defined");return!r.$stateful}function Xt(e,t){var r,n,i;switch(e.type){case H.Program:r=!0,xt(e.body,function(o){Xt(o.expression,t),r=r&&o.expression.constant}),e.constant=r;break;case H.Literal:e.constant=!0,e.toWatch=[];break;case H.UnaryExpression:Xt(e.argument,t),e.constant=e.argument.constant,e.toWatch=e.argument.toWatch;break;case H.BinaryExpression:Xt(e.left,t),Xt(e.right,t),e.constant=e.left.constant&&e.right.constant,e.toWatch=e.left.toWatch.concat(e.right.toWatch);break;case H.LogicalExpression:Xt(e.left,t),Xt(e.right,t),e.constant=e.left.constant&&e.right.constant,e.toWatch=e.constant?[]:[e];break;case H.ConditionalExpression:Xt(e.test,t),Xt(e.alternate,t),Xt(e.consequent,t),e.constant=e.test.constant&&e.alternate.constant&&e.consequent.constant,e.toWatch=e.constant?[]:[e];break;case H.Identifier:e.constant=!1,e.toWatch=[e];break;case H.MemberExpression:Xt(e.object,t),e.computed&&Xt(e.property,t),e.constant=e.object.constant&&(!e.computed||e.property.constant),e.toWatch=[e];break;case H.CallExpression:i=e.filter?Fve(t,e.callee.name):!1,r=i,n=[],xt(e.arguments,function(o){Xt(o,t),r=r&&o.constant,o.constant||n.push.apply(n,o.toWatch)}),e.constant=r,e.toWatch=i?n:[e];break;case H.AssignmentExpression:Xt(e.left,t),Xt(e.right,t),e.constant=e.left.constant&&e.right.constant,e.toWatch=[e];break;case H.ArrayExpression:r=!0,n=[],xt(e.elements,function(o){Xt(o,t),r=r&&o.constant,o.constant||n.push.apply(n,o.toWatch)}),e.constant=r,e.toWatch=n;break;case H.ObjectExpression:r=!0,n=[],xt(e.properties,function(o){Xt(o.value,t),r=r&&o.value.constant&&!o.computed,o.value.constant||n.push.apply(n,o.value.toWatch)}),e.constant=r,e.toWatch=n;break;case H.ThisExpression:e.constant=!1,e.toWatch=[];break;case H.LocalsExpression:e.constant=!1,e.toWatch=[];break}}function QF(e){if(e.length===1){var t=e[0].expression,r=t.toWatch;return r.length!==1||r[0]!==t?r:void 0}}function eD(e){return e.type===H.Identifier||e.type===H.MemberExpression}function tD(e){if(e.body.length===1&&eD(e.body[0].expression))return{type:H.AssignmentExpression,left:e.body[0].expression,right:{type:H.NGValueParameter},operator:"="}}function rD(e){return e.body.length===0||e.body.length===1&&(e.body[0].expression.type===H.Literal||e.body[0].expression.type===H.ArrayExpression||e.body[0].expression.type===H.ObjectExpression)}function nD(e){return e.constant}function iD(e,t){this.astBuilder=e,this.$filter=t}iD.prototype={compile:function(e){var t=this,r=this.astBuilder.ast(e);this.state={nextId:0,filters:{},fn:{vars:[],body:[],own:{}},assign:{vars:[],body:[],own:{}},inputs:[]},Xt(r,t.$filter);var n="",i;if(this.stage="assign",i=tD(r)){this.state.computing="assign";var o=this.nextId();this.recurse(i,o),this.return_(o),n="fn.assign="+this.generateFunction("assign","s,v,l")}var a=QF(r.body);t.stage="inputs",xt(a,function(c,f){var h="fn"+f;t.state[h]={vars:[],body:[],own:{}},t.state.computing=h;var d=t.nextId();t.recurse(c,d),t.return_(d),t.state.inputs.push(h),c.watchId=f}),this.state.computing="fn",this.stage="main",this.recurse(r);var s='"'+this.USE+" "+this.STRICT+`";
`+this.filterPrefix()+"var fn="+this.generateFunction("fn","s,l,a,i")+n+this.watchFns()+"return fn;",l=new Function("$filter","getStringValue","ifDefined","plus",s)(this.$filter,ZF,Lve,JF),u=function(c,f,h,d){return Dd(function(){return l(c,f,h,d)})};return u.assign=function(c,f,h){return Dd(function(){return l.assign(c,f,h)})},u.inputs=l.inputs,this.state=this.stage=void 0,u.ast=r,u.literal=rD(r),u.constant=nD(r),u},USE:"use",STRICT:"strict",watchFns:function(){var e=[],t=this.state.inputs,r=this;return xt(t,function(n){e.push("var "+n+"="+r.generateFunction(n,"s"))}),t.length&&e.push("fn.inputs=["+t.join(",")+"];"),e.join("")},generateFunction:function(e,t){return"function("+t+"){"+this.varsPrefix(e)+this.body(e)+"};"},filterPrefix:function(){var e=[],t=this;return xt(this.state.filters,function(r,n){e.push(r+"=$filter("+t.escape(n)+")")}),e.length?"var "+e.join(",")+";":""},varsPrefix:function(e){return this.state[e].vars.length?"var "+this.state[e].vars.join(",")+";":""},body:function(e){return this.state[e].body.join("")},recurse:function(e,t,r,n,i,o){var a,s,l=this,u,c,f;if(n=n||HF,!o&&_s(e.watchId)){t=t||this.nextId(),this.if_("i",this.lazyAssign(t,this.unsafeComputedMember("i",e.watchId)),this.lazyRecurse(e,t,r,n,i,!0));return}switch(e.type){case H.Program:xt(e.body,function(d,m){l.recurse(d.expression,void 0,void 0,function(g){s=g}),m!==e.body.length-1?l.current().body.push(s,";"):l.return_(s)});break;case H.Literal:c=this.escape(e.value),this.assign(t,c),n(t||c);break;case H.UnaryExpression:this.recurse(e.argument,void 0,void 0,function(d){s=d}),c=e.operator+"("+this.ifDefined(s,0)+")",this.assign(t,c),n(c);break;case H.BinaryExpression:this.recurse(e.left,void 0,void 0,function(d){a=d}),this.recurse(e.right,void 0,void 0,function(d){s=d}),e.operator==="+"?c=this.plus(a,s):e.operator==="-"?c=this.ifDefined(a,0)+e.operator+this.ifDefined(s,0):c="("+a+")"+e.operator+"("+s+")",this.assign(t,c),n(c);break;case H.LogicalExpression:t=t||this.nextId(),l.recurse(e.left,t),l.if_(e.operator==="&&"?t:l.not(t),l.lazyRecurse(e.right,t)),n(t);break;case H.ConditionalExpression:t=t||this.nextId(),l.recurse(e.test,t),l.if_(t,l.lazyRecurse(e.alternate,t),l.lazyRecurse(e.consequent,t)),n(t);break;case H.Identifier:t=t||this.nextId();var h=l.current().inAssignment;r&&(h?r.context=this.assign(this.nextId(),"s"):r.context=l.stage==="inputs"?"s":this.assign(this.nextId(),this.getHasOwnProperty("l",e.name)+"?l:s"),r.computed=!1,r.name=e.name),l.if_(l.stage==="inputs"||l.not(l.getHasOwnProperty("l",e.name)),function(){l.if_(l.stage==="inputs"||l.and_("s",l.or_(l.isNull(l.nonComputedMember("s",e.name)),l.hasOwnProperty_("s",e.name))),function(){i&&i!==1&&l.if_(l.isNull(l.nonComputedMember("s",e.name)),l.lazyAssign(l.nonComputedMember("s",e.name),"{}")),l.assign(t,l.nonComputedMember("s",e.name))})},t&&function(){l.if_(l.hasOwnProperty_("l",e.name),l.lazyAssign(t,l.nonComputedMember("l",e.name)))}),n(t);break;case H.MemberExpression:a=r&&(r.context=this.nextId())||this.nextId(),t=t||this.nextId(),l.recurse(e.object,a,void 0,function(){var d=null,m=l.current().inAssignment;e.computed?(s=l.nextId(),m||l.state.computing==="assign"?d=l.unsafeComputedMember(a,s):d=l.computedMember(a,s)):(m||l.state.computing==="assign"?d=l.unsafeNonComputedMember(a,e.property.name):d=l.nonComputedMember(a,e.property.name),s=e.property.name),e.computed&&e.property.type===H.Literal&&l.recurse(e.property,s),l.if_(l.and_(l.notNull(a),l.or_(l.isNull(d),l.hasOwnProperty_(a,s,e.computed))),function(){e.computed?(e.property.type!==H.Literal&&l.recurse(e.property,s),i&&i!==1&&l.if_(l.not(d),l.lazyAssign(d,"{}")),l.assign(t,d),r&&(r.computed=!0,r.name=s)):(i&&i!==1&&l.if_(l.isNull(d),l.lazyAssign(d,"{}")),l.assign(t,d),r&&(r.computed=!1,r.name=e.property.name))},function(){l.assign(t,"undefined")}),n(t)},!!i);break;case H.CallExpression:t=t||this.nextId(),e.filter?(s=l.filter(e.callee.name),u=[],xt(e.arguments,function(d){var m=l.nextId();l.recurse(d,m),u.push(m)}),c=s+".call("+s+","+u.join(",")+")",l.assign(t,c),n(t)):(s=l.nextId(),a={},u=[],l.recurse(e.callee,s,a,function(){l.if_(l.notNull(s),function(){if(xt(e.arguments,function(m){l.recurse(m,e.constant?void 0:l.nextId(),void 0,function(g){u.push(g)})}),a.name){var d=l.member(a.context,a.name,a.computed);c="("+d+" === null ? null : "+l.unsafeMember(a.context,a.name,a.computed)+".call("+[a.context].concat(u).join(",")+"))"}else c=s+"("+u.join(",")+")";l.assign(t,c)},function(){l.assign(t,"undefined")}),n(t)}));break;case H.AssignmentExpression:s=this.nextId(),a={},l.current().inAssignment=!0,this.recurse(e.left,void 0,a,function(){l.if_(l.and_(l.notNull(a.context),l.or_(l.hasOwnProperty_(a.context,a.name),l.isNull(l.member(a.context,a.name,a.computed)))),function(){l.recurse(e.right,s),c=l.member(a.context,a.name,a.computed)+e.operator+s,l.assign(t,c),n(t||c)}),l.current().inAssignment=!1,l.recurse(e.right,s),l.current().inAssignment=!0},1),l.current().inAssignment=!1;break;case H.ArrayExpression:u=[],xt(e.elements,function(d){l.recurse(d,e.constant?void 0:l.nextId(),void 0,function(m){u.push(m)})}),c="["+u.join(",")+"]",this.assign(t,c),n(t||c);break;case H.ObjectExpression:u=[],f=!1,xt(e.properties,function(d){d.computed&&(f=!0)}),f?(t=t||this.nextId(),this.assign(t,"{}"),xt(e.properties,function(d){d.computed?(a=l.nextId(),l.recurse(d.key,a)):a=d.key.type===H.Identifier?d.key.name:""+d.key.value,s=l.nextId(),l.recurse(d.value,s),l.assign(l.unsafeMember(t,a,d.computed),s)})):(xt(e.properties,function(d){l.recurse(d.value,e.constant?void 0:l.nextId(),void 0,function(m){u.push(l.escape(d.key.type===H.Identifier?d.key.name:""+d.key.value)+":"+m)})}),c="{"+u.join(",")+"}",this.assign(t,c)),n(t||c);break;case H.ThisExpression:this.assign(t,"s"),n(t||"s");break;case H.LocalsExpression:this.assign(t,"l"),n(t||"l");break;case H.NGValueParameter:this.assign(t,"v"),n(t||"v");break}},getHasOwnProperty:function(e,t){var r=e+"."+t,n=this.current().own;return n.hasOwnProperty(r)||(n[r]=this.nextId(!1,e+"&&("+this.escape(t)+" in "+e+")")),n[r]},assign:function(e,t){if(e)return this.current().body.push(e,"=",t,";"),e},filter:function(e){return xm.call(this.state.filters,e)||(this.state.filters[e]=this.nextId(!0)),this.state.filters[e]},ifDefined:function(e,t){return"ifDefined("+e+","+this.escape(t)+")"},plus:function(e,t){return"plus("+e+","+t+")"},return_:function(e){this.current().body.push("return ",e,";")},if_:function(e,t,r){if(e===!0)t();else{var n=this.current().body;n.push("if(",e,"){"),t(),n.push("}"),r&&(n.push("else{"),r(),n.push("}"))}},or_:function(e,t){return"("+e+") || ("+t+")"},hasOwnProperty_:function(e,t,r){return r?"(Object.prototype.hasOwnProperty.call("+e+","+t+"))":"(Object.prototype.hasOwnProperty.call("+e+",'"+t+"'))"},and_:function(e,t){return"("+e+") && ("+t+")"},not:function(e){return"!("+e+")"},isNull:function(e){return e+"==null"},notNull:function(e){return e+"!=null"},nonComputedMember:function(e,t){var r=/^[$_a-zA-Z][$_a-zA-Z0-9]*$/,n=/[^$_a-zA-Z0-9]/g,i="";return r.test(t)?i=e+"."+t:(t=t.replace(n,this.stringEscapeFn),i=e+'["'+t+'"]'),i},unsafeComputedMember:function(e,t){return e+"["+t+"]"},unsafeNonComputedMember:function(e,t){return this.nonComputedMember(e,t)},computedMember:function(e,t){return this.state.computing==="assign"?this.unsafeComputedMember(e,t):"("+e+".hasOwnProperty("+t+") ? "+e+"["+t+"] : undefined)"},unsafeMember:function(e,t,r){return r?this.unsafeComputedMember(e,t):this.unsafeNonComputedMember(e,t)},member:function(e,t,r){return r?this.computedMember(e,t):this.nonComputedMember(e,t)},getStringValue:function(e){this.assign(e,"getStringValue("+e+")")},lazyRecurse:function(e,t,r,n,i,o){var a=this;return function(){a.recurse(e,t,r,n,i,o)}},lazyAssign:function(e,t){var r=this;return function(){r.assign(e,t)}},stringEscapeRegex:/[^ a-zA-Z0-9]/g,stringEscapeFn:function(e){return"\\u"+("0000"+e.charCodeAt(0).toString(16)).slice(-4)},escape:function(e){if(bm(e))return"'"+e.replace(this.stringEscapeRegex,this.stringEscapeFn)+"'";if(AS(e))return e.toString();if(e===!0)return"true";if(e===!1)return"false";if(e===null)return"null";if(typeof e>"u")return"undefined";throw xs("esc","IMPOSSIBLE")},nextId:function(e,t){var r="v"+this.state.nextId++;return e||this.current().vars.push(r+(t?"="+t:"")),r},current:function(){return this.state[this.state.computing]}};function oD(e,t){this.astBuilder=e,this.$filter=t}oD.prototype={compile:function(e){var t=this,r=this.astBuilder.ast(e);Xt(r,t.$filter);var n,i;(n=tD(r))&&(i=this.recurse(n));var o=QF(r.body),a;o&&(a=[],xt(o,function(c,f){var h=t.recurse(c);c.input=h,a.push(h),c.watchId=f}));var s=[];xt(r.body,function(c){s.push(t.recurse(c.expression))});var l=r.body.length===0?HF:r.body.length===1?s[0]:function(c,f){var h;return xt(s,function(d){h=d(c,f)}),h};i&&(l.assign=function(c,f,h){return i(c,h,f)});var u=function(c,f){return Dd(function(){return l(c,f)})};return u.assign=function(c,f,h){return Dd(function(){return l.assign(c,f,h)})},a&&(u.inputs=a),u.ast=r,u.literal=rD(r),u.constant=nD(r),u},recurse:function(e,t,r){var n,i,o=this,a;if(e.input)return this.inputs(e.input,e.watchId);switch(e.type){case H.Literal:return this.value(e.value,t);case H.UnaryExpression:return i=this.recurse(e.argument),this["unary"+e.operator](i,t);case H.BinaryExpression:return n=this.recurse(e.left),i=this.recurse(e.right),this["binary"+e.operator](n,i,t);case H.LogicalExpression:return n=this.recurse(e.left),i=this.recurse(e.right),this["binary"+e.operator](n,i,t);case H.ConditionalExpression:return this["ternary?:"](this.recurse(e.test),this.recurse(e.alternate),this.recurse(e.consequent),t);case H.Identifier:return o.identifier(e.name,t,r);case H.MemberExpression:return n=this.recurse(e.object,!1,!!r),e.computed||(i=e.property.name),e.computed&&(i=this.recurse(e.property)),e.computed?this.computedMember(n,i,t,r):this.nonComputedMember(n,i,t,r);case H.CallExpression:return a=[],xt(e.arguments,function(s){a.push(o.recurse(s))}),e.filter&&(i=this.$filter(e.callee.name)),e.filter||(i=this.recurse(e.callee,!0)),e.filter?function(s,l,u,c){for(var f=[],h=0;h<a.length;++h)f.push(a[h](s,l,u,c));var d=i.apply(void 0,f,c);return t?{context:void 0,name:void 0,value:d}:d}:function(s,l,u,c){var f=i(s,l,u,c),h;if(f.value!=null){for(var d=[],m=0;m<a.length;++m)d.push(a[m](s,l,u,c));h=f.value.apply(f.context,d)}return t?{value:h}:h};case H.AssignmentExpression:return n=this.recurse(e.left,!0,1),i=this.recurse(e.right),function(s,l,u,c){var f=n(s,!1,u,c),h=i(s,l,u,c);return f.context[f.name]=h,t?{value:h}:h};case H.ArrayExpression:return a=[],xt(e.elements,function(s){a.push(o.recurse(s))}),function(s,l,u,c){for(var f=[],h=0;h<a.length;++h)f.push(a[h](s,l,u,c));return t?{value:f}:f};case H.ObjectExpression:return a=[],xt(e.properties,function(s){s.computed?a.push({key:o.recurse(s.key),computed:!0,value:o.recurse(s.value)}):a.push({key:s.key.type===H.Identifier?s.key.name:""+s.key.value,computed:!1,value:o.recurse(s.value)})}),function(s,l,u,c){for(var f={},h=0;h<a.length;++h)a[h].computed?f[a[h].key(s,l,u,c)]=a[h].value(s,l,u,c):f[a[h].key]=a[h].value(s,l,u,c);return t?{value:f}:f};case H.ThisExpression:return function(s){return t?{value:s}:s};case H.LocalsExpression:return function(s,l){return t?{value:l}:l};case H.NGValueParameter:return function(s,l,u){return t?{value:u}:u}}},"unary+":function(e,t){return function(r,n,i,o){var a=e(r,n,i,o);return _s(a)?a=+a:a=0,t?{value:a}:a}},"unary-":function(e,t){return function(r,n,i,o){var a=e(r,n,i,o);return _s(a)?a=-a:a=-0,t?{value:a}:a}},"unary!":function(e,t){return function(r,n,i,o){var a=!e(r,n,i,o);return t?{value:a}:a}},"binary+":function(e,t,r){return function(n,i,o,a){var s=e(n,i,o,a),l=t(n,i,o,a),u=JF(s,l);return r?{value:u}:u}},"binary-":function(e,t,r){return function(n,i,o,a){var s=e(n,i,o,a),l=t(n,i,o,a),u=(_s(s)?s:0)-(_s(l)?l:0);return r?{value:u}:u}},"binary*":function(e,t,r){return function(n,i,o,a){var s=e(n,i,o,a)*t(n,i,o,a);return r?{value:s}:s}},"binary/":function(e,t,r){return function(n,i,o,a){var s=e(n,i,o,a)/t(n,i,o,a);return r?{value:s}:s}},"binary%":function(e,t,r){return function(n,i,o,a){var s=e(n,i,o,a)%t(n,i,o,a);return r?{value:s}:s}},"binary===":function(e,t,r){return function(n,i,o,a){var s=e(n,i,o,a)===t(n,i,o,a);return r?{value:s}:s}},"binary!==":function(e,t,r){return function(n,i,o,a){var s=e(n,i,o,a)!==t(n,i,o,a);return r?{value:s}:s}},"binary==":function(e,t,r){return function(n,i,o,a){var s=e(n,i,o,a)==t(n,i,o,a);return r?{value:s}:s}},"binary!=":function(e,t,r){return function(n,i,o,a){var s=e(n,i,o,a)!=t(n,i,o,a);return r?{value:s}:s}},"binary<":function(e,t,r){return function(n,i,o,a){var s=e(n,i,o,a)<t(n,i,o,a);return r?{value:s}:s}},"binary>":function(e,t,r){return function(n,i,o,a){var s=e(n,i,o,a)>t(n,i,o,a);return r?{value:s}:s}},"binary<=":function(e,t,r){return function(n,i,o,a){var s=e(n,i,o,a)<=t(n,i,o,a);return r?{value:s}:s}},"binary>=":function(e,t,r){return function(n,i,o,a){var s=e(n,i,o,a)>=t(n,i,o,a);return r?{value:s}:s}},"binary&&":function(e,t,r){return function(n,i,o,a){var s=e(n,i,o,a)&&t(n,i,o,a);return r?{value:s}:s}},"binary||":function(e,t,r){return function(n,i,o,a){var s=e(n,i,o,a)||t(n,i,o,a);return r?{value:s}:s}},"ternary?:":function(e,t,r,n){return function(i,o,a,s){var l=e(i,o,a,s)?t(i,o,a,s):r(i,o,a,s);return n?{value:l}:l}},value:function(e,t){return function(){return t?{context:void 0,name:void 0,value:e}:e}},identifier:function(e,t,r){return function(n,i){var o=i&&e in i?i:n;r&&r!==1&&o&&o[e]==null&&(o[e]={});var a;return o&&xm.call(o,e)&&(a=o?o[e]:void 0),t?{context:o,name:e,value:a}:a}},computedMember:function(e,t,r,n){return function(i,o,a,s){var l=e(i,o,a,s),u,c;return l!=null&&(u=t(i,o,a,s),u=ZF(u),n&&n!==1&&l&&!l[u]&&(l[u]={}),Object.prototype.hasOwnProperty.call(l,u)&&(c=l[u])),r?{context:l,name:u,value:c}:c}},nonComputedMember:function(e,t,r,n){return function(i,o,a,s){var l=e(i,o,a,s);n&&n!==1&&l&&l[t]==null&&(l[t]={});var u=void 0;return l!=null&&Object.prototype.hasOwnProperty.call(l,t)&&(u=l[t]),r?{context:l,name:t,value:u}:u}},inputs:function(e,t){return function(r,n,i,o){return o?o[t]:e(r,n,i)}}};var sx=function(t,r,n){this.lexer=t,this.$filter=r,n=n||{},n.handleThis=n.handleThis!=null?n.handleThis:!0,this.options=n,this.ast=new H(t,n),this.ast.selfReferential={$locals:{type:H.LocalsExpression}},n.handleThis&&(this.ast.selfReferential.this={type:H.ThisExpression}),this.astCompiler=n.csp?new oD(this.ast,r):new iD(this.ast,r)};sx.prototype={constructor:sx,parse:function(e){return this.astCompiler.compile(e)}};CS.Lexer=Fh;CS.Parser=sx;var aD=CS,Dve={},Nve=aD.Lexer,Bve=aD.Parser;function jve(e){return e=e||{},e.filters&&(e.cache=e.cache||{}),e.cache=e.cache||IS.cache,e.filters=e.filters||Dve,e}function Uve(e){return{handleThis:e.handleThis!=null?e.handleThis:!0,csp:e.csp!=null?e.csp:!1,literals:e.literals!=null?e.literals:{true:!0,false:!1,null:null,undefined:void 0}}}function IS(e,t){if(typeof e!="string")throw new TypeError("src must be a string, instead saw '"+typeof e+"'");t=jve(t);var r=t,n=Uve(t),i=new Nve(r),o=new Bve(i,function(u){return t.filters[u]},n);if(!t.cache)return o.parse(e);delete t.src;var a=JSON.stringify(Object.assign({src:e},t)),s=t.cache[a];return s||(s=t.cache[a]=o.parse(e)),s}IS.cache=Object.create(null);var sD=IS;const $ve=e=>{let t=!1;e.args.forEach(n=>{n.key==="global"&&(t=!0)});let r;if(t?r=rH:r=YI,e.content.match(/\s*=\s*/)){const n=e.content.split(/\s*=\s*/)[0],i=e.content.split(/\s*=\s*/)[1];if(i==="random()")N.dispatch(r({key:n,value:Math.random()}));else if(i.match(/[+\-*\/()]/)){const a=i.split(/([+\-*\/()])/g).map(l=>{if(!l.trim().match(/^[a-zA-Z_$][a-zA-Z0-9_.]*$/))return l;const u=Nd(l.trim(),!0);return typeof u=="string"?`'${u}'`:u}).reduce((l,u)=>l+u,"");let s="";try{s=sD(a)()}catch(l){te.error("expression compile error",l)}N.dispatch(r({key:n,value:s}))}else i.match(/true|false/)?(i.match(/true/)&&N.dispatch(r({key:n,value:!0})),i.match(/false/)&&N.dispatch(r({key:n,value:!1}))):i.length===0?N.dispatch(r({key:n,value:""})):isNaN(Number(i))?N.dispatch(r({key:n,value:Nd(i,!0)})):N.dispatch(r({key:n,value:Number(i)}));t?(te.debug("",{key:n,value:N.getState().userData.globalGameVar[n]}),Bd()):te.debug("",{key:n,value:N.getState().stage.GameVar[n]})}return{performName:"none",duration:0,isHoldOn:!1,stopFunction:()=>{},blockingNext:()=>!1,blockingAuto:()=>!0,stopTimeout:void 0}};function Gve(e){let t;const r=N.getState().stage,n=N.getState().userData,i={stage:r,userData:n};if(r.GameVar.hasOwnProperty(e))t=r.GameVar[e];else if(n.globalGameVar.hasOwnProperty(e))t=n.globalGameVar[e];else if(e.startsWith("$")){const o=e.replace("$","");t=wJ(i,o,void 0)}return t}function Nd(e,t=!1){const r=Gve(e);return r??(te.warn("valueFromState result null, key = "+e),t?e:`{${e}}`)}const zve=e=>{const t=N.getState().stage,r=N.getState().userData,n=N.dispatch,i={stageGameVar:t.GameVar,globalGameVar:r.globalGameVar};n(Ce({key:"showText",value:JSON.stringify(i)})),n(Ce({key:"showName",value:""})),te.debug("",i),setTimeout(()=>{C.events.textSettle.emit()},0);const o=RS(),a=750-r.optionData.textSpeed*250;return{performName:o,duration:a,isHoldOn:!1,stopFunction:()=>{C.events.textSettle.emit()},blockingNext:()=>!1,blockingAuto:()=>!0,stopTimeout:void 0}};function je(e,t,r){return{scriptType:e,scriptFunction:t,...r}}const lD={};function Vve(e){const t={};for(const[r,n]of Object.entries(e))t[r]=lD[n.scriptType]={scriptString:r,...n};return t}const Hve=e=>{const{content:t}=e,r=t.split(",");for(const n of r){const i=n.split("->");if(i.length>=2){const o=i[0],a=i[1];N.dispatch(Ut.replaceUIlable([o,a]))}}return{performName:"none",duration:0,isHoldOn:!1,stopFunction:()=>{},blockingNext:()=>!1,blockingAuto:()=>!0,stopTimeout:void 0}},uD=Vve({intro:je(ke.intro,pme),changeBg:je(ke.changeBg,ede),changeFigure:je(ke.changeFigure,tde),miniAvatar:je(ke.miniAvatar,vme,{next:!0}),changeScene:je(ke.changeScene,rde),choose:je(ke.choose,Vpe),end:je(ke.end,jme),bgm:je(ke.bgm,eq,{next:!0}),playVideo:je(ke.video,Eme),setComplexAnimation:je(ke.setComplexAnimation,Ame),setFilter:je(ke.setFilter,Ime),pixiInit:je(ke.pixiInit,$me,{next:!0}),pixiPerform:je(ke.pixi,Sme,{next:!0}),label:je(ke.label,mme,{next:!0}),jumpLabel:je(ke.jumpLabel,Ume),setVar:je(ke.setVar,$ve,{next:!0}),showVars:je(ke.showVars,zve),unlockCg:je(ke.unlockCg,Bme,{next:!0}),unlockBgm:je(ke.unlockBgm,Nme,{next:!0}),say:je(ke.say,_ve),filmMode:je(ke.filmMode,Xpe,{next:!0}),callScene:je(ke.callScene,PY),setTextbox:je(ke.setTextbox,Rme),setAnimation:je(ke.setAnimation,Tme),playEffect:je(ke.playEffect,wme,{next:!0}),setTempAnimation:je(ke.setTempAnimation,Mme),__commment:je(ke.comment,Wpe,{next:!0}),setTransform:je(ke.setTransform,kme),setTransition:je(ke.setTransition,Dme,{next:!0}),getUserInput:je(ke.getUserInput,eme),applyStyle:je(ke.applyStyle,Hve,{next:!0})}),cD=Object.values(uD),Wve=cD.filter(e=>e.next).map(e=>e.scriptType),Sm=new QX(fH,Yr,Wve,cD),Un=(e,t,r)=>{const n=Sm.parse(e,t,r);return te.info(`${t}`,n),n},MS=e=>{var n;let t=cH;t=(((n=lD[e.command])==null?void 0:n.scriptFunction)??uD.say.scriptFunction)(e),t.arrangePerformPromise?t.arrangePerformPromise.then(i=>C.gameplay.performController.arrangeNewPerform(i,e)):C.gameplay.performController.arrangeNewPerform(t,e)},Xve=e=>{C.sceneManager.lockSceneWrite||(C.sceneManager.lockSceneWrite=!0,bi(e.sceneUrl).then(t=>{C.sceneManager.sceneData.currentScene=Un(t,e.sceneName,e.sceneUrl),C.sceneManager.sceneData.currentSentenceId=e.continueLine+1,te.debug("",C.sceneManager.sceneData.currentScene),C.sceneManager.lockSceneWrite=!1,cr()}).catch(t=>{te.error("",t),C.sceneManager.lockSceneWrite=!1}))};function qve(e){try{return sD(e)()}catch{return!1}}const lx=e=>{if(e===void 0)return!0;const r=e.split(/([+\-*\/()><!]|>=|<=|==|&&|\|\||!=)/g).map(n=>n.match(/[a-zA-Z]/)?n.match(/true/)||n.match(/false/)?n:Nd(n,!0):n).reduce((n,i)=>n+i,"");return!!qve(r)},fD=()=>{if(C.sceneManager.sceneData.currentSentenceId>C.sceneManager.sceneData.currentScene.sentenceList.length-1){if(C.sceneManager.sceneData.sceneStack.length!==0){const u=C.sceneManager.sceneData.sceneStack.pop();u!==void 0&&Xve(u)}return}const e=C.sceneManager.sceneData.currentScene.sentenceList[C.sceneManager.sceneData.currentSentenceId],t=u=>{let c=u;const f=c.match(new RegExp("(?<!\\\\)\\{(.*?)\\}","g"));return f!==null&&f.forEach(h=>{const d=Nd(h.replace(new RegExp("(?<!\\\\)\\{(.*)\\}"),"$1"));c=c.replace(h,d)}),c=c.replace(/\\{/g,"{").replace(/\\}/g,"}"),c};(()=>{e.content=t(e.content),e.args.forEach(u=>{u.value&&typeof u.value=="string"&&(u.value=t(u.value))})})();let n=!0,i=!1,o="";if(e.args.forEach(u=>{u.key==="when"&&(i=!0,o=u.value.toString())}),i&&(n=lx(o)),!n){te.warn(""),C.sceneManager.sceneData.currentSentenceId++,cr();return}MS(e);let a=!1;e.args.forEach(u=>{u.key==="next"&&u.value&&(a=!0)});let s=e.command===ke.say;e.args.forEach(u=>{u.key==="notend"&&u.value===!0&&(s=!1)});let l;if(a){C.sceneManager.sceneData.currentSentenceId++,fD();return}setTimeout(()=>{l=N.getState().stage;const u={currentStageState:l,globalGameVar:N.getState().userData.globalGameVar};te.debug("",u),s&&C.backlogManager.saveCurrentStateToBacklog()},0),C.sceneManager.sceneData.currentSentenceId++},cr=()=>{if(C.events.userInteractNext.emit(),N.getState().GUI.showTitle)return;let t=!1;if(C.gameplay.performController.performList.forEach(i=>{i.blockingNext()&&(t=!0)}),t){te.warn("next ");return}let r=!0;if(C.gameplay.performController.performList.forEach(i=>{!i.isHoldOn&&!i.skipNextCollect&&(r=!1)}),r){const i=N.getState().stage,o=Pt(i);for(let a=0;a<o.PerformList.length;a++)o.PerformList[a].isHoldOn||(o.PerformList.splice(a,1),a--);N.dispatch(hp(o)),fD();return}te.debug("");let n=!1;for(let i=0;i<C.gameplay.performController.performList.length;i++){const o=C.gameplay.performController.performList[i];o.isHoldOn||(o.goNextWhenOver&&(n=!0),o.skipNextCollect||(o.stopFunction(),clearTimeout(o.stopTimeout),C.gameplay.performController.performList.splice(i,1),i--))}n&&cr()},RS=()=>Math.random().toString().substring(0,10);class Yve{constructor(){oe(this,"performList",[]);oe(this,"timeoutList",[])}arrangeNewPerform(t,r,n=!0){if(this.performList.findIndex(o=>o.performName===t.performName)>-1)for(let o=0;o<this.performList.length;o++){const a=this.performList[o];a.performName===t.performName&&(a.stopFunction(),clearTimeout(a.stopTimeout),this.performList.splice(o,1),o--)}if(t.performName!==t_){if(n){const o={id:t.performName,isHoldOn:t.isHoldOn,script:r};N.dispatch(Ut.addPerform(o))}t.stopTimeout=setTimeout(()=>{t.isHoldOn||this.unmountPerform(t.performName)},t.duration),r.args.find(o=>o.key==="continue"&&o.value===!0)&&(t.goNextWhenOver=!0),this.performList.push(t)}}unmountPerform(t,r=!1){if(r)for(let n=0;n<this.performList.length;n++){const i=this.performList[n];i.performName===t&&(i.stopFunction(),clearTimeout(i.stopTimeout),i.goNextWhenOver&&this.goNextWhenOver(),this.performList.splice(n,1),n--,this.erasePerformFromState(t))}else for(let n=0;n<this.performList.length;n++){const i=this.performList[n];!i.isHoldOn&&i.performName===t&&(i.stopFunction(),clearTimeout(i.stopTimeout),this.performList.splice(n,1),n--,i.goNextWhenOver&&this.goNextWhenOver())}}erasePerformFromState(t){N.dispatch(Ut.removePerformByName(t))}removeAllPerform(){for(const t of this.performList)t.stopFunction();this.performList=[];for(const t of this.timeoutList)clearTimeout(t)}goNextWhenOver(){var r;let t=!1;(r=this.performList)==null||r.forEach(n=>{n.blockingAuto()&&(t=!0)}),t?setTimeout(this.goNextWhenOver,100):cr()}}class Kve{constructor(){oe(this,"isAuto",!1);oe(this,"isFast",!1);oe(this,"autoInterval",null);oe(this,"fastInterval",null);oe(this,"autoTimeout",null);oe(this,"pixiStage",null);oe(this,"performController",new Yve)}resetGamePlay(){this.performController.timeoutList=[],this.isAuto=!1,this.isFast=!1;const t=this.autoInterval;t!==null&&clearInterval(t),this.autoInterval=null;const r=this.fastInterval;r!==null&&clearInterval(r),this.fastInterval=null;const n=this.autoTimeout;n!==null&&clearInterval(n),this.autoTimeout=null}}function Zve(e){return{all:e=e||new Map,on:function(t,r){var n=e.get(t);n?n.push(r):e.set(t,[r])},off:function(t,r){var n=e.get(t);n&&(r?n.splice(n.indexOf(r)>>>0,1):e.set(t,[]))},emit:function(t,r){var n=e.get(t);n&&n.slice().map(function(i){i(r)}),(n=e.get("*"))&&n.slice().map(function(i){i(t,r)})}}}class Jve{constructor(){oe(this,"textSettle",rh("text-settle"));oe(this,"userInteractNext",rh("__NEXT"));oe(this,"fullscreenDbClick",rh("fullscreen-dbclick"));oe(this,"styleUpdate",rh("style-update"))}}const Xg=Zve();function rh(e){return{on:(t,r)=>{Xg.on(`${e}-${r??""}`,t)},emit:(t,r)=>{Xg.emit(`${e}-${r??""}`,t)},off:(t,r)=>{Xg.off(`${e}-${r??""}`,t)}}}class Qve{constructor(){oe(this,"sceneManager",new lH);oe(this,"backlogManager",new sH(this.sceneManager));oe(this,"animationManager",new uH);oe(this,"gameplay",new Kve);oe(this,"gameName","");oe(this,"gameKey","");oe(this,"events",new Jve)}}const C=new Qve,tt=hD(()=>{const e=N.getState().userData;Aa.setItem(C.gameKey,e).then(()=>{te.info("")})},100),Fc=hD(()=>{Aa.getItem(C.gameKey).then(e=>{if(!e||!dD(e)){te.warn(""),tt();return}N.dispatch(Lb(e))})},100);function hD(e,t){let r;function n(...i){clearTimeout(r);let o;return r=setTimeout(()=>{o=e.apply(n,i)},t),o}return n}const Bd=()=>{const e=N.getState().userData;Aa.setItem(C.gameKey,e).then(()=>{Aa.getItem(C.gameKey).then(t=>{if(!t){tt();return}N.dispatch(Lb(t))}),te.info("")})};function dD(e){let t=!0;for(const r in i_)e.hasOwnProperty(r)||(t=!1);return t}async function pD(){const e=await Aa.getItem(C.gameKey);if(!e||!dD(e)){const t=N.getState().userData;return te.warn(""),await Aa.setItem(C.gameKey,t)}else N.dispatch(Lb(e))}var Ze=(e=>(e[e.Save=0]="Save",e[e.Load=1]="Load",e[e.Option=2]="Option",e))(Ze||{});const ege={showBacklog:!1,showStarter:!0,showTitle:!0,showMenuPanel:!1,showTextBox:!0,showControls:!0,controlsVisibility:!0,currentMenuTag:Ze.Option,titleBg:"",titleBgm:"",logoImage:[],showExtra:!1,showGlobalDialog:!1,showPanicOverlay:!1,isEnterGame:!1,isShowLogo:!0},mD=ip({name:"gui",initialState:ege,reducers:{setVisibility:(e,t)=>{Fc();const{component:r,visibility:n}=t.payload;e[r]=n},setMenuPanelTag:(e,t)=>{Fc(),e.currentMenuTag=t.payload},setGuiAsset:(e,t)=>{const{asset:r,value:n}=t.payload;e[r]=n},setLogoImage:(e,t)=>{e.logoImage=[...t.payload]}}}),{setVisibility:Re,setMenuPanelTag:Sa,setGuiAsset:jd,setLogoImage:tge}=mD.actions,rge=mD.reducer,N=_j({reducer:{stage:Kz,GUI:rge,userData:oH,saveData:Kle},middleware:SI({serializableCheck:!1})});let AA;function kS(e,t=0,r=100){if(te.debug("playing bgm"+e),e===""){AA=setTimeout(()=>{N.dispatch(Ce({key:"bgm",value:{src:"",enter:0,volume:100}}))},t);const n=N.getState().stage.bgm.src;N.dispatch(Ce({key:"bgm",value:{src:n,enter:-t,volume:r}}))}else clearTimeout(AA),N.dispatch(Ce({key:"bgm",value:{src:e,enter:t,volume:r}}));setTimeout(()=>{const n=document.getElementById("currentBgm");n.src&&(n==null||n.play())},0)}const nge=()=>{zp(!0);const e=Yr("start.txt",qr.scene);bi(e).then(t=>{C.sceneManager.sceneData.currentScene=Un(t,"start.txt",e),cr()}),N.dispatch(Re({component:"showTitle",visibility:!1}))};async function ige(){if(rf(N.getState().stage.bgName),await Qle()&&C.sceneManager.sceneData.currentSentenceId===0){await eue();return}C.sceneManager.sceneData.currentSentenceId===0&&C.sceneManager.sceneData.currentScene.sceneName==="start.txt"?cr():K1()}function LS(e,t){if(e==null)return{};var r=Nde(e,t),n,i;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(i=0;i<o.length;i++)n=o[i],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}var oge={area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0};const age=Sr(oge);var sge=/\s([^'"/\s><]+?)[\s/>]|([^\s=]+)=\s?(".*?"|'.*?')/g;function OA(e){var t={type:"tag",name:"",voidElement:!1,attrs:{},children:[]},r=e.match(/<\/?([^\s]+?)[/\s>]/);if(r&&(t.name=r[1],(age[r[1]]||e.charAt(e.length-2)==="/")&&(t.voidElement=!0),t.name.startsWith("!--"))){var n=e.indexOf("-->");return{type:"comment",comment:n!==-1?e.slice(4,n):""}}for(var i=new RegExp(sge),o=null;(o=i.exec(e))!==null;)if(o[0].trim())if(o[1]){var a=o[1].trim(),s=[a,""];a.indexOf("=")>-1&&(s=a.split("=")),t.attrs[s[0]]=s[1],i.lastIndex--}else o[2]&&(t.attrs[o[2]]=o[3].trim().substring(1,o[3].length-1));return t}var lge=/<[a-zA-Z0-9\-\!\/](?:"[^"]*"|'[^']*'|[^'">])*>/g,uge=/^\s*$/,cge=Object.create(null);function vD(e,t){switch(t.type){case"text":return e+t.content;case"tag":return e+="<"+t.name+(t.attrs?function(r){var n=[];for(var i in r)n.push(i+'="'+r[i]+'"');return n.length?" "+n.join(" "):""}(t.attrs):"")+(t.voidElement?"/>":">"),t.voidElement?e:e+t.children.reduce(vD,"")+"</"+t.name+">";case"comment":return e+"<!--"+t.comment+"-->"}}var fge={parse:function(e,t){t||(t={}),t.components||(t.components=cge);var r,n=[],i=[],o=-1,a=!1;if(e.indexOf("<")!==0){var s=e.indexOf("<");n.push({type:"text",content:s===-1?e:e.substring(0,s)})}return e.replace(lge,function(l,u){if(a){if(l!=="</"+r.name+">")return;a=!1}var c,f=l.charAt(1)!=="/",h=l.startsWith("<!--"),d=u+l.length,m=e.charAt(d);if(h){var g=OA(l);return o<0?(n.push(g),n):((c=i[o]).children.push(g),n)}if(f&&(o++,(r=OA(l)).type==="tag"&&t.components[r.name]&&(r.type="component",a=!0),r.voidElement||a||!m||m==="<"||r.children.push({type:"text",content:e.slice(d,e.indexOf("<",d))}),o===0&&n.push(r),(c=i[o-1])&&c.children.push(r),i[o]=r),(!f||r.voidElement)&&(o>-1&&(r.voidElement||r.name===l.slice(2,-1))&&(o--,r=o===-1?n:i[o]),!a&&m!=="<"&&m)){c=o===-1?n:i[o].children;var p=e.indexOf("<",d),v=e.slice(d,p===-1?void 0:p);uge.test(v)&&(v=" "),(p>-1&&o+c.length>=0||v!==" ")&&c.push({type:"text",content:v})}}),n},stringify:function(e){return e.reduce(function(t,r){return t+vD("",r)},"")}};function Dh(){if(console&&console.warn){for(var e,t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];typeof r[0]=="string"&&(r[0]="react-i18next:: ".concat(r[0])),(e=console).warn.apply(e,r)}}var IA={};function Ud(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];typeof t[0]=="string"&&IA[t[0]]||(typeof t[0]=="string"&&(IA[t[0]]=new Date),Dh.apply(void 0,t))}var gD=function(t,r){return function(){if(t.isInitialized)r();else{var n=function i(){setTimeout(function(){t.off("initialized",i)},0),r()};t.on("initialized",n)}}};function MA(e,t,r){e.loadNamespaces(t,gD(e,r))}function RA(e,t,r,n){typeof r=="string"&&(r=[r]),r.forEach(function(i){e.options.ns.indexOf(i)<0&&e.options.ns.push(i)}),e.loadLanguages(t,gD(e,n))}function hge(e,t){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},n=t.languages[0],i=t.options?t.options.fallbackLng:!1,o=t.languages[t.languages.length-1];if(n.toLowerCase()==="cimode")return!0;var a=function(l,u){var c=t.services.backendConnector.state["".concat(l,"|").concat(u)];return c===-1||c===2};return r.bindI18n&&r.bindI18n.indexOf("languageChanging")>-1&&t.services.backendConnector.backend&&t.isLanguageChangingTo&&!a(t.isLanguageChangingTo,e)?!1:!!(t.hasResourceBundle(n,e)||!t.services.backendConnector.backend||t.options.resources&&!t.options.partialBundledLanguages||a(n,e)&&(!i||a(o,e)))}function dge(e,t){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};if(!t.languages||!t.languages.length)return Ud("i18n.languages were undefined or empty",t.languages),!0;var n=t.options.ignoreJSONStructure!==void 0;return n?t.hasLoadedNamespace(e,{lng:r.lng,precheck:function(o,a){if(r.bindI18n&&r.bindI18n.indexOf("languageChanging")>-1&&o.services.backendConnector.backend&&o.isLanguageChangingTo&&!a(o.isLanguageChangingTo,e))return!1}}):hge(e,t,r)}var pge=/&(?:amp|#38|lt|#60|gt|#62|apos|#39|quot|#34|nbsp|#160|copy|#169|reg|#174|hellip|#8230|#x2F|#47);/g,mge={"&amp;":"&","&#38;":"&","&lt;":"<","&#60;":"<","&gt;":">","&#62;":">","&apos;":"'","&#39;":"'","&quot;":'"',"&#34;":'"',"&nbsp;":" ","&#160;":" ","&copy;":"","&#169;":"","&reg;":"","&#174;":"","&hellip;":"","&#8230;":"","&#x2F;":"/","&#47;":"/"},vge=function(t){return mge[t]},gge=function(t){return t.replace(pge,vge)};function kA(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function LA(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?kA(Object(r),!0).forEach(function(n){en(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):kA(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}var ux={bindI18n:"languageChanged",bindI18nStore:"",transEmptyNodeValue:"",transSupportBasicHtmlNodes:!0,transWrapTextNodes:"",transKeepBasicHtmlNodesFor:["br","strong","i","p"],useSuspense:!0,unescape:gge};function yge(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};ux=LA(LA({},ux),e)}function yD(){return ux}var _D;function _ge(e){_D=e}function FS(){return _D}var xge=["format"],bge=["children","count","parent","i18nKey","context","tOptions","values","defaults","components","ns","i18n","t","shouldUnescape"];function FA(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function $t(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?FA(Object(r),!0).forEach(function(n){en(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):FA(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function qg(e,t){if(!e)return!1;var r=e.props?e.props.children:e.children;return t?r.length>0:!!r}function Yg(e){return e?e.props?e.props.children:e.children:[]}function Sge(e){return Object.prototype.toString.call(e)!=="[object Array]"?!1:e.every(function(t){return G.isValidElement(t)})}function Eu(e){return Array.isArray(e)?e:[e]}function wge(e,t){var r=$t({},t);return r.props=Object.assign(e.props,t.props),r}function xD(e,t){if(!e)return"";var r="",n=Eu(e),i=t.transSupportBasicHtmlNodes&&t.transKeepBasicHtmlNodesFor?t.transKeepBasicHtmlNodesFor:[];return n.forEach(function(o,a){if(typeof o=="string")r+="".concat(o);else if(G.isValidElement(o)){var s=Object.keys(o.props).length,l=i.indexOf(o.type)>-1,u=o.props.children;if(!u&&l&&s===0)r+="<".concat(o.type,"/>");else if(!u&&(!l||s!==0))r+="<".concat(a,"></").concat(a,">");else if(o.props.i18nIsDynamicList)r+="<".concat(a,"></").concat(a,">");else if(l&&s===1&&typeof u=="string")r+="<".concat(o.type,">").concat(u,"</").concat(o.type,">");else{var c=xD(u,t);r+="<".concat(a,">").concat(c,"</").concat(a,">")}}else if(o===null)Dh("Trans: the passed in value is invalid - seems you passed in a null child.");else if(Zt(o)==="object"){var f=o.format,h=LS(o,xge),d=Object.keys(h);if(d.length===1){var m=f?"".concat(d[0],", ").concat(f):d[0];r+="{{".concat(m,"}}")}else Dh("react-i18next: the passed in object contained more than one variable - the object should look like {{ value, format }} where format is optional.",o)}else Dh("Trans: the passed in value is invalid - seems you passed in a variable like {number} - please pass in variables for interpolation as full objects like {{number}}.",o)}),r}function Ege(e,t,r,n,i,o){if(t==="")return[];var a=n.transKeepBasicHtmlNodesFor||[],s=t&&new RegExp(a.join("|")).test(t);if(!e&&!s)return[t];var l={};function u(p){var v=Eu(p);v.forEach(function(y){typeof y!="string"&&(qg(y)?u(Yg(y)):Zt(y)==="object"&&!G.isValidElement(y)&&Object.assign(l,y))})}u(e);var c=fge.parse("<0>".concat(t,"</0>")),f=$t($t({},l),i);function h(p,v,y){var _=Yg(p),x=m(_,v.children,y);return Sge(_)&&x.length===0?_:x}function d(p,v,y,_,x){p.dummy&&(p.children=v),y.push(G.cloneElement(p,$t($t({},p.props),{},{key:_}),x?void 0:v))}function m(p,v,y){var _=Eu(p),x=Eu(v);return x.reduce(function(b,S,E){var I=S.children&&S.children[0]&&S.children[0].content&&r.services.interpolator.interpolate(S.children[0].content,f,r.language);if(S.type==="tag"){var A=_[parseInt(S.name,10)];!A&&y.length===1&&y[0][S.name]&&(A=y[0][S.name]),A||(A={});var O=Object.keys(S.attrs).length!==0?wge({props:S.attrs},A):A,D=G.isValidElement(O),B=D&&qg(S,!0)&&!S.voidElement,j=s&&Zt(O)==="object"&&O.dummy&&!D,W=Zt(e)==="object"&&e!==null&&Object.hasOwnProperty.call(e,S.name);if(typeof O=="string"){var $=r.services.interpolator.interpolate(O,f,r.language);b.push($)}else if(qg(O)||B){var z=h(O,S,y);d(O,z,b,E)}else if(j){var ie=m(_,S.children,y);b.push(G.cloneElement(O,$t($t({},O.props),{},{key:E}),ie))}else if(Number.isNaN(parseFloat(S.name)))if(W){var Se=h(O,S,y);d(O,Se,b,E,S.voidElement)}else if(n.transSupportBasicHtmlNodes&&a.indexOf(S.name)>-1)if(S.voidElement)b.push(G.createElement(S.name,{key:"".concat(S.name,"-").concat(E)}));else{var de=m(_,S.children,y);b.push(G.createElement(S.name,{key:"".concat(S.name,"-").concat(E)},de))}else if(S.voidElement)b.push("<".concat(S.name," />"));else{var X=m(_,S.children,y);b.push("<".concat(S.name,">").concat(X,"</").concat(S.name,">"))}else if(Zt(O)==="object"&&!D){var L=S.children[0]?I:null;L&&b.push(L)}else S.children.length===1&&I?b.push(G.cloneElement(O,$t($t({},O.props),{},{key:E}),I)):b.push(G.cloneElement(O,$t($t({},O.props),{},{key:E})))}else if(S.type==="text"){var q=n.transWrapTextNodes,re=o?n.unescape(r.services.interpolator.interpolate(S.content,f,r.language)):r.services.interpolator.interpolate(S.content,f,r.language);q?b.push(G.createElement(q,{key:"".concat(S.name,"-").concat(E)},re)):b.push(re)}return b},[])}var g=m([{dummy:!0,children:e||[]}],c,Eu(e||[]));return Yg(g[0])}function Tge(e){var t=e.children,r=e.count,n=e.parent,i=e.i18nKey,o=e.context,a=e.tOptions,s=a===void 0?{}:a,l=e.values,u=e.defaults,c=e.components,f=e.ns,h=e.i18n,d=e.t,m=e.shouldUnescape,g=LS(e,bge),p=h||FS();if(!p)return Ud("You will need to pass in an i18next instance by using i18nextReactModule"),t;var v=d||p.t.bind(p)||function(B){return B};o&&(s.context=o);var y=$t($t({},yD()),p.options&&p.options.react),_=f||v.ns||p.options&&p.options.defaultNS;_=typeof _=="string"?[_]:_||["translation"];var x=u||xD(t,y)||y.transEmptyNodeValue||i,b=y.hashTransKey,S=i||(b?b(x):x),E=l?s.interpolation:{interpolation:$t($t({},s.interpolation),{},{prefix:"#$?",suffix:"?$#"})},I=$t($t($t($t({},s),{},{count:r},l),E),{},{defaultValue:x,ns:_}),A=S?v(S,I):x,O=Ege(c||t,A,p,y,I,m),D=n!==void 0?n:y.defaultTransParent;return D?G.createElement(D,g,O):O}function $n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function DA(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,gI(n.key),n)}}function Gn(e,t,r){return t&&DA(e.prototype,t),r&&DA(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}var Cge={type:"3rdParty",init:function(t){yge(t.options.react),_ge(t)}},bD=G.createContext(),Pge=function(){function e(){$n(this,e),this.usedNamespaces={}}return Gn(e,[{key:"addUsedNamespaces",value:function(r){var n=this;r.forEach(function(i){n.usedNamespaces[i]||(n.usedNamespaces[i]=!0)})}},{key:"getUsedNamespaces",value:function(){return Object.keys(this.usedNamespaces)}}]),e}(),Age=["children","count","parent","i18nKey","context","tOptions","values","defaults","components","ns","i18n","t","shouldUnescape"];function NA(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function Oge(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?NA(Object(r),!0).forEach(function(n){en(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):NA(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Ige(e){var t=e.children,r=e.count,n=e.parent,i=e.i18nKey,o=e.context,a=e.tOptions,s=a===void 0?{}:a,l=e.values,u=e.defaults,c=e.components,f=e.ns,h=e.i18n,d=e.t,m=e.shouldUnescape,g=LS(e,Age),p=G.useContext(bD)||{},v=p.i18n,y=p.defaultNS,_=h||v||FS(),x=d||_&&_.t.bind(_);return Tge(Oge({children:t,count:r,parent:n,i18nKey:i,context:o,tOptions:s,values:l,defaults:u,components:c,ns:f||x&&x.ns||y||_&&_.options&&_.options.defaultNS,i18n:_,t:d,shouldUnescape:m},g))}function SD(e){if(Array.isArray(e))return e}function Mge(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var n,i,o,a,s=[],l=!0,u=!1;try{if(o=(r=r.call(e)).next,t===0){if(Object(r)!==r)return;l=!1}else for(;!(l=(n=o.call(r)).done)&&(s.push(n.value),s.length!==t);l=!0);}catch(c){u=!0,i=c}finally{try{if(!l&&r.return!=null&&(a=r.return(),Object(a)!==a))return}finally{if(u)throw i}}return s}}function BA(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function wD(e,t){if(e){if(typeof e=="string")return BA(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return BA(e,t)}}function ED(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Rge(e,t){return SD(e)||Mge(e,t)||wD(e,t)||ED()}function jA(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function Kg(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?jA(Object(r),!0).forEach(function(n){en(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):jA(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}var kge=function(t,r){var n=G.useRef();return G.useEffect(function(){n.current=r?n.current:t},[t,r]),n.current};function wm(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},r=t.i18n,n=G.useContext(bD)||{},i=n.i18n,o=n.defaultNS,a=r||i||FS();if(a&&!a.reportNamespaces&&(a.reportNamespaces=new Pge),!a){Ud("You will need to pass in an i18next instance by using initReactI18next");var s=function(A,O){return typeof O=="string"?O:O&&Zt(O)==="object"&&typeof O.defaultValue=="string"?O.defaultValue:Array.isArray(A)?A[A.length-1]:A},l=[s,{},!1];return l.t=s,l.i18n={},l.ready=!1,l}a.options.react&&a.options.react.wait!==void 0&&Ud("It seems you are still using the old wait option, you may migrate to the new useSuspense behaviour.");var u=Kg(Kg(Kg({},yD()),a.options.react),t),c=u.useSuspense,f=u.keyPrefix,h=e||o||a.options&&a.options.defaultNS;h=typeof h=="string"?[h]:h||["translation"],a.reportNamespaces.addUsedNamespaces&&a.reportNamespaces.addUsedNamespaces(h);var d=(a.isInitialized||a.initializedStoreOnce)&&h.every(function(I){return dge(I,a,u)});function m(){return a.getFixedT(t.lng||null,u.nsMode==="fallback"?h:h[0],f)}var g=G.useState(m),p=Rge(g,2),v=p[0],y=p[1],_=h.join();t.lng&&(_="".concat(t.lng).concat(_));var x=kge(_),b=G.useRef(!0);G.useEffect(function(){var I=u.bindI18n,A=u.bindI18nStore;b.current=!0,!d&&!c&&(t.lng?RA(a,t.lng,h,function(){b.current&&y(m)}):MA(a,h,function(){b.current&&y(m)})),d&&x&&x!==_&&b.current&&y(m);function O(){b.current&&y(m)}return I&&a&&a.on(I,O),A&&a&&a.store.on(A,O),function(){b.current=!1,I&&a&&I.split(" ").forEach(function(D){return a.off(D,O)}),A&&a&&A.split(" ").forEach(function(D){return a.store.off(D,O)})}},[a,_]);var S=G.useRef(!0);G.useEffect(function(){b.current&&!S.current&&y(m),S.current=!1},[a,f]);var E=[v,a,d];if(E.t=v,E.i18n=a,E.ready=d,d||!d&&!c)return E;throw new Promise(function(I){t.lng?RA(a,t.lng,h,function(){return I()}):MA(a,h,function(){return I()})})}function Hr(e){const{t}=wm(),r=i=>t(i[0]==="$"?i.slice(1):e+i);function n(i,...o){return o.length?[r(i),...o.map(a=>r(a))]:r(i)}return n}function Pl(e){const t=me(e),r=G.useRef(t);return G.useEffect(()=>{r.current=t},[t]),r}function Al(e){G.useEffect(()=>{e()},[])}function Ol(e){G.useEffect(()=>function(){e()},[])}function Lge(e){G.useEffect(()=>{e()})}const Fge="_main_15mmi_1",Dge="_button_15mmi_16",Nge="_button_text_15mmi_23",Bge="_button_on_15mmi_31",jge="_singleButton_15mmi_42",Uge="_fastSlPreview_15mmi_59",$ge="_fastSlEnter_15mmi_1",Gge="_fastsave_15mmi_73",zge="_fastSPreview_15mmi_73",Vge="_fastload_15mmi_77",Hge="_fastLPreview_15mmi_77",Wge="_slPreviewMain_15mmi_89",Xge="_imgContainer_15mmi_97",qge="_textContainer_15mmi_105",he={main:Fge,button:Dge,button_text:Nge,button_on:Bge,singleButton:jge,fastSlPreview:Uge,fastSlEnter:$ge,fastsave:Gge,fastSPreview:zge,fastload:Vge,fastLPreview:Hge,slPreviewMain:Wge,imgContainer:Xge,textContainer:qge},TD=e=>{const t=document.getElementById("Button_ControlPanel_auto");t&&(e?t.className=he.button_on:t.className=he.singleButton)},DS=()=>{C.gameplay.isAuto=!1,TD(!1),C.gameplay.autoInterval!==null&&(clearInterval(C.gameplay.autoInterval),C.gameplay.autoInterval=null),C.gameplay.autoTimeout!==null&&(clearTimeout(C.gameplay.autoTimeout),C.gameplay.autoTimeout=null)},CD=()=>{C.gameplay.isAuto?DS():(C.gameplay.isAuto=!0,TD(!0),C.gameplay.autoInterval=setInterval(Kge,100))},Yge=()=>{cr(),C.gameplay.autoTimeout=null},Kge=()=>{const t=250+(100-N.getState().userData.optionData.autoSpeed)*15;let r=!1;C.gameplay.performController.performList.forEach(n=>{n.blockingAuto()&&(r=!0)}),!r&&C.gameplay.autoTimeout===null&&(C.gameplay.autoTimeout=setTimeout(Yge,t))},PD=e=>{const t=document.getElementById("Button_ControlPanel_fast");t&&(e?t.className=he.button_on:t.className=he.singleButton)},Us=()=>{OD()&&(C.gameplay.isFast=!1,PD(!1),C.gameplay.fastInterval!==null&&(clearInterval(C.gameplay.fastInterval),C.gameplay.fastInterval=null))},AD=()=>{OD()||(C.gameplay.isFast=!0,PD(!0),C.gameplay.fastInterval=setInterval(()=>{cr()},pM.fast_timeout))},OD=function(){return C.gameplay.isFast},NS=()=>{Us(),DS()},ID=()=>{C.gameplay.isFast?Us():AD()},Zge="_Backlog_main_zwyao_2",Jge="_backlog_soft_in_zwyao_1",Qge="_Backlog_main_out_zwyao_15",eye="_backlog_soft_out_zwyao_1",tye="_Backlog_main_out_IndexHide_zwyao_28",rye="_Backlog_main_DisableScroll_zwyao_32",nye="_backlog_top_zwyao_36",iye="_backlog_top_icon_zwyao_42",oye="_backlog_icon_softin_zwyao_1",aye="_backlog_title_zwyao_62",sye="_backlog_content_zwyao_72",lye="_backlog_item_zwyao_84",uye="_backlog_item_in_zwyao_1",cye="_backlog_item_out_zwyao_94",fye="_backlog_func_area_zwyao_104",hye="_backlog_item_content_name_zwyao_113",dye="_backlog_item_content_zwyao_113",pye="_backlog_item_button_list_zwyao_137",mye="_backlog_item_button_element_zwyao_144",vye="_backlog_item_content_text_zwyao_157",ir={Backlog_main:Zge,backlog_soft_in:Jge,Backlog_main_out:Qge,backlog_soft_out:eye,Backlog_main_out_IndexHide:tye,Backlog_main_DisableScroll:rye,backlog_top:nye,backlog_top_icon:iye,backlog_icon_softin:oye,backlog_title:aye,backlog_content:sye,backlog_item:lye,backlog_item_in:uye,backlog_item_out:cye,backlog_func_area:fye,backlog_item_content_name:hye,backlog_item_content:dye,backlog_item_button_list:pye,backlog_item_button_element:mye,backlog_item_content_text:vye};var gye=Bn,yye=function(){return gye.Date.now()},_ye=yye,xye=/\s/;function bye(e){for(var t=e.length;t--&&xye.test(e.charAt(t)););return t}var Sye=bye,wye=Sye,Eye=/^\s+/;function Tye(e){return e&&e.slice(0,wye(e)+1).replace(Eye,"")}var Cye=Tye,Pye=Cye,UA=_i,Aye=Op,$A=0/0,Oye=/^[-+]0x[0-9a-f]+$/i,Iye=/^0b[01]+$/i,Mye=/^0o[0-7]+$/i,Rye=parseInt;function kye(e){if(typeof e=="number")return e;if(Aye(e))return $A;if(UA(e)){var t=typeof e.valueOf=="function"?e.valueOf():e;e=UA(t)?t+"":t}if(typeof e!="string")return e===0?e:+e;e=Pye(e);var r=Iye.test(e);return r||Mye.test(e)?Rye(e.slice(2),r?2:8):Oye.test(e)?$A:+e}var Lye=kye,Fye=_i,Zg=_ye,GA=Lye,Dye="Expected a function",Nye=Math.max,Bye=Math.min;function jye(e,t,r){var n,i,o,a,s,l,u=0,c=!1,f=!1,h=!0;if(typeof e!="function")throw new TypeError(Dye);t=GA(t)||0,Fye(r)&&(c=!!r.leading,f="maxWait"in r,o=f?Nye(GA(r.maxWait)||0,t):o,h="trailing"in r?!!r.trailing:h);function d(S){var E=n,I=i;return n=i=void 0,u=S,a=e.apply(I,E),a}function m(S){return u=S,s=setTimeout(v,t),c?d(S):a}function g(S){var E=S-l,I=S-u,A=t-E;return f?Bye(A,o-I):A}function p(S){var E=S-l,I=S-u;return l===void 0||E>=t||E<0||f&&I>=o}function v(){var S=Zg();if(p(S))return y(S);s=setTimeout(v,g(S))}function y(S){return s=void 0,h&&n?d(S):(n=i=void 0,a)}function _(){s!==void 0&&clearTimeout(s),u=0,n=l=i=s=void 0}function x(){return s===void 0?a:y(Zg())}function b(){var S=Zg(),E=p(S);if(n=arguments,i=this,l=S,E){if(s===void 0)return m(l);if(f)return clearTimeout(s),s=setTimeout(v,t),d(l)}return s===void 0&&(s=setTimeout(v,t)),a}return b.cancel=_,b.flush=x,b}var Uye=jye,$ye=Uye,Gye=_i,zye="Expected a function";function Vye(e,t,r){var n=!0,i=!0;if(typeof e!="function")throw new TypeError(zye);return Gye(r)&&(n="leading"in r?!!r.leading:n,i="trailing"in r?!!r.trailing:i),$ye(e,t,{leading:n,maxWait:t,trailing:i})}var Hye=Vye;const Wye=Sr(Hye),bs="keyboard"in navigator&&navigator.keyboard;function Xye(e){qye(),Kye(),Jye(),Zye(),Qye(),i_e(),a_e()}function qye(){const e=Pl(l=>l.GUI),t=Tm(),r=Em(e),n=MD(e),i=e_e(e),o=r_e(e),a=t_e(e),s=G.useCallback(l=>i()?(t("showGlobalDialog",!1),l.preventDefault(),!1):(a()&&t("showExtra",!1),r()&&t("showTextBox",!e.current.showTextBox),n()&&(t("showBacklog",!1),t("showTextBox",!0)),o()&&t("showMenuPanel",!1),l.preventDefault(),!1),[]);Al(()=>{document.addEventListener("contextmenu",s)}),Ol(()=>{document.removeEventListener("contextmenu",s)})}let Yye=setTimeout(()=>{},0);function Kye(){const e=Pl(l=>l.GUI),t=Tm(),r=Em(e),n=MD(e),i=RD(e),o=G.useCallback(Wye(()=>{cr()},100),[]),a=G.useRef(0),s=G.useCallback(l=>{if(i())return;const u=l.wheelDelta&&(l.wheelDelta>0?"up":"down")||l.detail&&(l.detail<0?"up":"down")||"down",c=l.ctrlKey,f=document.querySelector(`.${ir.backlog_content}`);if(r()&&u==="up"&&!c)t("showBacklog",!0),t("showTextBox",!1);else if(n()&&u==="down"&&!c){if(f){let h=o_e(f),d=new Date().getTime();h&&d-a.current>100&&(t("showBacklog",!1),t("showTextBox",!0)),a.current=d}}else r()&&u==="down"&&!c&&(clearTimeout(Yye),C.gameplay.isFast=!0,setTimeout(()=>{C.gameplay.isFast=!1},150),o())},[]);Al(()=>{document.addEventListener("wheel",s)}),Ol(()=>{document.removeEventListener("wheel",s)})}function Zye(){const e=["Escape","Backquote"],t=s=>!s.isComposing&&!s.defaultPrevented&&e.includes(s.code),r=Pl(s=>s.GUI),n=G.useCallback(()=>r.current.showTitle,[r]),i=RD(r),o=Tm(),a=G.useCallback(s=>{!t(s)||n()||(i()?o("showPanicOverlay",!1):(o("showPanicOverlay",!0),NS()))},[]);Al(()=>{document.addEventListener("keyup",a)}),Ol(()=>{document.removeEventListener("keyup",a)})}function Jye(){const e=Pl(a=>a.GUI),t=Em(e),r=G.useCallback(a=>a.keyCode===17,[]),n=G.useCallback(a=>{r(a)&&t()&&AD()},[]),i=G.useCallback(a=>{r(a)&&t()&&Us()},[]),o=G.useCallback(a=>{Us()},[]);Al(()=>{document.addEventListener("keydown",n),document.addEventListener("keyup",i),window.addEventListener("blur",o)}),Ol(()=>{document.removeEventListener("keydown",n),document.removeEventListener("keyup",i),window.removeEventListener("blur",o)}),Lge(()=>{t()||Us()})}function Qye(){const e=n_e(),t=G.useCallback(async r=>{e()&&await Jle()},[]);Al(()=>{window.addEventListener("beforeunload",t)}),Ol(()=>{window.removeEventListener("beforeunload",t)})}function Em(e){return G.useCallback(()=>!e.current.showTitle&&!e.current.showMenuPanel&&!e.current.showBacklog&&!e.current.showPanicOverlay,[e])}function MD(e){return G.useCallback(()=>e.current.showBacklog,[e])}function e_e(e){return G.useCallback(()=>e.current.showGlobalDialog,[e])}function t_e(e){return G.useCallback(()=>e.current.showExtra,[e])}function RD(e){return G.useCallback(()=>e.current.showPanicOverlay,[e])}function r_e(e){return G.useCallback(()=>[Ze.Save,Ze.Load,Ze.Option].includes(e.current.currentMenuTag),[e])}function n_e(){return G.useCallback(()=>C.sceneManager.sceneData.currentSentenceId!==0,[C.sceneManager.sceneData])}function Tm(){const e=tr();return(t,r)=>{e(Re({component:t,visibility:r}))}}function i_e(){const e=Pl(l=>l.GUI),t=Em(e),r=Tm(),n=G.useRef(!1),i=G.useCallback(l=>l.keyCode===32||l.keyCode===13,[]),o=G.useCallback(l=>{if(i(l)&&t()&&!n.current){if(!e.current.showTextBox){r("showTextBox",!0);return}NS(),cr(),n.current=!0}},[]),a=G.useCallback(l=>{i(l)&&t()&&(n.current=!1)},[]),s=G.useCallback(l=>{n.current=!1},[]);Al(()=>{document.addEventListener("keydown",o),document.addEventListener("keyup",a),document.addEventListener("blur",s)}),Ol(()=>{document.removeEventListener("keydown",o),document.removeEventListener("keyup",a),document.removeEventListener("blur",s)})}function o_e(e){const{scrollTop:t,clientHeight:r,scrollHeight:n}=e;return t===0}function a_e(){const e=me(n=>n.userData),t=tr(),r=e.optionData.fullScreen;G.useEffect(()=>{const n=i=>{i.code==="F11"&&(i.preventDefault(),r!==ci.on?(t(Rt({key:"fullScreen",value:ci.on})),tt()):(t(Rt({key:"fullScreen",value:ci.off})),tt()))};return document.addEventListener("keydown",n),()=>{document.removeEventListener("keydown",n)}},[r])}const s_e=()=>{const e=["Title_img","Game_Logo","Title_bgm","Game_name","Game_key"],t=me(r=>r.userData.globalGameVar);return G.useEffect(()=>{for(let r in t){if(!e.includes(r))continue;const n=t[r];switch(r){case"Title_img":{const i=Yr(n,qr.background);N.dispatch(jd({asset:"titleBg",value:i})),rf(i);break}case"Game_Logo":{const o=n.split("|").map(a=>Yr(a,qr.background));N.dispatch(tge(o));break}case"Title_bgm":{const i=Yr(n,qr.bgm);N.dispatch(jd({asset:"titleBgm",value:i}));break}case"Game_name":{C.gameName=n,document.title=n;break}case"Game_key":{C.gameKey=n,Fc(),Z1(),Gp(0,0);break}}}return()=>{}},[t.Game_Logo,t.Game_key,t.Game_name,t.Title_bgm,t.Title_img])},l_e=()=>{const e=me(c=>c.userData),t=me(c=>c.GUI),r=tr(),n=e.optionData.fullScreen,i=t.titleBg,o=i===""?"rgba(0,0,0,1)":`url("${i}")`,a=Hr("title."),{playSeEnter:s,playSeClick:l}=Rr(),u=SS("UI/Title/title.scss");return s_e(),w.jsxs(w.Fragment,{children:[t.showTitle&&w.jsx("div",{className:u("Title_backup_background",Wr.Title_backup_background)}),w.jsx("div",{id:"enter_game_target",onClick:()=>{kS(t.titleBgm),r(Re({component:"isEnterGame",visibility:!0})),n===ci.on&&(document.documentElement.requestFullscreen(),bs&&bs.lock(["Escape","F11"]))},onMouseEnter:s}),t.showTitle&&w.jsx("div",{className:u("Title_main",Wr.Title_main),style:{backgroundImage:o,backgroundSize:"cover"},children:w.jsxs("div",{className:u("Title_buttonList",Wr.Title_buttonList),children:[w.jsx("div",{className:u("Title_button",Wr.Title_button),onClick:()=>{nge(),l()},onMouseEnter:s,children:w.jsx("div",{className:u("Title_button_text",Wr.Title_button_text),children:a("start.title")})}),w.jsx("div",{className:u("Title_button",Wr.Title_button),onClick:async()=>{l(),r(Re({component:"showTitle",visibility:!1})),ige()},onMouseEnter:s,children:w.jsx("div",{className:u("Title_button_text",Wr.Title_button_text),children:a("continue.title")})}),w.jsx("div",{className:u("Title_button",Wr.Title_button),onClick:()=>{l(),r(Re({component:"showMenuPanel",visibility:!0})),r(Sa(Ze.Option))},onMouseEnter:s,children:w.jsx("div",{className:u("Title_button_text",Wr.Title_button_text),children:a("options.title")})}),w.jsx("div",{className:u("Title_button",Wr.Title_button),onClick:()=>{l(),r(Re({component:"showMenuPanel",visibility:!0})),r(Sa(Ze.Load))},onMouseEnter:s,children:w.jsx("div",{className:u("Title_button_text",Wr.Title_button_text),children:a("load.title")})}),w.jsx("div",{className:u("Title_button",Wr.Title_button),onClick:()=>{l(),r(Re({component:"showExtra",visibility:!0}))},onMouseEnter:s,children:w.jsx("div",{className:u("Title_button_text",Wr.Title_button_text),children:a("extra.title")})})]})})]})},u_e="_Logo_main_1bne2_1",c_e="_Logo_Back_1bne2_32",f_e="_animationActive_1bne2_46",h_e="_fadeout_1bne2_1",Jg={Logo_main:u_e,"change-img-anim":"_change-img-anim_1bne2_1",Logo_Back:c_e,animationActive:f_e,fadeout:h_e},d_e=()=>{const e=me(l=>l.GUI),t=e.logoImage,r=e.isEnterGame,n=Nn(-1),i=Nn(-1),o=5e3,a=()=>{clearTimeout(i.value),n.value<t.length-1?(n.set(n.value+1),i.set(setTimeout(a,o))):n.set(-1)};G.useEffect(()=>{r&&t.length>0&&(n.set(0),i.set(setTimeout(a,o)))},[r]);const s=n.value===-1?"":t[n.value];return w.jsxs(w.Fragment,{children:[n.value!==-1&&w.jsx("div",{className:Jg.Logo_Back+" "+(n.value===t.length-1?Jg.animationActive:""),style:{animationDuration:`${o}ms`}},n.value+"wh"),s!==""&&w.jsx("div",{className:Jg.Logo_main,onClick:a,style:{backgroundImage:`url("${s}")`,animationDuration:`${o}ms`}},n.value+"bg")]})},p_e="_Menu_main_1a7i6_1",m_e="_Menu_ShowSoftly_1a7i6_1",v_e="_Menu_TagContent_1a7i6_10",zA={Menu_main:p_e,Menu_ShowSoftly:m_e,Menu_TagContent:v_e},g_e="_MenuPanel_main_1c9ky_1",y_e="_MenuPanel_button_1c9ky_10",__e="_MenuPanel_button_icon_1c9ky_38",x_e="_MenuPanel_button_hl_1c9ky_44",Ss={MenuPanel_main:g_e,MenuPanel_button:y_e,MenuPanel_button_icon:__e,MenuPanel_button_hl:x_e};var b_e=["size","strokeWidth","strokeLinecap","strokeLinejoin","theme","fill","className","spin"];function VA(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function HA(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?VA(Object(r),!0).forEach(function(n){S_e(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):VA(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function S_e(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function w_e(e,t){if(e==null)return{};var r=E_e(e,t),n,i;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(i=0;i<o.length;i++)n=o[i],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function E_e(e,t){if(e==null)return{};var r={},n=Object.keys(e),i,o;for(o=0;o<n.length;o++)i=n[o],!(t.indexOf(i)>=0)&&(r[i]=e[i]);return r}var T_e={size:"1em",strokeWidth:4,strokeLinecap:"round",strokeLinejoin:"round",rtl:!1,theme:"outline",colors:{outline:{fill:"#333",background:"transparent"},filled:{fill:"#333",background:"#FFF"},twoTone:{fill:"#333",twoTone:"#2F88FF"},multiColor:{outStrokeColor:"#333",outFillColor:"#2F88FF",innerStrokeColor:"#FFF",innerFillColor:"#43CCF8"}},prefix:"i"};function C_e(){return"icon-"+((1+Math.random())*4294967296|0).toString(16).substring(1)}function P_e(e,t,r){var n=typeof t.fill=="string"?[t.fill]:t.fill||[],i=[],o=t.theme||r.theme;switch(o){case"outline":i.push(typeof n[0]=="string"?n[0]:"currentColor"),i.push("none"),i.push(typeof n[0]=="string"?n[0]:"currentColor"),i.push("none");break;case"filled":i.push(typeof n[0]=="string"?n[0]:"currentColor"),i.push(typeof n[0]=="string"?n[0]:"currentColor"),i.push("#FFF"),i.push("#FFF");break;case"two-tone":i.push(typeof n[0]=="string"?n[0]:"currentColor"),i.push(typeof n[1]=="string"?n[1]:r.colors.twoTone.twoTone),i.push(typeof n[0]=="string"?n[0]:"currentColor"),i.push(typeof n[1]=="string"?n[1]:r.colors.twoTone.twoTone);break;case"multi-color":i.push(typeof n[0]=="string"?n[0]:"currentColor"),i.push(typeof n[1]=="string"?n[1]:r.colors.multiColor.outFillColor),i.push(typeof n[2]=="string"?n[2]:r.colors.multiColor.innerStrokeColor),i.push(typeof n[3]=="string"?n[3]:r.colors.multiColor.innerFillColor);break}return{size:t.size||r.size,strokeWidth:t.strokeWidth||r.strokeWidth,strokeLinecap:t.strokeLinecap||r.strokeLinecap,strokeLinejoin:t.strokeLinejoin||r.strokeLinejoin,colors:i,id:e}}var kD=G.createContext(T_e);kD.Provider;function _t(e,t,r){return function(n){var i=n.size,o=n.strokeWidth,a=n.strokeLinecap,s=n.strokeLinejoin,l=n.theme,u=n.fill,c=n.className,f=n.spin,h=w_e(n,b_e),d=G.useContext(kD),m=G.useMemo(C_e,[]),g=P_e(m,{size:i,strokeWidth:o,strokeLinecap:a,strokeLinejoin:s,theme:l,fill:u},d),p=[d.prefix+"-icon"];return p.push(d.prefix+"-icon-"+e),t&&d.rtl&&p.push(d.prefix+"-icon-rtl"),f&&p.push(d.prefix+"-icon-spin"),c&&p.push(c),Z.createElement("span",HA(HA({},h),{},{className:p.join(" ")}),r(g))}}const A_e=_t("align-text-left-one",!0,function(e){return Z.createElement("svg",{width:e.size,height:e.size,viewBox:"0 0 48 48",fill:"none"},Z.createElement("path",{d:"M39 6H9C7.34315 6 6 7.34315 6 9V39C6 40.6569 7.34315 42 9 42H39C40.6569 42 42 40.6569 42 39V9C42 7.34315 40.6569 6 39 6Z",fill:e.colors[1],stroke:e.colors[0],strokeWidth:e.strokeWidth,strokeLinejoin:e.strokeLinejoin}),Z.createElement("path",{d:"M26 24H14",stroke:e.colors[2],strokeWidth:e.strokeWidth,strokeLinecap:e.strokeLinecap,strokeLinejoin:e.strokeLinejoin}),Z.createElement("path",{d:"M34 15H14",stroke:e.colors[2],strokeWidth:e.strokeWidth,strokeLinecap:e.strokeLinecap,strokeLinejoin:e.strokeLinejoin}),Z.createElement("path",{d:"M32 33H14",stroke:e.colors[2],strokeWidth:e.strokeWidth,strokeLinecap:e.strokeLinecap,strokeLinejoin:e.strokeLinejoin}))}),LD=_t("close-small",!1,function(e){return Z.createElement("svg",{width:e.size,height:e.size,viewBox:"0 0 48 48",fill:"none"},Z.createElement("path",{d:"M14 14L34 34",stroke:e.colors[0],strokeWidth:e.strokeWidth,strokeLinecap:e.strokeLinecap,strokeLinejoin:e.strokeLinejoin}),Z.createElement("path",{d:"M14 34L34 14",stroke:e.colors[0],strokeWidth:e.strokeWidth,strokeLinecap:e.strokeLinecap,strokeLinejoin:e.strokeLinejoin}))}),O_e=_t("double-down",!1,function(e){return Z.createElement("svg",{width:e.size,height:e.size,viewBox:"0 0 48 48",fill:"none"},Z.createElement("path",{d:"M36 12L24 24L12 12",stroke:e.colors[0],strokeWidth:e.strokeWidth,strokeLinecap:e.strokeLinecap,strokeLinejoin:e.strokeLinejoin}),Z.createElement("path",{d:"M36 24L24 36L12 24",stroke:e.colors[0],strokeWidth:e.strokeWidth,strokeLinecap:e.strokeLinecap,strokeLinejoin:e.strokeLinejoin}))}),I_e=_t("double-right",!0,function(e){return Z.createElement("svg",{width:e.size,height:e.size,viewBox:"0 0 48 48",fill:"none"},Z.createElement("path",{d:"M12 12L24 24L12 36",stroke:e.colors[0],strokeWidth:e.strokeWidth,strokeLinecap:e.strokeLinecap,strokeLinejoin:e.strokeLinejoin}),Z.createElement("path",{d:"M24 12L36 24L24 36",stroke:e.colors[0],strokeWidth:e.strokeWidth,strokeLinecap:e.strokeLinecap,strokeLinejoin:e.strokeLinejoin}))}),M_e=_t("double-up",!1,function(e){return Z.createElement("svg",{width:e.size,height:e.size,viewBox:"0 0 48 48",fill:"none"},Z.createElement("path",{d:"M12 24L24 12L36 24",stroke:e.colors[0],strokeWidth:e.strokeWidth,strokeLinecap:e.strokeLinecap,strokeLinejoin:e.strokeLinejoin}),Z.createElement("path",{d:"M12 36L24 24L36 36",stroke:e.colors[0],strokeWidth:e.strokeWidth,strokeLinecap:e.strokeLinecap,strokeLinejoin:e.strokeLinejoin}))}),FD=_t("folder-open",!0,function(e){return Z.createElement("svg",{width:e.size,height:e.size,viewBox:"0 0 48 48",fill:"none"},Z.createElement("path",{d:"M4 9V41L9 21H39.5V15C39.5 13.8954 38.6046 13 37.5 13H24L19 7H6C4.89543 7 4 7.89543 4 9Z",stroke:e.colors[0],strokeWidth:e.strokeWidth,strokeLinecap:e.strokeLinecap,strokeLinejoin:e.strokeLinejoin}),Z.createElement("path",{d:"M40 41L44 21H8.8125L4 41H40Z",fill:e.colors[1],stroke:e.colors[0],strokeWidth:e.strokeWidth,strokeLinecap:e.strokeLinecap,strokeLinejoin:e.strokeLinejoin}))}),R_e=_t("go-end",!0,function(e){return Z.createElement("svg",{width:e.size,height:e.size,viewBox:"0 0 48 48",fill:"none"},Z.createElement("path",{d:"M14 12L26 24L14 36",stroke:e.colors[0],strokeWidth:e.strokeWidth,strokeLinecap:e.strokeLinecap,strokeLinejoin:e.strokeLinejoin}),Z.createElement("path",{d:"M34 12V36",stroke:e.colors[0],strokeWidth:e.strokeWidth,strokeLinecap:e.strokeLinecap,strokeLinejoin:e.strokeLinejoin}))}),k_e=_t("go-start",!0,function(e){return Z.createElement("svg",{width:e.size,height:e.size,viewBox:"0 0 48 48",fill:"none"},Z.createElement("path",{d:"M34 36L22 24L34 12",stroke:e.colors[0],strokeWidth:e.strokeWidth,strokeLinecap:e.strokeLinecap,strokeLinejoin:e.strokeLinejoin}),Z.createElement("path",{d:"M14 12V36",stroke:e.colors[0],strokeWidth:e.strokeWidth,strokeLinecap:e.strokeLinecap,strokeLinejoin:e.strokeLinejoin}))}),L_e=_t("hamburger-button",!1,function(e){return Z.createElement("svg",{width:e.size,height:e.size,viewBox:"0 0 48 48",fill:"none"},Z.createElement("path",{d:"M7.94971 11.9497H39.9497",stroke:e.colors[0],strokeWidth:e.strokeWidth,strokeLinecap:e.strokeLinecap,strokeLinejoin:e.strokeLinejoin}),Z.createElement("path",{d:"M7.94971 23.9497H39.9497",stroke:e.colors[0],strokeWidth:e.strokeWidth,strokeLinecap:e.strokeLinecap,strokeLinejoin:e.strokeLinejoin}),Z.createElement("path",{d:"M7.94971 35.9497H39.9497",stroke:e.colors[0],strokeWidth:e.strokeWidth,strokeLinecap:e.strokeLinecap,strokeLinejoin:e.strokeLinejoin}))}),DD=_t("home",!1,function(e){return Z.createElement("svg",{width:e.size,height:e.size,viewBox:"0 0 48 48",fill:"none"},Z.createElement("path",{d:"M9 18V42H39V18L24 6L9 18Z",fill:e.colors[1],stroke:e.colors[0],strokeWidth:e.strokeWidth,strokeLinecap:e.strokeLinecap,strokeLinejoin:e.strokeLinejoin}),Z.createElement("path",{d:"M19 29V42H29V29H19Z",fill:e.colors[3],stroke:e.colors[2],strokeWidth:e.strokeWidth,strokeLinejoin:e.strokeLinejoin}),Z.createElement("path",{d:"M9 42H39",stroke:e.colors[0],strokeWidth:e.strokeWidth,strokeLinecap:e.strokeLinecap}))}),F_e=_t("left",!0,function(e){return Z.createElement("svg",{width:e.size,height:e.size,viewBox:"0 0 48 48",fill:"none"},Z.createElement("path",{d:"M31 36L19 24L31 12",stroke:e.colors[0],strokeWidth:e.strokeWidth,strokeLinecap:e.strokeLinecap,strokeLinejoin:e.strokeLinejoin}))}),D_e=_t("lock",!1,function(e){return Z.createElement("svg",{width:e.size,height:e.size,viewBox:"0 0 48 48",fill:"none"},Z.createElement("rect",{x:"6",y:"22",width:"36",height:"22",rx:"2",fill:e.colors[1],stroke:e.colors[0],strokeWidth:e.strokeWidth,strokeLinejoin:e.strokeLinejoin}),Z.createElement("path",{d:"M14 22V14C14 8.47715 18.4772 4 24 4C29.5228 4 34 8.47715 34 14V22",stroke:e.colors[0],strokeWidth:e.strokeWidth,strokeLinecap:e.strokeLinecap,strokeLinejoin:e.strokeLinejoin}),Z.createElement("path",{d:"M24 30V36",stroke:e.colors[2],strokeWidth:e.strokeWidth,strokeLinecap:e.strokeLinecap,strokeLinejoin:e.strokeLinejoin}))}),N_e=_t("logout",!0,function(e){return Z.createElement("svg",{width:e.size,height:e.size,viewBox:"0 0 48 48",fill:"none"},Z.createElement("path",{d:"M23.9917 6H6V42H24",stroke:e.colors[0],strokeWidth:e.strokeWidth,strokeLinecap:e.strokeLinecap,strokeLinejoin:e.strokeLinejoin}),Z.createElement("path",{d:"M33 33L42 24L33 15",stroke:e.colors[0],strokeWidth:e.strokeWidth,strokeLinecap:e.strokeLinecap,strokeLinejoin:e.strokeLinejoin}),Z.createElement("path",{d:"M16 23.9917H42",stroke:e.colors[0],strokeWidth:e.strokeWidth,strokeLinecap:e.strokeLinecap,strokeLinejoin:e.strokeLinejoin}))}),B_e=_t("music-list",!0,function(e){return Z.createElement("svg",{width:e.size,height:e.size,viewBox:"0 0 48 48",fill:"none"},Z.createElement("path",{d:"M24 19H40",stroke:e.colors[0],strokeWidth:e.strokeWidth,strokeLinecap:e.strokeLinecap,strokeLinejoin:e.strokeLinejoin}),Z.createElement("path",{d:"M24 10H40",stroke:e.colors[0],strokeWidth:e.strokeWidth,strokeLinecap:e.strokeLinecap,strokeLinejoin:e.strokeLinejoin}),Z.createElement("path",{d:"M8 38H40",stroke:e.colors[0],strokeWidth:e.strokeWidth,strokeLinecap:e.strokeLinecap,strokeLinejoin:e.strokeLinejoin}),Z.createElement("path",{d:"M8 28H40",stroke:e.colors[0],strokeWidth:e.strokeWidth,strokeLinecap:e.strokeLinecap,strokeLinejoin:e.strokeLinejoin}),Z.createElement("path",{d:"M8 10L16 15L8 20V10Z",fill:e.colors[1],stroke:e.colors[0],strokeWidth:e.strokeWidth,strokeLinejoin:e.strokeLinejoin}))}),ND=_t("play-one",!0,function(e){return Z.createElement("svg",{width:e.size,height:e.size,viewBox:"0 0 48 48",fill:"none"},Z.createElement("path",{d:"M15 24V11.8756L25.5 17.9378L36 24L25.5 30.0622L15 36.1244V24Z",fill:e.colors[1],stroke:e.colors[0],strokeWidth:e.strokeWidth,strokeLinejoin:e.strokeLinejoin}))}),j_e=_t("preview-close-one",!0,function(e){return Z.createElement("svg",{width:e.size,height:e.size,viewBox:"0 0 48 48",fill:"none"},Z.createElement("path",{d:"M9.85786 18C6.23858 21 4 24 4 24C4 24 12.9543 36 24 36C25.3699 36 26.7076 35.8154 28 35.4921M20.0318 12.5C21.3144 12.1816 22.6414 12 24 12C35.0457 12 44 24 44 24C44 24 41.7614 27 38.1421 30",stroke:e.colors[0],strokeWidth:e.strokeWidth,strokeLinecap:e.strokeLinecap,strokeLinejoin:e.strokeLinejoin}),Z.createElement("path",{d:"M20.3142 20.6211C19.4981 21.5109 19 22.6972 19 23.9998C19 26.7612 21.2386 28.9998 24 28.9998C25.3627 28.9998 26.5981 28.4546 27.5 27.5705",stroke:e.colors[0],strokeWidth:e.strokeWidth,strokeLinecap:e.strokeLinecap,strokeLinejoin:e.strokeLinejoin}),Z.createElement("path",{d:"M42 42L6 6",stroke:e.colors[0],strokeWidth:e.strokeWidth,strokeLinecap:e.strokeLinecap,strokeLinejoin:e.strokeLinejoin}))}),U_e=_t("preview-open",!1,function(e){return Z.createElement("svg",{width:e.size,height:e.size,viewBox:"0 0 48 48",fill:"none"},Z.createElement("path",{d:"M24 36C35.0457 36 44 24 44 24C44 24 35.0457 12 24 12C12.9543 12 4 24 4 24C4 24 12.9543 36 24 36Z",fill:e.colors[1],stroke:e.colors[0],strokeWidth:e.strokeWidth,strokeLinejoin:e.strokeLinejoin}),Z.createElement("path",{d:"M24 29C26.7614 29 29 26.7614 29 24C29 21.2386 26.7614 19 24 19C21.2386 19 19 21.2386 19 24C19 26.7614 21.2386 29 24 29Z",fill:e.colors[3],stroke:e.colors[2],strokeWidth:e.strokeWidth,strokeLinejoin:e.strokeLinejoin}))}),$_e=_t("replay-music",!0,function(e){return Z.createElement("svg",{width:e.size,height:e.size,viewBox:"0 0 48 48",fill:"none"},Z.createElement("path",{d:"M21 24V18L26 21L31 24L26 27L21 30V24Z",fill:e.colors[1],stroke:e.colors[0],strokeWidth:e.strokeWidth,strokeLinejoin:e.strokeLinejoin}),Z.createElement("path",{d:"M11.2721 36.7279C14.5294 39.9853 19.0294 42 24 42C33.9411 42 42 33.9411 42 24C42 14.0589 33.9411 6 24 6C19.0294 6 14.5294 8.01472 11.2721 11.2721C9.6141 12.9301 6 17 6 17",stroke:e.colors[0],strokeWidth:e.strokeWidth,strokeLinecap:e.strokeLinecap,strokeLinejoin:e.strokeLinejoin}),Z.createElement("path",{d:"M6 9V17H14",stroke:e.colors[0],strokeWidth:e.strokeWidth,strokeLinecap:e.strokeLinecap,strokeLinejoin:e.strokeLinejoin}))}),G_e=_t("return",!0,function(e){return Z.createElement("svg",{width:e.size,height:e.size,viewBox:"0 0 48 48",fill:"none"},Z.createElement("path",{d:"M12.9998 8L6 14L12.9998 21",stroke:e.colors[0],strokeWidth:e.strokeWidth,strokeLinecap:e.strokeLinecap,strokeLinejoin:e.strokeLinejoin}),Z.createElement("path",{d:"M6 14H28.9938C35.8768 14 41.7221 19.6204 41.9904 26.5C42.2739 33.7696 36.2671 40 28.9938 40H11.9984",stroke:e.colors[0],strokeWidth:e.strokeWidth,strokeLinecap:e.strokeLinecap,strokeLinejoin:e.strokeLinejoin}))}),BD=_t("save",!0,function(e){return Z.createElement("svg",{width:e.size,height:e.size,viewBox:"0 0 48 48",fill:"none"},Z.createElement("path",{d:"M6 9C6 7.34315 7.34315 6 9 6H34.2814L42 13.2065V39C42 40.6569 40.6569 42 39 42H9C7.34315 42 6 40.6569 6 39V9Z",fill:e.colors[1],stroke:e.colors[0],strokeWidth:e.strokeWidth,strokeLinejoin:e.strokeLinejoin}),Z.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M24.0083 6L24 13.3846C24 13.7245 23.5523 14 23 14H15C14.4477 14 14 13.7245 14 13.3846L14 6",fill:e.colors[3]}),Z.createElement("path",{d:"M24.0083 6L24 13.3846C24 13.7245 23.5523 14 23 14H15C14.4477 14 14 13.7245 14 13.3846L14 6H24.0083Z",stroke:e.colors[2],strokeWidth:e.strokeWidth,strokeLinejoin:e.strokeLinejoin}),Z.createElement("path",{d:"M9 6H34.2814",stroke:e.colors[0],strokeWidth:e.strokeWidth,strokeLinecap:e.strokeLinecap,strokeLinejoin:e.strokeLinejoin}),Z.createElement("path",{d:"M14 26H34",stroke:e.colors[2],strokeWidth:e.strokeWidth,strokeLinecap:e.strokeLinecap,strokeLinejoin:e.strokeLinejoin}),Z.createElement("path",{d:"M14 34H24.0083",stroke:e.colors[2],strokeWidth:e.strokeWidth,strokeLinecap:e.strokeLinecap,strokeLinejoin:e.strokeLinejoin}))}),jD=_t("setting-two",!1,function(e){return Z.createElement("svg",{width:e.size,height:e.size,viewBox:"0 0 48 48",fill:"none"},Z.createElement("path",{d:"M18.2838 43.1713C14.9327 42.1736 11.9498 40.3213 9.58787 37.867C10.469 36.8227 11 35.4734 11 34.0001C11 30.6864 8.31371 28.0001 5 28.0001C4.79955 28.0001 4.60139 28.01 4.40599 28.0292C4.13979 26.7277 4 25.3803 4 24.0001C4 21.9095 4.32077 19.8938 4.91579 17.9995C4.94381 17.9999 4.97188 18.0001 5 18.0001C8.31371 18.0001 11 15.3138 11 12.0001C11 11.0488 10.7786 10.1493 10.3846 9.35011C12.6975 7.1995 15.5205 5.59002 18.6521 4.72314C19.6444 6.66819 21.6667 8.00013 24 8.00013C26.3333 8.00013 28.3556 6.66819 29.3479 4.72314C32.4795 5.59002 35.3025 7.1995 37.6154 9.35011C37.2214 10.1493 37 11.0488 37 12.0001C37 15.3138 39.6863 18.0001 43 18.0001C43.0281 18.0001 43.0562 17.9999 43.0842 17.9995C43.6792 19.8938 44 21.9095 44 24.0001C44 25.3803 43.8602 26.7277 43.594 28.0292C43.3986 28.01 43.2005 28.0001 43 28.0001C39.6863 28.0001 37 30.6864 37 34.0001C37 35.4734 37.531 36.8227 38.4121 37.867C36.0502 40.3213 33.0673 42.1736 29.7162 43.1713C28.9428 40.752 26.676 39.0001 24 39.0001C21.324 39.0001 19.0572 40.752 18.2838 43.1713Z",fill:e.colors[1],stroke:e.colors[0],strokeWidth:e.strokeWidth,strokeLinejoin:e.strokeLinejoin}),Z.createElement("path",{d:"M24 31C27.866 31 31 27.866 31 24C31 20.134 27.866 17 24 17C20.134 17 17 20.134 17 24C17 27.866 20.134 31 24 31Z",fill:e.colors[3],stroke:e.colors[2],strokeWidth:e.strokeWidth,strokeLinejoin:e.strokeLinejoin}))}),z_e=_t("square-small",!1,function(e){return Z.createElement("svg",{width:e.size,height:e.size,viewBox:"0 0 48 48",fill:"none"},Z.createElement("path",{d:"M34 12H14C12.8954 12 12 12.8954 12 14V34C12 35.1046 12.8954 36 14 36H34C35.1046 36 36 35.1046 36 34V14C36 12.8954 35.1046 12 34 12Z",fill:e.colors[1],stroke:e.colors[0],strokeWidth:e.strokeWidth}))}),V_e=_t("unlock",!0,function(e){return Z.createElement("svg",{width:e.size,height:e.size,viewBox:"0 0 48 48",fill:"none"},Z.createElement("rect",{x:"7",y:"22.0476",width:"34",height:"22",rx:"2",fill:e.colors[1],stroke:e.colors[0],strokeWidth:e.strokeWidth,strokeLinejoin:e.strokeLinejoin}),Z.createElement("path",{d:"M14 22V14.0047C13.9948 8.87022 17.9227 4.56718 23.0859 4.05117C28.249 3.53516 32.9673 6.97408 34 12.0059",stroke:e.colors[0],strokeWidth:e.strokeWidth,strokeLinecap:e.strokeLinecap,strokeLinejoin:e.strokeLinejoin}),Z.createElement("path",{d:"M24 30V36",stroke:e.colors[2],strokeWidth:e.strokeWidth,strokeLinecap:e.strokeLinecap,strokeLinejoin:e.strokeLinejoin}))}),H_e=_t("volume-notice",!0,function(e){return Z.createElement("svg",{width:e.size,height:e.size,viewBox:"0 0 48 48",fill:"none"},Z.createElement("path",{d:"M24 6V42C17 42 11.7985 32.8391 11.7985 32.8391H6C4.89543 32.8391 4 31.9437 4 30.8391V17.0108C4 15.9062 4.89543 15.0108 6 15.0108H11.7985C11.7985 15.0108 17 6 24 6Z",fill:e.colors[1],stroke:e.colors[0],strokeWidth:e.strokeWidth,strokeLinejoin:e.strokeLinejoin}),Z.createElement("path",{d:"M32 15L32 15C32.6232 15.5565 33.1881 16.1797 33.6841 16.8588C35.1387 18.8504 36 21.3223 36 24C36 26.6545 35.1535 29.1067 33.7218 31.0893C33.2168 31.7885 32.6391 32.4293 32 33",stroke:e.colors[0],strokeWidth:e.strokeWidth,strokeLinecap:e.strokeLinecap,strokeLinejoin:e.strokeLinejoin}),Z.createElement("path",{d:"M34.2359 41.1857C40.0836 37.6953 44 31.305 44 24C44 16.8085 40.2043 10.5035 34.507 6.97906",stroke:e.colors[0],strokeWidth:e.strokeWidth,strokeLinecap:e.strokeLinecap}))}),W_e=e=>{let t;switch(e.iconName){case"save":t=w.jsx(BD,{theme:"outline",size:"1.2em",fill:e.iconColor,strokeWidth:2});break;case"load":t=w.jsx(FD,{theme:"outline",size:"1.2em",fill:e.iconColor,strokeWidth:2});break;case"option":t=w.jsx(jD,{theme:"outline",size:"1.2em",fill:e.iconColor,strokeWidth:2});break;case"title":t=w.jsx(DD,{theme:"outline",size:"1.2em",fill:e.iconColor,strokeWidth:2});break;case"exit":t=w.jsx(N_e,{theme:"outline",size:"1.2em",fill:e.iconColor,strokeWidth:2});break;default:t=w.jsx("div",{})}return t},lu=e=>{const{playSePageChange:t,playSeEnter:r}=Rr();let n=Ss.MenuPanel_button;return e.hasOwnProperty("buttonOnClassName")&&(n=n+e.buttonOnClassName),w.jsxs("div",{className:n,onClick:()=>{e.clickFunc()},onMouseEnter:r,style:{...e.style,color:e.tagColor},children:[w.jsx("div",{className:Ss.MenuPanel_button_icon,children:w.jsx(W_e,{iconName:e.iconName,iconColor:e.iconColor})}),e.tagName]})},BS=()=>{if(N.getState().GUI.showTitle)return;const e=N.dispatch;Y1(),DS(),Us(),e(Ce({key:"playVocal",value:""})),e(Re({component:"showTitle",visibility:!0})),rf(N.getState().GUI.titleBg)},X_e="_GlobalDialog_main_101j8_2",q_e="_showGlobalDialog_101j8_1",Y_e="_glabalDialog_container_inner_101j8_17",K_e="_glabalDialog_container_101j8_17",Z_e="_title_101j8_36",J_e="_button_list_101j8_41",Q_e="_button_101j8_41",Ko={GlobalDialog_main:X_e,showGlobalDialog:q_e,glabalDialog_container_inner:Y_e,glabalDialog_container:K_e,title:Z_e,button_list:J_e,button:Q_e};function e0e(){const e=me(t=>t.GUI.showGlobalDialog);return w.jsx(w.Fragment,{children:e&&w.jsx("div",{id:"globalDialogContainer"})})}function va(e){const{playSeClick:t,playSeEnter:r}=gS();N.dispatch(Re({component:"showGlobalDialog",visibility:!0}));const n=()=>{t(),e.leftFunc(),WA()},i=()=>{t(),e.rightFunc(),WA()},o=w.jsx("div",{className:Ko.GlobalDialog_main,children:w.jsx("div",{className:Ko.glabalDialog_container,children:w.jsxs("div",{className:Ko.glabalDialog_container_inner,children:[w.jsx("div",{className:Ko.title,children:e.title}),w.jsxs("div",{className:Ko.button_list,children:[w.jsx("div",{className:Ko.button,onClick:n,onMouseEnter:r,children:e.leftText}),w.jsx("div",{className:Ko.button,onClick:i,onMouseEnter:r,children:e.rightText})]})]})})});setTimeout(()=>{di.render(o,document.getElementById("globalDialogContainer"))},100)}function WA(){N.dispatch(Re({component:"showGlobalDialog",visibility:!1}))}function t0e(){N.dispatch(Re({component:"showControls",visibility:!0}))}function r0e(){N.dispatch(Re({component:"showControls",visibility:!1}))}function n0e(){N.getState().GUI.showControls===!0?r0e():t0e()}const i0e=()=>{const e=Hr("menu."),{playSeClick:t,playSeDialogOpen:r,playSePageChange:n}=Rr(),i=me(g=>g.GUI),o=tr(),a=i.currentMenuTag===Ze.Save?` ${Ss.MenuPanel_button_hl}`:"",s=i.currentMenuTag===Ze.Load?` ${Ss.MenuPanel_button_hl}`:"",l=i.currentMenuTag===Ze.Option?` ${Ss.MenuPanel_button_hl}`:"",u=i.currentMenuTag===Ze.Save?"rgba(74, 34, 93, 0.9)":"rgba(123,144,169,1)",c=i.currentMenuTag===Ze.Load?"rgba(11, 52, 110, 0.9)":"rgba(123,144,169,1)",f=i.currentMenuTag===Ze.Option?"rgba(81, 110, 65, 0.9)":"rgba(123,144,169,1)",h=i.currentMenuTag===Ze.Save?"rgba(74, 34, 93, 0.9)":"rgba(123,144,169,1)",d=i.currentMenuTag===Ze.Load?"rgba(11, 52, 110, 0.9)":"rgba(123,144,169,1)",m=i.currentMenuTag===Ze.Option?"rgba(81, 110, 65, 0.9)":"rgba(123,144,169,1)";return w.jsxs("div",{className:Ss.MenuPanel_main,children:[w.jsx(lu,{iconName:"save",buttonOnClassName:a,iconColor:h,tagColor:u,clickFunc:()=>{n(),!i.showTitle&&o(Sa(Ze.Save))},tagName:e("saving.title")},"saveButton"),w.jsx(lu,{iconName:"load",buttonOnClassName:s,iconColor:d,tagColor:c,clickFunc:()=>{n(),o(Sa(Ze.Load))},tagName:e("loadSaving.title")},"loadButton"),w.jsx(lu,{iconName:"title",iconColor:"rgba(123,144,169,1)",tagColor:"rgba(123,144,169,1)",clickFunc:()=>{r(),va({title:e("$gaming.buttons.titleTips"),leftText:e("$common.yes"),rightText:e("$common.no"),leftFunc:()=>{BS(),o(Re({component:"showMenuPanel",visibility:!1}))},rightFunc:()=>{}})},tagName:e("title.title")},"titleIcon"),w.jsx(lu,{iconName:"option",style:{marginLeft:"auto"},buttonOnClassName:l,iconColor:m,tagColor:f,clickFunc:()=>{n(),o(Sa(Ze.Option))},tagName:e("options.title")},"optionButton"),w.jsx(lu,{iconName:"exit",iconColor:"rgba(123,144,169,1)",tagColor:"rgba(123,144,169,1)",clickFunc:()=>{t(),o(Re({component:"showMenuPanel",visibility:!1}))},tagName:e("exit.title")},"exitIcon")]})},o0e="_Save_Load_main_a3o8b_2",a0e="_Save_Load_top_a3o8b_9",s0e="_Elements_in_a3o8b_1",l0e="_Save_Load_title_a3o8b_17",u0e="_Save_title_text_a3o8b_35",c0e="_Load_title_text_a3o8b_43",f0e="_Save_Load_top_buttonList_a3o8b_51",h0e="_Save_Load_top_button_a3o8b_51",d0e="_Save_Load_top_button_text_a3o8b_69",p0e="_Save_Load_top_button_on_a3o8b_80",m0e="_Load_top_button_on_a3o8b_93",v0e="_Load_top_button_a3o8b_93",g0e="_Save_Load_content_a3o8b_106",y0e="_Save_Load_content_element_a3o8b_115",_0e="_Elements_in_transform_a3o8b_1",x0e="_Save_Load_content_element_top_a3o8b_131",b0e="_Save_Load_content_element_top_index_a3o8b_138",S0e="_Load_content_elememt_top_index_a3o8b_147",w0e="_Save_Load_content_element_top_date_a3o8b_151",E0e="_Load_content_element_top_date_a3o8b_162",T0e="_Save_Load_content_text_a3o8b_166",C0e="_Save_Load_content_text_padding_a3o8b_180",P0e="_Save_Load_content_speaker_a3o8b_184",A0e="_Load_content_speaker_a3o8b_193",O0e="_Load_content_text_a3o8b_197",I0e="_Save_Load_content_miniRen_a3o8b_201",M0e="_Save_Load_content_miniRen_bg_a3o8b_208",R0e="_Save_Load_content_miniRen_figure_a3o8b_215",k0e="_Save_Load_content_miniRen_figLeft_a3o8b_223",L0e="_Save_Load_content_miniRen_figRight_a3o8b_228",be={Save_Load_main:o0e,Save_Load_top:a0e,Elements_in:s0e,Save_Load_title:l0e,Save_title_text:u0e,Load_title_text:c0e,Save_Load_top_buttonList:f0e,Save_Load_top_button:h0e,Save_Load_top_button_text:d0e,Save_Load_top_button_on:p0e,Load_top_button_on:m0e,Load_top_button:v0e,Save_Load_content:g0e,Save_Load_content_element:y0e,Elements_in_transform:_0e,Save_Load_content_element_top:x0e,Save_Load_content_element_top_index:b0e,Load_content_elememt_top_index:S0e,Save_Load_content_element_top_date:w0e,Load_content_element_top_date:E0e,Save_Load_content_text:T0e,Save_Load_content_text_padding:C0e,Save_Load_content_speaker:P0e,Load_content_speaker:A0e,Load_content_text:O0e,Save_Load_content_miniRen:I0e,Save_Load_content_miniRen_bg:M0e,Save_Load_content_miniRen_figure:R0e,Save_Load_content_miniRen_figLeft:k0e,Save_Load_content_miniRen_figRight:L0e},F0e=()=>{const{playSePageChange:e,playSeEnter:t,playSeDialogOpen:r}=Rr(),n=me(d=>d.userData),i=me(d=>d.saveData),o=tr(),a=[];for(let d=1;d<=20;d++){let m=be.Save_Load_top_button;d===n.optionData.slPage&&(m=m+" "+be.Save_Load_top_button_on);const g=w.jsx("div",{onClick:()=>{o(fM(d)),tt(),e()},onMouseEnter:t,className:m,children:w.jsx("div",{className:be.Save_Load_top_button_text,children:d})},"Save_element_page"+d);a.push(g)}const s=Hr("common."),l=[],u=(n.optionData.slPage-1)*10+1,c=u+9;G.useEffect(()=>{Gp(u,c)},[u,c]);let f=0;for(let d=u;d<=c;d++){f++;const m=i.saveData[d];let g=w.jsx("div",{});if(m){const v=m.nowStageState.showName===""?"":`${m.nowStageState.showName}`;g=w.jsxs(w.Fragment,{children:[w.jsxs("div",{className:be.Save_Load_content_element_top,children:[w.jsx("div",{className:be.Save_Load_content_element_top_index,children:m.index}),w.jsx("div",{className:be.Save_Load_content_element_top_date,children:m.saveTime})]}),w.jsx("div",{className:be.Save_Load_content_miniRen,children:w.jsx("img",{className:be.Save_Load_content_miniRen_bg,alt:"Save_img_preview",src:m.previewImage})}),w.jsxs("div",{className:be.Save_Load_content_text,children:[w.jsx("div",{className:be.Save_Load_content_speaker,children:v}),w.jsx("div",{className:be.Save_Load_content_text_padding,children:m.nowStageState.showText})]})]})}const p=w.jsx("div",{onClick:()=>{i.saveData[d]?(r(),va({title:h("saving.isOverwrite"),leftText:s("yes"),rightText:s("no"),leftFunc:()=>{m0(d),tt()},rightFunc:()=>{}})):(e(),m0(d))},onMouseEnter:t,className:be.Save_Load_content_element,style:{animationDelay:`${f*30}ms`},children:g},"saveElement_"+d);l.push(p)}const h=Hr("menu.");return w.jsxs("div",{className:be.Save_Load_main,children:[w.jsxs("div",{className:be.Save_Load_top,children:[w.jsx("div",{className:be.Save_Load_title,children:w.jsx("div",{className:be.Save_title_text,children:h("saving.title")})}),w.jsx("div",{className:be.Save_Load_top_buttonList,children:a})]}),w.jsx("div",{className:be.Save_Load_content,id:"Save_content_page_"+n.optionData.slPage,children:l})]})},D0e=()=>{const{playSeClick:e,playSeEnter:t,playSePageChange:r}=Rr(),n=me(h=>h.userData),i=me(h=>h.saveData),o=tr(),a=[];for(let h=1;h<=20;h++){let d=be.Save_Load_top_button+" "+be.Load_top_button;h===n.optionData.slPage&&(d=d+" "+be.Save_Load_top_button_on+" "+be.Load_top_button_on);const m=w.jsx("div",{onClick:()=>{o(fM(h)),tt(),r()},onMouseEnter:t,className:d,children:w.jsx("div",{className:be.Save_Load_top_button_text,children:h})},"Load_element_page"+h);a.push(m)}const s=[],l=(n.optionData.slPage-1)*10+1,u=l+9;G.useEffect(()=>{Gp(l,u)},[l,u]);let c=0;for(let h=l;h<=u;h++){c++;const d=i.saveData[h];let m=w.jsx("div",{});if(d){const p=d.nowStageState.showName===""?"":`${d.nowStageState.showName}`;m=w.jsxs(w.Fragment,{children:[w.jsxs("div",{className:be.Save_Load_content_element_top,children:[w.jsx("div",{className:be.Save_Load_content_element_top_index+" "+be.Load_content_elememt_top_index,children:d.index}),w.jsx("div",{className:be.Save_Load_content_element_top_date+" "+be.Load_content_element_top_date,children:d.saveTime})]}),w.jsx("div",{className:be.Save_Load_content_miniRen,children:w.jsx("img",{className:be.Save_Load_content_miniRen_bg,alt:"Save_img_preview",src:d.previewImage})}),w.jsxs("div",{className:be.Save_Load_content_text,children:[w.jsx("div",{className:be.Save_Load_content_speaker+" "+be.Load_content_speaker,children:p}),w.jsx("div",{className:be.Save_Load_content_text_padding,children:d.nowStageState.showText})]})]})}const g=w.jsx("div",{onClick:()=>{DL(h),e()},onMouseEnter:t,className:be.Save_Load_content_element,style:{animationDelay:`${c*30}ms`},children:m},"loadElement_"+h);s.push(g)}const f=Hr("menu.");return w.jsxs("div",{className:be.Save_Load_main,children:[w.jsxs("div",{className:be.Save_Load_top,children:[w.jsx("div",{className:be.Save_Load_title,children:w.jsx("div",{className:be.Load_title_text,children:f("loadSaving.title")})}),w.jsx("div",{className:be.Save_Load_top_buttonList,children:a})]}),w.jsx("div",{className:be.Save_Load_content,id:"Load_content_page_"+n.optionData.slPage,children:s})]})},N0e="_Options_main_u5orq_2",B0e="_Options_top_u5orq_9",j0e="_Options_title_u5orq_16",U0e="_Option_title_text_u5orq_25",$0e="_Elements_in_u5orq_1",G0e="_Option_title_text_shadow_u5orq_34",z0e="_Option_title_text_ts_u5orq_41",V0e="_Options_main_content_u5orq_48",H0e="_Options_main_content_half_u5orq_55",W0e="_About_title_text_u5orq_65",X0e="_About_text_u5orq_73",q0e="_Options_page_container_u5orq_92",Y0e="_Options_button_list_u5orq_98",K0e="_Options_page_button_u5orq_102",Z0e="_Options_page_button_active_u5orq_114",Pr={Options_main:N0e,Options_top:B0e,Options_title:j0e,Option_title_text:U0e,Elements_in:$0e,Option_title_text_shadow:G0e,Option_title_text_ts:z0e,Options_main_content:V0e,Options_main_content_half:H0e,About_title_text:W0e,About_text:X0e,Options_page_container:q0e,Options_button_list:Y0e,Options_page_button:K0e,Options_page_button_active:Z0e},J0e="_NormalOption_ogzuv_1",Q0e="_Elements_in_ogzuv_1",exe="_NormalOption_title_ogzuv_10",txe="_NormalOption_title_bef_ogzuv_19",rxe="_NormalOption_title_sd_ogzuv_29",nxe="_NormalOption_buttonList_ogzuv_39",Qg={NormalOption:J0e,Elements_in:Q0e,NormalOption_title:exe,NormalOption_title_bef:txe,NormalOption_title_sd:rxe,NormalOption_buttonList:nxe},vr=e=>w.jsxs("div",{className:Qg.NormalOption,style:{width:e.full?"100%":"auto"},children:[w.jsx("div",{className:Qg.NormalOption_title,children:e.title}),w.jsx("div",{className:Qg.NormalOption_buttonList,style:{width:e.full?"100%":"auto",overflow:e.full?"hidden":void 0},children:e.children})]}),ixe="_NormalButton_1qk3b_1",oxe="_NormalButtonChecked_1qk3b_18",ey={NormalButton:ixe,NormalButtonChecked:oxe},wa=e=>{const t=e.textList.length,r=[],{playSeEnter:n,playSeSwitch:i}=Rr();for(let o=0;o<t;o++)if(o===e.currentChecked){const a=w.jsx("div",{className:ey.NormalButton+" "+ey.NormalButtonChecked,onClick:()=>{i(),e.functionList[o]()},onMouseEnter:n,children:e.textList[o]},e.textList[o]+o+e);r.push(a)}else{const a=w.jsx("div",{className:ey.NormalButton,onClick:()=>{i(),e.functionList[o]()},onMouseEnter:n,children:e.textList[o]},e.textList[o]+o);r.push(a)}return w.jsx(w.Fragment,{children:r})};function axe(e){return $a[e]}function UD(){const{i18n:e}=wm(),t=Pl(n=>n.userData),r=tr();return(n,i=!0)=>{var s;const o=n??((s=t.current)==null?void 0:s.optionData.language)??$a.zhCn,a=axe(o);e.changeLanguage(a),r(Rt({key:"language",value:o})),te.info(": "+a),window==null||window.localStorage.setItem("lang",o.toString()),i&&tt()}}const sxe="_backButton_qbk37_1",lxe="_about_qbk37_16",uxe="_icon_qbk37_20",cxe="_title_qbk37_24",fxe="_text_qbk37_34",hxe="_contributor_qbk37_43",an={backButton:sxe,about:lxe,icon:uxe,title:cxe,text:fxe,contributor:hxe};function dxe(e){const t=Hr("menu.options.pages.system.options.about.");return w.jsxs("div",{className:an.about,children:[w.jsx("div",{className:an.backButton,onClick:e.onClose,children:w.jsx(F_e,{className:an.icon,theme:"outline",size:"35",strokeWidth:3,fill:"#333"})}),w.jsx("div",{className:an.title,children:t("subTitle")}),w.jsx("div",{className:an.title,children:t("version")}),w.jsx("div",{className:an.text,children:UL.version}),w.jsx("div",{className:an.title,children:t("source")}),w.jsx("div",{className:an.text,children:w.jsx("a",{target:"_blank",href:"https://github.com/OpenWebGAL/WebGAL",children:"https://github.com/OpenWebGAL/WebGAL"})}),w.jsx("div",{className:an.title,children:t("contributors")}),w.jsx("div",{className:an.text,children:w.jsx("a",{target:"_blank",href:"https://github.com/OpenWebGAL/WebGAL/graphs/contributors",children:"https://github.com/OpenWebGAL/WebGAL/graphs/contributors"})}),w.jsx("div",{className:an.title,children:t("website")}),w.jsx("div",{className:an.text,children:w.jsx("a",{target:"_blank",href:"https://openwebgal.com/",children:"https://openwebgal.com/"})})]})}const oo=e=>{const{playSeEnter:t}=Rr();return G.useEffect(()=>{setTimeout(()=>{const r=document.getElementById(e.uniqueID);r!==null&&r.setAttribute("value",e.initValue.toString())},1)},[]),w.jsx("div",{className:"Option_WebGAL_slider",children:w.jsx("input",{id:e.uniqueID,type:"range",onChange:e.onChange,onFocus:t,onMouseEnter:t})})};function pxe(){const e=me(h=>h.userData),t=me(h=>h.saveData),r=tr(),n=UD(),i=Hr("menu.options.pages.system.options."),{playSeDialogOpen:o}=Rr();function a(){const d=JSON.stringify({userData:e,saves:t});if(d!==null){const m=new Blob([d],{type:"application/json"}),g=URL.createObjectURL(m),p=document.createElement("a");p.href=g,p.download="saves.json",p.click(),p.remove()}}function s(h){const d=h.target.files[0],m=new FileReader;m.onload=g=>{const p=g.target.result;try{const v=JSON.parse(p);o(),va({title:i("gameSave.dialogs.import.title"),leftText:i("$common.yes"),rightText:i("$common.no"),leftFunc:async()=>{await ja.setItem(C.gameKey,v.userData).then(()=>{te.info(i("gameSave.dialogs.import.tip"))}),Fc(),N.dispatch(Di.replaceSaveGame(v.saves.saveData)),N.dispatch(Di.setFastSave(v.saves.quickSaveData)),Oh(),Ah(0,200)},rightFunc:()=>{}})}catch(v){te.error(i("gameSave.dialogs.import.error"),v)}},m.readAsText(d,"UTF-8")}function l(){const h=document.createElement("input");h.type="file",h.onchange=s,h.click()}const[u,c]=G.useState(!1);function f(){c(!u)}return w.jsxs("div",{className:Pr.Options_main_content_half,children:[u&&w.jsx(dxe,{onClose:f}),!u&&w.jsxs(w.Fragment,{children:[w.jsx(vr,{title:i("autoSpeed.title"),children:w.jsx(oo,{initValue:e.optionData.autoSpeed,uniqueID:i("autoSpeed.title"),onChange:h=>{const d=h.target.value;r(Rt({key:"autoSpeed",value:Number(d)})),tt()}})},"option1"),w.jsx(vr,{title:i("language.title"),children:w.jsx(wa,{currentChecked:e.optionData.language,textList:Object.values(pd),functionList:Object.keys(pd).map(h=>()=>n($a[h]))})},"option7"),w.jsx(vr,{title:i("resetData.title"),children:w.jsx(wa,{textList:i("resetData.options.clearGameSave","resetData.options.resetSettings","resetData.options.clearAll"),functionList:[()=>{o(),va({title:i("resetData.dialogs.clearGameSave"),leftText:i("$common.yes"),rightText:i("$common.no"),leftFunc:()=>{r(Di.resetSaves()),Ah(0,200),Oh()},rightFunc:()=>{}})},()=>{o(),va({title:i("resetData.dialogs.resetSettings"),leftText:i("$common.yes"),rightText:i("$common.no"),leftFunc:()=>{r(nH()),Bd()},rightFunc:()=>{}})},()=>{o(),va({title:i("resetData.dialogs.clearAll"),leftText:i("$common.yes"),rightText:i("$common.no"),leftFunc:()=>{r(iH()),Bd(),r(Di.resetSaves()),Ah(0,200),Oh()},rightFunc:()=>{}})}],currentChecked:3})},"option2"),w.jsx(vr,{title:i("gameSave.title"),children:w.jsx(wa,{textList:i("gameSave.options.export","gameSave.options.import"),functionList:[a,l],currentChecked:2})},"option3"),w.jsx("div",{className:Pr.About_title_text,onClick:f,children:w.jsx("span",{className:Pr.About_text,children:i("about.title")})})]})]})}const mxe="_textPreviewMain_nolr3_1",vxe="_textbox_nolr3_8",XA={textPreviewMain:mxe,textbox:vxe},gxe=e=>{const t=Hr("menu.options.pages.display.options."),r=me(x=>x.userData),i=me(x=>x.stage).bgName,o=ES(r.optionData.textSpeed),a=TS(r.optionData.textSpeed),s=r.optionData.textboxOpacity,l=ax(r.optionData.textSize)+"%",u=UF(),c=navigator.userAgent,f=/firefox/i.test(c),h=/^((?!chrome|android).)*safari/i.test(c),d=t("textPreview.text"),m=Ra(d,3),g=t("textPreview.title"),p=Ra(g,3),v=g!=="",y=$F,_={textArray:m,isText:!0,textDelay:o,isHasName:v,showName:p,currentConcatDialogPrev:"",fontSize:l,currentDialogKey:"",isSafari:h,isFirefox:f,miniAvatar:"",textDuration:a,font:u,textSizeState:l,lineLimit:3,isUseStroke:!0,textboxOpacity:s};return w.jsx("div",{className:XA.textPreviewMain,style:{background:i?`bottom / cover no-repeat url(${i})`:"rgba(0, 0, 0, 0.1)"},children:w.jsx("div",{className:XA.textbox,children:w.jsx(y,{..._})},`previewTextbox-${o}`)})};function yxe(){const e=me(n=>n.userData),t=tr(),r=Hr("menu.options.pages.display.options.");return w.jsxs("div",{className:Pr.Options_main_content_half,children:[w.jsx(vr,{title:r("fullScreen.title"),children:w.jsx(wa,{textList:r("fullScreen.options.on","fullScreen.options.off"),functionList:[()=>{t(Rt({key:"fullScreen",value:ci.on})),tt()},()=>{t(Rt({key:"fullScreen",value:ci.off})),tt()}],currentChecked:e.optionData.fullScreen})},"fullScreen"),w.jsx(vr,{title:r("textSize.title"),children:w.jsx(wa,{textList:r("textSize.options.small","textSize.options.medium","textSize.options.large"),functionList:[()=>{t(Rt({key:"textSize",value:yn.small})),tt()},()=>{t(Rt({key:"textSize",value:yn.medium})),tt()},()=>{t(Rt({key:"textSize",value:yn.large})),tt()}],currentChecked:e.optionData.textSize})},"textSize"),w.jsx(vr,{title:r("textFont.title"),children:w.jsx(wa,{textList:r("textFont.options.siYuanSimSun","textFont.options.SimHei","textFont.options.lxgw"),functionList:[()=>{t(Rt({key:"textboxFont",value:ui.song})),tt()},()=>{t(Rt({key:"textboxFont",value:ui.hei})),tt()},()=>{t(Rt({key:"textboxFont",value:ui.lxgw})),tt()}],currentChecked:e.optionData.textboxFont})},"textFont"),w.jsx(vr,{title:r("textSpeed.title"),children:w.jsx(oo,{initValue:e.optionData.textSpeed,uniqueID:r("textSpeed.title"),onChange:n=>{const i=n.target.value;t(Rt({key:"textSpeed",value:Number(i)})),tt()}})},"textSpeed"),w.jsx(vr,{title:r("textboxOpacity.title"),children:w.jsx(oo,{initValue:e.optionData.textboxOpacity,uniqueID:r("textboxOpacity.title"),onChange:n=>{const i=n.target.value;t(Rt({key:"textboxOpacity",value:Number(i)})),tt()}})},"textboxOpacity"),w.jsx(vr,{full:!0,title:r("textPreview.title"),children:w.jsx(gxe,{})},"textPreview")]})}function _xe(){const e=me(n=>n.userData),t=tr(),r=Hr("menu.options.pages.sound.options.");return w.jsxs("div",{className:Pr.Options_main_content_half,children:[w.jsx(vr,{title:r("volumeMain.title"),children:w.jsx(oo,{initValue:e.optionData.volumeMain,uniqueID:r("volumeMain.title"),onChange:n=>{const i=n.target.value;t(Rt({key:"volumeMain",value:Number(i)})),tt()}})},"option4"),w.jsx(vr,{title:r("vocalVolume.title"),children:w.jsx(oo,{initValue:e.optionData.vocalVolume,uniqueID:r("vocalVolume.title"),onChange:n=>{const i=n.target.value;t(Rt({key:"vocalVolume",value:Number(i)})),tt()}})},"option5"),w.jsx(vr,{title:r("bgmVolume.title"),children:w.jsx(oo,{initValue:e.optionData.bgmVolume,uniqueID:r("bgmVolume.title"),onChange:n=>{const i=n.target.value;t(Rt({key:"bgmVolume",value:Number(i)})),tt()}})},"option6"),w.jsx(vr,{title:r("seVolume.title"),children:w.jsx(oo,{initValue:e.optionData.seVolume,uniqueID:r("seVolume.title"),onChange:n=>{const i=n.target.value;t(Rt({key:"seVolume",value:Number(i)})),tt()}})},"option7"),w.jsx(vr,{title:r("uiSeVolume.title"),children:w.jsx(oo,{initValue:e.optionData.uiSeVolume,uniqueID:r("uiSeVolume.title"),onChange:n=>{const i=n.target.value;t(Rt({key:"uiSeVolume",value:Number(i)})),tt()}})},"option8"),w.jsx(vr,{title:r("voiceOption.title"),children:w.jsx(wa,{textList:r("voiceStop.title","voiceContinue.title"),functionList:[()=>{t(Rt({key:"voiceInterruption",value:uc.yes})),tt()},()=>{t(Rt({key:"voiceInterruption",value:uc.no})),tt()}],currentChecked:e.optionData.voiceInterruption})},"option9")]})}const xxe=()=>{const{playSeEnter:e,playSeSwitch:t}=Rr(),r=Nn(0);G.useEffect(Fc,[]);function n(o){return o===r.value?Pr.Options_page_button+" "+Pr.Options_page_button_active:Pr.Options_page_button}const i=Hr("menu.options.");return w.jsxs("div",{className:Pr.Options_main,children:[w.jsx("div",{className:Pr.Options_top,children:w.jsx("div",{className:Pr.Options_title,children:w.jsx("div",{className:Pr.Option_title_text,children:i("title")})})}),w.jsxs("div",{className:Pr.Options_page_container,children:[w.jsxs("div",{className:Pr.Options_button_list,children:[w.jsx("div",{onClick:()=>{r.set(0),t()},className:n(0),onMouseEnter:e,children:i("pages.system.title")}),w.jsx("div",{onClick:()=>{r.set(1),t()},className:n(1),onMouseEnter:e,children:i("pages.display.title")}),w.jsx("div",{onClick:()=>{r.set(2),t()},className:n(2),onMouseEnter:e,children:i("pages.sound.title")})]}),w.jsxs("div",{className:Pr.Options_main_content,children:[r.value===1&&w.jsx(yxe,{}),r.value===0&&w.jsx(pxe,{}),r.value===2&&w.jsx(_xe,{})]})]})]})},bxe=()=>{const e=me(r=>r.GUI);let t;switch(e.currentMenuTag){case Ze.Save:t=w.jsx(F0e,{});break;case Ze.Load:t=w.jsx(D0e,{});break;case Ze.Option:t=w.jsx(xxe,{});break}return w.jsx(w.Fragment,{children:e.showMenuPanel&&w.jsxs("div",{className:zA.Menu_main,children:[w.jsx("div",{className:zA.Menu_TagContent,children:t}),w.jsx(i0e,{})]})})},Sxe="_MainStage_main_9enex_1",wxe="_MainStage_main_container_9enex_10",Exe="_MainStage_bgContainer_9enex_17",Txe="_MainStage_showBgSoftly_9enex_1",Cxe="_MainStage_bgContainer_Settled_9enex_27",Pxe="_MainStage_oldBgContainer_9enex_37",Axe="_MainStage_oldBgFadeout_9enex_1",Oxe="_MainStage_oldBgContainer_Settled_9enex_47",Ixe="_pixiContainer_9enex_72",Mxe="_chooseContainer_9enex_77",ty={MainStage_main:Sxe,MainStage_main_container:wxe,MainStage_bgContainer:Exe,MainStage_showBgSoftly:Txe,MainStage_bgContainer_Settled:Cxe,MainStage_oldBgContainer:Pxe,MainStage_oldBgFadeout:Axe,MainStage_oldBgContainer_Settled:Oxe,pixiContainer:Ixe,chooseContainer:Mxe},Rxe=()=>{var g;const e=me(p=>p.stage),t=me(p=>p.GUI.titleBgm),r=me(p=>p.GUI.showTitle),n=me(p=>p.userData),i=n.optionData.volumeMain,o=i*.01*n.optionData.vocalVolume*.01*e.vocalVolume*.01,a=i*.01*n.optionData.bgmVolume*.01*e.bgm.volume*.01,s=e.bgm.enter,l=e.uiSe,u=i*.01*(((g=n.optionData)==null?void 0:g.seVolume)??100)*.01,c=i*.01*(n.optionData.uiSeVolume??50)*.01,f=me(p=>p.GUI.isEnterGame),[h,d]=G.useState(setTimeout(()=>{},0)),m=(p,v,y)=>{y>=0?p.volume=0:p.volume=v;const _=10,x=v/y*_,b=()=>{const S=setTimeout(()=>{p.volume+x>=v?p.volume=v:p.volume+x<=0?(p.volume=0,N.dispatch(Ce({key:"bgm",value:{src:"",enter:0,volume:100}}))):(p.volume+=x,b())},_);d(S)};b()};return G.useEffect(()=>{clearTimeout(h);const p=document.getElementById("currentBgm");p&&(s===0?p.volume=a:m(p,a,s))},[r,t,e.bgm.src,a,s]),G.useEffect(()=>{te.debug(`${a}`)},[a]),G.useEffect(()=>{te.debug(`: ${s}`)},[s]),G.useEffect(()=>{te.debug(`${o}`);const p=document.getElementById("currentVocal");p&&(p.volume=o.toString())},[o]),G.useEffect(()=>{if(l==="")return;const p=document.createElement("audio");p.src=l,p.loop=!1,isNaN(c)?(te.error("UI SE Vol is NaN"),p.volume=isNaN(u)?i/100:u/100):p.volume=c,p.play(),p.addEventListener("ended",()=>{p.remove()}),N.dispatch(Ce({key:"uiSe",value:""}))},[l]),G.useEffect(()=>{te.debug(`: ${u}`)},[u]),G.useEffect(()=>{te.debug(`: ${c}`)},[c]),w.jsxs("div",{children:[w.jsx("audio",{id:"currentBgm",src:r?t:e.bgm.src,loop:!0,autoPlay:f},r.toString()+t),w.jsx("audio",{id:"currentVocal",src:e.playVocal})]})},kxe=()=>{const e=me(i=>i.stage);let t="100%",r="100%",n="0";return e.enableFilm!==""&&(r="76%",n="12%"),w.jsx("div",{className:Yn.FullScreenPerform_main,style:{width:t,height:r,top:n},children:w.jsx("div",{id:"videoContainer"})})},Lxe="_TextBox_EventHandler_449dq_2",Fxe="_TextBox_main_449dq_10",Dxe="_showSoftly_449dq_1",Nxe="_TextBox_textElement_449dq_38",Bxe="_TextBox_textElement_start_449dq_43",jxe="_TextDelayShow_449dq_1",Uxe="_TextBox_textElement_Settled_449dq_48",$xe="_TextBox_showName_449dq_52",Gxe="_miniAvatarContainer_449dq_68",zxe="_miniAvatarImg_449dq_76",ry={TextBox_EventHandler:Lxe,TextBox_main:Fxe,showSoftly:Dxe,TextBox_textElement:Nxe,TextBox_textElement_start:Bxe,TextDelayShow:jxe,TextBox_textElement_Settled:Uxe,TextBox_showName:$xe,miniAvatarContainer:Gxe,miniAvatarImg:zxe},Vxe=()=>{const e=me(a=>a.stage),t=me(a=>a.userData);G.useEffect(()=>{});const r=aH.textInitialDelay-20*t.optionData.textSpeed,n=t.optionData.textSize*50+200+"%",o=e.showText.split("").map((a,s)=>{let l=s*r,u=e.currentConcatDialogPrev.length;return e.currentConcatDialogPrev!==""&&s>=u&&(l=l-u*r),s<u?w.jsx("span",{id:`${l}`,className:ry.TextBox_textElement_Settled,style:{animationDelay:`${l}ms`},children:a},e.currentDialogKey+s):w.jsx("span",{id:`${l}`,className:ry.TextBox_textElement_start,style:{animationDelay:`${l}ms`},children:a},e.currentDialogKey+s)});return w.jsx("div",{id:"textBoxMain",className:ry.TextBox_main,children:w.jsx("div",{style:{fontSize:n},children:o})})};function Hxe(e){const t=e.bgName;G.useEffect(()=>{var n,i;const r="bg-main";if(t!==""){const o=(n=C.gameplay.pixiStage)==null?void 0:n.getStageObjByKey(r);o&&o.sourceUrl!==t&&qA(o),Wxe(void 0,r,t),rf(t),te.debug("");const{duration:a,animation:s}=io("bg-main","enter",!0);C.gameplay.pixiStage.registerPresetAnimation(s,"bg-main-softin",r,e.effects),setTimeout(()=>C.gameplay.pixiStage.removeAnimationWithSetEffects("bg-main-softin"),a)}else{const o=(i=C.gameplay.pixiStage)==null?void 0:i.getStageObjByKey(r);o&&qA(o)}},[t])}function qA(e){var a,s;(a=C.gameplay.pixiStage)==null||a.removeAnimationWithSetEffects("bg-main-softin");const t=e.key;e.key="bg-main-off"+String(new Date().getTime());const r=e.key,n=e.key+"-softoff";(s=C.gameplay.pixiStage)==null||s.removeStageObjectByKey(t);const{duration:i,animation:o}=io("bg-main-off","exit",!0,r);C.gameplay.pixiStage.registerAnimation(o,n,r),setTimeout(()=>{var l,u;(l=C.gameplay.pixiStage)==null||l.removeAnimation(n),(u=C.gameplay.pixiStage)==null||u.removeStageObjectByKey(r)},i)}function Wxe(e,...t){var n,i,o;const r=t[1];return r.endsWith(".mp4")?(n=C.gameplay.pixiStage)==null?void 0:n.addVideoBg(...t):r.endsWith(".skel")?(i=C.gameplay.pixiStage)==null?void 0:i.addSpineBg(...t):(o=C.gameplay.pixiStage)==null?void 0:o.addBg(...t)}function Xxe(e){const{figNameLeft:t,figName:r,figNameRight:n,freeFigure:i,live2dMotion:o,live2dExpression:a}=e;G.useEffect(()=>{var s;for(const l of o)(s=C.gameplay.pixiStage)==null||s.changeModelMotionByKey(l.target,l.motion)},[o]),G.useEffect(()=>{var s;for(const l of a)(s=C.gameplay.pixiStage)==null||s.changeModelExpressionByKey(l.target,l.expression)},[a]),G.useEffect(()=>{var u,c;const s="fig-center",l="fig-center-softin";if(r!==""){const f=(u=C.gameplay.pixiStage)==null?void 0:u.getStageObjByKey(s);f&&f.sourceUrl!==r&&Ci(f,l,e.effects),uu(void 0,s,r,"center"),te.debug("");const{duration:h,animation:d}=io(s,"enter");C.gameplay.pixiStage.registerPresetAnimation(d,l,s,e.effects),setTimeout(()=>C.gameplay.pixiStage.removeAnimationWithSetEffects(l),h)}else{te.debug("");const f=(c=C.gameplay.pixiStage)==null?void 0:c.getStageObjByKey(s);f&&f.sourceUrl!==r&&Ci(f,l,e.effects)}},[r]),G.useEffect(()=>{var u,c;const s="fig-left",l="fig-left-softin";if(t!==""){const f=(u=C.gameplay.pixiStage)==null?void 0:u.getStageObjByKey(s);f&&f.sourceUrl!==t&&Ci(f,l,e.effects),uu(void 0,s,t,"left"),te.debug("");const{duration:h,animation:d}=io(s,"enter");C.gameplay.pixiStage.registerPresetAnimation(d,l,s,e.effects),setTimeout(()=>C.gameplay.pixiStage.removeAnimationWithSetEffects(l),h)}else{te.debug("");const f=(c=C.gameplay.pixiStage)==null?void 0:c.getStageObjByKey(s);f&&f.sourceUrl!==t&&Ci(f,l,e.effects)}},[t]),G.useEffect(()=>{var u,c;const s="fig-right",l="fig-right-softin";if(n!==""){const f=(u=C.gameplay.pixiStage)==null?void 0:u.getStageObjByKey(s);f&&f.sourceUrl!==n&&Ci(f,l,e.effects),uu(void 0,s,n,"right"),te.debug("");const{duration:h,animation:d}=io(s,"enter");C.gameplay.pixiStage.registerPresetAnimation(d,l,s,e.effects),setTimeout(()=>C.gameplay.pixiStage.removeAnimationWithSetEffects(l),h)}else{const f=(c=C.gameplay.pixiStage)==null?void 0:c.getStageObjByKey(s);f&&f.sourceUrl!==n&&Ci(f,l,e.effects)}},[n]),G.useEffect(()=>{var l,u,c;for(const f of i){const h=`${f.key}`,d=`${f.key}-softin`;if(f.name!==""){const m=(l=C.gameplay.pixiStage)==null?void 0:l.getStageObjByKey(h);if(m){if(m.sourceUrl!==f.name){Ci(m,d,e.effects),uu(void 0,h,f.name,f.basePosition),te.debug(`${f.key}`);const{duration:g,animation:p}=io(h,"enter");C.gameplay.pixiStage.registerPresetAnimation(p,d,h,e.effects),setTimeout(()=>C.gameplay.pixiStage.removeAnimationWithSetEffects(d),g)}}else{uu(void 0,h,f.name,f.basePosition),te.debug(`${f.key}`);const{duration:g,animation:p}=io(h,"enter");C.gameplay.pixiStage.registerPresetAnimation(p,d,h,e.effects),setTimeout(()=>C.gameplay.pixiStage.removeAnimationWithSetEffects(d),g)}}else{const m=(u=C.gameplay.pixiStage)==null?void 0:u.getStageObjByKey(h);m&&m.sourceUrl!==f.name&&Ci(m,d,e.effects)}}const s=(c=C.gameplay.pixiStage)==null?void 0:c.getFigureObjects();if(s){for(const f of s)if(!(f.key==="fig-left"||f.key==="fig-center"||f.key==="fig-right"||f.key.endsWith("-off"))){const h=f.key;if(i.findIndex(m=>m.key===h)<0){const m=`${f.key}-softin`;Ci(f,m,e.effects)}}}},[i])}function Ci(e,t,r){var u,c,f;if((u=C.gameplay.pixiStage)==null||u.removeAnimationWithSetEffects(t),C.gameplay.isFast){te.debug(""),(c=C.gameplay.pixiStage)==null||c.removeStageObjectByKey(e.key);return}const n=e.key,i=n+"-off";e.key=n+String(new Date().getTime())+"-off";const o=e.key;(f=C.gameplay.pixiStage)==null||f.removeStageObjectByKey(n);const a=o+"-softoff",{duration:s,animation:l}=io(i,"exit",!1,o);C.gameplay.pixiStage.registerPresetAnimation(l,a,o,r),setTimeout(()=>{var h,d;(h=C.gameplay.pixiStage)==null||h.removeAnimation(a),(d=C.gameplay.pixiStage)==null||d.removeStageObjectByKey(o)},s)}function uu(e,...t){var a,s;const r=t[1],n=window.location.origin,o=new URL(r,n).searchParams.get("type");return r.endsWith(".json")?qxe(...t):r.endsWith(".skel")||o==="spine"?(a=C.gameplay.pixiStage)==null?void 0:a.addSpineFigure(...t):(s=C.gameplay.pixiStage)==null?void 0:s.addFigure(...t)}function qxe(...e){var t;return(t=C.gameplay.pixiStage)==null?void 0:t.addLive2dFigure(...e)}function Yxe(e){const t=e.effects;setTimeout(()=>{Kxe(t)},10)}function Kxe(e){var r,n,i,o;const t=((r=C.gameplay.pixiStage)==null?void 0:r.getAllStageObj())??[];for(const a of t){const s=a.key,l=e.find(c=>c.target===s);if(!(((n=C.gameplay.pixiStage)==null?void 0:n.getAllLockedObject())??[]).includes(s))if(l){const c=(i=C.gameplay.pixiStage)==null?void 0:i.getStageObjByKey(s);if(c){const f=c.pixiContainer;fi.assignTransform(f,YA(l.transform))}}else{const c=(o=C.gameplay.pixiStage)==null?void 0:o.getStageObjByKey(s);if(c){const f=c.pixiContainer;fi.assignTransform(f,YA(Wb))}}}}function YA(e){if(!e)return{};const{position:t,alpha:r,...n}=e;return{...n,x:t.x,y:t.y,alphaFilterVal:r}}function Zxe(){const e=me(t=>t.stage);return Hxe(e),Xxe(e),Yxe(e),w.jsx("div",{style:{display:"none"}})}const Jxe="_introContainer_119k8_1",Qxe={introContainer:Jxe};function ebe(){return w.jsx("div",{className:Qxe.introContainer,id:"introContainer"})}function KA(e){const t=document.getElementById("textBoxMain");if(!t)return!1;let r=t.getBoundingClientRect();return e.clientX>r.left&&e.clientX<r.right&&e.clientY>r.top&&e.clientY<r.bottom}function tbe(e,t,r){!t.controlsVisibility&&KA(e)&&r(Re({component:"controlsVisibility",visibility:!0})),t.controlsVisibility&&!KA(e)&&r(Re({component:"controlsVisibility",visibility:!1}))}function rbe(e,t){var i;return!!(!t.showTextBox||e.isDisableTextbox||!(e.showText!==""||e.showName!=="")||((i=document.getElementById("introContainer"))==null?void 0:i.style.display)==="block")}let ny=null;function nbe(e,t,r,n){rbe(t,r)?(ny&&clearTimeout(ny),n(Re({component:"controlsVisibility",visibility:!0})),ny=setTimeout(()=>{n(Re({component:"controlsVisibility",visibility:!1}))},1e3)):tbe(e,r,n)}const ibe=()=>{const e=me(n=>n.stage),t=me(n=>n.GUI),r=tr();return Xye(),w.jsxs("div",{className:ty.MainStage_main,children:[w.jsx(kxe,{}),w.jsx(Zxe,{}),w.jsx("div",{id:"pixiContianer",className:ty.pixiContainer,style:{zIndex:Q1?"-5":void 0}}),w.jsx("div",{id:"chooseContainer",className:ty.chooseContainer}),t.showTextBox&&e.enableFilm===""&&!e.isDisableTextbox&&w.jsx(mve,{}),t.showTextBox&&e.enableFilm!==""&&w.jsx(Vxe,{}),w.jsx(Rxe,{}),w.jsx("div",{onClick:()=>{if(!t.showTextBox){r(Re({component:"showTextBox",visibility:!0}));return}NS(),cr()},onDoubleClick:()=>{C.events.fullscreenDbClick.emit()},id:"FullScreenClick",style:{width:"100%",height:"100%",position:"absolute",zIndex:"12",top:"0"},onMouseMove:n=>!t.showControls&&nbe(n,e,t,r)}),w.jsx(ebe,{})]})},obe=()=>{const e=Hr("gaming."),t=2.5,{i18n:r}=wm(),{playSeEnter:n,playSeClick:i,playSeDialogOpen:o}=Rr(),s=r.language==="fr";let l=42,u="150%";s&&(u="125%",l=40);const c=me(v=>v.GUI),f=me(v=>v.stage),h=tr(),d=(v,y)=>{h(Re({component:v,visibility:y}))},m=v=>{h(Sa(v))},g=me(v=>v.saveData.saveData);let p=w.jsx("div",{style:{height:"100%",width:"100%",display:"flex",justifyContent:"center",alignItems:"center"},children:w.jsx("div",{style:{fontSize:"125%"},children:e("noSaving")})});if(g[0]){const v=g[0];p=w.jsxs("div",{className:he.slPreviewMain,children:[w.jsx("div",{className:he.imgContainer,children:w.jsx("img",{style:{height:"100%"},alt:"q-save-preview image",src:v.previewImage})}),w.jsxs("div",{className:he.textContainer,children:[w.jsx("div",{children:v.nowStageState.showName}),w.jsx("div",{style:{fontSize:"75%",color:"rgb(55,60,56)"},children:v.nowStageState.showText})]})]})}return w.jsx(w.Fragment,{children:c.showTextBox&&f.enableFilm===""&&w.jsxs("div",{className:he.main,style:{visibility:c.controlsVisibility?"visible":"hidden"},children:[c.showTextBox&&w.jsxs("span",{className:he.singleButton,style:{fontSize:u},onClick:()=>{d("showTextBox",!1),i()},onMouseEnter:n,children:[w.jsx(j_e,{className:he.button,theme:"outline",size:l,fill:"#f5f5f7",strokeWidth:t}),w.jsx("span",{className:he.button_text,children:e("buttons.hide")})]}),!c.showTextBox&&w.jsxs("span",{className:he.singleButton,style:{fontSize:u},onClick:()=>{d("showTextBox",!0),i()},onMouseEnter:n,children:[w.jsx(U_e,{className:he.button,theme:"outline",size:l,fill:"#f5f5f7",strokeWidth:t}),w.jsx("span",{className:he.button_text,children:e("buttons.show")})]}),w.jsxs("span",{className:he.singleButton,style:{fontSize:u},onClick:()=>{d("showBacklog",!0),d("showTextBox",!1),i()},onMouseEnter:n,children:[w.jsx(A_e,{className:he.button,theme:"outline",size:l,fill:"#f5f5f7",strokeWidth:t}),w.jsx("span",{className:he.button_text,children:e("buttons.backlog")})]}),w.jsxs("span",{className:he.singleButton,style:{fontSize:u},onClick:()=>{let v=document.getElementById("currentVocal");v!==null&&(v.currentTime=0,v.pause(),v==null||v.play()),i()},onMouseEnter:n,children:[w.jsx($_e,{className:he.button,theme:"outline",size:l,fill:"#f5f5f7",strokeWidth:t}),w.jsx("span",{className:he.button_text,children:e("buttons.replay")})]}),w.jsxs("span",{id:"Button_ControlPanel_auto",className:he.singleButton,style:{fontSize:u},onClick:()=>{CD(),i()},onMouseEnter:n,children:[w.jsx(ND,{className:he.button,theme:"outline",size:l,fill:"#f5f5f7",strokeWidth:t}),w.jsx("span",{className:he.button_text,children:e("buttons.auto")})]}),w.jsxs("span",{id:"Button_ControlPanel_fast",className:he.singleButton,style:{fontSize:u},onClick:()=>{ID(),i()},onMouseEnter:n,children:[w.jsx(I_e,{className:he.button,theme:"outline",size:l,fill:"#f5f5f7",strokeWidth:t}),w.jsx("span",{className:he.button_text,children:e("buttons.forward")})]}),w.jsxs("span",{className:he.singleButton+" "+he.fastsave,style:{fontSize:u},onClick:()=>{m0(0),i()},onMouseEnter:n,children:[w.jsx(O_e,{className:he.button,theme:"outline",size:l,fill:"#f5f5f7",strokeWidth:t}),w.jsx("span",{className:he.button_text,children:e("buttons.quicklySave")}),w.jsx("div",{className:he.fastSlPreview+" "+he.fastSPreview,children:p})]}),w.jsxs("span",{className:he.singleButton+" "+he.fastload,style:{fontSize:u},onClick:()=>{DL(0),i()},onMouseEnter:n,children:[w.jsx(M_e,{className:he.button,theme:"outline",size:l,fill:"#f5f5f7",strokeWidth:t}),w.jsx("span",{className:he.button_text,children:e("buttons.quicklyLoad")}),w.jsx("div",{className:he.fastSlPreview+" "+he.fastLPreview,children:p})]}),w.jsxs("span",{className:he.singleButton,style:{fontSize:u},onClick:()=>{m(Ze.Save),d("showMenuPanel",!0),i()},onMouseEnter:n,children:[w.jsx(BD,{className:he.button,theme:"outline",size:l,fill:"#f5f5f7",strokeWidth:t}),w.jsx("span",{className:he.button_text,children:e("buttons.save")})]}),w.jsxs("span",{className:he.singleButton,style:{fontSize:u},onClick:()=>{m(Ze.Load),d("showMenuPanel",!0),i()},onMouseEnter:n,children:[w.jsx(FD,{className:he.button,theme:"outline",size:l,fill:"#f5f5f7",strokeWidth:t}),w.jsx("span",{className:he.button_text,children:e("buttons.load")})]}),w.jsxs("span",{className:he.singleButton,style:{fontSize:u},onClick:()=>{m(Ze.Option),d("showMenuPanel",!0),i()},onMouseEnter:n,children:[w.jsx(jD,{className:he.button,theme:"outline",size:l,fill:"#f5f5f7",strokeWidth:t}),w.jsx("span",{className:he.button_text,children:e("buttons.options")})]}),w.jsxs("span",{className:he.singleButton,style:{fontSize:u},onClick:()=>{o(),va({title:e("buttons.titleTips"),leftText:e("$common.yes"),rightText:e("$common.no"),leftFunc:()=>{BS()},rightFunc:()=>{}})},onMouseEnter:n,children:[w.jsx(DD,{className:he.button,theme:"outline",size:l,fill:"#f5f5f7",strokeWidth:t}),w.jsx("span",{className:he.button_text,children:e("buttons.title")})]}),w.jsx("span",{className:he.singleButton,style:{fontSize:u},onClick:()=>{n0e(),i()},onMouseEnter:n,children:c.showControls?w.jsx(D_e,{className:he.button,theme:"outline",size:l,fill:"#f5f5f7",strokeWidth:t}):w.jsx(V_e,{className:he.button,theme:"outline",size:l,fill:"#f5f5f7",strokeWidth:t})})]})})},abe=()=>{var h,d;const e=Hr("gaming."),{playSeEnter:t,playSeClick:r}=Rr(),n=me(m=>m.GUI),i=tr(),o="0.8em",[a,s]=G.useState(!1),[l,u]=G.useState(!1);let c=G.useRef();const f=G.useMemo(()=>{let m=[];for(let g=0;g<C.backlogManager.getBacklog().length;g++){const p=C.backlogManager.getBacklog()[g],y=Ra(p.currentStageState.showText,3,!0,!1).map(O=>O.map(D=>D.reactNode)),x=ZA(y).map((O,D)=>w.jsx("div",{children:O.map((B,j)=>B==="<br />"?w.jsx("br",{},`br${j}`):B)},`backlog-line-${D}`)),S=Ra(p.currentStageState.showName,3,!0).map(O=>O.map(D=>D.reactNode)),I=ZA(S).map((O,D)=>w.jsx("div",{children:O.map((B,j)=>B==="<br />"?w.jsx("br",{},`br${j}`):B)},`backlog-line-${D}`)),A=w.jsxs("div",{className:ir.backlog_item,style:{animationDelay:`${20*(C.backlogManager.getBacklog().length-g)}ms`},children:[w.jsxs("div",{className:ir.backlog_func_area,children:[w.jsxs("div",{className:ir.backlog_item_button_list,children:[w.jsx("div",{onClick:O=>{r(),FL(g),O.preventDefault(),O.stopPropagation()},onMouseEnter:t,className:ir.backlog_item_button_element,children:w.jsx(G_e,{theme:"outline",size:o,fill:"#ffffff",strokeWidth:3})}),p.currentStageState.vocal?w.jsx("div",{onClick:()=>{r();const O=document.getElementById("backlog_audio_play_element_"+g);if(O){O.currentTime=0;const D=N.getState().userData,B=D.optionData.volumeMain;O.volume=B*.01*D.optionData.vocalVolume*.01,O==null||O.play()}},onMouseEnter:t,className:ir.backlog_item_button_element,children:w.jsx(H_e,{theme:"outline",size:o,fill:"#ffffff",strokeWidth:3})}):null]}),w.jsx("div",{className:ir.backlog_item_content_name,children:I})]}),w.jsx("div",{className:ir.backlog_item_content,children:w.jsx("span",{className:ir.backlog_item_content_text,children:x})}),w.jsx("audio",{id:"backlog_audio_play_element_"+g,src:p.currentStageState.vocal})]},"backlogItem"+p.currentStageState.showText+p.saveScene.currentSentenceId);m.unshift(A)}return m},[((d=(h=C.backlogManager.getBacklog()[C.backlogManager.getBacklog().length-1])==null?void 0:h.saveScene)==null?void 0:d.currentSentenceId)??0]);return G.useEffect(()=>{n.showBacklog?(c.current&&clearTimeout(c.current),s(!1),u(!0),setTimeout(()=>{u(!1)},0)):c.current=setTimeout(()=>{s(!0),c.current=void 0},700+80)},[n.showBacklog]),w.jsx(w.Fragment,{children:w.jsxs("div",{className:`
          ${n.showBacklog?ir.Backlog_main:ir.Backlog_main_out}
          ${a?ir.Backlog_main_out_IndexHide:""}
          `,children:[w.jsxs("div",{className:ir.backlog_top,children:[w.jsx(LD,{className:ir.backlog_top_icon,onClick:()=>{r(),i(Re({component:"showBacklog",visibility:!1})),i(Re({component:"showTextBox",visibility:!0}))},onMouseEnter:t,theme:"outline",size:"4em",fill:"#ffffff",strokeWidth:3}),w.jsx("div",{className:ir.backlog_title,onClick:()=>{te.info("Rua! Testing")},children:e("buttons.backlog")})]}),n.showBacklog&&w.jsx("div",{className:`${ir.backlog_content} ${l?ir.Backlog_main_DisableScroll:""}`,children:f})]})})};function ZA(e){let t=[],r="";for(let n=0;n<e.length;n++){const i=e[n];typeof i=="string"?r+=i:(r!==""&&(t.push(r),r=""),t.push(i))}return r!==""&&t.push(r),t}const sbe="_extra_1tymt_2",lbe="_extra_top_1tymt_14",ube="_extra_top_icon_1tymt_20",cbe="_extra_icon_softin_1tymt_1",fbe="_extra_title_1tymt_40",hbe="_mainContainer_1tymt_51",dbe="_bgmContainer_1tymt_59",pbe="_bgmListContainer_1tymt_76",mbe="_bgmPlayerMain_1tymt_91",vbe="_bgmControlButton_1tymt_95",gbe="_bgmName_1tymt_110",ybe="_bgmElement_1tymt_118",_be="_bgmElement_active_1tymt_148",xbe="_cgMain_1tymt_153",bbe="_cgContainer_1tymt_158",Sbe="_cgElement_1tymt_170",wbe="_cgShowDiv_1tymt_185",Ebe="_cgShowDivWarpper_1tymt_194",Tbe="_cgNav_1tymt_203",Cbe="_cgNav_active_1tymt_222",Pbe="_showFullContainer_1tymt_232",Abe="_showFullCgMain_1tymt_245",Obe="_fullCgIn_1tymt_1",Ibe="_bgmElement_In_1tymt_1",ct={extra:sbe,extra_top:lbe,extra_top_icon:ube,extra_icon_softin:cbe,extra_title:fbe,mainContainer:hbe,bgmContainer:dbe,bgmListContainer:pbe,bgmPlayerMain:mbe,bgmControlButton:vbe,bgmName:gbe,bgmElement:ybe,bgmElement_active:_be,cgMain:xbe,cgContainer:bbe,cgElement:Sbe,cgShowDiv:wbe,cgShowDivWarpper:Ebe,cgNav:Tbe,cgNav_active:Cbe,showFullContainer:Pbe,showFullCgMain:Abe,fullCgIn:Obe,bgmElement_In:Ibe};function Mbe(){const{playSeClick:e,playSeEnter:t}=Rr(),r=me(g=>g.GUI.titleBgm),n=me(g=>g.userData.appreciationData),i="Title_BGM",o=Nn(!1);let a=i,s=-1;const l=39,u=o.value?"80%":"10%",c=n.bgm.length;n.bgm.forEach((g,p)=>{g.url===r&&(a=g.name,s=p)});const f=Nn("");a!==i&&a!==f.value&&f.set(a);const h=tr();function d(g){const p=n.bgm[g];f.set(p.name),h(jd({asset:"titleBgm",value:p.url}))}const m=n.bgm.map((g,p)=>{let v=ct.bgmElement;return g.name===f.value&&(v=v+" "+ct.bgmElement_active),w.jsx("div",{onClick:()=>{e(),f.set(g.name),h(jd({asset:"titleBgm",value:g.url}))},className:v,style:{animationDelay:`${p*150}ms`},onMouseEnter:t,children:g.name},g.name)});return w.jsxs("div",{className:ct.bgmContainer,style:{maxHeight:u},children:[w.jsxs("div",{className:ct.bgmPlayerMain,children:[w.jsx("div",{onClick:()=>{e(),s<=0?d(c-1):d(s-1)},onMouseEnter:t,className:ct.bgmControlButton,children:w.jsx(k_e,{theme:"filled",size:l,fill:"#fff",strokeWidth:3,strokeLinejoin:"miter"})}),w.jsx("div",{onClick:()=>{e();const g=document.getElementById("currentBgm");g==null||g.play().then()},onMouseEnter:t,className:ct.bgmControlButton,children:w.jsx(ND,{theme:"filled",size:l,fill:"#fff",strokeWidth:3,strokeLinejoin:"miter"})}),w.jsx("div",{onClick:()=>{e(),s>=c-1?d(0):d(s+1)},onMouseEnter:t,className:ct.bgmControlButton,children:w.jsx(R_e,{theme:"filled",size:l,fill:"#fff",strokeWidth:3,strokeLinejoin:"miter"})}),w.jsx("div",{onClick:()=>{e(),document.getElementById("currentBgm").pause()},onMouseEnter:t,className:ct.bgmControlButton,children:w.jsx(z_e,{theme:"filled",size:l,fill:"#fff",strokeWidth:3,strokeLinejoin:"miter"})}),w.jsx("div",{className:ct.bgmName,children:a}),w.jsx("div",{onClick:()=>{e(),o.set(!o.value)},onMouseEnter:t,className:ct.bgmControlButton,style:{marginLeft:"auto"},children:w.jsx(B_e,{theme:"filled",size:l,fill:"#fff",strokeWidth:3,strokeLinejoin:"miter"})})]}),o.value&&w.jsxs("div",{className:ct.bgmListContainer,children:[" ",m]})]})}function Rbe(e){const t=Nn(!1),{playSeEnter:r,playSeClick:n}=Rr();return w.jsxs(w.Fragment,{children:[t.value&&w.jsx("div",{onClick:()=>{t.set(!t.value),n()},className:ct.showFullContainer,onMouseEnter:r,children:w.jsx("div",{className:ct.showFullCgMain,children:w.jsx("div",{style:{backgroundImage:`url('${e.imgUrl}')`,backgroundSize:"cover",backgroundPosition:"center",width:"100%",height:"100%"}})})}),w.jsx("div",{onClick:()=>{t.set(!t.value),n()},onMouseEnter:r,style:{animation:`cg_softIn_${e.transformDeg} 1.5s ease-out ${100+e.index*100}ms forwards `},className:ct.cgElement,children:w.jsx("div",{style:{backgroundImage:`url('${e.imgUrl}')`,backgroundSize:"cover",backgroundPosition:"center",width:"100%",height:"100%"}})},e.name)]})}function kbe(){const t=me(u=>u.userData.appreciationData),r=Math.ceil(t.cg.length/8),n=Nn(1),{playSeEnter:i,playSeClick:o}=Rr(),a=[],s=t.cg.length;for(let u=(n.value-1)*8;u<Math.min(s,(n.value-1)*8+8);u++){const c=u-(n.value-1)*8,f=Lbe(-5,5),h=w.jsx(Rbe,{name:t.cg[u].name,imgUrl:t.cg[u].url,transformDeg:f,index:c},c.toString()+t.cg[u].url);a.push(h)}const l=[];for(let u=1;u<=r;u++){let c=ct.cgNav;n.value===u&&(c=c+" "+ct.cgNav_active);const f=w.jsx("div",{onClick:()=>{n.set(u),o()},onMouseEnter:i,className:c,children:u},"nav"+u);l.push(f)}return w.jsxs("div",{className:ct.cgMain,children:[w.jsx("div",{className:ct.cgShowDiv,children:w.jsx("div",{className:ct.cgShowDivWarpper,children:l})}),w.jsx("div",{className:ct.cgContainer,children:a})]})}function Lbe(e,t){return Math.round(Math.random()*(t-e))+e}function Fbe(){const{playSeClick:e}=Rr(),t=me(i=>i.GUI.showExtra),r=tr(),n=Hr("extra.");return w.jsx(w.Fragment,{children:t&&w.jsxs("div",{className:ct.extra,children:[w.jsxs("div",{className:ct.extra_top,children:[w.jsx(LD,{className:ct.extra_top_icon,onClick:()=>{r(Re({component:"showExtra",visibility:!1})),e()},onMouseEnter:e,theme:"outline",size:"4em",fill:"#fff",strokeWidth:3}),w.jsx("div",{className:ct.extra_title,children:n("title")})]}),w.jsxs("div",{className:ct.mainContainer,children:[w.jsx(kbe,{}),w.jsx(Mbe,{})]})]})})}const Dbe="_tag_yghix_2",Nbe="_container_yghix_17",Bbe="_showContainer_yghix_1",jbe="_singleButton_yghix_33",Ube="_button_text_yghix_37",Wt={tag:Dbe,container:Nbe,showContainer:Bbe,singleButton:jbe,button_text:Ube},$be=()=>{const e=Nn(!1),t=me(o=>o.stage),r=tr(),n=(o,a)=>{r(Re({component:o,visibility:a}))},i=o=>{r(Sa(o))};return w.jsx(w.Fragment,{children:t.enableFilm!==""&&w.jsxs(w.Fragment,{children:[w.jsx("div",{className:Wt.tag,onClick:()=>{e.set(!e.value)},children:w.jsx(L_e,{theme:"outline",size:"32",fill:"#fff"})}),e.value&&w.jsxs("div",{className:Wt.container,children:[w.jsx("span",{className:Wt.singleButton,onClick:()=>{n("showBacklog",!0),n("showTextBox",!1),e.set(!e.value)},children:w.jsx("span",{className:Wt.button_text,children:" / BACKLOG"})}),w.jsx("span",{className:Wt.singleButton,onClick:()=>{e.set(!e.value);let o=document.getElementById("currentVocal");o!==null&&(o.currentTime=0,o.pause(),o==null||o.play())},children:w.jsx("span",{className:Wt.button_text,children:" / REPLAY VOICE"})}),w.jsx("span",{id:"Button_ControlPanel_auto",className:Wt.singleButton,onClick:()=>{CD(),e.set(!e.value)},children:w.jsx("span",{className:Wt.button_text,children:" / AUTO"})}),w.jsx("span",{id:"Button_ControlPanel_fast",className:Wt.singleButton,onClick:()=>{ID(),e.set(!e.value)},children:w.jsx("span",{className:Wt.button_text,children:" / FAST"})}),w.jsx("span",{className:Wt.singleButton,onClick:()=>{e.set(!e.value),i(Ze.Save),n("showMenuPanel",!0)},children:w.jsx("span",{className:Wt.button_text,children:" / SAVE"})}),w.jsx("span",{className:Wt.singleButton,onClick:()=>{e.set(!e.value),i(Ze.Load),n("showMenuPanel",!0)},children:w.jsx("span",{className:Wt.button_text,children:" / LOAD"})}),w.jsx("span",{className:Wt.singleButton,onClick:()=>{e.set(!e.value),i(Ze.Option),n("showMenuPanel",!0)},children:w.jsx("span",{className:Wt.button_text,children:" / OPTIONS"})}),w.jsx("span",{className:Wt.singleButton,onClick:()=>{e.set(!e.value),BS()},children:w.jsx("span",{className:Wt.button_text,children:" / TITLE"})})]})]})})},Gbe="_devPanelMain_11x6i_1",zbe="_devPanelOpener_11x6i_13",JA={devPanelMain:Gbe,devPanelOpener:zbe};function Vbe(){document.getElementById("pixiCanvas").toBlob(t=>{if(t){const r=document.createElement("a");document.body.append(r),r.download="screenshot",r.href=URL.createObjectURL(t),r.click(),r.remove()}},"image/png")}function Hbe(){function e(){return!!window.location.hash.match(/dev/)}const t=Nn(!1),r=Nn(window.location.hash),n=me(l=>l.stage);G.useEffect(()=>{window.onhashchange=()=>{r.set(window.location.hash)}},[]);const i=e(),{t:o,i18n:a}=wm(),s=w.jsxs(w.Fragment,{children:[w.jsx("div",{onClick:()=>Vbe(),children:"Save PIXI Screenshot"}),w.jsxs("div",{children:["Current Language:",a.language]}),w.jsx("div",{onClick:()=>{var l;return(l=C.gameplay.pixiStage)==null?void 0:l.removeAnimation("snow-Ticker")},children:"Remove Snow Ticker"}),w.jsx("div",{children:"Stage State"}),w.jsx("div",{children:JSON.stringify(n,null,"  ")})]});return w.jsxs(w.Fragment,{children:[i&&t.value&&w.jsxs("div",{className:JA.devPanelMain,children:[w.jsxs("div",{style:{display:"flex",alignItems:"center"},children:[w.jsx("div",{onClick:()=>t.set(!1),style:{fontSize:"150%",padding:"0 0 0 15px",cursor:"pointer"},children:""}),w.jsx("div",{style:{padding:"0 0 0 15px",fontSize:"115%"},children:"WebGAL DEV PANEL"})]}),w.jsx("div",{style:{padding:"10px 10px 10px 10px",overflow:"auto"},children:s})]}),!t.value&&i&&w.jsx("div",{onClick:()=>t.set(!0),className:JA.devPanelOpener,children:"Open Dev Panel"})]})}const Wbe="_trans_8uz61_2",Xbe="_langWrapper_8uz61_10",qbe="_lang_8uz61_10",Ybe="_langSelect_8uz61_29",Kbe="_langSelectButton_8uz61_35",cu={trans:Wbe,langWrapper:Xbe,lang:qbe,langSelect:Ybe,langSelectButton:Kbe};function Zbe(){const e=UD(),[t,r]=G.useState(!1);G.useEffect(()=>{(window==null?void 0:window.localStorage.getItem("lang"))?e(Number(window==null?void 0:window.localStorage.getItem("lang")),!1):r(!0)},[]);const n=i=>{r(!1),e(i)};return w.jsx(w.Fragment,{children:t&&w.jsx("div",{className:cu.trans,children:w.jsxs("div",{className:cu.langWrapper,children:[w.jsx("div",{className:cu.lang,children:"LANGUAGE SELECT"}),w.jsx("div",{className:cu.langSelect,children:Object.keys(pd).map(i=>w.jsx("div",{className:cu.langSelectButton,onClick:()=>n($a[i]),children:pd[i]},i))})]})})})}const Jbe="_panic_overlay_main_1ysz4_1",Qbe={panic_overlay_main:Jbe},e1e="_yoozle_blue_1r48o_1",t1e="_yoozle_red_1r48o_5",r1e="_yoozle_yellow_1r48o_9",n1e="_yoozle_green_1r48o_13",i1e="_yoozle_e_rotate_1r48o_17",o1e="_yoozle_container_1r48o_22",a1e="_yoozle_title_1r48o_28",s1e="_yoozle_search_1r48o_37",l1e="_yoozle_search_bar_1r48o_44",u1e="_yoozle_search_buttons_1r48o_51",c1e="_yoozle_button_1r48o_55",Lr={yoozle_blue:e1e,yoozle_red:t1e,yoozle_yellow:r1e,yoozle_green:n1e,yoozle_e_rotate:i1e,yoozle_container:o1e,yoozle_title:a1e,yoozle_search:s1e,yoozle_search_bar:l1e,yoozle_search_buttons:u1e,yoozle_button:c1e},f1e=()=>(G.useEffect(()=>{const e="Yoozle Search",t=document.title;return document.title=e,()=>{document.title=t}},[]),w.jsxs("div",{className:Lr.yoozle_container,children:[w.jsx("div",{className:Lr.yoozle_title,children:w.jsxs("span",{children:[w.jsx("span",{className:Lr.yoozle_blue,style:{marginRight:"1px"},children:"W"}),w.jsx("span",{className:`${Lr.yoozle_red}`,children:"e"}),w.jsx("span",{className:Lr.yoozle_yellow,children:"b"}),w.jsx("span",{className:Lr.yoozle_blue,children:"g"}),w.jsx("span",{className:`${Lr.yoozle_green} ${Lr.yoozle_e_rotate}`,children:"a"}),w.jsx("span",{className:`${Lr.yoozle_red}`,children:"l"})]})}),w.jsxs("div",{className:Lr.yoozle_search,children:[w.jsx("input",{className:Lr.yoozle_search_bar,type:"text",defaultValue:""}),w.jsxs("div",{className:Lr.yoozle_search_buttons,children:[w.jsx("input",{className:Lr.yoozle_button,type:"submit",value:"WebGAL Search"}),w.jsx("input",{className:Lr.yoozle_button,type:"submit",value:"Feeling Lucky"})]})]})]})),h1e=()=>{const e=me(a=>a.GUI),[t,r]=G.useState(!1),o=me(a=>a.userData.globalGameVar).Show_panic===!1;return G.useEffect(()=>{const a=e.showPanicOverlay&&!o;r(a)},[e.showPanicOverlay,o]),di.createPortal(w.jsx("div",{className:t?Qbe.panic_overlay_main:"",children:t&&w.jsx(f1e,{})}),document.querySelector("div#panic-overlay"))};function d1e(){const e=me(i=>i.userData),t=me(i=>i.GUI);tr();const r=e.optionData.fullScreen,n=t.isEnterGame;G.useEffect(()=>{switch(r){case ci.on:{n&&(document.documentElement.requestFullscreen(),bs&&bs.lock(["Escape","F11"]));break}case ci.off:{document.fullscreenElement&&(document.exitFullscreen(),bs&&bs.unlock());break}}},[r])}function p1e(){return G.useEffect(()=>{lue()},[]),d1e(),w.jsxs("div",{className:"App",children:[w.jsx(Zbe,{}),w.jsx(ibe,{}),w.jsx(obe,{}),w.jsx($be,{}),w.jsx(abe,{}),w.jsx(l_e,{}),w.jsx(d_e,{}),w.jsx(Fbe,{}),w.jsx(bxe,{}),w.jsx(e0e,{}),w.jsx(h1e,{}),w.jsx(Hbe,{})]})}function To(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function cx(e,t){return cx=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,i){return n.__proto__=i,n},cx(e,t)}function Cm(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&cx(e,t)}function af(e,t){if(t&&(Zt(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return To(e)}function gi(e){return gi=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},gi(e)}function m1e(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function v1e(e){return SD(e)||m1e(e)||wD(e)||ED()}function QA(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function eO(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?QA(Object(r),!0).forEach(function(n){en(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):QA(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}var g1e={type:"logger",log:function(t){this.output("log",t)},warn:function(t){this.output("warn",t)},error:function(t){this.output("error",t)},output:function(t,r){console&&console[t]&&console[t].apply(console,r)}},y1e=function(){function e(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};$n(this,e),this.init(t,r)}return Gn(e,[{key:"init",value:function(r){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.prefix=n.prefix||"i18next:",this.logger=r||g1e,this.options=n,this.debug=n.debug}},{key:"setDebug",value:function(r){this.debug=r}},{key:"log",value:function(){for(var r=arguments.length,n=new Array(r),i=0;i<r;i++)n[i]=arguments[i];return this.forward(n,"log","",!0)}},{key:"warn",value:function(){for(var r=arguments.length,n=new Array(r),i=0;i<r;i++)n[i]=arguments[i];return this.forward(n,"warn","",!0)}},{key:"error",value:function(){for(var r=arguments.length,n=new Array(r),i=0;i<r;i++)n[i]=arguments[i];return this.forward(n,"error","")}},{key:"deprecate",value:function(){for(var r=arguments.length,n=new Array(r),i=0;i<r;i++)n[i]=arguments[i];return this.forward(n,"warn","WARNING DEPRECATED: ",!0)}},{key:"forward",value:function(r,n,i,o){return o&&!this.debug?null:(typeof r[0]=="string"&&(r[0]="".concat(i).concat(this.prefix," ").concat(r[0])),this.logger[n](r))}},{key:"create",value:function(r){return new e(this.logger,eO(eO({},{prefix:"".concat(this.prefix,":").concat(r,":")}),this.options))}},{key:"clone",value:function(r){return r=r||this.options,r.prefix=r.prefix||this.prefix,new e(this.logger,r)}}]),e}(),oi=new y1e,No=function(){function e(){$n(this,e),this.observers={}}return Gn(e,[{key:"on",value:function(r,n){var i=this;return r.split(" ").forEach(function(o){i.observers[o]=i.observers[o]||[],i.observers[o].push(n)}),this}},{key:"off",value:function(r,n){if(this.observers[r]){if(!n){delete this.observers[r];return}this.observers[r]=this.observers[r].filter(function(i){return i!==n})}}},{key:"emit",value:function(r){for(var n=arguments.length,i=new Array(n>1?n-1:0),o=1;o<n;o++)i[o-1]=arguments[o];if(this.observers[r]){var a=[].concat(this.observers[r]);a.forEach(function(l){l.apply(void 0,i)})}if(this.observers["*"]){var s=[].concat(this.observers["*"]);s.forEach(function(l){l.apply(l,[r].concat(i))})}}}]),e}();function fu(){var e,t,r=new Promise(function(n,i){e=n,t=i});return r.resolve=e,r.reject=t,r}function tO(e){return e==null?"":""+e}function _1e(e,t,r){e.forEach(function(n){t[n]&&(r[n]=t[n])})}function jS(e,t,r){function n(s){return s&&s.indexOf("###")>-1?s.replace(/###/g,"."):s}function i(){return!e||typeof e=="string"}for(var o=typeof t!="string"?[].concat(t):t.split(".");o.length>1;){if(i())return{};var a=n(o.shift());!e[a]&&r&&(e[a]=new r),Object.prototype.hasOwnProperty.call(e,a)?e=e[a]:e={}}return i()?{}:{obj:e,k:n(o.shift())}}function rO(e,t,r){var n=jS(e,t,Object),i=n.obj,o=n.k;i[o]=r}function x1e(e,t,r,n){var i=jS(e,t,Object),o=i.obj,a=i.k;o[a]=o[a]||[],n&&(o[a]=o[a].concat(r)),n||o[a].push(r)}function $d(e,t){var r=jS(e,t),n=r.obj,i=r.k;if(n)return n[i]}function b1e(e,t,r){var n=$d(e,r);return n!==void 0?n:$d(t,r)}function $D(e,t,r){for(var n in t)n!=="__proto__"&&n!=="constructor"&&(n in e?typeof e[n]=="string"||e[n]instanceof String||typeof t[n]=="string"||t[n]instanceof String?r&&(e[n]=t[n]):$D(e[n],t[n],r):e[n]=t[n]);return e}function os(e){return e.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&")}var S1e={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;"};function w1e(e){return typeof e=="string"?e.replace(/[&<>"'\/]/g,function(t){return S1e[t]}):e}var Pm=typeof window<"u"&&window.navigator&&typeof window.navigator.userAgentData>"u"&&window.navigator.userAgent&&window.navigator.userAgent.indexOf("MSIE")>-1,E1e=[" ",",","?","!",";"];function T1e(e,t,r){t=t||"",r=r||"";var n=E1e.filter(function(s){return t.indexOf(s)<0&&r.indexOf(s)<0});if(n.length===0)return!0;var i=new RegExp("(".concat(n.map(function(s){return s==="?"?"\\?":s}).join("|"),")")),o=!i.test(e);if(!o){var a=e.indexOf(r);a>0&&!i.test(e.substring(0,a))&&(o=!0)}return o}function Gd(e,t){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:".";if(e){if(e[t])return e[t];for(var n=t.split(r),i=e,o=0;o<n.length;++o){if(!i||typeof i[n[o]]=="string"&&o+1<n.length)return;if(i[n[o]]===void 0){for(var a=2,s=n.slice(o,o+a).join(r),l=i[s];l===void 0&&n.length>o+a;)a++,s=n.slice(o,o+a).join(r),l=i[s];if(l===void 0)return;if(l===null)return null;if(t.endsWith(s)){if(typeof l=="string")return l;if(s&&typeof l[s]=="string")return l[s]}var u=n.slice(o+a).join(r);return u?Gd(l,u,r):void 0}i=i[n[o]]}return i}}function nO(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function nh(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?nO(Object(r),!0).forEach(function(n){en(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):nO(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function C1e(e){var t=P1e();return function(){var n=gi(e),i;if(t){var o=gi(this).constructor;i=Reflect.construct(n,arguments,o)}else i=n.apply(this,arguments);return af(this,i)}}function P1e(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}var A1e=function(e){Cm(r,e);var t=C1e(r);function r(n){var i,o=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{ns:["translation"],defaultNS:"translation"};return $n(this,r),i=t.call(this),Pm&&No.call(To(i)),i.data=n||{},i.options=o,i.options.keySeparator===void 0&&(i.options.keySeparator="."),i.options.ignoreJSONStructure===void 0&&(i.options.ignoreJSONStructure=!0),i}return Gn(r,[{key:"addNamespaces",value:function(i){this.options.ns.indexOf(i)<0&&this.options.ns.push(i)}},{key:"removeNamespaces",value:function(i){var o=this.options.ns.indexOf(i);o>-1&&this.options.ns.splice(o,1)}},{key:"getResource",value:function(i,o,a){var s=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{},l=s.keySeparator!==void 0?s.keySeparator:this.options.keySeparator,u=s.ignoreJSONStructure!==void 0?s.ignoreJSONStructure:this.options.ignoreJSONStructure,c=[i,o];a&&typeof a!="string"&&(c=c.concat(a)),a&&typeof a=="string"&&(c=c.concat(l?a.split(l):a)),i.indexOf(".")>-1&&(c=i.split("."));var f=$d(this.data,c);return f||!u||typeof a!="string"?f:Gd(this.data&&this.data[i]&&this.data[i][o],a,l)}},{key:"addResource",value:function(i,o,a,s){var l=arguments.length>4&&arguments[4]!==void 0?arguments[4]:{silent:!1},u=l.keySeparator!==void 0?l.keySeparator:this.options.keySeparator,c=[i,o];a&&(c=c.concat(u?a.split(u):a)),i.indexOf(".")>-1&&(c=i.split("."),s=o,o=c[1]),this.addNamespaces(o),rO(this.data,c,s),l.silent||this.emit("added",i,o,a,s)}},{key:"addResources",value:function(i,o,a){var s=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{silent:!1};for(var l in a)(typeof a[l]=="string"||Object.prototype.toString.apply(a[l])==="[object Array]")&&this.addResource(i,o,l,a[l],{silent:!0});s.silent||this.emit("added",i,o,a)}},{key:"addResourceBundle",value:function(i,o,a,s,l){var u=arguments.length>5&&arguments[5]!==void 0?arguments[5]:{silent:!1},c=[i,o];i.indexOf(".")>-1&&(c=i.split("."),s=a,a=o,o=c[1]),this.addNamespaces(o);var f=$d(this.data,c)||{};s?$D(f,a,l):f=nh(nh({},f),a),rO(this.data,c,f),u.silent||this.emit("added",i,o,a)}},{key:"removeResourceBundle",value:function(i,o){this.hasResourceBundle(i,o)&&delete this.data[i][o],this.removeNamespaces(o),this.emit("removed",i,o)}},{key:"hasResourceBundle",value:function(i,o){return this.getResource(i,o)!==void 0}},{key:"getResourceBundle",value:function(i,o){return o||(o=this.options.defaultNS),this.options.compatibilityAPI==="v1"?nh(nh({},{}),this.getResource(i,o)):this.getResource(i,o)}},{key:"getDataByLanguage",value:function(i){return this.data[i]}},{key:"hasLanguageSomeTranslations",value:function(i){var o=this.getDataByLanguage(i),a=o&&Object.keys(o)||[];return!!a.find(function(s){return o[s]&&Object.keys(o[s]).length>0})}},{key:"toJSON",value:function(){return this.data}}]),r}(No),GD={processors:{},addPostProcessor:function(t){this.processors[t.name]=t},handle:function(t,r,n,i,o){var a=this;return t.forEach(function(s){a.processors[s]&&(r=a.processors[s].process(r,n,i,o))}),r}};function iO(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function hr(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?iO(Object(r),!0).forEach(function(n){en(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):iO(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function O1e(e){var t=I1e();return function(){var n=gi(e),i;if(t){var o=gi(this).constructor;i=Reflect.construct(n,arguments,o)}else i=n.apply(this,arguments);return af(this,i)}}function I1e(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}var oO={},aO=function(e){Cm(r,e);var t=O1e(r);function r(n){var i,o=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return $n(this,r),i=t.call(this),Pm&&No.call(To(i)),_1e(["resourceStore","languageUtils","pluralResolver","interpolator","backendConnector","i18nFormat","utils"],n,To(i)),i.options=o,i.options.keySeparator===void 0&&(i.options.keySeparator="."),i.logger=oi.create("translator"),i}return Gn(r,[{key:"changeLanguage",value:function(i){i&&(this.language=i)}},{key:"exists",value:function(i){var o=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{interpolation:{}};if(i==null)return!1;var a=this.resolve(i,o);return a&&a.res!==void 0}},{key:"extractFromKey",value:function(i,o){var a=o.nsSeparator!==void 0?o.nsSeparator:this.options.nsSeparator;a===void 0&&(a=":");var s=o.keySeparator!==void 0?o.keySeparator:this.options.keySeparator,l=o.ns||this.options.defaultNS||[],u=a&&i.indexOf(a)>-1,c=!this.options.userDefinedKeySeparator&&!o.keySeparator&&!this.options.userDefinedNsSeparator&&!o.nsSeparator&&!T1e(i,a,s);if(u&&!c){var f=i.match(this.interpolator.nestingRegexp);if(f&&f.length>0)return{key:i,namespaces:l};var h=i.split(a);(a!==s||a===s&&this.options.ns.indexOf(h[0])>-1)&&(l=h.shift()),i=h.join(s)}return typeof l=="string"&&(l=[l]),{key:i,namespaces:l}}},{key:"translate",value:function(i,o,a){var s=this;if(Zt(o)!=="object"&&this.options.overloadTranslationOptionHandler&&(o=this.options.overloadTranslationOptionHandler(arguments)),Zt(o)==="object"&&(o=hr({},o)),o||(o={}),i==null)return"";Array.isArray(i)||(i=[String(i)]);var l=o.returnDetails!==void 0?o.returnDetails:this.options.returnDetails,u=o.keySeparator!==void 0?o.keySeparator:this.options.keySeparator,c=this.extractFromKey(i[i.length-1],o),f=c.key,h=c.namespaces,d=h[h.length-1],m=o.lng||this.language,g=o.appendNamespaceToCIMode||this.options.appendNamespaceToCIMode;if(m&&m.toLowerCase()==="cimode"){if(g){var p=o.nsSeparator||this.options.nsSeparator;return l?{res:"".concat(d).concat(p).concat(f),usedKey:f,exactUsedKey:f,usedLng:m,usedNS:d}:"".concat(d).concat(p).concat(f)}return l?{res:f,usedKey:f,exactUsedKey:f,usedLng:m,usedNS:d}:f}var v=this.resolve(i,o),y=v&&v.res,_=v&&v.usedKey||f,x=v&&v.exactUsedKey||f,b=Object.prototype.toString.apply(y),S=["[object Number]","[object Function]","[object RegExp]"],E=o.joinArrays!==void 0?o.joinArrays:this.options.joinArrays,I=!this.i18nFormat||this.i18nFormat.handleAsObject,A=typeof y!="string"&&typeof y!="boolean"&&typeof y!="number";if(I&&y&&A&&S.indexOf(b)<0&&!(typeof E=="string"&&b==="[object Array]")){if(!o.returnObjects&&!this.options.returnObjects){this.options.returnedObjectHandler||this.logger.warn("accessing an object - but returnObjects options is not enabled!");var O=this.options.returnedObjectHandler?this.options.returnedObjectHandler(_,y,hr(hr({},o),{},{ns:h})):"key '".concat(f," (").concat(this.language,")' returned an object instead of string.");return l?(v.res=O,v):O}if(u){var D=b==="[object Array]",B=D?[]:{},j=D?x:_;for(var W in y)if(Object.prototype.hasOwnProperty.call(y,W)){var $="".concat(j).concat(u).concat(W);B[W]=this.translate($,hr(hr({},o),{joinArrays:!1,ns:h})),B[W]===$&&(B[W]=y[W])}y=B}}else if(I&&typeof E=="string"&&b==="[object Array]")y=y.join(E),y&&(y=this.extendTranslation(y,i,o,a));else{var z=!1,ie=!1,Se=o.count!==void 0&&typeof o.count!="string",de=r.hasDefaultValue(o),X=Se?this.pluralResolver.getSuffix(m,o.count,o):"",L=o["defaultValue".concat(X)]||o.defaultValue;!this.isValidLookup(y)&&de&&(z=!0,y=L),this.isValidLookup(y)||(ie=!0,y=f);var q=o.missingKeyNoValueFallbackToKey||this.options.missingKeyNoValueFallbackToKey,re=q&&ie?void 0:y,le=de&&L!==y&&this.options.updateMissing;if(ie||z||le){if(this.logger.log(le?"updateKey":"missingKey",m,d,f,le?L:y),u){var ye=this.resolve(f,hr(hr({},o),{},{keySeparator:!1}));ye&&ye.res&&this.logger.warn("Seems the loaded translations were in flat JSON format instead of nested. Either set keySeparator: false on init or make sure your translations are published in nested format.")}var we=[],Ee=this.languageUtils.getFallbackCodes(this.options.fallbackLng,o.lng||this.language);if(this.options.saveMissingTo==="fallback"&&Ee&&Ee[0])for(var Ge=0;Ge<Ee.length;Ge++)we.push(Ee[Ge]);else this.options.saveMissingTo==="all"?we=this.languageUtils.toResolveHierarchy(o.lng||this.language):we.push(o.lng||this.language);var He=function(Oe,Be,We){var Te=de&&We!==y?We:re;s.options.missingKeyHandler?s.options.missingKeyHandler(Oe,d,Be,Te,le,o):s.backendConnector&&s.backendConnector.saveMissing&&s.backendConnector.saveMissing(Oe,d,Be,Te,le,o),s.emit("missingKey",Oe,d,Be,y)};this.options.saveMissing&&(this.options.saveMissingPlurals&&Se?we.forEach(function(Qe){s.pluralResolver.getSuffixes(Qe,o).forEach(function(Oe){He([Qe],f+Oe,o["defaultValue".concat(Oe)]||L)})}):He(we,f,L))}y=this.extendTranslation(y,i,o,v,a),ie&&y===f&&this.options.appendNamespaceToMissingKey&&(y="".concat(d,":").concat(f)),(ie||z)&&this.options.parseMissingKeyHandler&&(this.options.compatibilityAPI!=="v1"?y=this.options.parseMissingKeyHandler(this.options.appendNamespaceToMissingKey?"".concat(d,":").concat(f):f,z?y:void 0):y=this.options.parseMissingKeyHandler(y))}return l?(v.res=y,v):y}},{key:"extendTranslation",value:function(i,o,a,s,l){var u=this;if(this.i18nFormat&&this.i18nFormat.parse)i=this.i18nFormat.parse(i,hr(hr({},this.options.interpolation.defaultVariables),a),s.usedLng,s.usedNS,s.usedKey,{resolved:s});else if(!a.skipInterpolation){a.interpolation&&this.interpolator.init(hr(hr({},a),{interpolation:hr(hr({},this.options.interpolation),a.interpolation)}));var c=typeof i=="string"&&(a&&a.interpolation&&a.interpolation.skipOnVariables!==void 0?a.interpolation.skipOnVariables:this.options.interpolation.skipOnVariables),f;if(c){var h=i.match(this.interpolator.nestingRegexp);f=h&&h.length}var d=a.replace&&typeof a.replace!="string"?a.replace:a;if(this.options.interpolation.defaultVariables&&(d=hr(hr({},this.options.interpolation.defaultVariables),d)),i=this.interpolator.interpolate(i,d,a.lng||this.language,a),c){var m=i.match(this.interpolator.nestingRegexp),g=m&&m.length;f<g&&(a.nest=!1)}!a.lng&&this.options.compatibilityAPI!=="v1"&&s&&s.res&&(a.lng=s.usedLng),a.nest!==!1&&(i=this.interpolator.nest(i,function(){for(var y=arguments.length,_=new Array(y),x=0;x<y;x++)_[x]=arguments[x];return l&&l[0]===_[0]&&!a.context?(u.logger.warn("It seems you are nesting recursively key: ".concat(_[0]," in key: ").concat(o[0])),null):u.translate.apply(u,_.concat([o]))},a)),a.interpolation&&this.interpolator.reset()}var p=a.postProcess||this.options.postProcess,v=typeof p=="string"?[p]:p;return i!=null&&v&&v.length&&a.applyPostProcessor!==!1&&(i=GD.handle(v,i,o,this.options&&this.options.postProcessPassResolved?hr({i18nResolved:s},a):a,this)),i}},{key:"resolve",value:function(i){var o=this,a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},s,l,u,c,f;return typeof i=="string"&&(i=[i]),i.forEach(function(h){if(!o.isValidLookup(s)){var d=o.extractFromKey(h,a),m=d.key;l=m;var g=d.namespaces;o.options.fallbackNS&&(g=g.concat(o.options.fallbackNS));var p=a.count!==void 0&&typeof a.count!="string",v=p&&!a.ordinal&&a.count===0&&o.pluralResolver.shouldUseIntlApi(),y=a.context!==void 0&&(typeof a.context=="string"||typeof a.context=="number")&&a.context!=="",_=a.lngs?a.lngs:o.languageUtils.toResolveHierarchy(a.lng||o.language,a.fallbackLng);g.forEach(function(x){o.isValidLookup(s)||(f=x,!oO["".concat(_[0],"-").concat(x)]&&o.utils&&o.utils.hasLoadedNamespace&&!o.utils.hasLoadedNamespace(f)&&(oO["".concat(_[0],"-").concat(x)]=!0,o.logger.warn('key "'.concat(l,'" for languages "').concat(_.join(", "),`" won't get resolved as namespace "`).concat(f,'" was not yet loaded'),"This means something IS WRONG in your setup. You access the t function before i18next.init / i18next.loadNamespace / i18next.changeLanguage was done. Wait for the callback or Promise to resolve before accessing it!!!")),_.forEach(function(b){if(!o.isValidLookup(s)){c=b;var S=[m];if(o.i18nFormat&&o.i18nFormat.addLookupKeys)o.i18nFormat.addLookupKeys(S,m,b,x,a);else{var E;p&&(E=o.pluralResolver.getSuffix(b,a.count,a));var I="".concat(o.options.pluralSeparator,"zero");if(p&&(S.push(m+E),v&&S.push(m+I)),y){var A="".concat(m).concat(o.options.contextSeparator).concat(a.context);S.push(A),p&&(S.push(A+E),v&&S.push(A+I))}}for(var O;O=S.pop();)o.isValidLookup(s)||(u=O,s=o.getResource(b,x,O,a))}}))})}}),{res:s,usedKey:l,exactUsedKey:u,usedLng:c,usedNS:f}}},{key:"isValidLookup",value:function(i){return i!==void 0&&!(!this.options.returnNull&&i===null)&&!(!this.options.returnEmptyString&&i==="")}},{key:"getResource",value:function(i,o,a){var s=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};return this.i18nFormat&&this.i18nFormat.getResource?this.i18nFormat.getResource(i,o,a,s):this.resourceStore.getResource(i,o,a,s)}}],[{key:"hasDefaultValue",value:function(i){var o="defaultValue";for(var a in i)if(Object.prototype.hasOwnProperty.call(i,a)&&o===a.substring(0,o.length)&&i[a]!==void 0)return!0;return!1}}]),r}(No);function iy(e){return e.charAt(0).toUpperCase()+e.slice(1)}var sO=function(){function e(t){$n(this,e),this.options=t,this.supportedLngs=this.options.supportedLngs||!1,this.logger=oi.create("languageUtils")}return Gn(e,[{key:"getScriptPartFromCode",value:function(r){if(!r||r.indexOf("-")<0)return null;var n=r.split("-");return n.length===2||(n.pop(),n[n.length-1].toLowerCase()==="x")?null:this.formatLanguageCode(n.join("-"))}},{key:"getLanguagePartFromCode",value:function(r){if(!r||r.indexOf("-")<0)return r;var n=r.split("-");return this.formatLanguageCode(n[0])}},{key:"formatLanguageCode",value:function(r){if(typeof r=="string"&&r.indexOf("-")>-1){var n=["hans","hant","latn","cyrl","cans","mong","arab"],i=r.split("-");return this.options.lowerCaseLng?i=i.map(function(o){return o.toLowerCase()}):i.length===2?(i[0]=i[0].toLowerCase(),i[1]=i[1].toUpperCase(),n.indexOf(i[1].toLowerCase())>-1&&(i[1]=iy(i[1].toLowerCase()))):i.length===3&&(i[0]=i[0].toLowerCase(),i[1].length===2&&(i[1]=i[1].toUpperCase()),i[0]!=="sgn"&&i[2].length===2&&(i[2]=i[2].toUpperCase()),n.indexOf(i[1].toLowerCase())>-1&&(i[1]=iy(i[1].toLowerCase())),n.indexOf(i[2].toLowerCase())>-1&&(i[2]=iy(i[2].toLowerCase()))),i.join("-")}return this.options.cleanCode||this.options.lowerCaseLng?r.toLowerCase():r}},{key:"isSupportedCode",value:function(r){return(this.options.load==="languageOnly"||this.options.nonExplicitSupportedLngs)&&(r=this.getLanguagePartFromCode(r)),!this.supportedLngs||!this.supportedLngs.length||this.supportedLngs.indexOf(r)>-1}},{key:"getBestMatchFromCodes",value:function(r){var n=this;if(!r)return null;var i;return r.forEach(function(o){if(!i){var a=n.formatLanguageCode(o);(!n.options.supportedLngs||n.isSupportedCode(a))&&(i=a)}}),!i&&this.options.supportedLngs&&r.forEach(function(o){if(!i){var a=n.getLanguagePartFromCode(o);if(n.isSupportedCode(a))return i=a;i=n.options.supportedLngs.find(function(s){if(s===a)return s;if(!(s.indexOf("-")<0&&a.indexOf("-")<0)&&s.indexOf(a)===0)return s})}}),i||(i=this.getFallbackCodes(this.options.fallbackLng)[0]),i}},{key:"getFallbackCodes",value:function(r,n){if(!r)return[];if(typeof r=="function"&&(r=r(n)),typeof r=="string"&&(r=[r]),Object.prototype.toString.apply(r)==="[object Array]")return r;if(!n)return r.default||[];var i=r[n];return i||(i=r[this.getScriptPartFromCode(n)]),i||(i=r[this.formatLanguageCode(n)]),i||(i=r[this.getLanguagePartFromCode(n)]),i||(i=r.default),i||[]}},{key:"toResolveHierarchy",value:function(r,n){var i=this,o=this.getFallbackCodes(n||this.options.fallbackLng||[],r),a=[],s=function(u){u&&(i.isSupportedCode(u)?a.push(u):i.logger.warn("rejecting language code not found in supportedLngs: ".concat(u)))};return typeof r=="string"&&r.indexOf("-")>-1?(this.options.load!=="languageOnly"&&s(this.formatLanguageCode(r)),this.options.load!=="languageOnly"&&this.options.load!=="currentOnly"&&s(this.getScriptPartFromCode(r)),this.options.load!=="currentOnly"&&s(this.getLanguagePartFromCode(r))):typeof r=="string"&&s(this.formatLanguageCode(r)),o.forEach(function(l){a.indexOf(l)<0&&s(i.formatLanguageCode(l))}),a}}]),e}(),M1e=[{lngs:["ach","ak","am","arn","br","fil","gun","ln","mfe","mg","mi","oc","pt","pt-BR","tg","tl","ti","tr","uz","wa"],nr:[1,2],fc:1},{lngs:["af","an","ast","az","bg","bn","ca","da","de","dev","el","en","eo","es","et","eu","fi","fo","fur","fy","gl","gu","ha","hi","hu","hy","ia","it","kk","kn","ku","lb","mai","ml","mn","mr","nah","nap","nb","ne","nl","nn","no","nso","pa","pap","pms","ps","pt-PT","rm","sco","se","si","so","son","sq","sv","sw","ta","te","tk","ur","yo"],nr:[1,2],fc:2},{lngs:["ay","bo","cgg","fa","ht","id","ja","jbo","ka","km","ko","ky","lo","ms","sah","su","th","tt","ug","vi","wo","zh"],nr:[1],fc:3},{lngs:["be","bs","cnr","dz","hr","ru","sr","uk"],nr:[1,2,5],fc:4},{lngs:["ar"],nr:[0,1,2,3,11,100],fc:5},{lngs:["cs","sk"],nr:[1,2,5],fc:6},{lngs:["csb","pl"],nr:[1,2,5],fc:7},{lngs:["cy"],nr:[1,2,3,8],fc:8},{lngs:["fr"],nr:[1,2],fc:9},{lngs:["ga"],nr:[1,2,3,7,11],fc:10},{lngs:["gd"],nr:[1,2,3,20],fc:11},{lngs:["is"],nr:[1,2],fc:12},{lngs:["jv"],nr:[0,1],fc:13},{lngs:["kw"],nr:[1,2,3,4],fc:14},{lngs:["lt"],nr:[1,2,10],fc:15},{lngs:["lv"],nr:[1,2,0],fc:16},{lngs:["mk"],nr:[1,2],fc:17},{lngs:["mnk"],nr:[0,1,2],fc:18},{lngs:["mt"],nr:[1,2,11,20],fc:19},{lngs:["or"],nr:[2,1],fc:2},{lngs:["ro"],nr:[1,2,20],fc:20},{lngs:["sl"],nr:[5,1,2,3],fc:21},{lngs:["he","iw"],nr:[1,2,20,21],fc:22}],R1e={1:function(t){return+(t>1)},2:function(t){return+(t!=1)},3:function(t){return 0},4:function(t){return t%10==1&&t%100!=11?0:t%10>=2&&t%10<=4&&(t%100<10||t%100>=20)?1:2},5:function(t){return t==0?0:t==1?1:t==2?2:t%100>=3&&t%100<=10?3:t%100>=11?4:5},6:function(t){return t==1?0:t>=2&&t<=4?1:2},7:function(t){return t==1?0:t%10>=2&&t%10<=4&&(t%100<10||t%100>=20)?1:2},8:function(t){return t==1?0:t==2?1:t!=8&&t!=11?2:3},9:function(t){return+(t>=2)},10:function(t){return t==1?0:t==2?1:t<7?2:t<11?3:4},11:function(t){return t==1||t==11?0:t==2||t==12?1:t>2&&t<20?2:3},12:function(t){return+(t%10!=1||t%100==11)},13:function(t){return+(t!==0)},14:function(t){return t==1?0:t==2?1:t==3?2:3},15:function(t){return t%10==1&&t%100!=11?0:t%10>=2&&(t%100<10||t%100>=20)?1:2},16:function(t){return t%10==1&&t%100!=11?0:t!==0?1:2},17:function(t){return t==1||t%10==1&&t%100!=11?0:1},18:function(t){return t==0?0:t==1?1:2},19:function(t){return t==1?0:t==0||t%100>1&&t%100<11?1:t%100>10&&t%100<20?2:3},20:function(t){return t==1?0:t==0||t%100>0&&t%100<20?1:2},21:function(t){return t%100==1?1:t%100==2?2:t%100==3||t%100==4?3:0},22:function(t){return t==1?0:t==2?1:(t<0||t>10)&&t%10==0?2:3}},k1e=["v1","v2","v3"],lO={zero:0,one:1,two:2,few:3,many:4,other:5};function L1e(){var e={};return M1e.forEach(function(t){t.lngs.forEach(function(r){e[r]={numbers:t.nr,plurals:R1e[t.fc]}})}),e}var F1e=function(){function e(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};$n(this,e),this.languageUtils=t,this.options=r,this.logger=oi.create("pluralResolver"),(!this.options.compatibilityJSON||this.options.compatibilityJSON==="v4")&&(typeof Intl>"u"||!Intl.PluralRules)&&(this.options.compatibilityJSON="v3",this.logger.error("Your environment seems not to be Intl API compatible, use an Intl.PluralRules polyfill. Will fallback to the compatibilityJSON v3 format handling.")),this.rules=L1e()}return Gn(e,[{key:"addRule",value:function(r,n){this.rules[r]=n}},{key:"getRule",value:function(r){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(this.shouldUseIntlApi())try{return new Intl.PluralRules(r,{type:n.ordinal?"ordinal":"cardinal"})}catch{return}return this.rules[r]||this.rules[this.languageUtils.getLanguagePartFromCode(r)]}},{key:"needsPlural",value:function(r){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},i=this.getRule(r,n);return this.shouldUseIntlApi()?i&&i.resolvedOptions().pluralCategories.length>1:i&&i.numbers.length>1}},{key:"getPluralFormsOfKey",value:function(r,n){var i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return this.getSuffixes(r,i).map(function(o){return"".concat(n).concat(o)})}},{key:"getSuffixes",value:function(r){var n=this,i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},o=this.getRule(r,i);return o?this.shouldUseIntlApi()?o.resolvedOptions().pluralCategories.sort(function(a,s){return lO[a]-lO[s]}).map(function(a){return"".concat(n.options.prepend).concat(a)}):o.numbers.map(function(a){return n.getSuffix(r,a,i)}):[]}},{key:"getSuffix",value:function(r,n){var i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},o=this.getRule(r,i);return o?this.shouldUseIntlApi()?"".concat(this.options.prepend).concat(o.select(n)):this.getSuffixRetroCompatible(o,n):(this.logger.warn("no plural rule found for: ".concat(r)),"")}},{key:"getSuffixRetroCompatible",value:function(r,n){var i=this,o=r.noAbs?r.plurals(n):r.plurals(Math.abs(n)),a=r.numbers[o];this.options.simplifyPluralSuffix&&r.numbers.length===2&&r.numbers[0]===1&&(a===2?a="plural":a===1&&(a=""));var s=function(){return i.options.prepend&&a.toString()?i.options.prepend+a.toString():a.toString()};return this.options.compatibilityJSON==="v1"?a===1?"":typeof a=="number"?"_plural_".concat(a.toString()):s():this.options.compatibilityJSON==="v2"||this.options.simplifyPluralSuffix&&r.numbers.length===2&&r.numbers[0]===1?s():this.options.prepend&&o.toString()?this.options.prepend+o.toString():o.toString()}},{key:"shouldUseIntlApi",value:function(){return!k1e.includes(this.options.compatibilityJSON)}}]),e}();function uO(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function On(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?uO(Object(r),!0).forEach(function(n){en(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):uO(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function cO(e,t,r){var n=arguments.length>3&&arguments[3]!==void 0?arguments[3]:".",i=arguments.length>4&&arguments[4]!==void 0?arguments[4]:!0,o=b1e(e,t,r);return!o&&i&&typeof r=="string"&&(o=Gd(e,r,n),o===void 0&&(o=Gd(t,r,n))),o}var D1e=function(){function e(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};$n(this,e),this.logger=oi.create("interpolator"),this.options=t,this.format=t.interpolation&&t.interpolation.format||function(r){return r},this.init(t)}return Gn(e,[{key:"init",value:function(){var r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};r.interpolation||(r.interpolation={escapeValue:!0});var n=r.interpolation;this.escape=n.escape!==void 0?n.escape:w1e,this.escapeValue=n.escapeValue!==void 0?n.escapeValue:!0,this.useRawValueToEscape=n.useRawValueToEscape!==void 0?n.useRawValueToEscape:!1,this.prefix=n.prefix?os(n.prefix):n.prefixEscaped||"{{",this.suffix=n.suffix?os(n.suffix):n.suffixEscaped||"}}",this.formatSeparator=n.formatSeparator?n.formatSeparator:n.formatSeparator||",",this.unescapePrefix=n.unescapeSuffix?"":n.unescapePrefix||"-",this.unescapeSuffix=this.unescapePrefix?"":n.unescapeSuffix||"",this.nestingPrefix=n.nestingPrefix?os(n.nestingPrefix):n.nestingPrefixEscaped||os("$t("),this.nestingSuffix=n.nestingSuffix?os(n.nestingSuffix):n.nestingSuffixEscaped||os(")"),this.nestingOptionsSeparator=n.nestingOptionsSeparator?n.nestingOptionsSeparator:n.nestingOptionsSeparator||",",this.maxReplaces=n.maxReplaces?n.maxReplaces:1e3,this.alwaysFormat=n.alwaysFormat!==void 0?n.alwaysFormat:!1,this.resetRegExp()}},{key:"reset",value:function(){this.options&&this.init(this.options)}},{key:"resetRegExp",value:function(){var r="".concat(this.prefix,"(.+?)").concat(this.suffix);this.regexp=new RegExp(r,"g");var n="".concat(this.prefix).concat(this.unescapePrefix,"(.+?)").concat(this.unescapeSuffix).concat(this.suffix);this.regexpUnescape=new RegExp(n,"g");var i="".concat(this.nestingPrefix,"(.+?)").concat(this.nestingSuffix);this.nestingRegexp=new RegExp(i,"g")}},{key:"interpolate",value:function(r,n,i,o){var a=this,s,l,u,c=this.options&&this.options.interpolation&&this.options.interpolation.defaultVariables||{};function f(p){return p.replace(/\$/g,"$$$$")}var h=function(v){if(v.indexOf(a.formatSeparator)<0){var y=cO(n,c,v,a.options.keySeparator,a.options.ignoreJSONStructure);return a.alwaysFormat?a.format(y,void 0,i,On(On(On({},o),n),{},{interpolationkey:v})):y}var _=v.split(a.formatSeparator),x=_.shift().trim(),b=_.join(a.formatSeparator).trim();return a.format(cO(n,c,x,a.options.keySeparator,a.options.ignoreJSONStructure),b,i,On(On(On({},o),n),{},{interpolationkey:x}))};this.resetRegExp();var d=o&&o.missingInterpolationHandler||this.options.missingInterpolationHandler,m=o&&o.interpolation&&o.interpolation.skipOnVariables!==void 0?o.interpolation.skipOnVariables:this.options.interpolation.skipOnVariables,g=[{regex:this.regexpUnescape,safeValue:function(v){return f(v)}},{regex:this.regexp,safeValue:function(v){return a.escapeValue?f(a.escape(v)):f(v)}}];return g.forEach(function(p){for(u=0;s=p.regex.exec(r);){var v=s[1].trim();if(l=h(v),l===void 0)if(typeof d=="function"){var y=d(r,s,o);l=typeof y=="string"?y:""}else if(o&&Object.prototype.hasOwnProperty.call(o,v))l="";else if(m){l=s[0];continue}else a.logger.warn("missed to pass in variable ".concat(v," for interpolating ").concat(r)),l="";else typeof l!="string"&&!a.useRawValueToEscape&&(l=tO(l));var _=p.safeValue(l);if(r=r.replace(s[0],_),m?(p.regex.lastIndex+=l.length,p.regex.lastIndex-=s[0].length):p.regex.lastIndex=0,u++,u>=a.maxReplaces)break}}),r}},{key:"nest",value:function(r,n){var i=this,o=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},a,s,l;function u(d,m){var g=this.nestingOptionsSeparator;if(d.indexOf(g)<0)return d;var p=d.split(new RegExp("".concat(g,"[ ]*{"))),v="{".concat(p[1]);d=p[0],v=this.interpolate(v,l);var y=v.match(/'/g),_=v.match(/"/g);(y&&y.length%2===0&&!_||_.length%2!==0)&&(v=v.replace(/'/g,'"'));try{l=JSON.parse(v),m&&(l=On(On({},m),l))}catch(x){return this.logger.warn("failed parsing options string in nesting for key ".concat(d),x),"".concat(d).concat(g).concat(v)}return delete l.defaultValue,d}for(;a=this.nestingRegexp.exec(r);){var c=[];l=On({},o),l=l.replace&&typeof l.replace!="string"?l.replace:l,l.applyPostProcessor=!1,delete l.defaultValue;var f=!1;if(a[0].indexOf(this.formatSeparator)!==-1&&!/{.*}/.test(a[1])){var h=a[1].split(this.formatSeparator).map(function(d){return d.trim()});a[1]=h.shift(),c=h,f=!0}if(s=n(u.call(this,a[1].trim(),l),l),s&&a[0]===r&&typeof s!="string")return s;typeof s!="string"&&(s=tO(s)),s||(this.logger.warn("missed to resolve ".concat(a[1]," for nesting ").concat(r)),s=""),f&&(s=c.reduce(function(d,m){return i.format(d,m,o.lng,On(On({},o),{},{interpolationkey:a[1].trim()}))},s.trim())),r=r.replace(a[0],s),this.regexp.lastIndex=0}return r}}]),e}();function fO(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function Pi(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?fO(Object(r),!0).forEach(function(n){en(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):fO(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function N1e(e){var t=e.toLowerCase().trim(),r={};if(e.indexOf("(")>-1){var n=e.split("(");t=n[0].toLowerCase().trim();var i=n[1].substring(0,n[1].length-1);if(t==="currency"&&i.indexOf(":")<0)r.currency||(r.currency=i.trim());else if(t==="relativetime"&&i.indexOf(":")<0)r.range||(r.range=i.trim());else{var o=i.split(";");o.forEach(function(a){if(a){var s=a.split(":"),l=v1e(s),u=l[0],c=l.slice(1),f=c.join(":").trim().replace(/^'+|'+$/g,"");r[u.trim()]||(r[u.trim()]=f),f==="false"&&(r[u.trim()]=!1),f==="true"&&(r[u.trim()]=!0),isNaN(f)||(r[u.trim()]=parseInt(f,10))}})}}return{formatName:t,formatOptions:r}}function as(e){var t={};return function(n,i,o){var a=i+JSON.stringify(o),s=t[a];return s||(s=e(i,o),t[a]=s),s(n)}}var B1e=function(){function e(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};$n(this,e),this.logger=oi.create("formatter"),this.options=t,this.formats={number:as(function(r,n){var i=new Intl.NumberFormat(r,Pi({},n));return function(o){return i.format(o)}}),currency:as(function(r,n){var i=new Intl.NumberFormat(r,Pi(Pi({},n),{},{style:"currency"}));return function(o){return i.format(o)}}),datetime:as(function(r,n){var i=new Intl.DateTimeFormat(r,Pi({},n));return function(o){return i.format(o)}}),relativetime:as(function(r,n){var i=new Intl.RelativeTimeFormat(r,Pi({},n));return function(o){return i.format(o,n.range||"day")}}),list:as(function(r,n){var i=new Intl.ListFormat(r,Pi({},n));return function(o){return i.format(o)}})},this.init(t)}return Gn(e,[{key:"init",value:function(r){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{interpolation:{}},i=n.interpolation;this.formatSeparator=i.formatSeparator?i.formatSeparator:i.formatSeparator||","}},{key:"add",value:function(r,n){this.formats[r.toLowerCase().trim()]=n}},{key:"addCached",value:function(r,n){this.formats[r.toLowerCase().trim()]=as(n)}},{key:"format",value:function(r,n,i){var o=this,a=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{},s=n.split(this.formatSeparator),l=s.reduce(function(u,c){var f=N1e(c),h=f.formatName,d=f.formatOptions;if(o.formats[h]){var m=u;try{var g=a&&a.formatParams&&a.formatParams[a.interpolationkey]||{},p=g.locale||g.lng||a.locale||a.lng||i;m=o.formats[h](u,p,Pi(Pi(Pi({},d),a),g))}catch(v){o.logger.warn(v)}return m}else o.logger.warn("there was no format function for ".concat(h));return u},r);return l}}]),e}();function hO(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function dO(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?hO(Object(r),!0).forEach(function(n){en(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):hO(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function j1e(e){var t=U1e();return function(){var n=gi(e),i;if(t){var o=gi(this).constructor;i=Reflect.construct(n,arguments,o)}else i=n.apply(this,arguments);return af(this,i)}}function U1e(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function $1e(e,t){e.pending[t]!==void 0&&(delete e.pending[t],e.pendingCount--)}var G1e=function(e){Cm(r,e);var t=j1e(r);function r(n,i,o){var a,s=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};return $n(this,r),a=t.call(this),Pm&&No.call(To(a)),a.backend=n,a.store=i,a.services=o,a.languageUtils=o.languageUtils,a.options=s,a.logger=oi.create("backendConnector"),a.waitingReads=[],a.maxParallelReads=s.maxParallelReads||10,a.readingCalls=0,a.maxRetries=s.maxRetries>=0?s.maxRetries:5,a.retryTimeout=s.retryTimeout>=1?s.retryTimeout:350,a.state={},a.queue=[],a.backend&&a.backend.init&&a.backend.init(o,s.backend,s),a}return Gn(r,[{key:"queueLoad",value:function(i,o,a,s){var l=this,u={},c={},f={},h={};return i.forEach(function(d){var m=!0;o.forEach(function(g){var p="".concat(d,"|").concat(g);!a.reload&&l.store.hasResourceBundle(d,g)?l.state[p]=2:l.state[p]<0||(l.state[p]===1?c[p]===void 0&&(c[p]=!0):(l.state[p]=1,m=!1,c[p]===void 0&&(c[p]=!0),u[p]===void 0&&(u[p]=!0),h[g]===void 0&&(h[g]=!0)))}),m||(f[d]=!0)}),(Object.keys(u).length||Object.keys(c).length)&&this.queue.push({pending:c,pendingCount:Object.keys(c).length,loaded:{},errors:[],callback:s}),{toLoad:Object.keys(u),pending:Object.keys(c),toLoadLanguages:Object.keys(f),toLoadNamespaces:Object.keys(h)}}},{key:"loaded",value:function(i,o,a){var s=i.split("|"),l=s[0],u=s[1];o&&this.emit("failedLoading",l,u,o),a&&this.store.addResourceBundle(l,u,a),this.state[i]=o?-1:2;var c={};this.queue.forEach(function(f){x1e(f.loaded,[l],u),$1e(f,i),o&&f.errors.push(o),f.pendingCount===0&&!f.done&&(Object.keys(f.loaded).forEach(function(h){c[h]||(c[h]={});var d=f.loaded[h];d.length&&d.forEach(function(m){c[h][m]===void 0&&(c[h][m]=!0)})}),f.done=!0,f.errors.length?f.callback(f.errors):f.callback())}),this.emit("loaded",c),this.queue=this.queue.filter(function(f){return!f.done})}},{key:"read",value:function(i,o,a){var s=this,l=arguments.length>3&&arguments[3]!==void 0?arguments[3]:0,u=arguments.length>4&&arguments[4]!==void 0?arguments[4]:this.retryTimeout,c=arguments.length>5?arguments[5]:void 0;if(!i.length)return c(null,{});if(this.readingCalls>=this.maxParallelReads){this.waitingReads.push({lng:i,ns:o,fcName:a,tried:l,wait:u,callback:c});return}this.readingCalls++;var f=function(g,p){if(s.readingCalls--,s.waitingReads.length>0){var v=s.waitingReads.shift();s.read(v.lng,v.ns,v.fcName,v.tried,v.wait,v.callback)}if(g&&p&&l<s.maxRetries){setTimeout(function(){s.read.call(s,i,o,a,l+1,u*2,c)},u);return}c(g,p)},h=this.backend[a].bind(this.backend);if(h.length===2){try{var d=h(i,o);d&&typeof d.then=="function"?d.then(function(m){return f(null,m)}).catch(f):f(null,d)}catch(m){f(m)}return}return h(i,o,f)}},{key:"prepareLoading",value:function(i,o){var a=this,s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},l=arguments.length>3?arguments[3]:void 0;if(!this.backend)return this.logger.warn("No backend was added via i18next.use. Will not load resources."),l&&l();typeof i=="string"&&(i=this.languageUtils.toResolveHierarchy(i)),typeof o=="string"&&(o=[o]);var u=this.queueLoad(i,o,s,l);if(!u.toLoad.length)return u.pending.length||l(),null;u.toLoad.forEach(function(c){a.loadOne(c)})}},{key:"load",value:function(i,o,a){this.prepareLoading(i,o,{},a)}},{key:"reload",value:function(i,o,a){this.prepareLoading(i,o,{reload:!0},a)}},{key:"loadOne",value:function(i){var o=this,a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"",s=i.split("|"),l=s[0],u=s[1];this.read(l,u,"read",void 0,void 0,function(c,f){c&&o.logger.warn("".concat(a,"loading namespace ").concat(u," for language ").concat(l," failed"),c),!c&&f&&o.logger.log("".concat(a,"loaded namespace ").concat(u," for language ").concat(l),f),o.loaded(i,c,f)})}},{key:"saveMissing",value:function(i,o,a,s,l){var u=arguments.length>5&&arguments[5]!==void 0?arguments[5]:{},c=arguments.length>6&&arguments[6]!==void 0?arguments[6]:function(){};if(this.services.utils&&this.services.utils.hasLoadedNamespace&&!this.services.utils.hasLoadedNamespace(o)){this.logger.warn('did not save key "'.concat(a,'" as the namespace "').concat(o,'" was not yet loaded'),"This means something IS WRONG in your setup. You access the t function before i18next.init / i18next.loadNamespace / i18next.changeLanguage was done. Wait for the callback or Promise to resolve before accessing it!!!");return}if(!(a==null||a==="")){if(this.backend&&this.backend.create){var f=dO(dO({},u),{},{isUpdate:l}),h=this.backend.create.bind(this.backend);if(h.length<6)try{var d;h.length===5?d=h(i,o,a,s,f):d=h(i,o,a,s),d&&typeof d.then=="function"?d.then(function(m){return c(null,m)}).catch(c):c(null,d)}catch(m){c(m)}else h(i,o,a,s,c,f)}!i||!i[0]||this.store.addResource(i[0],o,a,s)}}}]),r}(No);function pO(){return{debug:!1,initImmediate:!0,ns:["translation"],defaultNS:["translation"],fallbackLng:["dev"],fallbackNS:!1,supportedLngs:!1,nonExplicitSupportedLngs:!1,load:"all",preload:!1,simplifyPluralSuffix:!0,keySeparator:".",nsSeparator:":",pluralSeparator:"_",contextSeparator:"_",partialBundledLanguages:!1,saveMissing:!1,updateMissing:!1,saveMissingTo:"fallback",saveMissingPlurals:!0,missingKeyHandler:!1,missingInterpolationHandler:!1,postProcess:!1,postProcessPassResolved:!1,returnNull:!0,returnEmptyString:!0,returnObjects:!1,joinArrays:!1,returnedObjectHandler:!1,parseMissingKeyHandler:!1,appendNamespaceToMissingKey:!1,appendNamespaceToCIMode:!1,overloadTranslationOptionHandler:function(t){var r={};if(Zt(t[1])==="object"&&(r=t[1]),typeof t[1]=="string"&&(r.defaultValue=t[1]),typeof t[2]=="string"&&(r.tDescription=t[2]),Zt(t[2])==="object"||Zt(t[3])==="object"){var n=t[3]||t[2];Object.keys(n).forEach(function(i){r[i]=n[i]})}return r},interpolation:{escapeValue:!0,format:function(t,r,n,i){return t},prefix:"{{",suffix:"}}",formatSeparator:",",unescapePrefix:"-",nestingPrefix:"$t(",nestingSuffix:")",nestingOptionsSeparator:",",maxReplaces:1e3,skipOnVariables:!0}}}function mO(e){return typeof e.ns=="string"&&(e.ns=[e.ns]),typeof e.fallbackLng=="string"&&(e.fallbackLng=[e.fallbackLng]),typeof e.fallbackNS=="string"&&(e.fallbackNS=[e.fallbackNS]),e.supportedLngs&&e.supportedLngs.indexOf("cimode")<0&&(e.supportedLngs=e.supportedLngs.concat(["cimode"])),e}function vO(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function Wn(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?vO(Object(r),!0).forEach(function(n){en(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):vO(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function z1e(e){var t=V1e();return function(){var n=gi(e),i;if(t){var o=gi(this).constructor;i=Reflect.construct(n,arguments,o)}else i=n.apply(this,arguments);return af(this,i)}}function V1e(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function ih(){}function H1e(e){var t=Object.getOwnPropertyNames(Object.getPrototypeOf(e));t.forEach(function(r){typeof e[r]=="function"&&(e[r]=e[r].bind(e))})}var zd=function(e){Cm(r,e);var t=z1e(r);function r(){var n,i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},o=arguments.length>1?arguments[1]:void 0;if($n(this,r),n=t.call(this),Pm&&No.call(To(n)),n.options=mO(i),n.services={},n.logger=oi,n.modules={external:[]},H1e(To(n)),o&&!n.isInitialized&&!i.isClone){if(!n.options.initImmediate)return n.init(i,o),af(n,To(n));setTimeout(function(){n.init(i,o)},0)}return n}return Gn(r,[{key:"init",value:function(){var i=this,o=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},a=arguments.length>1?arguments[1]:void 0;typeof o=="function"&&(a=o,o={}),!o.defaultNS&&o.defaultNS!==!1&&o.ns&&(typeof o.ns=="string"?o.defaultNS=o.ns:o.ns.indexOf("translation")<0&&(o.defaultNS=o.ns[0]));var s=pO();this.options=Wn(Wn(Wn({},s),this.options),mO(o)),this.options.compatibilityAPI!=="v1"&&(this.options.interpolation=Wn(Wn({},s.interpolation),this.options.interpolation)),o.keySeparator!==void 0&&(this.options.userDefinedKeySeparator=o.keySeparator),o.nsSeparator!==void 0&&(this.options.userDefinedNsSeparator=o.nsSeparator);function l(v){return v?typeof v=="function"?new v:v:null}if(!this.options.isClone){this.modules.logger?oi.init(l(this.modules.logger),this.options):oi.init(null,this.options);var u;this.modules.formatter?u=this.modules.formatter:typeof Intl<"u"&&(u=B1e);var c=new sO(this.options);this.store=new A1e(this.options.resources,this.options);var f=this.services;f.logger=oi,f.resourceStore=this.store,f.languageUtils=c,f.pluralResolver=new F1e(c,{prepend:this.options.pluralSeparator,compatibilityJSON:this.options.compatibilityJSON,simplifyPluralSuffix:this.options.simplifyPluralSuffix}),u&&(!this.options.interpolation.format||this.options.interpolation.format===s.interpolation.format)&&(f.formatter=l(u),f.formatter.init(f,this.options),this.options.interpolation.format=f.formatter.format.bind(f.formatter)),f.interpolator=new D1e(this.options),f.utils={hasLoadedNamespace:this.hasLoadedNamespace.bind(this)},f.backendConnector=new G1e(l(this.modules.backend),f.resourceStore,f,this.options),f.backendConnector.on("*",function(v){for(var y=arguments.length,_=new Array(y>1?y-1:0),x=1;x<y;x++)_[x-1]=arguments[x];i.emit.apply(i,[v].concat(_))}),this.modules.languageDetector&&(f.languageDetector=l(this.modules.languageDetector),f.languageDetector.init&&f.languageDetector.init(f,this.options.detection,this.options)),this.modules.i18nFormat&&(f.i18nFormat=l(this.modules.i18nFormat),f.i18nFormat.init&&f.i18nFormat.init(this)),this.translator=new aO(this.services,this.options),this.translator.on("*",function(v){for(var y=arguments.length,_=new Array(y>1?y-1:0),x=1;x<y;x++)_[x-1]=arguments[x];i.emit.apply(i,[v].concat(_))}),this.modules.external.forEach(function(v){v.init&&v.init(i)})}if(this.format=this.options.interpolation.format,a||(a=ih),this.options.fallbackLng&&!this.services.languageDetector&&!this.options.lng){var h=this.services.languageUtils.getFallbackCodes(this.options.fallbackLng);h.length>0&&h[0]!=="dev"&&(this.options.lng=h[0])}!this.services.languageDetector&&!this.options.lng&&this.logger.warn("init: no languageDetector is used and no lng is defined");var d=["getResource","hasResourceBundle","getResourceBundle","getDataByLanguage"];d.forEach(function(v){i[v]=function(){var y;return(y=i.store)[v].apply(y,arguments)}});var m=["addResource","addResources","addResourceBundle","removeResourceBundle"];m.forEach(function(v){i[v]=function(){var y;return(y=i.store)[v].apply(y,arguments),i}});var g=fu(),p=function(){var y=function(x,b){i.isInitialized&&!i.initializedStoreOnce&&i.logger.warn("init: i18next is already initialized. You should call init just once!"),i.isInitialized=!0,i.options.isClone||i.logger.log("initialized",i.options),i.emit("initialized",i.options),g.resolve(b),a(x,b)};if(i.languages&&i.options.compatibilityAPI!=="v1"&&!i.isInitialized)return y(null,i.t.bind(i));i.changeLanguage(i.options.lng,y)};return this.options.resources||!this.options.initImmediate?p():setTimeout(p,0),g}},{key:"loadResources",value:function(i){var o=this,a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:ih,s=a,l=typeof i=="string"?i:this.language;if(typeof i=="function"&&(s=i),!this.options.resources||this.options.partialBundledLanguages){if(l&&l.toLowerCase()==="cimode")return s();var u=[],c=function(d){if(d){var m=o.services.languageUtils.toResolveHierarchy(d);m.forEach(function(g){u.indexOf(g)<0&&u.push(g)})}};if(l)c(l);else{var f=this.services.languageUtils.getFallbackCodes(this.options.fallbackLng);f.forEach(function(h){return c(h)})}this.options.preload&&this.options.preload.forEach(function(h){return c(h)}),this.services.backendConnector.load(u,this.options.ns,function(h){!h&&!o.resolvedLanguage&&o.language&&o.setResolvedLanguage(o.language),s(h)})}else s(null)}},{key:"reloadResources",value:function(i,o,a){var s=fu();return i||(i=this.languages),o||(o=this.options.ns),a||(a=ih),this.services.backendConnector.reload(i,o,function(l){s.resolve(),a(l)}),s}},{key:"use",value:function(i){if(!i)throw new Error("You are passing an undefined module! Please check the object you are passing to i18next.use()");if(!i.type)throw new Error("You are passing a wrong module! Please check the object you are passing to i18next.use()");return i.type==="backend"&&(this.modules.backend=i),(i.type==="logger"||i.log&&i.warn&&i.error)&&(this.modules.logger=i),i.type==="languageDetector"&&(this.modules.languageDetector=i),i.type==="i18nFormat"&&(this.modules.i18nFormat=i),i.type==="postProcessor"&&GD.addPostProcessor(i),i.type==="formatter"&&(this.modules.formatter=i),i.type==="3rdParty"&&this.modules.external.push(i),this}},{key:"setResolvedLanguage",value:function(i){if(!(!i||!this.languages)&&!(["cimode","dev"].indexOf(i)>-1))for(var o=0;o<this.languages.length;o++){var a=this.languages[o];if(!(["cimode","dev"].indexOf(a)>-1)&&this.store.hasLanguageSomeTranslations(a)){this.resolvedLanguage=a;break}}}},{key:"changeLanguage",value:function(i,o){var a=this;this.isLanguageChangingTo=i;var s=fu();this.emit("languageChanging",i);var l=function(h){a.language=h,a.languages=a.services.languageUtils.toResolveHierarchy(h),a.resolvedLanguage=void 0,a.setResolvedLanguage(h)},u=function(h,d){d?(l(d),a.translator.changeLanguage(d),a.isLanguageChangingTo=void 0,a.emit("languageChanged",d),a.logger.log("languageChanged",d)):a.isLanguageChangingTo=void 0,s.resolve(function(){return a.t.apply(a,arguments)}),o&&o(h,function(){return a.t.apply(a,arguments)})},c=function(h){!i&&!h&&a.services.languageDetector&&(h=[]);var d=typeof h=="string"?h:a.services.languageUtils.getBestMatchFromCodes(h);d&&(a.language||l(d),a.translator.language||a.translator.changeLanguage(d),a.services.languageDetector&&a.services.languageDetector.cacheUserLanguage&&a.services.languageDetector.cacheUserLanguage(d)),a.loadResources(d,function(m){u(m,d)})};return!i&&this.services.languageDetector&&!this.services.languageDetector.async?c(this.services.languageDetector.detect()):!i&&this.services.languageDetector&&this.services.languageDetector.async?this.services.languageDetector.detect.length===0?this.services.languageDetector.detect().then(c):this.services.languageDetector.detect(c):c(i),s}},{key:"getFixedT",value:function(i,o,a){var s=this,l=function u(c,f){var h;if(Zt(f)!=="object"){for(var d=arguments.length,m=new Array(d>2?d-2:0),g=2;g<d;g++)m[g-2]=arguments[g];h=s.options.overloadTranslationOptionHandler([c,f].concat(m))}else h=Wn({},f);h.lng=h.lng||u.lng,h.lngs=h.lngs||u.lngs,h.ns=h.ns||u.ns,h.keyPrefix=h.keyPrefix||a||u.keyPrefix;var p=s.options.keySeparator||".",v;return h.keyPrefix&&Array.isArray(c)?v=c.map(function(y){return"".concat(h.keyPrefix).concat(p).concat(y)}):v=h.keyPrefix?"".concat(h.keyPrefix).concat(p).concat(c):c,s.t(v,h)};return typeof i=="string"?l.lng=i:l.lngs=i,l.ns=o,l.keyPrefix=a,l}},{key:"t",value:function(){var i;return this.translator&&(i=this.translator).translate.apply(i,arguments)}},{key:"exists",value:function(){var i;return this.translator&&(i=this.translator).exists.apply(i,arguments)}},{key:"setDefaultNamespace",value:function(i){this.options.defaultNS=i}},{key:"hasLoadedNamespace",value:function(i){var o=this,a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(!this.isInitialized)return this.logger.warn("hasLoadedNamespace: i18next was not initialized",this.languages),!1;if(!this.languages||!this.languages.length)return this.logger.warn("hasLoadedNamespace: i18n.languages were undefined or empty",this.languages),!1;var s=a.lng||this.resolvedLanguage||this.languages[0],l=this.options?this.options.fallbackLng:!1,u=this.languages[this.languages.length-1];if(s.toLowerCase()==="cimode")return!0;var c=function(d,m){var g=o.services.backendConnector.state["".concat(d,"|").concat(m)];return g===-1||g===2};if(a.precheck){var f=a.precheck(this,c);if(f!==void 0)return f}return!!(this.hasResourceBundle(s,i)||!this.services.backendConnector.backend||this.options.resources&&!this.options.partialBundledLanguages||c(s,i)&&(!l||c(u,i)))}},{key:"loadNamespaces",value:function(i,o){var a=this,s=fu();return this.options.ns?(typeof i=="string"&&(i=[i]),i.forEach(function(l){a.options.ns.indexOf(l)<0&&a.options.ns.push(l)}),this.loadResources(function(l){s.resolve(),o&&o(l)}),s):(o&&o(),Promise.resolve())}},{key:"loadLanguages",value:function(i,o){var a=fu();typeof i=="string"&&(i=[i]);var s=this.options.preload||[],l=i.filter(function(u){return s.indexOf(u)<0});return l.length?(this.options.preload=s.concat(l),this.loadResources(function(u){a.resolve(),o&&o(u)}),a):(o&&o(),Promise.resolve())}},{key:"dir",value:function(i){if(i||(i=this.resolvedLanguage||(this.languages&&this.languages.length>0?this.languages[0]:this.language)),!i)return"rtl";var o=["ar","shu","sqr","ssh","xaa","yhd","yud","aao","abh","abv","acm","acq","acw","acx","acy","adf","ads","aeb","aec","afb","ajp","apc","apd","arb","arq","ars","ary","arz","auz","avl","ayh","ayl","ayn","ayp","bbz","pga","he","iw","ps","pbt","pbu","pst","prp","prd","ug","ur","ydd","yds","yih","ji","yi","hbo","men","xmn","fa","jpr","peo","pes","prs","dv","sam","ckb"],a=this.services&&this.services.languageUtils||new sO(pO());return o.indexOf(a.getLanguagePartFromCode(i))>-1||i.toLowerCase().indexOf("-arab")>1?"rtl":"ltr"}},{key:"cloneInstance",value:function(){var i=this,o=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:ih,s=Wn(Wn(Wn({},this.options),o),{isClone:!0}),l=new r(s);(o.debug!==void 0||o.prefix!==void 0)&&(l.logger=l.logger.clone(o));var u=["store","services","language"];return u.forEach(function(c){l[c]=i[c]}),l.services=Wn({},this.services),l.services.utils={hasLoadedNamespace:l.hasLoadedNamespace.bind(l)},l.translator=new aO(l.services,l.options),l.translator.on("*",function(c){for(var f=arguments.length,h=new Array(f>1?f-1:0),d=1;d<f;d++)h[d-1]=arguments[d];l.emit.apply(l,[c].concat(h))}),l.init(s,a),l.translator.options=l.options,l.translator.backendConnector.services.utils={hasLoadedNamespace:l.hasLoadedNamespace.bind(l)},l}},{key:"toJSON",value:function(){return{options:this.options,store:this.store,language:this.language,languages:this.languages,resolvedLanguage:this.resolvedLanguage}}}]),r}(No);en(zd,"createInstance",function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;return new zd(e,t)});var wr=zd.createInstance();wr.createInstance=zd.createInstance;wr.createInstance;wr.dir;wr.init;wr.loadResources;wr.reloadResources;wr.use;wr.changeLanguage;wr.getFixedT;wr.t;wr.exists;wr.setDefaultNamespace;wr.hasLoadedNamespace;wr.loadNamespaces;wr.loadLanguages;wr.use(Cge).init({resources:eH||{},lng:$a[tH]||"zhCn",fallbackLng:"zhCn",interpolation:{escapeValue:!1}}).then(()=>console.log("WebGAL i18n Ready!"));di.render(w.jsx(Z.StrictMode,{children:w.jsx(Ige,{children:w.jsx(CF,{store:N,children:w.jsx(p1e,{})})})}),document.getElementById("root"));export{_r as C,ji as S,pe as T,C as W,Md as a,K1e as r};
